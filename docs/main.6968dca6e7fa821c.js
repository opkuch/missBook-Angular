"use strict";(self.webpackChunkbooks_app=self.webpackChunkbooks_app||[]).push([[179],{2011:(lt,Se,R)=>{R.d(Se,{Dh:()=>pe,GT:()=>fe,cc:()=>xe,hO:()=>Ve,on:()=>H,pX:()=>se,xv:()=>me});var d=R(4650),ee=R(127),k=R(5813);lt=R.hmd(lt);const ae=["ngOnDestroy"],se=(ge,Ke,st,Ae={})=>new Proxy(ge,{get:(ve,Ce)=>st.runOutsideAngular(()=>{var Be;if(ge[Ce])return!(null===(Be=Ae?.spy)||void 0===Be)&&Be.get&&Ae.spy.get(Ce,ge[Ce]),ge[Ce];if(ae.indexOf(Ce)>-1)return()=>{};const je=Ke.toPromise().then(B=>{const ye=B&&B[Ce];return"function"==typeof ye?ye.bind(B):ye&&ye.then?ye.then(Y=>st.run(()=>Y)):st.run(()=>ye)});return new Proxy(()=>{},{get:(B,ye)=>je[ye],apply:(B,ye,Y)=>je.then(X=>{var oe;const ne=X&&X(...Y);return!(null===(oe=Ae?.spy)||void 0===oe)&&oe.apply&&Ae.spy.apply(Ce,Y,ne),ne})})})}),fe=(ge,Ke)=>{Ke.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Ae=>{Object.defineProperty(ge.prototype,Ae,Object.getOwnPropertyDescriptor(st.prototype||st,Ae))})})};class ue{constructor(Ke){return Ke}}const pe=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function H(ge,Ke,st){const ve="object"==typeof st&&st||{};ve.name=ve.name||"string"==typeof st&&st||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ke.runOutsideAngular(()=>ee.Z.initializeApp(ge,ve));try{JSON.stringify(ge)!==JSON.stringify(Be.options)&&G("error",`${Be.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const G=(ge,...Ke)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ge](...Ke)},Q={provide:ue,useFactory:H,deps:[pe,d.R0b,[new d.FiY,me]]};let Ve=(()=>{class ge{constructor(st){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,st.toString())}static initializeApp(st,Ae){return{ngModule:ge,providers:[{provide:pe,useValue:st},{provide:me,useValue:Ae}]}}}return ge.\u0275fac=function(st){return new(st||ge)(d.LFG(d.Lbi))},ge.\u0275mod=d.oAB({type:ge}),ge.\u0275inj=d.cJS({providers:[Q]}),ge})();function xe(ge,Ke,st,Ae,ve){const[,Ce,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===ge)||[];if(Ce)return function we(ge,Ke){try{return ge.toString()===Ke.toString()}catch{return ge===Ke}}(ve,Be)||(_e("error",`${Ke} was already initialized on the ${st} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ve,was:Be})),Ce;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ge,je,ve]),je}}const et=!!lt.hot,_e=(ge,...Ke)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ge](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Se,R)=>{R.d(Se,{q4:()=>ni,iC:()=>ps,HU:()=>ta,vb:()=>go,JM:()=>ea});var d=R(4650),ee=R(5867),k=R(5861),ae=R(9681),se=R(2090),fe=R(4859),ue=R(1877),pe=R(8766);const me="@firebase/installations",H="0.5.12",Q=`w:${H}`,Ve="FIS_v2",Ke=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:X(I.expiresIn),creationTime:Date.now()}}function Ce(I,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*(I,D){const L=(yield D.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function B(I,{refreshToken:D}){const x=je(I);return x.append("Authorization",function oe(I){return`${Ve} ${I}`}(D)),x}function ye(I){return Y.apply(this,arguments)}function Y(){return(Y=(0,k.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function X(I){return Number(I.replace("s","000"))}function ne(I,D){return Re.apply(this,arguments)}function Re(){return(Re=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const L=Ae(I),J=je(I),le=D.getImmediate({optional:!0});if(le){const Et=yield le.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const He={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:Ve,appId:I.appId,sdkVersion:Q})},ft=yield ye(()=>fetch(L,He));if(ft.ok){const Et=yield ft.json();return{fid:Et.fid||x,registrationStatus:2,refreshToken:Et.refreshToken,authToken:ve(Et.authToken)}}throw yield Ce("Create Installation",ft)})).apply(this,arguments)}function ke(I){return new Promise(D=>{setTimeout(D,I)})}const qt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function un(I){return function ht(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return qt.test(x)?x:""}catch{return""}}function Fn(I){return`${I.appName}!${I.appId}`}const Yt=new Map;function Qt(I,D){const x=Fn(I);an(x,D),function Ca(I,D){const x=function Tr(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=I=>{an(I.data.key,I.data.fid)}),Wr}();x&&x.postMessage({key:I,fid:D}),function Zr(){0===Yt.size&&Wr&&(Wr.close(),Wr=null)}()}(x,D)}function an(I,D){const x=Yt.get(I);if(x)for(const L of x)L(D)}let Wr=null;const Kr="firebase-installations-store";let Ei=null;function Vo(){return Ei||(Ei=(0,pe.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Kr)}})),Ei}function Ze(I,D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,k.Z)(function*(I,D){const x=Fn(I),J=(yield Vo()).transaction(Kr,"readwrite"),le=J.objectStore(Kr),Te=yield le.get(x);return yield le.put(D,x),yield J.done,(!Te||Te.fid!==D.fid)&&Qt(I,D.fid),D})).apply(this,arguments)}function ns(I){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,k.Z)(function*(I){const D=Fn(I),L=(yield Vo()).transaction(Kr,"readwrite");yield L.objectStore(Kr).delete(D),yield L.done})).apply(this,arguments)}function bi(I,D){return hi.apply(this,arguments)}function hi(){return(hi=(0,k.Z)(function*(I,D){const x=Fn(I),J=(yield Vo()).transaction(Kr,"readwrite"),le=J.objectStore(Kr),Te=yield le.get(x),He=D(Te);return void 0===He?yield le.delete(x):yield le.put(He,x),yield J.done,He&&(!Te||Te.fid!==He.fid)&&Qt(I,He.fid),He})).apply(this,arguments)}function Vn(I){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,k.Z)(function*(I){let D;const x=yield bi(I.appConfig,L=>{const J=gn(L),le=gt(I,J);return D=le.registrationPromise,le.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function gn(I){return It(I||{fid:ze(),registrationStatus:0})}function gt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ke.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function ut(I,D){return ln.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:dr(I)}:{installationEntry:D}}function ln(){return(ln=(0,k.Z)(function*(I,D){try{const x=yield ne(I,D);return Ze(I.appConfig,x)}catch(x){throw st(x)&&409===x.customData.serverCode?yield ns(I.appConfig):yield Ze(I.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function dr(I){return hr.apply(this,arguments)}function hr(){return(hr=(0,k.Z)(function*(I){let D=yield Rr(I.appConfig);for(;1===D.registrationStatus;)yield ke(100),D=yield Rr(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield Vn(I);return L||x}return D})).apply(this,arguments)}function Rr(I){return bi(I,D=>{if(!D)throw Ke.create("installation-not-found");return It(D)})}function It(I){return function rs(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Jt(I,D){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const L=Kt(I,x),J=B(I,x),le=D.getImmediate({optional:!0});if(le){const Et=yield le.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const He={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:I.appId}})},ft=yield ye(()=>fetch(L,He));if(ft.ok)return ve(yield ft.json());throw yield Ce("Generate Auth Token",ft)})).apply(this,arguments)}function Kt(I,{fid:D}){return`${Ae(I)}/${D}/authTokens:generate`}function K(I){return $.apply(this,arguments)}function $(){return($=(0,k.Z)(function*(I,D=!1){let x;const L=yield bi(I.appConfig,le=>{if(!at(le))throw Ke.create("not-registered");const Te=le.authToken;if(!D&&fn(Te))return le;if(1===Te.requestStatus)return x=U(I,D),le;{if(!navigator.onLine)throw Ke.create("app-offline");const He=er(le);return x=Ie(I,He),He}});return x?yield x:L.authToken})).apply(this,arguments)}function U(I,D){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(I,D){let x=yield W(I.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield W(I.appConfig);const L=x.authToken;return 0===L.requestStatus?K(I,D):L})).apply(this,arguments)}function W(I){return bi(I,D=>{if(!at(D))throw Ke.create("not-registered");return function Vt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ie(I,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(I,D){try{const x=yield Jt(I,D),L=Object.assign(Object.assign({},D),{authToken:x});return yield Ze(I.appConfig,L),x}catch(x){if(!st(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ze(I.appConfig,L)}else yield ns(I.appConfig);throw x}})).apply(this,arguments)}function at(I){return void 0!==I&&2===I.registrationStatus}function fn(I){return 2===I.requestStatus&&!function Xt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function er(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function wn(){return(wn=(0,k.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:L}=yield Vn(D);return L?L.catch(console.error):K(D).catch(console.error),x.fid})).apply(this,arguments)}function Ui(){return(Ui=(0,k.Z)(function*(I,D=!1){const x=I;return yield Fr(x),(yield K(x,D)).token})).apply(this,arguments)}function Fr(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,k.Z)(function*(I){const{registrationPromise:D}=yield Vn(I);D&&(yield D)})).apply(this,arguments)}function Ds(I){return Ke.create("missing-app-config-values",{valueName:I})}const Qs="installations",bn=I=>{const D=I.getProvider("app").getImmediate(),x=function En(I){if(!I||!I.options)throw Ds("App Configuration");if(!I.name)throw Ds("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw Ds(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Js=I=>{const D=I.getProvider("app").getImmediate(),x=(0,ae._getProvider)(D,Qs).getImmediate();return{getId:()=>function kt(I){return wn.apply(this,arguments)}(x),getToken:J=>function zn(I){return Ui.apply(this,arguments)}(x,J)}};(function Wl(){(0,ae._registerComponent)(new fe.wA(Qs,bn,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",Js,"PRIVATE"))})(),(0,ae.registerVersion)(me,H),(0,ae.registerVersion)(me,H,"esm2017");const Bi="@firebase/remote-config",Zn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ff{constructor(D,x,L,J){this.client=D,this.storage=x,this.storageCache=L,this.logger=J}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,J=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var x=this;return(0,k.Z)(function*(){const[L,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(D.cacheMaxAgeMillis,L))return J;D.eTag=J&&J.eTag;const le=yield x.client.fetch(D),Te=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Te.push(x.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Te),le})()}}function Jl(I=navigator){return I.languages&&I.languages[0]||I.language}class Xl{constructor(D,x,L,J,le,Te){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=L,this.projectId=J,this.apiKey=le,this.appId=Te}fetch(D){var x=this;return(0,k.Z)(function*(){var L,J,le;const[Te,He]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:Te,app_instance_id_token:He,app_id:x.appId,language_code:Jl()},yn={method:"POST",headers:Ot,body:JSON.stringify(dt)},mr=fetch(Et,yn),ra=new Promise((ia,sa)=>{D.signal.addEventListener(()=>{const qf=new Error("The operation was aborted.");qf.name="AbortError",sa(qf)})});let Us;try{yield Promise.race([mr,ra]),Us=yield mr}catch(ia){let sa="fetch-client-network";throw"AbortError"===(null===(L=ia)||void 0===L?void 0:L.name)&&(sa="fetch-timeout"),Zn.create(sa,{originalErrorMessage:null===(J=ia)||void 0===J?void 0:J.message})}let yo=Us.status;const Za=Us.headers.get("ETag")||void 0;let _o,vo;if(200===Us.status){let ia;try{ia=yield Us.json()}catch(sa){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(le=sa)||void 0===le?void 0:le.message})}_o=ia.entries,vo=ia.state}if("INSTANCE_STATE_UNSPECIFIED"===vo?yo=500:"NO_CHANGE"===vo?yo=304:("NO_TEMPLATE"===vo||"EMPTY_CONFIG"===vo)&&(_o={}),304!==yo&&200!==yo)throw Zn.create("fetch-status",{httpStatus:yo});return{status:yo,eTag:Za,config:_o}})()}}class fg{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:L}){var J=this;return(0,k.Z)(function*(){yield function nr(I,D){return new Promise((x,L)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(x,J);I.addEventListener(()=>{clearTimeout(le),L(Zn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const le=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function Ld(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const Te={throttleEndTimeMillis:Date.now()+(0,se.$s)(L),backoffCount:L+1};return yield J.storage.setThrottleMetadata(Te),J.attemptFetch(D,Te)}})()}}class Du{constructor(D,x,L,J,le){this.app=D,this._client=x,this._storageCache=L,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ec(I,D){var x;const L=I.target.error||void 0;return Zn.create(D,{originalErrorMessage:L&&(null===(x=L)||void 0===x?void 0:x.message)})}const xs="app_namespace_store";class yg{constructor(D,x,L,J=function mg(){return new Promise((I,D)=>{var x;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=J=>{D(ec(J,"storage-open"))},L.onsuccess=J=>{I(J.target.result)},L.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(xs,{keyPath:"compositeKey"})}}catch(L){D(Zn.create("storage-open",{originalErrorMessage:null===(x=L)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=L,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((J,le)=>{var Te;const ft=L.transaction([xs],"readonly").objectStore(xs),Et=x.createCompositeKey(D);try{const Ot=ft.get(Et);Ot.onerror=dt=>{le(ec(dt,"storage-get"))},Ot.onsuccess=dt=>{const yn=dt.target.result;J(yn?yn.value:void 0)}}catch(Ot){le(Zn.create("storage-get",{originalErrorMessage:null===(Te=Ot)||void 0===Te?void 0:Te.message}))}})})()}set(D,x){var L=this;return(0,k.Z)(function*(){const J=yield L.openDbPromise;return new Promise((le,Te)=>{var He;const Et=J.transaction([xs],"readwrite").objectStore(xs),Ot=L.createCompositeKey(D);try{const dt=Et.put({compositeKey:Ot,value:x});dt.onerror=yn=>{Te(ec(yn,"storage-set"))},dt.onsuccess=()=>{le()}}catch(dt){Te(Zn.create("storage-set",{originalErrorMessage:null===(He=dt)||void 0===He?void 0:He.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((J,le)=>{var Te;const ft=L.transaction([xs],"readwrite").objectStore(xs),Et=x.createCompositeKey(D);try{const Ot=ft.delete(Et);Ot.onerror=dt=>{le(ec(dt,"storage-delete"))},Ot.onsuccess=()=>{J()}}catch(Ot){le(Zn.create("storage-delete",{originalErrorMessage:null===(Te=Ot)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Ud{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),le=yield x;le&&(D.lastFetchStatus=le);const Te=yield L;Te&&(D.lastSuccessfulFetchTimestampMillis=Te);const He=yield J;He&&(D.activeConfig=He)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Tu(){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Os(){(0,ae._registerComponent)(new fe.wA("remote-config",function I(D,{instanceIdentifier:x}){const L=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,se.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:le,apiKey:Te,appId:He}=L.options;if(!le)throw Zn.create("registration-project-id");if(!Te)throw Zn.create("registration-api-key");if(!He)throw Zn.create("registration-app-id");const ft=new yg(He,L.name,x=x||"firebase"),Et=new Ud(ft),Ot=new ue.Yd(Bi);Ot.logLevel=ue.in.ERROR;const dt=new Xl(J,ae.SDK_VERSION,x,le,Te,He),yn=new fg(dt,ft),mr=new Ff(yn,ft,Et,Ot),ra=new Du(L,mr,Et,ft,Ot);return function Cn(I){const D=(0,se.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ra),ra},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Bi,"0.3.11"),(0,ae.registerVersion)(Bi,"0.3.11","esm2017")}();const ji="/firebase-messaging-sw.js",ss="/firebase-cloud-messaging-push-scope",os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sa="google.c.a.c_id",Su="google.c.a.c_l",tc="google.c.a.ts",Vf="google.c.a.e";var as=(()=>{return(I=as||(as={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",as;var I})();function pi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qr(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),J=new Uint8Array(L.length);for(let le=0;le<L.length;++le)J[le]=L.charCodeAt(le);return J}const Bo="fcm_token_details_db",wr="fcm_token_object_Store";function Uf(I){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Bo))return null;let D=null;return(yield(0,pe.X3)(Bo,5,{upgrade:(L=(0,k.Z)(function*(J,le,Te,He){var ft;if(le<2||!J.objectStoreNames.contains(wr))return;const Et=He.objectStore(wr),Ot=yield Et.index("fcmSenderId").get(I);if(yield Et.clear(),Ot)if(2===le){const dt=Ot;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;D={token:dt.fcmToken,createTime:null!==(ft=dt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:pi(dt.vapidKey)}}}else if(3===le){const dt=Ot;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:pi(dt.auth),p256dh:pi(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:pi(dt.vapidKey)}}}else if(4===le){const dt=Ot;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:pi(dt.auth),p256dh:pi(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:pi(dt.vapidKey)}}}}),function(le,Te,He,ft){return L.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Bo),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),xn(D)?D:null;var L}),Bf.apply(this,arguments)}function xn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const gi="firebase-messaging-store";let Vr=null;function Mu(){return Vr||(Vr=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(gi)}})),Vr}function to(I){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(I){const D=Ti(I),L=yield(yield Mu()).transaction(gi).objectStore(gi).get(D);if(L)return L;{const J=yield Uf(I.appConfig.senderId);if(J)return yield $t(I,J),J}})).apply(this,arguments)}function $t(I,D){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,k.Z)(function*(I,D){const x=Ti(I),J=(yield Mu()).transaction(gi,"readwrite");return yield J.objectStore(gi).put(D,x),yield J.done,D})).apply(this,arguments)}function no(I){return xu.apply(this,arguments)}function xu(){return(xu=(0,k.Z)(function*(I){const D=Ti(I),L=(yield Mu()).transaction(gi,"readwrite");yield L.objectStore(gi).delete(D),yield L.done})).apply(this,arguments)}function Ti({appConfig:I}){return I.appId}const Dn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dt(I,D){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(I,D){var x;const L=yield rc(I),J=De(D),le={method:"POST",headers:L,body:JSON.stringify(J)};let Te;try{Te=yield(yield fetch(ls(I.appConfig),le)).json()}catch(He){throw Dn.create("token-subscribe-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(Te.error)throw Dn.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw Dn.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function Hf(I,D){return ku.apply(this,arguments)}function ku(){return(ku=(0,k.Z)(function*(I,D){var x;const L=yield rc(I),J=De(D.subscriptionOptions),le={method:"PATCH",headers:L,body:JSON.stringify(J)};let Te;try{Te=yield(yield fetch(`${ls(I.appConfig)}/${D.token}`,le)).json()}catch(He){throw Dn.create("token-update-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(Te.error)throw Dn.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw Dn.create("token-update-no-token");return Te.token})).apply(this,arguments)}function Pu(I,D){return nc.apply(this,arguments)}function nc(){return(nc=(0,k.Z)(function*(I,D){var x;const J={method:"DELETE",headers:yield rc(I)};try{const Te=yield(yield fetch(`${ls(I.appConfig)}/${D}`,J)).json();if(Te.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(le){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(x=le)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function ls({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function rc(I){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:I,auth:D,endpoint:x,vapidKey:L}){const J={web:{endpoint:x,auth:D,p256dh:I}};return L!==os&&(J.web.applicationPubKey=L),J}const Ut=6048e5;function Ru(I){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(I){const D=yield ic(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:pi(D.getKey("auth")),p256dh:pi(D.getKey("p256dh"))},L=yield to(I.firebaseDependencies);if(L){if($d(L.subscriptionOptions,x))return Date.now()>=L.createTime+Ut?jo(I,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield Pu(I.firebaseDependencies,L.token)}catch(J){console.warn(J)}return xa(I.firebaseDependencies,x)}return xa(I.firebaseDependencies,x)})).apply(this,arguments)}function On(I){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,k.Z)(function*(I){const D=yield to(I.firebaseDependencies);D&&(yield Pu(I.firebaseDependencies,D.token),yield no(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function jo(I,D){return mi.apply(this,arguments)}function mi(){return(mi=(0,k.Z)(function*(I,D){try{const x=yield Hf(I.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield $t(I.firebaseDependencies,L),x}catch(x){throw yield On(I),x}})).apply(this,arguments)}function xa(I,D){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,k.Z)(function*(I,D){const L={token:yield Dt(I,D),createTime:Date.now(),subscriptionOptions:D};return yield $t(I,L),L.token})).apply(this,arguments)}function ic(I,D){return sc.apply(this,arguments)}function sc(){return(sc=(0,k.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qr(D)})})).apply(this,arguments)}function $d(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function ro(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Nn(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const L=D.notification.body;L&&(I.notification.body=L);const J=D.notification.image;J&&(I.notification.image=J)}(D,I),function Hi(I,D){!D.data||(I.data=D.data)}(D,I),function oc(I,D){var x,L,J,le,Te;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const He=null!==(J=null===(L=D.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==J?J:null===(le=D.notification)||void 0===le?void 0:le.click_action;He&&(I.fcmOptions.link=He);const ft=null===(Te=D.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ft&&(I.fcmOptions.analyticsLabel=ft)}(D,I),D}function io(I){return"object"==typeof I&&!!I&&Sa in I}function cs(I,D){const x=[];for(let L=0;L<I.length;L++)x.push(I.charAt(L)),L<D.length&&x.push(D.charAt(L));return x.join("")}function Na(I){return Dn.create("missing-app-config-values",{valueName:I})}cs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vg{constructor(D,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function _g(I){if(!I||!I.options)throw Na("App Configuration Object");if(!I.name)throw Na("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const L of D)if(!x[L])throw Na(L);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ac(I){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(ji,{scope:ss}),I.swRegistration.update().catch(()=>{})}catch(x){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function ka(I,D){return uc.apply(this,arguments)}function uc(){return(uc=(0,k.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ac(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Pa(I,D){return lc.apply(this,arguments)}function lc(){return(lc=(0,k.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=os)})).apply(this,arguments)}function Bu(){return(Bu=(0,k.Z)(function*(I,D){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Pa(I,D?.vapidKey),yield ka(I,D?.serviceWorkerRegistration),Ru(I)})).apply(this,arguments)}function cc(I,D,x){return dc.apply(this,arguments)}function dc(){return(dc=(0,k.Z)(function*(I,D,x){const L=hc(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[Sa],message_name:x[Su],message_time:x[tc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hc(I){switch(I){case as.NOTIFICATION_CLICKED:return"notification_open";case as.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function so(){return(so=(0,k.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===as.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ro(x)):I.onMessageHandler.next(ro(x)));const L=x.data;io(L)&&"1"===L[Vf]&&(yield cc(I,x.messageType,L))})).apply(this,arguments)}const oo="@firebase/messaging",rr=I=>{const D=new vg(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Gd(I,D){return so.apply(this,arguments)}(D,x)),D},Jr=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:L=>function Uu(I,D){return Bu.apply(this,arguments)}(D,L)}};function fc(){return pc.apply(this,arguments)}function pc(){return(pc=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mn(){(0,ae._registerComponent)(new fe.wA("messaging",rr,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Jr,"PRIVATE")),(0,ae.registerVersion)(oo,"0.9.16"),(0,ae.registerVersion)(oo,"0.9.16","esm2017")}();const Go="analytics",Zd="firebase_id",ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$u="https://www.googletagmanager.com/gtag/js",kn=new ue.Yd("@firebase/analytics");function Gu(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function zu(I,D){const x=document.createElement("script");x.src=`${$u}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function $f(I,D,x,L,J,le){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(I,D,x,L,J,le){const Te=L[J];try{if(Te)yield D[Te];else{const ft=(yield Gu(x)).find(Et=>Et.measurementId===J);ft&&(yield D[ft.appId])}}catch(He){kn.error(He)}I("config",J,le)})).apply(this,arguments)}function zo(I,D,x,L,J){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(I,D,x,L,J){try{let le=[];if(J&&J.send_to){let Te=J.send_to;Array.isArray(Te)||(Te=[Te]);const He=yield Gu(x);for(const ft of Te){const Et=He.find(dt=>dt.measurementId===ft),Ot=Et&&D[Et.appId];if(!Ot){le=[];break}le.push(Ot)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),I("event",L,J||{})}catch(le){kn.error(le)}})).apply(this,arguments)}function Yd(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes($u))return D;return null}const pr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Va=new class $i{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Jd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ua(I){return yc.apply(this,arguments)}function yc(){return(yc=(0,k.Z)(function*(I){var D;const{appId:x,apiKey:L}=I,J={method:"GET",headers:Jd(L)},le=ao.replace("{app-id}",x),Te=yield fetch(le,J);if(200!==Te.status&&304!==Te.status){let He="";try{const ft=yield Te.json();null!==(D=ft.error)&&void 0!==D&&D.message&&(He=ft.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:He})}return Te.json()})).apply(this,arguments)}function Un(I){return Si.apply(this,arguments)}function Si(){return(Si=(0,k.Z)(function*(I,D=Va,x){const{appId:L,apiKey:J,measurementId:le}=I.options;if(!L)throw pr.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:L};throw pr.create("no-api-key")}const Te=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Ku;return setTimeout((0,k.Z)(function*(){He.abort()}),void 0!==x?x:6e4),Wu({appId:L,apiKey:J,measurementId:le},Te,He,D)})).apply(this,arguments)}function Wu(I,D,x){return co.apply(this,arguments)}function co(){return(co=(0,k.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},L,J=Va){var le,Te;const{appId:He,measurementId:ft}=I;try{yield Ba(L,D)}catch(Et){if(ft)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${null===(le=Et)||void 0===le?void 0:le.message}]`),{appId:He,measurementId:ft};throw Et}try{const Et=yield Ua(I);return J.deleteThrottleMetadata(He),Et}catch(Et){const Ot=Et;if(!Zu(Ot)){if(J.deleteThrottleMetadata(He),ft)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:He,measurementId:ft};throw Et}const dt=503===Number(null===(Te=Ot?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,se.$s)(x,J.intervalMillis,30):(0,se.$s)(x,J.intervalMillis),yn={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return J.setThrottleMetadata(He,yn),kn.debug(`Calling attemptFetch again in ${dt} millis`),Wu(I,yn,L,J)}})).apply(this,arguments)}function Ba(I,D){return new Promise((x,L)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(x,J);I.addEventListener(()=>{clearTimeout(le),L(pr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Zu(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ku{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ps,Ha;function Rs(){return(Rs=(0,k.Z)(function*(I,D,x,L,J){if(J&&J.global)I("event",x,L);else{const le=yield D;I("event",x,Object.assign(Object.assign({},L),{send_to:le}))}})).apply(this,arguments)}function fo(I){Ha=I}function vc(I){Ps=I}function hs(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(){var I;if(!(0,se.hl)())return kn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return kn.warn(pr.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(I,D,x,L,J,le,Te){var He;const ft=Un(I);ft.then(mr=>{x[mr.measurementId]=mr.appId,I.options.measurementId&&mr.measurementId!==I.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>kn.error(mr)),D.push(ft);const Et=hs().then(mr=>{if(mr)return L.getId()}),[Ot,dt]=yield Promise.all([ft,Et]);Yd()||zu(le,Ot.measurementId),Ha&&(J("consent","default",Ha),fo(void 0)),J("js",new Date);const yn=null!==(He=Te?.config)&&void 0!==He?He:{};return yn.origin="firebase",yn.update=!0,null!=dt&&(yn[Zd]=dt),J("config",Ot.measurementId,yn),Ps&&(J("set",Ps),vc(void 0)),Ot.measurementId})).apply(this,arguments)}class Xu{constructor(D){this.app=D}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},Fs=[];const Ko={};let Qo,po,Yo="dataLayer",$a=!1;function Yy(I,D,x){!function wg(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((L,J)=>`(${J+1}) ${L}`).join(" "),x=pr.create("invalid-analytics-context",{errorInfo:D});kn.warn(x.message)}}();const L=I.options.appId;if(!L)throw pr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw pr.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[L])throw pr.create("already-exists",{id:L});if(!$a){!function Kd(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Yo);const{wrappedGtag:le,gtagCore:Te}=function Ra(I,D,x,L,J){let le=function(...Te){window[L].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function qu(I,D,x,L){function le(){return(le=(0,k.Z)(function*(Te,He,ft){try{"event"===Te?yield zo(I,D,x,He,ft):"config"===Te?yield $f(I,D,x,L,He,ft):"consent"===Te?I("consent","update",ft):I("set",He)}catch(Et){kn.error(Et)}})).apply(this,arguments)}return function J(Te,He,ft){return le.apply(this,arguments)}}(le,I,D,x),{gtagCore:le,wrappedGtag:window[J]}}(Xr,Fs,Ko,Yo,"gtag");po=le,Qo=Te,$a=!0}return Xr[L]=function Wo(I,D,x,L,J,le,Te){return Zo.apply(this,arguments)}(I,Fs,Ko,D,Qo,Yo,x),new Xu(I)}function Jy(){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Je="@firebase/analytics";!function cn(){(0,ae._registerComponent)(new fe.wA(Go,(D,{options:x})=>Yy(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function I(D){try{const x=D.getProvider(Go).getImmediate();return{logEvent:(L,J,le)=>function Ls(I,D,x,L){I=(0,se.m9)(I),function Xd(I,D,x,L,J){return Rs.apply(this,arguments)}(po,Xr[I.app.options.appId],D,x,L).catch(J=>kn.error(J))}(x,L,J,le)}}catch(x){throw pr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(Je,"0.8.0"),(0,ae.registerVersion)(Je,"0.8.0","esm2017")}();var ti=R(4408),Bn=R(7565);const Ar=new class In extends Bn.v{}(class fs extends ti.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(D,x,L):D.flush(this)}});var tl=R(4986),za=R(8505),Ur=R(9468),wc=R(5363);const ni=new d.GfV("7.4.1"),qa="__angularfire_symbol__analyticsIsSupportedValue",Vs="__angularfire_symbol__analyticsIsSupported",nl="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",Xo="__angularfire_symbol__messagingIsSupportedValue",Gi="__angularfire_symbol__messagingIsSupported";function ea(I,D,x){if(D){if(1===D.length)return D[0];const le=D.filter(Te=>Te.app===x);if(1===le.length)return le[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[Vs]||(globalThis[Vs]=Jy().then(I=>globalThis[qa]=I).catch(()=>globalThis[qa]=!1)),globalThis[Gi]||(globalThis[Gi]=fc().then(I=>globalThis[Xo]=I).catch(()=>globalThis[Xo]=!1)),globalThis[Jo]||(globalThis[Jo]=Tu().then(I=>globalThis[nl]=I).catch(()=>globalThis[nl]=!1));const go=(I,D)=>{const x=D?[D]:(0,ee.C6)(),L=[];return x.forEach(J=>{J.container.getProvider(I).instances.forEach(Te=>{L.includes(Te)||L.push(Te)})}),L};function Wa(){}class Br{constructor(D,x=Ar){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,L){const J=this.zone;return this.delegate.schedule(function(Te){J.runGuarded(()=>{D.apply(this,[Te])})},x,L)}}class Tn{constructor(D){this.zone=D,this.task=null}call(D,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),x.pipe((0,za.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ta=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Br(Zone.current)),this.insideAngular=x.run(()=>new Br(Zone.current,tl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ai(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function ps(I){return Ai(),function bc(I){return function(x){return(x=x.lift(new Tn(I.ngZone))).pipe((0,Ur.R)(I.outsideAngular),(0,wc.Q)(I.insideAngular))}}(Ai())(I)}},2090:(lt,Se,R)=>{R.d(Se,{$s:()=>rs,BH:()=>Ve,G6:()=>je,L:()=>pe,LL:()=>Re,Mn:()=>Ce,Sg:()=>xe,UG:()=>_e,US:()=>fe,ZB:()=>G,ZR:()=>ne,b$:()=>st,d:()=>Ae,eu:()=>ye,hl:()=>B,jU:()=>ge,m9:()=>Kt,ne:()=>Vo,pd:()=>Kr,r3:()=>Pr,ru:()=>Ke,tV:()=>me,uI:()=>et,vZ:()=>Wr,w1:()=>ve,xO:()=>Is,xb:()=>an,z$:()=>we,zI:()=>Y,zd:()=>Vi});const ae=function(K){const $=[];let U=0;for(let z=0;z<K.length;z++){let W=K.charCodeAt(z);W<128?$[U++]=W:W<2048?($[U++]=W>>6|192,$[U++]=63&W|128):55296==(64512&W)&&z+1<K.length&&56320==(64512&K.charCodeAt(z+1))?(W=65536+((1023&W)<<10)+(1023&K.charCodeAt(++z)),$[U++]=W>>18|240,$[U++]=W>>12&63|128,$[U++]=W>>6&63|128,$[U++]=63&W|128):($[U++]=W>>12|224,$[U++]=W>>6&63|128,$[U++]=63&W|128)}return $},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,$){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let W=0;W<K.length;W+=3){const Ie=K[W],Ue=W+1<K.length,at=Ue?K[W+1]:0,fn=W+2<K.length,Xt=fn?K[W+2]:0;let kt=(15&at)<<2|Xt>>6,wn=63&Xt;fn||(wn=64,Ue||(kt=64)),z.push(U[Ie>>2],U[(3&Ie)<<4|at>>4],U[kt],U[wn])}return z.join("")},encodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(K):this.encodeByteArray(ae(K),$)},decodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(K):function(K){const $=[];let U=0,z=0;for(;U<K.length;){const W=K[U++];if(W<128)$[z++]=String.fromCharCode(W);else if(W>191&&W<224){const Ie=K[U++];$[z++]=String.fromCharCode((31&W)<<6|63&Ie)}else if(W>239&&W<365){const fn=((7&W)<<18|(63&K[U++])<<12|(63&K[U++])<<6|63&K[U++])-65536;$[z++]=String.fromCharCode(55296+(fn>>10)),$[z++]=String.fromCharCode(56320+(1023&fn))}else{const Ie=K[U++],Ue=K[U++];$[z++]=String.fromCharCode((15&W)<<12|(63&Ie)<<6|63&Ue)}}return $.join("")}(this.decodeStringToByteArray(K,$))},decodeStringToByteArray(K,$){this.init_();const U=$?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let W=0;W<K.length;){const Ie=U[K.charAt(W++)],at=W<K.length?U[K.charAt(W)]:0;++W;const Xt=W<K.length?U[K.charAt(W)]:64;++W;const Vt=W<K.length?U[K.charAt(W)]:64;if(++W,null==Ie||null==at||null==Xt||null==Vt)throw Error();z.push(Ie<<2|at>>4),64!==Xt&&(z.push(at<<4&240|Xt>>2),64!==Vt&&z.push(Xt<<6&192|Vt))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},pe=function(K){return function(K){const $=ae(K);return fe.encodeByteArray($,!0)}(K).replace(/\./g,"")},me=function(K){try{return fe.decodeString(K,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(K,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return $}for(const U in $)!$.hasOwnProperty(U)||!Q(U)||(K[U]=G(K[U],$[U]));return K}function Q(K){return"__proto__"!==K}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,U)=>{this.resolve=$,this.reject=U})}wrapCallback($){return(U,z)=>{U?this.reject(U):this.resolve(z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(U):$(U,z))}}}function xe(K,$){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=$||"demo-project",W=K.iat||0,Ie=K.sub||K.user_id;if(!Ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:W,exp:W+3600,auth_time:W,sub:Ie,user_id:Ie,firebase:{sign_in_provider:"custom",identities:{}}},K);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ue)),""].join(".")}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function et(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ge(){return"object"==typeof self&&self.self===self}function Ke(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return we().indexOf("Electron/")>=0}function ve(){const K=we();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ce(){return we().indexOf("MSAppHost/")>=0}function je(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function ye(){return new Promise((K,$)=>{try{let U=!0;const z="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(z);W.onsuccess=()=>{W.result.close(),U||self.indexedDB.deleteDatabase(z),K(!0)},W.onupgradeneeded=()=>{U=!1},W.onerror=()=>{var Ie;$((null===(Ie=W.error)||void 0===Ie?void 0:Ie.message)||"")}}catch(U){$(U)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor($,U,z){super(U),this.code=$,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor($,U,z){this.service=$,this.serviceName=U,this.errors=z}create($,...U){const z=U[0]||{},W=`${this.service}/${$}`,Ie=this.errors[$],Ue=Ie?function ke(K,$){return K.replace(ht,(U,z)=>{const W=$[z];return null!=W?String(W):`<${z}?>`})}(Ie,z):"Error";return new ne(W,`${this.serviceName}: ${Ue} (${W}).`,z)}}const ht=/\{\$([^}]+)}/g;function Pr(K,$){return Object.prototype.hasOwnProperty.call(K,$)}function an(K){for(const $ in K)if(Object.prototype.hasOwnProperty.call(K,$))return!1;return!0}function Wr(K,$){if(K===$)return!0;const U=Object.keys(K),z=Object.keys($);for(const W of U){if(!z.includes(W))return!1;const Ie=K[W],Ue=$[W];if(Tr(Ie)&&Tr(Ue)){if(!Wr(Ie,Ue))return!1}else if(Ie!==Ue)return!1}for(const W of z)if(!U.includes(W))return!1;return!0}function Tr(K){return null!==K&&"object"==typeof K}function Is(K){const $=[];for(const[U,z]of Object.entries(K))Array.isArray(z)?z.forEach(W=>{$.push(encodeURIComponent(U)+"="+encodeURIComponent(W))}):$.push(encodeURIComponent(U)+"="+encodeURIComponent(z));return $.length?"&"+$.join("&"):""}function Vi(K){const $={};return K.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[W,Ie]=z.split("=");$[decodeURIComponent(W)]=decodeURIComponent(Ie)}}),$}function Kr(K){const $=K.indexOf("?");if(!$)return"";const U=K.indexOf("#",$);return K.substring($,U>0?U:void 0)}function Vo(K,$){const U=new Ze(K,$);return U.subscribe.bind(U)}class Ze{constructor($,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{$(this)}).catch(z=>{this.error(z)})}next($){this.forEachObserver(U=>{U.next($)})}error($){this.forEachObserver(U=>{U.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,U,z){let W;if(void 0===$&&void 0===U&&void 0===z)throw new Error("Missing Observer.");W=function ns(K,$){if("object"!=typeof K||null===K)return!1;for(const U of $)if(U in K&&"function"==typeof K[U])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:U,complete:z},void 0===W.next&&(W.next=Ln),void 0===W.error&&(W.error=Ln),void 0===W.complete&&(W.complete=Ln);const Ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),Ie}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,$)}sendOne($,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{U(this.observers[$])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}function rs(K,$=1e3,U=2){const z=$*Math.pow(U,K),W=Math.round(.5*z*(Math.random()-.5)*2);return Math.min(144e5,z+W)}function Kt(K){return K&&K._delegate?K._delegate:K}},5272:(lt,Se,R)=>{var d=R(4650);let ee=null;function k(){return ee}const ue=new d.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function me(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const H=new d.OlP("Location Initialized");let G=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ve(){return new G((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ke)},providedIn:"root"}),n})();const ge=new d.OlP("appBaseHref");let Ke=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+et(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+et(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+et(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+et(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=et,n.joinWithSlash=xe,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(d.LFG(_e))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,d.LFG)(_e))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function Ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}let sn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Da{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let As=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Da(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),Ms(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ms(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ms(n,e){n.context.$implicit=e.item}let Cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Yl{constructor(){this.$implicit=null,this.ngIf=null}}function fr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class Ld{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class fg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const is=new fg,pg=new Ld;let Du=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return is;if((0,d.F4k)(t))return pg;throw function nr(n,e){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function wr(n){return"server"===n}let Au=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new jf((0,d.LFG)(ue),window)}),n})();class jf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class to{}class so extends class Gd extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){ee||(ee=n)}(new so)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ju(){return oo=oo||document.querySelector("base"),oo?oo.getAttribute("href"):null}();return null==t?null:function Jr(n){rr=rr||document.createElement("a"),rr.setAttribute("href",n);const e=rr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){oo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ia(document.cookie,e)}}let rr,oo=null;const mn=new d.OlP("TRANSITION_ID"),pc=[{provide:d.ip1,useFactory:function fc(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[mn,ue,d.zs3],multi:!0}];let gc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=new d.OlP("EventManagerPlugins");let qd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class mc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ho=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$o=(()=>{class n extends Ho{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Wd(n){k().remove(n)}const Go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zd=/%COMP%/g;function zu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?zu(n,i,t):(i=i.replace(Zd,n),t.push(i))}return t}function Kd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let uo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Yd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Qd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=zu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qd),d.LFG($o),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ra(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ra(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Go[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Go[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kd(r)):this.eventManager.addEventListener(e,t,Kd(r))}}function Ra(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yd extends zo{constructor(e,t,r,i){super(e),this.component=r;const u=zu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function kn(n){return"_ngcontent-%COMP%".replace(Zd,n)}(i+"-"+r.id),this.hostAttr=function Gu(n){return"_nghost-%COMP%".replace(Zd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Qd extends zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=zu(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pr=(()=>{class n extends mc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=["alt","control","meta","shift"],La={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$i={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends mc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),Fa.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=La[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fa.forEach(c=>{c!==i&&(0,$i[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ku=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Wu(){so.makeCurrent()},multi:!0},{provide:ue,useFactory:function Ba(){return(0,d.RDi)(document),document},deps:[]}]),Ps=new d.OlP(""),Xd=[{provide:d.rWj,useClass:class zd{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Rs=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function co(){return new d.qLn},deps:[]},{provide:Hu,useClass:pr,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:Hu,useClass:Va,multi:!0,deps:[ue]},{provide:uo,useClass:uo,deps:[qd,$o,d.AFp]},{provide:d.FYo,useExisting:uo},{provide:Ho,useExisting:$o},{provide:$o,useClass:$o,deps:[ue]},{provide:qd,useClass:qd,deps:[Hu,d.R0b]},{provide:to,useClass:gc,deps:[]},[]];let Yu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:mn,useExisting:d.AFp},pc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ps,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Rs,...Xd],imports:[Uo,d.hGG]}),n})(),ds=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qo(){return new ds((0,d.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Ga=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Cg),r},providedIn:"root"}),n})(),Cg=(()=>{class n extends Ga{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function bg(n){return new Cg(n.get(ue))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var Ls=R(7669),en=R(8996);function Je(...n){const e=(0,Ls.yG)(n);return(0,en.D)(n,e)}var ei=R(9751),cn=R(5577),ti=R(576);function fs(n,e){return(0,ti.m)(e)?(0,cn.z)(n,e,1):(0,cn.z)(n,1)}var Bn=R(4482),In=R(5403);function Ar(n,e){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var _t=R(4004);class tl{}class za{}class Ur{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ur?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ur;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ur?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ni{encodeKey(e){return Jo(e)}encodeValue(e){return Jo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Vs=/%(\d[a-f0-9])/gi,nl={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Jo(n){return encodeURIComponent(n).replace(Vs,(e,t)=>nl[t]??e)}function Xo(n){return`${n}`}class Gi{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ni,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qa(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(p),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Xo):[Xo(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Gi({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Xo(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Xo(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ig{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zf(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ea(n){return typeof Blob<"u"&&n instanceof Blob}function go(n){return typeof FormData<"u"&&n instanceof FormData}class Br{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function th(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ur),this.context||(this.context=new Ig),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new Gi,this.urlWithParams=t}serializeBody(){return null===this.body?null:zf(this.body)||ea(this.body)||go(this.body)||function Wa(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||go(this.body)?null:ea(this.body)?this.body.type||null:zf(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,b=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,F)=>M.set(F,e.setHeaders[F]),y)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,F)=>M.set(F,e.setParams[F]),b)),new Br(t,r,u,{params:b,headers:y,context:T,reportProgress:p,responseType:i,withCredentials:c})}}var Tn=(()=>((Tn=Tn||{})[Tn.Sent=0]="Sent",Tn[Tn.UploadProgress=1]="UploadProgress",Tn[Tn.ResponseHeader=2]="ResponseHeader",Tn[Tn.DownloadProgress=3]="DownloadProgress",Tn[Tn.Response=4]="Response",Tn[Tn.User=5]="User",Tn))();class ta{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ur,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ai extends ta{constructor(e={}){super(e),this.type=Tn.ResponseHeader}clone(e={}){return new Ai({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class na extends ta{constructor(e={}){super(e),this.type=Tn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new na({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zi extends ta{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ec(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let mo=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Br)u=t;else{let y,b;y=i.headers instanceof Ur?i.headers:new Ur(i.headers),i.params&&(b=i.params instanceof Gi?i.params:new Gi({fromObject:i.params})),u=new Br(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Je(u).pipe(fs(y=>this.handler.handle(y)));if(t instanceof Br||"events"===i.observe)return c;const p=c.pipe(Ar(y=>y instanceof na));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,_t.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,_t.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,_t.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,_t.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Gi).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ec(i,r))}post(t,r,i={}){return this.request("POST",t,Ec(i,r))}put(t,r,i={}){return this.request("PUT",t,Ec(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ps{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const bc=new d.OlP("HTTP_INTERCEPTORS");let jn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ft=/^\)\]\}',?\n/;let Ot=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ei.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,j)=>i.setRequestHeader(V,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const u=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const V=i.statusText||"OK",j=new Ur(i.getAllResponseHeaders()),re=function Et(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Ai({headers:j,status:i.status,statusText:V,url:re}),c},y=()=>{let{headers:V,status:j,statusText:re,url:Ee}=p(),Le=null;204!==j&&(Le=typeof i.response>"u"?i.responseText:i.response),0===j&&(j=Le?200:0);let Xe=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof Le){const pt=Le;Le=Le.replace(ft,"");try{Le=""!==Le?JSON.parse(Le):null}catch(it){Le=pt,Xe&&(Xe=!1,Le={error:it,text:Le})}}Xe?(r.next(new na({body:Le,headers:V,status:j,statusText:re,url:Ee||void 0})),r.complete()):r.error(new zi({error:Le,headers:V,status:j,statusText:re,url:Ee||void 0}))},b=V=>{const{url:j}=p(),re=new zi({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(re)};let T=!1;const M=V=>{T||(r.next(p()),T=!0);let j={type:Tn.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},F=V=>{let j={type:Tn.UploadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),r.next(j)};return i.addEventListener("load",y),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",M),null!==u&&i.upload&&i.upload.addEventListener("progress",F)),i.send(u),r.next({type:Tn.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",y),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",M),null!==u&&i.upload&&i.upload.removeEventListener("progress",F)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(to))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const dt=new d.OlP("XSRF_COOKIE_NAME"),yn=new d.OlP("XSRF_HEADER_NAME");class mr{}let ra=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ia(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(d.Lbi),d.LFG(dt))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Us=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mr),d.LFG(yn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(bc,[]);this.chain=r.reduceRight((i,u)=>new ps(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(za),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vo=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Us,useClass:jn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:dt,useValue:t.cookieName}:[],t.headerName?{provide:yn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Us,{provide:bc,useExisting:Us,multi:!0},{provide:mr,useClass:ra},{provide:dt,useValue:"XSRF-TOKEN"},{provide:yn,useValue:"X-XSRF-TOKEN"}]}),n})(),ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mo,{provide:tl,useClass:yo},Ot,{provide:za,useExisting:Ot}],imports:[vo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var qi=R(2011),Xy=R(4986),Er=R(5813),il=R(8189);function Ka(...n){return function nh(){return(0,il.J)(1)}()((0,en.D)(n,(0,Ls.yG)(n)))}function rh(...n){const e=(0,Ls.yG)(n);return(0,Bn.e)((t,r)=>{(e?Ka(n,t,e):Ka(n,t)).subscribe(r)})}function ih(){return(0,Bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,In.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Q0(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,In.x)(c,T=>{const M=b++;y=p?n(y,T,M):(p=!0,T),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function sl(n,e){return(0,Bn.e)(Q0(n,e,arguments.length>=2,!0))}var sh=R(4671);function e_(n,e){return n===e}R(2274);var Ye,ol=R(3942),de=R(5861),Wi=R(9681),oh=R(4859),oa=R(1877),jt=R(2090),Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gs={},ah=ah||{},St=Cc||self;function Zi(){}function Zf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ya(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var uh="closure_uid_"+(1e9*Math.random()>>>0),r_=0;function ms(n,e,t){return n.call.apply(n.bind,arguments)}function al(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function br(n,e,t){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ms:al).apply(null,arguments)}function Ic(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function aa(){this.s=this.s,this.o=this.o}var J0={};aa.prototype.s=!1,aa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function n_(n){return Object.prototype.hasOwnProperty.call(n,uh)&&n[uh]||(n[uh]=++r_)}(this);delete J0[n]}},aa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Tg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function lh(n){return Array.prototype.concat.apply([],arguments)}function Kf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Bs(n){return/^[\s\xa0]*$/.test(n)}var jr,Yf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Sn(n,e){return-1!=n.indexOf(e)}function Eo(n,e){return n<e?-1:n>e?1:0}e:{var Qf=St.navigator;if(Qf){var Dc=Qf.userAgent;if(Dc){jr=Dc;break e}}jr=""}function Sg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function o_(n){const e={};for(const t in n)e[t]=n[t];return e}var a_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ch(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<a_.length;u++)t=a_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tc(n){return Tc[" "](n),n}Tc[" "]=Zi;var ua,n,Ag=Sn(jr,"Opera"),Sc=Sn(jr,"Trident")||Sn(jr,"MSIE"),Jf=Sn(jr,"Edge"),Ac=Jf||Sc,hh=Sn(jr,"Gecko")&&!(Sn(jr.toLowerCase(),"webkit")&&!Sn(jr,"Edge"))&&!(Sn(jr,"Trident")||Sn(jr,"MSIE"))&&!Sn(jr,"Edge"),u_=Sn(jr.toLowerCase(),"webkit")&&!Sn(jr,"Edge");function Mg(){var n=St.document;return n?n.documentMode:void 0}e:{var ul="",fh=(n=jr,hh?/rv:([^\);]+)(\)|;)/.exec(n):Jf?/Edge\/([\d\.]+)/.exec(n):Sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):u_?/WebKit\/(\S+)/.exec(n):Ag?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fh&&(ul=fh?fh[1]:""),Sc){var Mc=Mg();if(null!=Mc&&Mc>parseFloat(ul)){ua=String(Mc);break e}}ua=ul}var xg={};var Xf=St.document&&Sc&&(Mg()||parseInt(ua,10))||void 0,ll=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Zi,e),St.removeEventListener("test",Zi,e)}catch{}return n}();function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function cl(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hh){e:{try{Tc(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:l_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cl.Z.h.call(this)}}Hr.prototype.h=function(){this.defaultPrevented=!0},Mr(cl,Hr);var l_={2:"touch",3:"pen",4:"mouse"};cl.prototype.h=function(){cl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xc="closure_listenable_"+(1e6*Math.random()|0),c_=0;function X0(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++c_,this.ca=this.fa=!1}function gh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function js(n){this.src=n,this.g={},this.h=0}function Qa(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=wo(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(gh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Oc(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}js.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Oc(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new X0(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var mh="closure_lm_"+(1e6*Math.random()|0),dl={};function Ng(n,e,t,r,i){if(r&&r.once)return Nc(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ng(n,e[u],t,r,i);return null}return t=Hs(t),n&&n[xc]?n.N(e,t,Ya(r)?!!r.capture:!!r,i):ri(n,e,t,!1,r,i)}function ri(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Ya(i)?!!i.capture:!!i,p=Pc(n);if(p||(n[mh]=p=new js(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function hl(){var e=kg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ll||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Nc(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Nc(n,e[u],t,r,i);return null}return t=Hs(t),n&&n[xc]?n.O(e,t,Ya(r)?!!r.capture:!!r,i):ri(n,e,t,!0,r,i)}function d_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)d_(n,e[u],t,r,i);else r=Ya(r)?!!r.capture:!!r,t=Hs(t),n&&n[xc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Oc(u=n.g[e],t,r,i))&&(gh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Oc(e,t,r,i)),(t=-1<n?e[n]:null)&&kc(t))}function kc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[xc])Qa(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pc(e))?(Qa(t,n),0==t.h&&(t.src=null,e[mh]=null)):gh(n)}}}function fl(n){return n in dl?dl[n]:dl[n]="on"+n}function kg(n,e){if(n.ca)n=!0;else{e=new cl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&kc(n),n=t.call(r,e)}return n}function Pc(n){return(n=n[mh])instanceof js?n:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hs(n){return"function"==typeof n?n:(n[bo]||(n[bo]=function(e){return n.handleEvent(e)}),n[bo])}function Yn(){aa.call(this),this.i=new js(this),this.P=this,this.I=null}function ir(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;ch(e=new Hr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=yh(c,r,!0,e)&&i}if(i=yh(c=e.g=n,r,!0,e)&&i,i=yh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=yh(c=e.g=t[u],r,!1,e)&&i}function yh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Qa(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Mr(Yn,aa),Yn.prototype[xc]=!0,Yn.prototype.removeEventListener=function(n,e,t,r){d_(this,n,e,t,r)},Yn.prototype.M=function(){if(Yn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gh(t[r]);delete n.g[e],n.h--}}this.I=null},Yn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rc=St.JSON.stringify;function Fc(){var n=Pg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var la,Lc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Vc,n=>n.reset());class Vc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function h_(n){St.setTimeout(()=>{throw n},0)}function ys(n,e){la||function Ja(){var n=St.Promise.resolve(void 0);la=function(){n.then(ep)}}(),_h||(la(),_h=!0),Pg.add(n,e)}var _h=!1,Pg=new class sr{constructor(){this.h=this.g=null}add(e,t){const r=Lc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ep(){for(var n;n=Fc();){try{n.h.call(n.g)}catch(t){h_(t)}var e=Lc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}_h=!1}function vh(n,e){Yn.call(this),this.h=n||1,this.g=e||St,this.j=br(this.kb,this),this.l=Date.now()}function Uc(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function tp(n,e,t){if("function"==typeof n)t&&(n=br(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=br(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function np(n){n.g=tp(()=>{n.g=null,n.i&&(n.i=!1,np(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mr(vh,Yn),(Ye=vh.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ir(this,"tick"),this.da&&(Uc(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){vh.Z.M.call(this),Uc(this),delete this.g};class v extends aa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:np(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function f(n){aa.call(this),this.h=n,this.g={}}Mr(f,aa);var m=[];function w(n,e,t,r){Array.isArray(t)||(t&&(m[0]=t.toString()),t=m);for(var i=0;i<t.length;i++){var u=Ng(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function A(n){Sg(n.g,function(e,t){this.g.hasOwnProperty(t)&&kc(e)},n),n.g={}}function N(){this.g=!0}function Fe(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vt(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Rc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}f.prototype.M=function(){f.Z.M.call(this),A(this)},f.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},N.prototype.Aa=function(){this.g=!1},N.prototype.info=function(){};var ot={},or=null;function yi(){return or=or||new Yn}function pl(n){Hr.call(this,ot.Ma,n)}function Xa(n){const e=yi();ir(e,new pl(e,n))}function gl(n,e){Hr.call(this,ot.STAT_EVENT,n),this.stat=e}function $r(n){const e=yi();ir(e,new gl(e,n))}function rp(n,e){Hr.call(this,ot.Na,n),this.size=e}function Co(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}ot.Ma="serverreachability",Mr(pl,Hr),ot.STAT_EVENT="statevent",Mr(gl,Hr),ot.Na="timingevent",Mr(rp,Hr);var wh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function eu(){}function f_(){}eu.prototype.h=null;var p_,ml={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lg(){Hr.call(this,"d")}function eE(){Hr.call(this,"c")}function ip(){}function Bc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new f(this),this.P=tE,this.W=new vh(n=Ac?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new g_}function g_(){this.i=null,this.g="",this.h=!1}Mr(Lg,Hr),Mr(eE,Hr),Mr(ip,eu),ip.prototype.g=function(){return new XMLHttpRequest},ip.prototype.i=function(){return{}},p_=new ip;var tE=45e3,Vg={},Eh={};function m_(n,e,t){n.K=1,n.v=jg(Io(e)),n.s=t,n.U=!0,Ug(n,null)}function Ug(n,e){n.F=Date.now(),sp(n),n.A=Io(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),oE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new g_,n.g=O_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new v(br(n.Ia,n,n.g),n.O)),w(n.V,n.g,"readystatechange",n.gb),e=n.H?o_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Xa(1),function Z(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var T=b[0];b=b[1];var M=T.split("_");c=2<=M.length&&"type"==M[1]?c+(T+"=")+b+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function bh(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function nE(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=KI(n,t),i==Eh){4==e&&(n.o=4,$r(14),r=!1),Fe(n.j,n.m,null,"[Incomplete Response]");break}if(i==Vg){n.o=4,$r(15),Fe(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Fe(n.j,n.m,i,null),__(n,i)}bh(n)&&i!=Eh&&i!=Vg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$r(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yp(e),e.L=!0,$r(11))):(Fe(n.j,n.m,t,"[Invalid Chunked Response]"),jc(n),op(n))}function KI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Eh:(t=Number(e.substring(t,r)),isNaN(t)?Vg:(r+=1)+t>e.length?Eh:(e=e.substr(r,t),n.C=r+t,e))}function sp(n){n.Y=Date.now()+n.P,y_(n,n.P)}function y_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Co(br(n.eb,n),e)}function Bg(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function op(n){0==n.l.G||n.I||Oh(n.l,n)}function jc(n){Bg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Uc(n.W),A(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function __(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||C_(t.i,n)))if(t.I=n.N,!n.J&&C_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;xh(t),Gc(t)}Jg(t),$r(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Co(br(t.ab,t),6e3));if(1>=$g(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else _l(t,11)}else if((n.J||t.g==n)&&xh(t),!Bs(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const T=b[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const j=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var u=r.i;!u.g&&(Sn(j,"spdy")||Sn(j,"quic")||Sn(j,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Gg(u,u.h),u.h=null))}if(r.D){const re=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.sa=re,An(r.F,r.D,re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=_E(r,r.H?r.la:null,r.W),c.J){uE(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(Bg(p),sp(p)),r.g=c}else mp(r);0<t.l.length&&pp(t)}else"stop"!=b[0]&&"close"!=b[0]||_l(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?_l(t,7):fE(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Xa(4)}catch{}}function w_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zf(n)||"string"==typeof n)Tg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Zf(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function v_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Zf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ch(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ch)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function E_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];yl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)yl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function yl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Bc.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==ha(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const T=ha(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>T)&&(3!=T||Ac||this.g&&(this.h.h||this.g.ga()||M_(this.g)))){this.I||4!=T||7==e||Xa(8==e||0>=M?3:2),Bg(this);var t=this.g.ba();this.N=t;t:if(bh(this)){var r=M_(this.g);n="";var i=r.length,u=4==ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jc(this),op(this);var c="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function ce(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bs(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,$r(12),jc(this),op(this);break e}Fe(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,__(this,t)}this.U?(nE(this,T,c),Ac&&this.i&&3==T&&(w(this.V,this.W,"tick",this.fb),this.W.start())):(Fe(this.j,this.m,c,null),__(this,c)),4==T&&jc(this),this.i&&!this.I&&(4==T?Oh(this.l,this):(this.i=!1,sp(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,$r(12)):(this.o=0,$r(13)),jc(this),op(this)}}}catch{}},Ye.fb=function(){if(this.g){var n=ha(this.g),e=this.g.ga();this.C<e.length&&(Bg(this),nE(this,n,e),this.i&&4!=n&&sp(this))}},Ye.cancel=function(){this.I=!0,jc(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Qe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xa(3),$r(17)),jc(this),this.o=2,op(this)):y_(this,this.Y-n)},(Ye=Ch.prototype).R=function(){E_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return E_(this),this.g.concat()},Ye.get=function(n,e){return yl(this.h,n)?this.h[n]:e},Ye.set=function(n,e){yl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var rE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yr(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof yr){this.g=void 0!==e?e:n.g,ap(this,n.j),this.s=n.s,Ih(this,n.i),xr(this,n.m),this.l=n.l,e=n.h;var t=new lp;t.i=e.i,e.g&&(t.g=new Ch(e.g),t.h=e.h),Dh(this,t),this.o=n.o}else n&&(t=String(n).match(rE))?(this.g=!!e,ap(this,t[1]||"",!0),this.s=up(t[2]||""),Ih(this,t[3]||"",!0),xr(this,t[4]),this.l=up(t[5]||"",!0),Dh(this,t[6]||"",!0),this.o=up(t[7]||"")):(this.g=!!e,this.h=new lp(null,this.g))}function Io(n){return new yr(n)}function ap(n,e,t){n.j=t?up(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ih(n,e,t){n.i=t?up(e,!0):e}function xr(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Dh(n,e,t){e instanceof lp?(n.h=e,function dM(n,e){e&&!n.j&&(_s(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ca(this,r),oE(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Th(e,tD)),n.h=new lp(e,n.g))}function An(n,e,t){n.h.set(e,t)}function jg(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function up(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Th(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Th(e,b_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Th(e,b_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Th(t,"/"==t.charAt(0)?eD:XI,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Th(t,nD)),n.join("")};var b_=/[#\/\?@]/g,XI=/[#\?:]/g,eD=/[#\?]/g,tD=/[#\?@]/g,nD=/#/g;function lp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _s(n){n.g||(n.g=new Ch,n.h=0,n.i&&function YI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ca(n,e){_s(n),e=cp(n,e),yl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,yl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&E_(n)))}function sE(n,e){return _s(n),e=cp(n,e),yl(n.g.h,e)}function oE(n,e,t){ca(n,e),0<t.length&&(n.i=null,n.g.set(cp(n,e),Kf(t)),n.h+=t.length)}function cp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rD(n){this.l=n||da,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ea&&St.g.Ea()&&St.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=lp.prototype).add=function(n,e){_s(this),this.i=null,n=cp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){_s(this),this.g.forEach(function(t,r){Tg(t,function(i){n.call(e,i,r,this)},this)},this)},Ye.T=function(){_s(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},Ye.R=function(n){_s(this);var e=[];if("string"==typeof n)sE(this,n)&&(e=lh(e,this.g.get(cp(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lh(e,n[t])}return e},Ye.set=function(n,e){return _s(this),this.i=null,sE(this,n=cp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var da=10;function Hg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $g(n){return n.h?1:n.g?n.g.size:0}function C_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gg(n,e){n.g?n.g.add(e):n.h=e}function uE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Sh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Kf(n.i)}function I_(){}function iD(){this.g=new I_}function D_(n,e,t){const r=t||"";try{w_(n,function(i,u){let c=i;Ya(i)&&(c=Rc(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function zg(n){this.l=n.$b||null,this.j=n.ib||!1}function tu(n,e){Yn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rD.prototype.cancel=function(){if(this.i=Sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},I_.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},I_.prototype.parse=function(n){return St.JSON.parse(n,void 0)},Mr(zg,eu),zg.prototype.g=function(){return new tu(this.l,this.j)},zg.prototype.i=function(n){return function(){return n}}({}),Mr(tu,Yn);var hp=0;function S_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function fp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hc(n)}function Hc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=tu.prototype).open=function(n,e){if(this.readyState!=hp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hc(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fp(this)),this.readyState=hp},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof St.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;S_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fp(this):Hc(this),3==this.readyState&&S_(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,fp(this))},Ye.Ta=function(n){this.g&&(this.response=n,fp(this))},Ye.ha=function(){this.g&&fp(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sD=St.JSON.parse;function Cr(n){Yn.call(this),this.headers=new Ch,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lE,this.K=this.L=!1}Mr(Cr,Yn);var lE="",oD=/^https?$/i,aD=["POST","PUT"];function cE(n){return"content-type"==n.toLowerCase()}function qg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,A_(n),Zg(n)}function A_(n){n.D||(n.D=!0,ir(n,"complete"),ir(n,"error"))}function Wg(n){if(n.h&&typeof ah<"u"&&(!n.C[1]||4!=ha(n)||2!=n.ba()))if(n.v&&4==ha(n))tp(n.Fa,0,n);else if(ir(n,"readystatechange"),4==ha(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(rE)[1]||null;if(!i&&St.self&&St.self.location){var u=St.self.location.protocol;i=u.substr(0,u.length-1)}r=!oD.test(i?i.toLowerCase():"")}t=r}if(t)ir(n,"complete"),ir(n,"success");else{n.m=6;try{var c=2<ha(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",A_(n)}}finally{Zg(n)}}}function Zg(n,e){if(n.g){dE(n);const t=n.g,r=n.C[0]?Zi:null;n.g=null,n.C=null,e||ir(n,"ready");try{t.onreadystatechange=r}catch{}}}function dE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function ha(n){return n.g?n.g.readyState:0}function M_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Kg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function $c(n){let e="";return Sg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Ah(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hE(n){this.za=0,this.l=[],this.h=new N,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ah("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ah("baseRetryDelayMs",5e3,n),this.$a=Ah("retryDelaySeedMs",1e4,n),this.Ya=Ah("forwardChannelMaxRetries",2,n),this.ra=Ah("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new rD(n&&n.concurrentRequestLimit),this.Ca=new iD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function fE(n){if(pE(n),3==n.G){var e=n.V++,t=Io(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),Mh(n,t),(e=new Bc(n,n.h,e,void 0)).K=2,e.v=jg(Io(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=O_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sp(e)}yE(n)}function Gc(n){n.g&&(yp(n),n.g.cancel(),n.g=null)}function pE(n){Gc(n),n.u&&(St.clearTimeout(n.u),n.u=null),xh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function Yg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pp(n)}function pp(n){Hg(n.i)||n.m||(n.m=!0,ys(n.Ha,n),n.C=0)}function Qg(n,e){var t;t=e?e.m:n.V++;const r=Io(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),Mh(n,r),n.o&&n.s&&Kg(r,n.o,n.s),t=new Bc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=gp(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Gg(n.i,t),m_(t,r,e)}function Mh(n,e){n.j&&w_({},function(t,r){An(e,r,t)})}function gp(n,e,t){t=Math.min(n.l.length,t);var r=n.j?br(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const T=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{D_(T,c,"req"+b+"_")}catch{r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function mp(n){n.g||n.u||(n.Y=1,ys(n.Ga,n),n.A=0)}function Jg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Co(br(n.Ga,n),mE(n,n.A)),n.A++,0))}function yp(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function x_(n){n.g=new Bc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Io(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),Mh(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&Kg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=jg(Io(e)),t.s=null,t.U=!0,Ug(t,n)}function xh(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function Oh(n,e){var t=null;if(n.g==e){xh(n),yp(n),n.g=null;var r=2}else{if(!C_(n.i,e))return;t=e.D,uE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ir(r=yi(),new rp(r,t,e,i)),pp(n)}else mp(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function gE(n,e){return!($g(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Co(br(n.Ha,n,e),mE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Jg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:_l(n,5);break;case 4:_l(n,10);break;case 3:_l(n,6);break;default:_l(n,2)}}function mE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function _l(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=br(n.jb,n);t||(t=new yr("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||ap(t,"https"),jg(t)),function T_(n,e){const t=new N;if(St.Image){const r=new Image;r.onload=Ic(dp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ic(dp,t,r,"TestLoadImage: error",!1,e),r.onabort=Ic(dp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ic(dp,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else $r(2);n.G=0,n.j&&n.j.va(e),yE(n),pE(n)}function yE(n){n.G=0,n.I=-1,n.j&&((0!=Sh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Kf(n.l),n.l.length=0),n.j.ua())}function _E(n,e,t){let r=function QI(n){return n instanceof yr?Io(n):new yr(n,void 0)}(t);if(""!=r.i)e&&Ih(r,e+"."+r.i),xr(r,r.m);else{const i=St.location;r=function iE(n,e,t,r){var i=new yr(null,void 0);return n&&ap(i,n),e&&Ih(i,e),t&&xr(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Sg(n.aa,function(i,u){An(r,u,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),Mh(n,r),r}function O_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cr(t&&n.Ba&&!n.qa?new zg({ib:!0}):n.qa)).L=n.H,e}function Xg(){}function _p(){if(Sc&&!(10<=Number(Xf)))throw Error("Environmental error: no available transport.")}function $s(n,e){Yn.call(this),this.g=new hE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Bs(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bs(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zc(this)}function N_(n){Lg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function vE(){eE.call(this),this.status=1}function zc(n){this.g=n}(Ye=Cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():p_.g(),this.C=function Fg(n){return n.h||(n.h=n.i())}(this.u?this.u:p_),this.g.onreadystatechange=br(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void qg(this,u)}n=t||"";const i=new Ch(this.headers);r&&w_(r,function(u,c){i.set(c,u)}),r=function s_(n){e:{var e=cE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=St.FormData&&n instanceof St.FormData,!(0<=wo(aD,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dE(this),0<this.B&&((this.K=function uD(n){return Sc&&function Kn(){return function dh(n){var e=xg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Yf(String(ua)).split("."),t=Yf("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Eo(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Eo(0==i[2].length,0==u[2].length)||Eo(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.pa,this)):this.A=tp(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){qg(this,u)}},Ye.pa=function(){typeof ah<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ir(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ir(this,"complete"),ir(this,"abort"),Zg(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zg(this,!0)),Cr.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?Wg(this):this.cb())},Ye.cb=function(){Wg(this)},Ye.ba=function(){try{return 2<ha(this)?this.g.status:-1}catch{return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sD(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=hE.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Bc(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=o_(u),ch(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gp(this,i,e),An(t=Io(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),Mh(this,t),this.o&&u&&Kg(t,this.o,u),Gg(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,m_(i,t,null)):m_(i,t,e),this.G=2}}else 3==this.G&&(n?Qg(this,n):0==this.l.length||Hg(this.i)||Qg(this))},Ye.Ga=function(){if(this.u=null,x_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Co(br(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$r(10),Gc(this),x_(this))},Ye.ab=function(){null!=this.v&&(this.v=null,Gc(this),Jg(this),$r(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),$r(2)):(this.h.info("Failed to ping google.com"),$r(1))},(Ye=Xg.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},_p.prototype.g=function(n,e){return new $s(n,e)},Mr($s,Yn),$s.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ys(br(n.hb,n,e))),$r(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_E(n,null,n.W),pp(n)},$s.prototype.close=function(){fE(this.g)},$s.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Yg(this.g,e)}else this.v?((e={}).__data__=Rc(n),Yg(this.g,e)):Yg(this.g,n)},$s.prototype.M=function(){this.g.j=null,delete this.j,fE(this.g),delete this.g,$s.Z.M.call(this)},Mr(N_,Lg),Mr(vE,eE),Mr(zc,Xg),zc.prototype.xa=function(){ir(this.g,"a")},zc.prototype.wa=function(n){ir(this.g,new N_(n))},zc.prototype.va=function(n){ir(this.g,new vE(n))},zc.prototype.ua=function(){ir(this.g,"b")},_p.prototype.createWebChannel=_p.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,wh.NO_ERROR=0,wh.TIMEOUT=8,wh.HTTP_ERROR=6,Rg.COMPLETE="complete",f_.EventType=ml,ml.OPEN="a",ml.CLOSE="b",ml.ERROR="c",ml.MESSAGE="d",Yn.prototype.listen=Yn.prototype.N,Cr.prototype.listenOnce=Cr.prototype.O,Cr.prototype.getLastError=Cr.prototype.La,Cr.prototype.getLastErrorCode=Cr.prototype.Da,Cr.prototype.getStatus=Cr.prototype.ba,Cr.prototype.getResponseJson=Cr.prototype.Qa,Cr.prototype.getResponseText=Cr.prototype.ga,Cr.prototype.send=Cr.prototype.ea;var lD=gs.createWebChannelTransport=function(){return new _p},cD=gs.getStatEventTarget=function(){return yi()},vs=gs.ErrorCode=wh,dD=gs.EventType=Rg,wE=gs.Event=ot,EE=gs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hD=gs.FetchXmlHttpFactory=zg,em=gs.WebChannel=f_,fD=gs.XhrIo=Cr;const k_="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Nh="9.9.4";const vl=new oa.Yd("@firebase/firestore");function Nt(){return vl.logLevel}function Ne(n,...e){if(vl.logLevel<=oa.in.DEBUG){const t=e.map(P_);vl.debug(`Firestore (${Nh}): ${n}`,...t)}}function ar(n,...e){if(vl.logLevel<=oa.in.ERROR){const t=e.map(P_);vl.error(`Firestore (${Nh}): ${n}`,...t)}}function qc(n,...e){if(vl.logLevel<=oa.in.WARN){const t=e.map(P_);vl.warn(`Firestore (${Nh}): ${n}`,...t)}}function P_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Nh}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function At(n,e){n||nt()}function We(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class R_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class pD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class F_{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,de.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new R_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Gr(e)}}class L_{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(At(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class gD{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new L_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hM{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.A=t.token,new mD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class V_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yD(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zc(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Hn(0,0))}static max(){return new bt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wl{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends wl{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const IE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends wl{construct(e,t,r){return new ur(e,t,r)}static isValidIdentifier(e){return IE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Oe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Oe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Oe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(t)}static emptyPath(){return new ur([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(tn.fromString(e))}static fromName(e){return new Ge(tn.fromString(e).popFirst(5))}static empty(){return new Ge(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new tn(e.slice()))}}class tm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function U_(n){return n.fields.find(e=>2===e.kind)}function Kc(n){return n.fields.filter(e=>2!==e.kind)}tm.UNKNOWN_ID=-1;class nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ph(0,Mi.min())}}function rm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new Mi(i,Ge.empty(),e)}function _D(n){return new Mi(n.readTime,n.key,-1)}class Mi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mi(bt.min(),Ge.empty(),-1)}static max(){return new Mi(bt.max(),Ge.empty(),-1)}}function B_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const vD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nu(n){return im.apply(this,arguments)}function im(){return im=(0,de.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==vD)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),im.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let y=0;y<u;y++){const b=y;t(e[b]).next(T=>{c[b]=T,++p,p===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new ie((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Ki{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Qc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=SE(r.target.error);this.P.reject(new Qc(e,i))}}static open(e,t,r,i){try{return new Ki(t,e.transaction(i,r))}catch(u){throw new Qc(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new j_(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Gs.D((0,jt.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),El(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,jt.hl)())return!1;if(Gs.N())return!0;const e=(0,jt.z$)(),t=Gs.D(e),r=0<t&&t<10,i=Gs.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,de.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Oe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Oe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Qc(e,p))},u.onupgradeneeded=c=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,de.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const y=Ki.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(T=>(y.V(),T)).catch(T=>(y.abort(T),ie.reject(T))).toPromise();return b.catch(()=>{}),yield y.v,b}catch(y){const b=y,T="FirebaseError"!==b.name&&p<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),u.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return El(this.U.delete())}}class Qc extends Oe{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _i(n){return"IndexedDbTransactionError"===n.name}class j_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),El(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),El(this.store.add(e))}get(e){return El(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),El(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),El(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ie((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=u=>{const c=SE(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new ie((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new wD(p),b=t(p.primaryKey,p.value,y);if(b instanceof ie){const T=b.catch(M=>(y.done(),ie.reject(M)));r.push(T)}y.isDone?i():null===y.G?p.continue():p.continue(y.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function El(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=SE(r.target.error);t(i)}})}let sm=!1;function SE(n){const e=Gs.D((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sm||(sm=!0,setTimeout(()=>{throw r},0)),r}}return n}class AE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){_i(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nu(r)}yield t.nt(1)}))}}class fM{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ie.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ne("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(Ne("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=_D(u);B_(c,r)>0&&(r=c)}),new Mi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ii{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function vp(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function om(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ii.at=-1;class $n{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H_(this.root,e,this.comparator,!1)}getReverseIterator(){return new H_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H_(this.root,e,this.comparator,!0)}}class H_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??si.RED,this.left=i??si.EMPTY,this.right=u??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new si(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rh(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new _n(ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const gM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(n){if(At(!!n),"string"==typeof n){let e=0;const t=gM.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Jc(n){return"string"==typeof n?Nr.fromBase64String(n):Nr.fromUint8Array(n)}function wp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ED(n){const e=n.mapValue.fields.__previous_value__;return wp(e)?ED(e):e}function am(n){const e=iu(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}class mM{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}function um(n){return null==n}function lm(n){return 0===n&&1/n==-1/0}function bD(n){return"number"==typeof n&&Number.isInteger(n)&&!lm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$_={nullValue:"NULL_VALUE"};function Fh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wp(n)?4:OE(n)?9007199254740991:10:nt()}function oi(n,e){if(n===e)return!0;const t=Fh(n);if(t!==Fh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return am(n).isEqual(am(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=iu(r.timestampValue),c=iu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Jc(n.bytesValue).isEqual(Jc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Qn(r.geoPointValue.latitude)===Qn(i.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qn(r.integerValue)===Qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Qn(r.doubleValue),c=Qn(i.doubleValue);return u===c?lm(u)===lm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(vp(u)!==vp(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!oi(u[p],c[p])))return!1;return!0}(n,e);default:return nt()}var i}function td(n,e){return void 0!==(n.values||[]).find(t=>oi(t,e))}function bl(n,e){if(n===e)return 0;const t=Fh(n),r=Fh(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Qn(i.integerValue||i.doubleValue),p=Qn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return G_(n.timestampValue,e.timestampValue);case 4:return G_(am(n),am(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Jc(i),p=Jc(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Rt(c[y],p[y]);if(0!==b)return b}return Rt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Rt(Qn(i.latitude),Qn(u.latitude));return 0!==c?c:Rt(Qn(i.longitude),Qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=bl(c[y],p[y]);if(b)return b}return Rt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===ed.mapValue&&u===ed.mapValue)return 0;if(i===ed.mapValue)return 1;if(u===ed.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const M=Rt(p[T],b[T]);if(0!==M)return M;const F=bl(c[p[T]],y[b[T]]);if(0!==F)return F}return Rt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function G_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=iu(n),r=iu(e),i=Rt(t.seconds,r.seconds);return 0!==i?i:Rt(t.nanos,r.nanos)}function Cl(n){return cm(n)}function cm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=iu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Jc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=cm(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${cm(r.fields[p])}`;return u+"}"}(n.mapValue):nt();var e}function su(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function z_(n){return!!n&&"integerValue"in n}function zs(n){return!!n&&"arrayValue"in n}function q_(n){return!!n&&"nullValue"in n}function xE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dm(n){return!!n&&"mapValue"in n}function Lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function CD(n){return"nullValue"in n?$_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?su(Xc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function hm(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?su(Xc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ed:nt()}function nd(n,e){const t=bl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fm(n,e){const t=bl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=ur.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Lh(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());dm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ru(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new lr(Lh(this.value))}}function Ep(n){const e=[];return ru(n.fields,(t,r)=>{const i=new ur([t]);if(dm(r)){const u=Ep(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Yi(e)}class hn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new hn(e,0,bt.min(),bt.min(),lr.empty(),0)}static newFoundDocument(e,t,r){return new hn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new hn(e,2,t,bt.min(),lr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,bt.min(),lr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ID{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function W_(n,e=null,t=[],r=[],i=null,u=null,c=null){return new ID(n,e,t,r,i,u,c)}function Il(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Cl(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cl(r)).join(",")),e.ht=t}return e.ht}function rd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Y_(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!oi(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function bp(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Vh(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}function NE(n,e,t){let r=$_,i=!0;for(const u of Vh(n,e)){let c=$_,p=!0;switch(u.op){case"<":case"<=":c=CD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=$_}nd({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];nd({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function DD(n,e,t){let r=ed,i=!0;for(const u of Vh(n,e)){let c=ed,p=!0;switch(u.op){case">=":case">":c=hm(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=ed}fm({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];fm({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new kE(e,t,r):"array-contains"===t?new SD(e,r):"in"===t?new ws(e,r):"not-in"===t?new RE(e,r):"array-contains-any"===t?new AD(e,r):new ai(e,t,r)}static lt(e,t,r){return"in"===t?new TD(e,r):new PE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(bl(t,this.value)):null!==t&&Fh(this.value)===Fh(t)&&this.ft(bl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kE extends ai{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class TD extends ai{constructor(e,t){super(e,"in",t),this.keys=K_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PE extends ai{constructor(e,t){super(e,"not-in",t),this.keys=K_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function K_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class SD extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zs(t)&&td(t.arrayValue,this.value)}}class ws extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&td(this.value.arrayValue,t)}}class RE extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!td(this.value.arrayValue,t)}}class AD extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zs(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>td(this.value.arrayValue,r))}}class id{constructor(e,t){this.position=e,this.inclusive=t}}class Uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Q_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):bl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function FE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}class ou{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this._t=null,this.wt=null}}function LE(n,e,t,r,i,u,c,p){return new ou(n,e,t,r,i,u,c,p)}function sd(n){return new ou(n)}function VE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function J_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function X_(n){return null!==n.collectionGroup}function od(n){const e=We(n);if(null===e._t){e._t=[];const t=J_(e),r=pm(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Uh(t)),e._t.push(new Uh(ur.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Uh(ur.keyField(),u))}}}return e._t}function xi(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=W_(e.path,e.collectionGroup,od(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of od(e))t.push(new Uh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new id(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new id(e.startAt.position,e.startAt.inclusive):null;e.wt=W_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function gm(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qi(n,e){return rd(xi(n),xi(e))&&n.limitType===e.limitType}function mm(n){return`${Il(xi(n))}|lt:${n.limitType}`}function ev(n){return`Query(target=${function Z_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Cl(r.value)}`;var r}).join(", ")}]`),um(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Cl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Cl(t)).join(",")),`Target(${e})`}(xi(n))}; limitType=${n.limitType})`}function tv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=Q_(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,od(t),r)||t.endAt&&!function(i,u,c){const p=Q_(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,od(t),r)));var t,r}function MD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nv(n){return(e,t)=>{let r=!1;for(const i of od(n)){const u=xD(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function xD(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?bl(p,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function UE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lm(e)?"-0":e}}function BE(n){return{integerValue:""+n}}function ym(n,e){return bD(e)?BE(e):UE(n,e)}class _m{constructor(){this._=void 0}}function OD(n,e,t){return n instanceof Bh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof au?rv(n,e):n instanceof jh?ND(n,e):function(r,i){const u=wm(r,i),c=kD(u)+kD(r.yt);return z_(u)&&z_(r.yt)?BE(c):UE(r.It,c)}(n,e)}function vm(n,e,t){return n instanceof au?rv(n,e):n instanceof jh?ND(n,e):t}function wm(n,e){return n instanceof Dl?z_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bh extends _m{}class au extends _m{constructor(e){super(),this.elements=e}}function rv(n,e){const t=iv(e);for(const r of n.elements)t.some(i=>oi(i,r))||t.push(r);return{arrayValue:{values:t}}}class jh extends _m{constructor(e){super(),this.elements=e}}function ND(n,e){let t=iv(e);for(const r of n.elements)t=t.filter(i=>!oi(i,r));return{arrayValue:{values:t}}}class Dl extends _m{constructor(e,t){super(),this.It=e,this.yt=t}}function kD(n){return Qn(n.integerValue||n.doubleValue)}function iv(n){return zs(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}class HE{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qs(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ad{}function Cp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new zh(n.key,Mn.none()):new $h(n.key,n.data,Mn.none());{const t=n.data,r=lr.empty();let i=new _n(ur.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new uu(n.key,r,new Yi(i.toArray()),Mn.none())}}function Ip(n,e,t){n instanceof $h?function(r,i,u){const c=r.value.clone(),p=$E(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof uu?function(r,i,u){if(!qs(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=$E(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(Gh(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dp(n,e,t,r){return n instanceof $h?function(i,u,c,p){if(!qs(i.precondition,u))return c;const y=i.value.clone(),b=PD(i.fieldTransforms,p,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof uu?function(i,u,c,p){if(!qs(i.precondition,u))return c;const y=PD(i.fieldTransforms,p,u),b=u.data;return b.setAll(Gh(i)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,qs(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function sv(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=wm(r.transform,i||null);null!=u&&(null===t&&(t=lr.empty()),t.set(r.field,u))}return t||null}function ov(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kh(t,r,(i,u)=>function jE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof au&&r instanceof au||t instanceof jh&&r instanceof jh?kh(t.elements,r.elements,oi):t instanceof Dl&&r instanceof Dl?oi(t.yt,r.yt):t instanceof Bh&&r instanceof Bh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $h extends ad{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uu extends ad{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Gh(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $E(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,vm(c,p,t[i]))}return r}function PD(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,OD(u,c,e))}return r}class zh extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GE extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RD{constructor(e){this.count=e}}var Ir,nn;function zE(n){switch(n){default:return nt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function av(n){if(void 0===n)return ar("GRPC error has no .code"),he.UNKNOWN;switch(n){case Ir.OK:return he.OK;case Ir.CANCELLED:return he.CANCELLED;case Ir.UNKNOWN:return he.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return he.INTERNAL;case Ir.UNAVAILABLE:return he.UNAVAILABLE;case Ir.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Ir.NOT_FOUND:return he.NOT_FOUND;case Ir.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Ir.ABORTED:return he.ABORTED;case Ir.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Ir.DATA_LOSS:return he.DATA_LOSS;default:return nt()}}(nn=Ir||(Ir={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return om(this.inner)}size(){return this.innerSize}}const FD=new $n(Ge.comparator);function vi(){return FD}const qE=new $n(Ge.comparator);function Tp(...n){let e=qE;for(const t of n)e=e.insert(t.key,t);return e}function WE(n){let e=qE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pa(){return Sp()}function ZE(){return Sp()}function Sp(){return new fa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Em=new $n(Ge.comparator),ud=new _n(Ge.comparator);function Lt(...n){let e=ud;for(const t of n)e=e.add(t);return e}const Ap=new _n(Rt);function bm(){return Ap}class Mp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,t)),new Mp(bt.min(),r,bm(),vi(),Lt())}}class ld{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ld(Nr.EMPTY_BYTE_STRING,t,Lt(),Lt(),Lt())}}class Cm{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Do{constructor(e,t){this.targetId=e,this.At=t}}class qh{constructor(e,t,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ui{constructor(){this.Rt=0,this.bt=Es(),this.Pt=Nr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Lt(),t=Lt(),r=Lt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new ld(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Es()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class cd{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=vi(),this.qt=xp(),this.Kt=new _n(Rt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(bp(u))if(0===r){const c=new Ge(u.path);this.jt(t,c,hn.newNoDocument(c,bt.min()))}else At(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&bp(p.target)){const y=new Ge(p.target.path);null!==this.Ut.get(y)||this.ee(c,y)||this.jt(c,y,hn.newNoDocument(y,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Lt();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.Xt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Mp(e,t,this.Kt,this.Ut,r);return this.Ut=vi(),this.qt=xp(),this.Kt=new _n(Rt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new ui,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _n(Rt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ui),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function xp(){return new $n(Ge.comparator)}function Es(){return new $n(Ge.comparator)}const uv={asc:"ASCENDING",desc:"DESCENDING"},Wh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Zh{constructor(e,t){this.databaseId=e,this.gt=t}}function ga(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dd(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Kh(n,e){return ga(n,e.toTimestamp())}function Jn(n){return At(!!n),bt.fromTimestamp(function(e){const t=iu(e);return new Hn(t.seconds,t.nanos)}(n))}function Tl(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hd(n){const e=tn.fromString(n);return At(mv(e)),e}function ma(n,e){return Tl(n.databaseId,e.path)}function To(n,e){const t=hd(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(cv(t))}function Im(n,e){return Tl(n.databaseId,e)}function lv(n){const e=hd(n);return 4===e.length?tn.emptyPath():cv(e)}function Yh(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cv(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dv(n,e,t){return{name:ma(n,e),fields:t.value.mapValue.fields}}function hv(n,e,t){const r=To(n,e.name),i=Jn(e.updateTime),u=new lr({mapValue:{fields:e.fields}}),c=hn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Op(n,e){let t;if(e instanceof $h)t={update:dv(n,e.key,e.value)};else if(e instanceof zh)t={delete:ma(n,e.key)};else if(e instanceof uu)t={update:dv(n,e.key,e.data),updateMask:eb(e.fieldMask)};else{if(!(e instanceof GE))return nt();t={verify:ma(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Bh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof au)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dl)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Kh(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function fv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Mn.updateTime(Jn(i.updateTime)):void 0!==i.exists?Mn.exists(i.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(At("REQUEST_TIME"===c.setToServerValue),p=new Bh):"appendMissingElements"in c?p=new au(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new jh(c.removeAllFromArray.values||[]):"increment"in c?p=new Dl(u,c.increment):nt();const y=ur.fromServerFormat(c.fieldPath);return new Hh(y,p)}(n,i)):[];var i;if(e.update){const i=To(n,e.update.name),u=new lr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Yi((e.updateMask.fieldPaths||[]).map(b=>ur.fromServerFormat(b)));return new uu(i,u,c,t,r)}return new $h(i,u,t,r)}if(e.delete){const i=To(n,e.delete);return new zh(i,t)}if(e.verify){const i=To(n,e.verify);return new GE(i,t)}return nt()}function JE(n,e){return{documents:[Im(n,e.path)]}}function pv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Im(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Im(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(T=>function(M){if("=="===M.op){if(xE(M.value))return{unaryFilter:{field:Sl(M.field),op:"IS_NAN"}};if(q_(M.value))return{unaryFilter:{field:Sl(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(xE(M.value))return{unaryFilter:{field:Sl(M.field),op:"IS_NOT_NAN"}};if(q_(M.value))return{unaryFilter:{field:Sl(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(M.field),op:Sm(M.op),value:M.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Sl((T=b).field),direction:Tm(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||um(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Dm(n){let e=lv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=XE(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Uh(Qh((M=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(T){let M;return M="object"==typeof T?T.value:T,um(M)?null:M}(t.limit));let y=null;var T;t.startAt&&(y=new id((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new id(T.values||[],!T.before)}(t.endAt)),LE(e,i,c,u,p,"F",y,b)}function XE(n){return n?void 0!==n.unaryFilter?[Mm(n)]:void 0!==n.fieldFilter?[Am(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>XE(e)).reduce((e,t)=>e.concat(t)):nt():[]}function Tm(n){return uv[n]}function Sm(n){return Wh[n]}function Sl(n){return{fieldPath:n.canonicalString()}}function Qh(n){return ur.fromServerFormat(n.fieldPath)}function Am(n){return ai.create(Qh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Mm(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Qh(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Qh(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qh(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qh(n.unaryFilter.field);return ai.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function eb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yv(e)),e=tb(n.get(t),e);return yv(e)}function tb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function yv(n){return n+"\x01\x01"}function Ws(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&nt(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:nt()}u=c+2}return new tn(r)}const _v=["userId","batchId"];function xm(n,e){return[n,li(e)]}function vv(n,e,t){return[n,li(e),t]}const nb={},rb=["prefixPath","collectionGroup","readTime","documentId"],ib=["prefixPath","collectionGroup","documentId"],LD=["collectionGroup","readTime","prefixPath","documentId"],VD=["canonicalId","targetId"],UD=["targetId","path"],sb=["path","targetId"],wv=["collectionId","parent"],ob=["indexId","uid"],ab=["uid","sequenceNumber"],ub=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lb=["indexId","uid","orderedDocumentKey"],cb=["userId","collectionPath","documentId"],db=["userId","collectionPath","largestBatchId"],hb=["userId","collectionGroup","largestBatchId"],Ev=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yM=[...Ev,"documentOverlays"],fb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pb=fb,gb=[...pb,"indexConfiguration","indexState","indexEntries"];class bv extends Yc{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Wt(n,e){const t=We(n);return Gs.O(t.ie,e)}class Om{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Ip(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZE();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const y=Cp(c,p);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Lt())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>ov(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>ov(t,r))}}class Cv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=Em;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Cv(e,t,r,i)}}class Iv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,r,i,u=bt.min(),c=bt.min(),p=Nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mb{constructor(e){this.re=e}}function Dv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ma(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ga(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fd(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:fd(e.version)}}var i,u;return r}function cu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pd(n){const e=new Hn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(u=>fv(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>fv(n.re,u)),i=Hn.fromMillis(e.localWriteTimeMs);return new Om(e.batchId,i,t,r)}function Np(n){const e=pd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pd(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=xi(sd(lv(i.documents[0])))):r=xi(Dm(n.query)),new lu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nr.fromBase64String(n.resumeToken))}function Tv(n,e){const t=fd(e.snapshotVersion),r=fd(e.lastLimboFreeSnapshotVersion);let i;i=bp(e.target)?JE(n.re,e.target):pv(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Il(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _b(n){const e=Dm({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gm(e,e.limit,"L"):e}function kp(n,e){return new Iv(e.largestBatchId,fv(n.re,e.overlayMutation))}function Nm(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function So(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fd(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class BD{getBundleMetadata(e,t){return Sv(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Sv(e).put({bundleId:(r=t).id,createTime:fd(Jn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ao(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:_b(i.bundledQuery),readTime:pd(i.readTime)};var i})}saveNamedQuery(e,t){return Ao(e).put({name:(r=t).name,readTime:fd(Jn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Sv(n){return Wt(n,"bundles")}function Ao(n){return Wt(n,"namedQueries")}class Ji{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Ji(e,t.uid||"")}getOverlay(e,t){return Oi(e).get(Nm(this.userId,t)).next(r=>r?kp(this.It,r):null)}getOverlays(e,t){const r=pa();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new Iv(t,c);i.push(this.ue(e,p))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(li(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Oi(e).Y("collectionPathOverlayIndex",p))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const i=pa(),u=li(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Oi(e).W("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=kp(this.It,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=pa();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Oi(e).Z({index:"collectionGroupOverlayIndex",range:p},(y,b,T)=>{const M=kp(this.It,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return Oi(e).put(function(r,i,u){const[c,p,y]=Nm(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Op(r.re,u.mutation)}}(this.It,this.userId,t))}}function Oi(n){return Wt(n,"documentOverlays")}class Ml{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),lm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Jc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?OE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):nt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function vb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function wb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=vb(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ml.Te=new Ml;class jD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=wb(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=wb(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HD{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class $D{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class gd{constructor(){this.Be=new jD,this.Le=new HD(this.Be),this.Ue=new $D(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Mo{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mo(this.indexId,this.documentKey,this.arrayValue,r)}}function md(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Av(n.arrayValue,e.arrayValue),0!==t?t:(t=Av(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Av(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=U_(e);if(void 0!==t&&!this.ze(t))return!1;const r=Kc(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Eb{constructor(){this.Ye=new km}addToCollectionParentIndex(e,t){return this.Ye.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Mi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class km{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(tn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(tn.comparator)).toArray()}}const yd=new Uint8Array(0);class zD{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new km,this.Ze=new fa(r=>Il(r),(r,i)=>rd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:li(i)};return Mv(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zc(t),""],!1,!0);return Mv(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ws(c.parent))}return r})}addFieldIndex(e,t){const r=Xh(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=xl(e);return u.next(p=>{c.put(So(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Xh(e),i=xl(e),u=Jh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jh(e);let i=!0;const u=new Map;return ie.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=Lt();const p=[];return ie.forEach(u,(y,b)=>{var T;Ne("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${Il(t)}`);const M=function(pt,it){const Tt=U_(it);if(void 0===Tt)return null;for(const Mt of Vh(pt,Tt.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(b,y),F=function(pt,it){const Tt=new Map;for(const Mt of Kc(it))for(const on of Vh(pt,Mt.fieldPath))switch(on.op){case"==":case"in":Tt.set(Mt.fieldPath.canonicalString(),on.value);break;case"not-in":case"!=":return Tt.set(Mt.fieldPath.canonicalString(),on.value),Array.from(Tt.values())}return null}(b,y),V=function(pt,it){const Tt=[];let Mt=!0;for(const on of Kc(it)){const Cs=0===on.kind?NE(pt,on.fieldPath,pt.startAt):DD(pt,on.fieldPath,pt.startAt);Tt.push(Cs.value),Mt&&(Mt=Cs.inclusive)}return new id(Tt,Mt)}(b,y),j=function(pt,it){const Tt=[];let Mt=!0;for(const on of Kc(it)){const Cs=0===on.kind?DD(pt,on.fieldPath,pt.endAt):NE(pt,on.fieldPath,pt.endAt);Tt.push(Cs.value),Mt&&(Mt=Cs.inclusive)}return new id(Tt,Mt)}(b,y),re=this.nn(y,b,V),Ee=this.nn(y,b,j),Le=this.sn(y,b,F),Xe=this.rn(y.indexId,M,re,V.inclusive,Ee,j.inclusive,Le);return ie.forEach(Xe,pt=>r.J(pt,t.limit).next(it=>{it.forEach(Tt=>{const Mt=Ge.fromSegments(Tt.documentKey);c.has(Mt)||(c=c.add(Mt),p.push(Mt))})}))}).next(()=>p)}return ie.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),b=y/(null!=t?t.length:1),T=[];for(let M=0;M<y;++M){const F=t?this.on(t[M/b]):yd,V=this.un(e,F,r[M%b],i),j=this.cn(e,F,u[M%b],c),re=p.map(Ee=>this.un(e,F,Ee,!0));T.push(...this.createRange(V,j,re))}return T}un(e,t,r,i){const u=new Mo(e,Ge.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new Mo(e,Ge.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new GD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return ie.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new _n(ur.comparator),y=!1;for(const b of c.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:p=p.add(T.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new gd;for(const i of Kc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);Ml.Te.ce(u,c)}return r.$e()}on(e){const t=new gd;return Ml.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new gd;return Ml.Te.ce(su(this.databaseId,t),r.qe(function(i){const u=Kc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new gd);let u=0;for(const c of Kc(e)){const p=r[u++];for(const y of i)if(this.ln(t,c.fieldPath)&&zs(p))i=this.fn(i,c,p);else{const b=y.qe(c.kind);Ml.Te.ce(p,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new gd;y.seed(p.$e()),Ml.Te.ce(c,y.qe(t.kind)),u.push(y)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xh(e),i=xl(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ie.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,T){const M=T?new Ph(T.sequenceNumber,new Mi(pd(T.readTime),new Ge(Ws(T.documentKey)),T.largestBatchId)):Ph.empty(),F=b.fields.map(([V,j])=>new nm(ur.fromServerFormat(V),j));return new tm(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xh(e),u=xl(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ie.forEach(p,y=>u.put(So(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ie.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ie.forEach(p,y=>this.wn(e,i,y).next(b=>{const T=this.mn(u,y);return b.isEqual(T)?ie.resolve():this.gn(e,u,y,b,T)}))))})}yn(e,t,r,i){return Jh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Jh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Jh(e);let u=new _n(md);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new Mo(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new _n(md);const i=this.an(t,e);if(null==i)return r;const u=U_(t);if(null!=u){const c=e.data.field(u.fieldPath);if(zs(c))for(const p of c.arrayValue.values||[])r=r.add(new Mo(t.indexId,e.key,this.on(p),i))}else r=r.add(new Mo(t.indexId,e.key,yd,i));return r}gn(e,t,r,i,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,T,M){const F=p.getIterator(),V=y.getIterator();let j=Rh(F),re=Rh(V);for(;j||re;){let Ee=!1,Le=!1;if(j&&re){const Xe=b(j,re);Xe<0?Le=!0:Xe>0&&(Ee=!0)}else null!=j?Le=!0:Ee=!0;Ee?(T(re),re=Rh(V)):Le?(M(j),j=Rh(F)):(j=Rh(F),re=Rh(V))}}(i,u,md,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),ie.waitFor(c)}_n(e){let t=1;return xl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>md(c,p)).filter((c,p,y)=>!p||0!==md(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=md(c,e),y=md(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&y<0)i.push(c),i.push(c.Ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,yd,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,yd,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xv)}getMinOffset(e,t){return ie.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||nt())).next(xv)}}function Mv(n){return Wt(n,"collectionParents")}function Jh(n){return Wt(n,"indexEntries")}function Xh(n){return Wt(n,"indexConfiguration")}function xl(n){return Wt(n,"indexState")}function xv(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;B_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Mi(e.readTime,e.documentKey,t)}const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Nv(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Z({range:c},(T,M,F)=>(p++,F.delete()));u.push(y.next(()=>{At(1===p)}));const b=[];for(const T of t.mutations){const M=vv(e,T.key.path,t.batchId);u.push(i.delete(M)),b.push(T.key)}return ie.waitFor(u).next(()=>b)}function Pp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(41943040,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);class Rp{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Rp(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return du(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=ef(e),c=du(e);return c.add({}).next(p=>{At("number"==typeof p);const y=new Om(p,t,r,i),b=function(F,V,j){const re=j.baseMutations.map(Le=>Op(F.re,Le)),Ee=j.mutations.map(Le=>Op(F.re,Le));return{userId:V,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:re,mutations:Ee}}(this.It,this.userId,y),T=[];let M=new _n((F,V)=>Rt(F.canonicalString(),V.canonicalString()));for(const F of i){const V=vv(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),T.push(c.put(b)),T.push(u.put(V,nb))}return M.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[p]=y.keys()}),ie.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return du(e).get(t).next(r=>r?(At(r.userId===this.userId),Al(this.It,r)):null)}Tn(e,t){return this.In[t]?ie.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return du(e).Z({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(At(p.batchId>=r),u=Al(this.It,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return du(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return du(e).W("userMutationsIndex",t).next(r=>r.map(i=>Al(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return ef(e).Z({range:i},(c,p,y)=>{const[b,T,M]=c,F=Ws(T);if(b===this.userId&&t.path.isEqual(F))return du(e).get(M).next(V=>{if(!V)throw nt();At(V.userId===this.userId),u.push(Al(this.It,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Rt);const i=[];return t.forEach(u=>{const c=xm(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=ef(e).Z({range:p},(b,T,M)=>{const[F,V,j]=b,re=Ws(V);F===this.userId&&u.path.isEqual(re)?r=r.add(j):M.done()});i.push(y)}),ie.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=xm(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new _n(Rt);return ef(e).Z({range:c},(y,b,T)=>{const[M,F,V]=y,j=Ws(F);M===this.userId&&r.isPrefixOf(j)?j.length===i&&(p=p.add(V)):T.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(du(e).get(u).next(c=>{if(null===c)throw nt();At(c.userId===this.userId),r.push(Al(this.It,c))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Nv(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ef(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Ws(u[1]);i.push(y)}else p.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return kv(e,this.userId,t)}Rn(e){return bb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kv(n,e,t){const r=xm(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return ef(n).Z({range:u,X:!0},(p,y,b)=>{const[T,M,F]=p;T===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function du(n){return Wt(n,"mutations")}function ef(n){return Wt(n,"documentMutations")}function bb(n){return Wt(n,"mutationQueues")}class _d{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new _d(0)}static vn(){return new _d(-1)}}class qD{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new _d(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tf(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return tf(e).Z((c,p)=>{const y=Np(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ie.waitFor(u)).next(()=>i)}forEachTarget(e,t){return tf(e).Z((r,i)=>{const u=Np(i);t(u)})}Vn(e){return Cb(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}Sn(e,t){return Cb(e).put("targetGlobalKey",t)}Dn(e,t){return tf(e).put(Tv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Il(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return tf(e).Z({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=Np(p);rd(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ol(e);return t.forEach(c=>{const p=li(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ol(e);return ie.forEach(t,u=>{const c=li(u.path);return ie.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ol(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ol(e);let u=Lt();return i.Z({range:r,X:!0},(c,p,y)=>{const b=Ws(c[1]),T=new Ge(b);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=li(t.path),i=IDBKeyRange.bound([r],[Zc(r)],!1,!0);let u=0;return Ol(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return tf(e).get(t).next(r=>r?Np(r):null)}}function tf(n){return Wt(n,"targets")}function Cb(n){return Wt(n,"targetGlobal")}function Ol(n){return Wt(n,"targetDocuments")}function Ib([n,e],[t,r]){const i=Rt(n,t);return 0===i?Rt(e,r):i}class WD{constructor(e){this.xn=e,this.buffer=new _n(Ib),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ib(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_i(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nu(r)}yield t.Fn(3e5)}))}}class KD{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(ii.at);const r=new WD(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Ov)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,y,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Nt()<=oa.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class YD{constructor(e,t){this.db=e,this.garbageCollector=new KD(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Pm(e,r)}removeReference(e,t,r){return Pm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pm(e,t)}Gn(e,t){return function(r,i){let u=!1;return bb(r).tt(c=>kv(r,c,i).next(p=>(p&&(u=!0),ie.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const y=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),Ol(e).delete([0,li(c.path)])))});i.push(y)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pm(e,t)}Kn(e,t){const r=Ol(e);let i,u=ii.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==ii.at&&t(new Ge(Ws(i)),u),u=b,i=y):u=ii.at}).next(()=>{u!==ii.at&&t(new Ge(Ws(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pm(n,e){return Ol(n).put((r=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:r}));var r}class Db{constructor(){this.changes=new fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nl(e).put(r)}removeEntry(e,t,r){return Nl(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cu(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nf(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return Nl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nf(t))},(i,u)=>{r={document:this.jn(t,u),size:Pp(u)}}).next(()=>r)}getEntries(e,t){let r=vi();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=vi(),i=new $n(Ge.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,Pp(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ie.resolve();let i=new _n(Rv);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(nf(i.first()),nf(i.last())),c=i.getIterator();let p=c.getNext();return Nl(e).Z({index:"documentKeyIndex",range:u},(y,b,T)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Rv(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?T.j(nf(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),cu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nl(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=vi();for(const y of c){const b=this.jn(Ge.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=vi();const c=Pv(t,r),p=Pv(t,Mi.max());return Nl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,T)=>{const M=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new JD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Sb(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Qn(e,t){return Sb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function yb(n,e){let t;if(e.document)t=hv(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=pd(e.noDocument.readTime);t=hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ge.fromSegments(e.unknownDocument.path),i=pd(e.unknownDocument.version);t=hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Hn(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return hn.newInvalidDocument(e)}}function Tb(n){return new QD(n)}class JD extends Db{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new fa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((u,c)=>Rt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=Dv(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Pp(y)-p.size,t.push(this.Yn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=Dv(this.Yn.It,c.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Sb(n){return Wt(n,"remoteDocumentGlobal")}function Nl(n){return Wt(n,"remoteDocumentsV14")}function nf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pv(n,e){const t=e.documentKey.path.toArray();return[n,cu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Rv(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Rt(t[u],r[u]),i)return i;return i=Rt(t.length,r.length),i||(i=Rt(t[t.length-2],r[r.length-2]),i||Rt(t[t.length-1],r[r.length-1]))}class Ab{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Dp(r.mutation,i,Yi.empty(),Hn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Lt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Lt()){const i=pa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Tp();return u.forEach((p,y)=>{c=c.insert(p,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=pa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Lt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=vi();const c=Sp(),p=Sp();return t.forEach((y,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof uu)?u=u.insert(b.key,b):void 0!==T&&(c.set(b.key,T.mutation.getFieldMask()),Dp(T.mutation,b,T.mutation.getFieldMask(),Hn.now()))}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((b,T)=>c.set(b,T)),t.forEach((b,T)=>{var M;return p.set(b,new Ab(T,null!==(M=c.get(b))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Sp();let i=new $n((c,p)=>c-p),u=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(y=>{const b=t.get(y);if(null===b)return;let T=r.get(y)||Yi.empty();T=p.applyToLocalView(b,T),r.set(y,T);const M=(i.get(p.batchId)||Lt()).add(y);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),b=y.key,T=y.value,M=ZE();T.forEach(F=>{if(!u.has(F)){const V=Cp(t.get(F),r.get(F));null!==V&&M.set(F,V),u=u.add(F)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):X_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ie.resolve(pa());let p=-1,y=u;return c.next(b=>ie.forEach(b,(T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(T)?ie.resolve():this.getBaseDocument(e,T,M).next(F=>{y=y.insert(T,F)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,y,b,Lt())).next(T=>({batchId:p,changes:WE(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=Tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Tp();return this.indexManager.getCollectionParents(e,i).next(c=>ie.forEach(c,p=>{const y=(b=t,T=p.child(i),new ou(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(b=>{b.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,y)=>{const b=y.getKey();null===i.get(b)&&(i=i.insert(b,hn.newInvalidDocument(b)))});let c=Tp();return i.forEach((p,y)=>{const b=u.get(p);void 0!==b&&Dp(b.mutation,y,Yi.empty(),Hn.now()),tv(t,y)&&(c=c.insert(p,y))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(hn.newInvalidDocument(t))}}class Mb{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jn(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:_b(r.bundledQuery),readTime:Jn(r.readTime)}),ie.resolve();var r}}class xb{constructor(){this.overlays=new $n(Ge.comparator),this.es=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pa();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=pa(),u=t.length+1,c=new Ge(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new $n((b,T)=>b-T);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=u.get(b.largestBatchId);null===T&&(T=pa(),u=u.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const p=pa(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,T)=>p.set(b,T)),!(p.size()>=i)););return ie.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Iv(t,r));let u=this.es.get(t);void 0===u&&(u=Lt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Rm{constructor(){this.ns=new _n(kr.ss),this.rs=new _n(kr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new kr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new kr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new tn([])),r=new kr(t,e),i=new kr(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new tn([])),r=new kr(t,e),i=new kr(t,e+1);let u=Lt();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new kr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Rt(e._s,t._s)}static os(e,t){return Rt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class Lv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _n(kr.ss)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new Om(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new kr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),i=new kr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Rt);return t.forEach(i=>{const u=new kr(i,0),c=new kr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),ie.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new kr(new Ge(u),0);let p=new _n(Rt);return this.gs.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y._s)),!0)},c),ie.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ie.forEach(t.mutations,i=>{const u=new kr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new kr(t,0),i=this.gs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vd{constructor(e){this.Es=e,this.docs=new $n(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():hn.newInvalidDocument(i))}),ie.resolve(r)}getAllFromCollection(e,t,r){let i=vi();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||B_(_D(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ie.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}As(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XD(this)}getSize(e){return ie.resolve(this.size)}}class XD extends Db{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class eT{constructor(e){this.persistence=e,this.Rs=new fa(t=>Il(t),rd),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rm,this.targetCount=0,this.vs=_d.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new _d(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Dn(t),ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ie.waitFor(u).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ps.containsKey(t))}}class wd{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ii(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new eT(this),this.indexManager=new Eb,this.remoteDocumentCache=new vd(r=>this.referenceDelegate.xs(r)),this.It=new mb(t),this.Ns=new Mb(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Lv(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new _M(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Ms(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Os(e,t){return ie.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class _M extends Yc{constructor(e){super(),this.currentSequenceNumber=e}}class rf{constructor(e){this.persistence=e,this.Fs=new Rm,this.$s=null}static Bs(e){return new rf(e)}get Ls(){if(this.$s)return this.$s;throw nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ls,r=>{const i=Ge.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ie.or([()=>ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class vM{constructor(e){this.It=e}$(e,t,r,i){const u=new Ki("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_v,{unique:!0}),p.createObjectStore("documentMutations"),Vv(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Vv(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_v,{unique:!0});const T=y.store("mutations"),M=b.map(F=>T.put(F));return ie.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:cb});y.createIndex("collectionPathOverlayIndex",db,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",hb,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:rb});y.createIndex("documentKeyIndex",ib),y.createIndex("collectionGroupIndex",LD)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:ob}).createIndex("sequenceNumberIndex",ab,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:ub}).createIndex("documentKeyIndex",lb,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Pp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ie.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>ie.forEach(p,y=>{At(y.userId===u.userId);const b=Al(this.It,y);return Nv(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const y=new tn(c),b=[0,li(y)];u.push(t.get(b).next(T=>T?ie.resolve():t.put({targetId:0,path:li(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:wv});const r=t.store("collectionParents"),i=new km,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:li(y)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const y=new tn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,y],b)=>{const T=Ws(p);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Np(i),c=Tv(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new Ge(tn.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>ie.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Tb(this.It),u=new wd(rf.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(y=>{var b;let T=null!==(b=p.get(y.userId))&&void 0!==b?b:Lt();Al(this.It,y).keys().forEach(M=>T=T.add(M)),p.set(y.userId,T)}),ie.forEach(p,(y,b)=>{const T=new Gr(b),M=Ji.oe(this.It,T),F=u.getIndexManager(T),V=Rp.oe(T,this.It,F,u.referenceDelegate);return new Fv(i,V,M,F).recalculateAndSaveOverlaysForDocumentKeys(new bv(t,ii.at),y).next()})})}}function Vv(n){n.createObjectStore("targetDocuments",{keyPath:UD}).createIndex("documentTargetsIndex",sb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VD,{unique:!0}),n.createObjectStore("targetGlobal")}const Fm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ob{constructor(e,t,r,i,u,c,p,y,b,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=b,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!Ob.C())throw new Oe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YD(this,i),this.ii=t+"main",this.It=new mb(y),this.ri=new Gs(this.ii,this.Xs,new vM(this.It)),this.Cs=new qD(this.referenceDelegate,this.It),this.remoteDocumentCache=Tb(this.It),this.Ns=new BD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,Fm);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ii(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,de.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,de.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(_i(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return mt(e).get("owner").next(t=>ie.resolve(this.mi(t)))}gi(e){return Lm(e).delete(this.clientId)}yi(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Wt(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return ie.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ie.resolve(!0):mt(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,Fm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lm(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bv(t,ii.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Lm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Rp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zD(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Ji.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?gb:14===c?pb:13===c?fb:12===c?yM:11===c?Ev:void nt();var c;let p;return this.ri.runTransaction(e,i,u,y=>(p=new bv(y,this.Ss?this.Ss.next():ii.at),"readwrite-primary"===t?this.fi(p).next(b=>!!b||this.di(p)).next(b=>{if(!b)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Oe(he.FAILED_PRECONDITION,vD);return r(p)}).next(b=>this.wi(p).next(()=>b)):this.Vi(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}Vi(e){return mt(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(he.FAILED_PRECONDITION,Fm)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mt(e).put("owner",t)}static C(){return Gs.C()}_i(e){const t=mt(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mt(n){return Wt(n,"owner")}function Lm(n){return Wt(n,"clientMetadata")}function Uv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Bv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Lt(),i=Lt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Bv(e,t.fromCache,r,i)}}class Ed{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Mi(e,t,i,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(VE(t))return ie.resolve(null);let r=xi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=gm(t,null,"F"),r=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Lt(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(y=>{const b=this.Fi(t,p);return this.$i(t,b,c,y.readTime)?this.ki(e,gm(t,null,"F")):this.Bi(e,b,t,y)}))})))}Mi(e,t,r,i){return VE(t)||i.isEqual(bt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Oi(e,t):(Nt()<=oa.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ev(t)),this.Bi(e,c,t,rm(i,-1)))})}Fi(e,t){let r=new _n(nv(e));return t.forEach((i,u)=>{tv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Oi(e,t){return Nt()<=oa.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",ev(t)),this.Ni.getDocumentsMatchingQuery(e,t,Mi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class tT{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new $n(Rt),this.qi=new fa(u=>Il(u),rd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Fp(n,e,t,r){return new tT(n,e,t,r)}function Lp(n,e){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,de.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=Lt();for(const b of i){c.push(b.batchId);for(const T of b.mutations)y=y.add(T.key)}for(const b of u){p.push(b.batchId);for(const T of b.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:p}))})})}),Gn.apply(this,arguments)}function wM(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const T=y.batch,M=T.keys();let F=ie.resolve();return M.forEach(V=>{F=F.next(()=>b.getEntry(p,V)).next(j=>{const re=y.docVersions.get(V);At(null!==re),j.version.compareTo(re)<0&&(T.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),b.addEntry(j)))})}),F.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=Lt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(p=p.add(c.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function jv(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Nb(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((T,M)=>{const F=i.get(M);if(!F)return;p.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,M)));let V=F.withSequenceNumber(u.currentSequenceNumber);var j,re,Ee;e.targetMismatches.has(M)?V=V.withResumeToken(Nr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,r)),i=i.insert(M,V),re=V,Ee=T,(0===(j=F).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,V))});let y=vi(),b=Lt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(kb(u,c,e.documentUpdates).next(T=>{y=T.Wi,b=T.zi})),!r.isEqual(bt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(T)}return ie.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,b)).next(()=>y)}).then(u=>(t.Ui=i,u))}function kb(n,e,t){let r=Lt(),i=Lt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=vi();return t.forEach((p,y)=>{const b=u.get(p);y.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(p)),y.isNoDocument()&&y.version.isEqual(bt.min())?(e.removeEntry(p,y.readTime),c=c.insert(p,y)):!b.isValidDocument()||y.version.compareTo(b.version)>0||0===y.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(y),c=c.insert(p,y)):Ne("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",y.version)}),{Wi:c,zi:i}})}function Pb(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bd(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ie.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new lu(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Cd(n,e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,de.Z)(function*(n,e,t){const r=We(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!_i(c))throw c;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Vm.apply(this,arguments)}function Um(n,e,t){const r=We(n);let i=bt.min(),u=Lt();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const T=We(p),M=T.qi.get(b);return void 0!==M?ie.resolve(T.Ui.get(M)):T.Cs.getTargetData(y,b)}(r,c,xi(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:bt.min(),t?u:Lt())).next(p=>(sf(r,MD(e),p),{documents:p,Hi:u})))}function Rb(n,e){const t=We(n),r=We(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Fb(n,e){const t=We(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,rm(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(sf(t,e,i),i))}function sf(n,e,t){let r=bt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Hv(){return Hv=(0,de.Z)(function*(n,e,t,r){const i=We(n);let u=Lt(),c=vi();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(u=u.add(T));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(T,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield bd(i,(b=r,xi(sd(tn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>kb(b,p,c).next(T=>(p.apply(b),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.Cs.addMatchingKeys(b,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),Hv.apply(this,arguments)}function rT(n,e){return af.apply(this,arguments)}function af(){return af=(0,de.Z)(function*(n,e,t=Lt()){const r=yield bd(n,xi(_b(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Jn(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(Nr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),af.apply(this,arguments)}function $v(n,e){return`firestore_clients_${n}_${e}`}function Gv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bm(n,e){return`firestore_targets_${n}_${e}`}class jm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Oe(i.error.code,i.error.message))),c?new jm(e,t,i.state,u):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Oe(r.error.code,r.error.message))),u?new hu(e,r.state,i):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=bm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=bD(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new kl(e,u):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zv(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qv{constructor(){this.activeTargetIds=bm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wv{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $n(Rt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=$v(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new qv),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem($v(e.persistenceKey,i));if(u){const c=kl.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Bm(this.persistenceKey,e));if(r){const i=hu.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=ii.at;if(null!=u)try{const p=JSON.parse(u);At("number"==typeof p),c=p}catch(p){ar("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==ii.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new jm(this.currentUser,e,t,r),u=Gv(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=Gv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Bm(this.persistenceKey,e),u=new hu(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return kl.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return jm.Zi(new Gr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return hu.Zi(i,t)}yr(e){return zv.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=bm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Zv{constructor(){this.Lr=new qv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new qv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lb{qr(e){}shutdown(){}}class Kv{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Vb{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class sT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ao(e,t);Ne("RestConnection","Sending: ",c,r);const p={};return this.ho(p,i,u),this.lo(e,c,p,r).then(y=>(Ne("RestConnection","Received: ",y),y),y=>{throw qc("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}fo(e,t,r,i,u,c){return this.co(e,t,r,i,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ao(e,t){return`${this.oo}/v1/${t}:${iT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((u,c)=>{const p=new fD;p.listenOnce(dD.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case vs.NO_ERROR:const b=p.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(b)),u(b);break;case vs.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),c(new Oe(he.DEADLINE_EXCEEDED,"Request time out"));break;case vs.HTTP_ERROR:const T=p.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(V){const j=V.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(j)>=0?j:he.UNKNOWN}(M.status);c(new Oe(F,M.message))}else c(new Oe(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Oe(he.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lD(),c=cD(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new hD({})),this.ho(p.initMessageHeaders,t,r),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Ne("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let T=!1,M=!1;const F=new Vb({Hr:j=>{M?Ne("Connection","Not sending because WebChannel is closed:",j):(T||(Ne("Connection","Opening WebChannel transport."),b.open(),T=!0),Ne("Connection","WebChannel sending:",j),b.send(j))},Jr:()=>b.close()}),V=(j,re,Ee)=>{j.listen(re,Le=>{try{Ee(Le)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return V(b,em.EventType.OPEN,()=>{M||Ne("Connection","WebChannel transport opened.")}),V(b,em.EventType.CLOSE,()=>{M||(M=!0,Ne("Connection","WebChannel transport closed"),F.io())}),V(b,em.EventType.ERROR,j=>{M||(M=!0,qc("Connection","WebChannel transport errored:",j),F.io(new Oe(he.UNAVAILABLE,"The operation could not be completed")))}),V(b,em.EventType.MESSAGE,j=>{var re;if(!M){const Ee=j.data[0];At(!!Ee);const Le=Ee,Xe=Le.error||(null===(re=Le[0])||void 0===re?void 0:re.error);if(Xe){Ne("Connection","WebChannel received error:",Xe);const pt=Xe.status;let it=function(Mt){const on=Ir[Mt];if(void 0!==on)return av(on)}(pt),Tt=Xe.message;void 0===it&&(it=he.INTERNAL,Tt="Unknown error status: "+pt+" with message "+Xe.message),M=!0,F.io(new Oe(it,Tt)),b.close()}else Ne("Connection","WebChannel received:",Ee),F.ro(Ee)}}),V(c,wE.STAT_EVENT,j=>{j.stat===EE.PROXY?Ne("Connection","Detected buffering proxy"):j.stat===EE.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function Ub(){return typeof window<"u"?window:null}function Yv(){return typeof document<"u"?document:null}function Hm(n){return new Zh(n,!0)}class Bb{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oT{constructor(e,t,r,i,u,c,p,y){this.Hs=e,this.Po=r,this.vo=i,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Bb(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,de.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,de.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,de.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Oe(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,de.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jb extends oT{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function YE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),i=e.targetChange.targetIds||[],u=function(y,b){return y.gt?(At(void 0===b||"string"==typeof b),Nr.fromBase64String(b||"")):(At(void 0===b||b instanceof Uint8Array),Nr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?he.UNKNOWN:av(y.code);return new Oe(b,y.message||"")}(c);t=new qh(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=To(n,r.document.name),u=Jn(r.document.updateTime),c=new lr({mapValue:{fields:r.document.fields}}),p=hn.newFoundDocument(i,u,c);t=new Cm(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=To(n,r.document),u=r.readTime?Jn(r.readTime):bt.min(),c=hn.newNoDocument(i,u);t=new Cm([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=To(n,r.document);t=new Cm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new RD(r.count||0);t=new Do(r.targetId,u)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return bt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Jn(u.readTime):bt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yh(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=bp(p)?{documents:JE(i,p)}:{query:pv(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=dd(i,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=ga(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function gv(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yh(this.It),t.removeTarget=e,this.Bo(t)}}class $m extends oT{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function QE(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let u=Jn(r.updateTime?r.updateTime:i);return u.isEqual(bt.min())&&(u=Jn(i)),new HE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.Zo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Op(this.It,r))};this.Bo(t)}}class aT extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.Vo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(he.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(he.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class uT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ar(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Hb{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,de.Z)(function*(){var y;Rl(c)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,de.Z)(function*(b){const T=We(b);T._u.add(4),yield uf(T),T.gu.set("Unknown"),T._u.delete(4),yield fu(T)}),function(b){return y.apply(this,arguments)})(c))}))}),this.gu=new uT(r,i)}}function fu(n){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,de.Z)(function*(n){if(Rl(n))for(const e of n.wu)yield e(!0)}),Qv.apply(this,arguments)}function uf(n){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,de.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Jv.apply(this,arguments)}function Gm(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Pl(t)?Xv(t):Id(t).ko()&&zm(t,e))}function Vp(n,e){const t=We(n),r=Id(t);t.du.delete(e),r.ko()&&$b(t,e),0===t.du.size&&(r.ko()?r.Fo():Rl(t)&&t.gu.set("Unknown"))}function zm(n,e){n.yu.Ot(e.targetId),Id(n).zo(e)}function $b(n,e){n.yu.Ot(e),Id(n).Ho(e)}function Xv(n){n.yu=new cd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Id(n).start(),n.gu.uu()}function Pl(n){return Rl(n)&&!Id(n).No()&&n.du.size>0}function Rl(n){return 0===We(n)._u.size}function ew(n){n.yu=void 0}function lT(n){return qm.apply(this,arguments)}function qm(){return qm=(0,de.Z)(function*(n){n.du.forEach((e,t)=>{zm(n,e)})}),qm.apply(this,arguments)}function cT(n,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,de.Z)(function*(n,e){ew(n),Pl(n)?(n.gu.hu(e),Xv(n)):n.gu.set("Unknown")}),Wm.apply(this,arguments)}function dT(n,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,de.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof qh&&2===e.state&&e.cause)try{yield(r=(0,de.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zm(n,r)}else if(e instanceof Cm?n.yu.Gt(e):e instanceof Do?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(bt.min()))try{const r=yield jv(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.du.get(y);b&&i.du.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.du.get(p);if(!y)return;i.du.set(p,y.withResumeToken(Nr.EMPTY_BYTE_STRING,y.snapshotVersion)),$b(i,p);const b=new lu(y.target,p,1,y.sequenceNumber);zm(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Zm(n,r)}var r}),Up.apply(this,arguments)}function Zm(n,e,t){return Km.apply(this,arguments)}function Km(){return Km=(0,de.Z)(function*(n,e,t){if(!_i(e))throw e;n._u.add(1),yield uf(n),n.gu.set("Offline"),t||(t=()=>jv(n.localStore)),n.asyncQueue.enqueueRetryable((0,de.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield fu(n)}))}),Km.apply(this,arguments)}function tw(n,e){return e().catch(t=>Zm(n,t,e))}function lf(n){return nw.apply(this,arguments)}function nw(){return nw=(0,de.Z)(function*(n){const e=We(n),t=Fl(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;hT(e);)try{const i=yield Pb(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,rw(e,i)}catch(i){yield Zm(e,i)}Gb(e)&&iw(e)}),nw.apply(this,arguments)}function hT(n){return Rl(n)&&n.fu.length<10}function rw(n,e){n.fu.push(e);const t=Fl(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Gb(n){return Rl(n)&&!Fl(n).No()&&n.fu.length>0}function iw(n){Fl(n).start()}function fT(n){return sw.apply(this,arguments)}function sw(){return sw=(0,de.Z)(function*(n){Fl(n).eu()}),sw.apply(this,arguments)}function pT(n){return ow.apply(this,arguments)}function ow(){return ow=(0,de.Z)(function*(n){const e=Fl(n);for(const t of n.fu)e.Xo(t.mutations)}),ow.apply(this,arguments)}function gT(n,e,t){return aw.apply(this,arguments)}function aw(){return aw=(0,de.Z)(function*(n,e,t){const r=n.fu.shift(),i=Cv.from(r,e,t);yield tw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield lf(n)}),aw.apply(this,arguments)}function mT(n,e){return uw.apply(this,arguments)}function uw(){return uw=(0,de.Z)(function*(n,e){var t;e&&Fl(n).Yo&&(yield(t=(0,de.Z)(function*(r,i){if(zE(u=i.code)&&u!==he.ABORTED){const c=r.fu.shift();Fl(r).Oo(),yield tw(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield lf(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Gb(n)&&iw(n)}),uw.apply(this,arguments)}function lw(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,de.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Rl(t);t._u.add(3),yield uf(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield fu(t)}),Ym.apply(this,arguments)}function cw(n,e){return dw.apply(this,arguments)}function dw(){return dw=(0,de.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield fu(t)):e||(t._u.add(2),yield uf(t),t.gu.set("Unknown"))}),dw.apply(this,arguments)}function Id(n){return n.pu||(n.pu=function(e,t,r){const i=We(e);return i.su(),new jb(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:lT.bind(null,n),Zr:cT.bind(null,n),Wo:dT.bind(null,n)}),n.wu.push(function(){var e=(0,de.Z)(function*(t){t?(n.pu.Oo(),Pl(n)?Xv(n):n.gu.set("Unknown")):(yield n.pu.stop(),ew(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Fl(n){return n.Iu||(n.Iu=function(e,t,r){const i=We(e);return i.su(),new $m(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:fT.bind(null,n),Zr:mT.bind(null,n),tu:pT.bind(null,n),Zo:gT.bind(null,n)}),n.wu.push(function(){var e=(0,de.Z)(function*(t){t?(n.Iu.Oo(),yield lf(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class hw{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new hw(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cf(n,e){if(ar("AsyncQueue",`${e}: ${n}`),_i(n))return new Oe(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Ll{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Tp(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Qm{constructor(){this.Tu=new $n(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):nt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Dd{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Dd(e,t,Ll.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class fw{constructor(){this.Au=void 0,this.listeners=[]}}class yT{constructor(){this.queries=new fa(e=>mm(e),Qi),this.onlineState="Unknown",this.Ru=new Set}}function pw(n,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,de.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new fw),i)try{u.Au=yield t.onListen(r)}catch(c){const p=cf(c,`Initialization of query '${ev(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mw(t)}),Bp.apply(this,arguments)}function gw(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,de.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Jm.apply(this,arguments)}function df(n,e){const t=We(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Pu(i)&&(r=!0);c.Au=i}}r&&mw(t)}function zb(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function mw(n){n.Ru.forEach(e=>{e.next()})}class qb{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class Wb{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Xm{constructor(e){this.It=e}Ji(e){return To(this.It,e)}Yi(e){return e.metadata.exists?hv(this.It,e.document,!1):hn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Jn(e)}}class _T{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ey(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new Xm(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||Lt()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function nT(n,e,t,r){return Hv.apply(this,arguments)}(e.localStore,new Xm(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield rT(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function ey(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Zb{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class ty{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Lt(),this.mutatedKeys=Lt(),this.Ku=nv(e),this.Gu=new Ll(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Qm,i=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const F=i.get(T),V=tv(this.query,M)?M:null,j=!!F&&this.mutatedKeys.has(F.key),re=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ee=!1;F&&V?F.data.isEqual(V.data)?j!==re&&(r.track({type:3,doc:V}),Ee=!0):this.zu(F,V)||(r.track({type:2,doc:V}),Ee=!0,(y&&this.Ku(V,y)>0||b&&this.Ku(V,b)<0)&&(p=!0)):!F&&V?(r.track({type:0,doc:V}),Ee=!0):F&&!V&&(r.track({type:1,doc:F}),Ee=!0,(y||b)&&(p=!0)),Ee&&(V?(c=c.add(V),u=re?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Gu:c,Wu:r,$i:p,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,T)=>function(M,F){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return V(M)-V(F)}(b.type,T.type)||this.Ku(b.doc,T.doc)),this.Hu(r);const c=t?this.Ju():[],p=0===this.qu.size&&this.current?1:0,y=p!==this.Uu;return this.Uu=p,0!==u.length||y?{snapshot:new Dd(this.query,e.Gu,i,u,e.mutatedKeys,0===p,y,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Qm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Lt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new yw(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new Zb(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Lt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Dd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Kb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Yb{constructor(e){this.key=e,this.ec=!1}}class Qb{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new fa(p=>mm(p),Qi),this.ic=new Map,this.rc=new Set,this.oc=new $n(Ge.comparator),this.uc=new Map,this.cc=new Rm,this.ac={},this.hc=new Map,this.lc=_d.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Jb(n,e){return _w.apply(this,arguments)}function _w(){return _w=(0,de.Z)(function*(n,e){const t=Nw(n);let r,i;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.tc();else{const c=yield bd(t.localStore,xi(e));t.isPrimaryClient&&Gm(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield vw(t,e,r,"current"===p)}return i}),_w.apply(this,arguments)}function vw(n,e,t,r){return ww.apply(this,arguments)}function ww(){return ww=(0,de.Z)(function*(n,e,t,r){n.dc=(T,M,F)=>{return(V=(0,de.Z)(function*(j,re,Ee,Le){let Xe=re.view.ju(Ee);Xe.$i&&(Xe=yield Um(j.localStore,re.query,!1).then(({documents:Tt})=>re.view.ju(Tt,Xe)));const pt=Le&&Le.targetChanges.get(re.targetId),it=re.view.applyChanges(Xe,j.isPrimaryClient,pt);return Sw(j,re.targetId,it.Yu),it.snapshot}),function(j,re,Ee,Le){return V.apply(this,arguments)})(n,T,M,F);var V};const i=yield Um(n.localStore,e,!0),u=new ty(e,i.Hi),c=u.ju(i.documents),p=ld.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);Sw(n,t,y.Yu);const b=new Kb(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),y.snapshot}),ww.apply(this,arguments)}function vT(n,e){return ny.apply(this,arguments)}function ny(){return ny=(0,de.Z)(function*(n,e){const t=We(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(u=>!Qi(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Cd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Vp(t.remoteStore,r.targetId),hf(t,r.targetId)}).catch(nu))):(hf(t,r.targetId),yield Cd(t.localStore,r.targetId,!0))}),ny.apply(this,arguments)}function ry(){return ry=(0,de.Z)(function*(n,e,t){const r=ff(n);try{const i=yield function(u,c){const p=We(u),y=Hn.now(),b=c.reduce((F,V)=>F.add(V.key),Lt());let T,M;return p.persistence.runTransaction("Locally write mutations","readwrite",F=>{let V=vi(),j=Lt();return p.Gi.getEntries(F,b).next(re=>{V=re,V.forEach((Ee,Le)=>{Le.isValidDocument()||(j=j.add(Ee))})}).next(()=>p.localDocuments.getOverlayedDocuments(F,V)).next(re=>{T=re;const Ee=[];for(const Le of c){const Xe=sv(Le,T.get(Le.key).overlayedDocument);null!=Xe&&Ee.push(new uu(Le.key,Xe,Ep(Xe.value.mapValue),Mn.exists(!0)))}return p.mutationQueue.addMutationBatch(F,y,Ee,c)}).next(re=>{M=re;const Ee=re.applyToLocalDocumentSet(T,j);return p.documentOverlayCache.saveOverlays(F,re.batchId,Ee)})}).then(()=>({batchId:M.batchId,changes:WE(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.ac[u.currentUser.toKey()];y||(y=new $n(Rt)),y=y.insert(c,p),u.ac[u.currentUser.toKey()]=y}(r,i.batchId,t),yield ya(r,i.changes),yield lf(r.remoteStore)}catch(i){const u=cf(i,"Failed to persist write");t.reject(u)}}),ry.apply(this,arguments)}function Xb(n,e){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,de.Z)(function*(n,e){const t=We(n);try{const r=yield Nb(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.uc.get(u);c&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?At(c.ec):i.removedDocuments.size>0&&(At(c.ec),c.ec=!1))}),yield ya(t,r,e)}catch(r){yield nu(r)}}),Ew.apply(this,arguments)}function wT(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((u,c)=>{const p=c.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=We(u);p.onlineState=c;let y=!1;p.queries.forEach((b,T)=>{for(const M of T.listeners)M.bu(c)&&(y=!0)}),y&&mw(p)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bM(n,e,t){return bw.apply(this,arguments)}function bw(){return bw=(0,de.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),u=i&&i.key;if(u){let c=new $n(Ge.comparator);c=c.insert(u,hn.newNoDocument(u,bt.min()));const p=Lt().add(u),y=new Mp(bt.min(),new Map,new _n(Rt),c,p);yield Xb(r,y),r.oc=r.oc.remove(u),r.uc.delete(e),sy(r)}else yield Cd(r.localStore,e,!1).then(()=>hf(r,e,t)).catch(nu)}),bw.apply(this,arguments)}function ET(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,de.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield wM(t.localStore,e);Tw(t,r,null),Dw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ya(t,i)}catch(i){yield nu(i)}}),iy.apply(this,arguments)}function eC(n,e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,de.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(u,c){const p=We(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.mutationQueue.lookupMutationBatch(y,c).next(T=>(At(null!==T),b=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>p.localDocuments.getDocuments(y,b))})}(r.localStore,e);Tw(r,e,t),Dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ya(r,i)}catch(i){yield nu(i)}}),Cw.apply(this,arguments)}function Iw(){return Iw=(0,de.Z)(function*(n,e){const t=We(n);Rl(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=We(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=cf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Iw.apply(this,arguments)}function Dw(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Tw(n,e,t){const r=We(n);let i=r.ac[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function hf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||tC(n,r)})}function tC(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Vp(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),sy(n))}function Sw(n,e,t){for(const r of t)r instanceof Zb?(n.cc.addReference(r.key,e),jp(n,r)):r instanceof yw?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||tC(n,r.key)):nt()}function jp(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.rc.add(r),sy(n))}function sy(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(tn.fromString(e)),r=n.lc.next();n.uc.set(r,new Yb(t)),n.oc=n.oc.insert(t,r),Gm(n.remoteStore,new lu(xi(sd(t.path)),r,2,ii.at))}}function ya(n,e,t){return oy.apply(this,arguments)}function oy(){return oy=(0,de.Z)(function*(n,e,t){const r=We(n),i=[],u=[],c=[];var p;r.sc.isEmpty()||(r.sc.forEach((p,y)=>{c.push(r.dc(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const T=Bv.Ci(y.targetId,b);u.push(T)}}))}),yield Promise.all(c),r.nc.Wo(i),yield(p=(0,de.Z)(function*(y,b){const T=We(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ie.forEach(b,F=>ie.forEach(F.Si,V=>T.persistence.referenceDelegate.addReference(M,F.targetId,V)).next(()=>ie.forEach(F.Di,V=>T.persistence.referenceDelegate.removeReference(M,F.targetId,V)))))}catch(M){if(!_i(M))throw M;Ne("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const V=T.Ui.get(F),re=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.Ui=T.Ui.insert(F,re)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),oy.apply(this,arguments)}function nC(n,e){return ay.apply(this,arguments)}function ay(){return ay=(0,de.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Lp(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(p=>{p.reject(new Oe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ya(t,r.ji)}var i}),ay.apply(this,arguments)}function rC(n,e){const t=We(n),r=t.uc.get(e);if(r&&r.ec)return Lt().add(r.key);{let i=Lt();const u=t.ic.get(e);if(!u)return i;for(const c of u){const p=t.sc.get(c);i=i.unionWith(p.view.Qu)}return i}}function CT(n,e){return iC.apply(this,arguments)}function iC(){return iC=(0,de.Z)(function*(n,e){const t=We(n),r=yield Um(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&Sw(t,e.targetId,i.Yu),i}),iC.apply(this,arguments)}function sC(n,e){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,de.Z)(function*(n,e){const t=We(n);return Fb(t.localStore,e).then(r=>ya(t,r))}),Aw.apply(this,arguments)}function IT(n,e,t,r){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,de.Z)(function*(n,e,t,r){const i=We(n),u=yield function(c,p){const y=We(c),b=We(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,p).next(M=>M?y.localDocuments.getDocuments(T,M):ie.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield lf(i.remoteStore):"acknowledged"===t||"rejected"===t?(Tw(i,e,r||null),Dw(i,e),p=e,We(We(i.localStore).mutationQueue).An(p)):nt(),yield ya(i,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),Mw.apply(this,arguments)}function Td(){return Td=(0,de.Z)(function*(n,e){const t=We(n);if(Nw(t),ff(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield oC(t,r.toArray());t.fc=!0,yield cw(t.remoteStore,!0);for(const u of i)Gm(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(hf(t,c),Cd(t.localStore,c,!0))),Vp(t.remoteStore,c)}),yield i,yield oC(t,r),function(u){const c=We(u);c.uc.forEach((p,y)=>{Vp(c.remoteStore,y)}),c.cc.fs(),c.uc=new Map,c.oc=new $n(Ge.comparator)}(t),t.fc=!1,yield cw(t.remoteStore,!1)}}),Td.apply(this,arguments)}function oC(n,e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,de.Z)(function*(n,e,t){const r=We(n),i=[],u=[];for(const c of e){let p;const y=r.ic.get(c);if(y&&0!==y.length){p=yield bd(r.localStore,xi(y[0]));for(const b of y){const T=r.sc.get(b),M=yield CT(r,T);M.snapshot&&u.push(M.snapshot)}}else{const b=yield Rb(r.localStore,c);p=yield bd(r.localStore,b),yield vw(r,xo(b),c,!1)}i.push(p)}return r.nc.Wo(u),i}),Hp.apply(this,arguments)}function xo(n){return LE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TT(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function xw(n,e,t,r){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,de.Z)(function*(n,e,t,r){const i=We(n);if(i.fc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=i.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Fb(i.localStore,MD(u[0])),p=Mp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ya(i,c,p);break}case"rejected":yield Cd(i.localStore,e,!0),hf(i,e,r);break;default:nt()}}),Sd.apply(this,arguments)}function ST(n,e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,de.Z)(function*(n,e,t){const r=Nw(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Ne("SyncEngine","Adding an already active target "+i);continue}const u=yield Rb(r.localStore,i),c=yield bd(r.localStore,u);yield vw(r,xo(u),c.targetId,!1),Gm(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield Cd(r.localStore,i,!1).then(()=>{Vp(r.remoteStore,i),hf(r,i)}).catch(nu))}}),Ow.apply(this,arguments)}function Nw(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bM.bind(null,e),e.nc.Wo=df.bind(null,e.eventManager),e.nc._c=zb.bind(null,e.eventManager),e}function ff(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ET.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eC.bind(null,e),e}class aC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.It=Hm(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Fp(this.persistence,new Ed,e.initialUser,this.It)}gc(e){return new wd(rf.Bs,this.It)}mc(e){return new Zv}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uC extends aC{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield ff(r.Ec.syncEngine),yield lf(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Fp(this.persistence,new Ed,e.initialUser,this.It)}Ic(e,t){return new ZD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new fM(t,this.persistence);return new AE(e.asyncQueue,r)}gc(e){const t=Uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new Ob(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ub(),Yv(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Zv}}class lC extends uC{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof Wv&&(r.sharedClientState.syncEngine={Fr:IT.bind(null,i),$r:xw.bind(null,i),Br:ST.bind(null,i),vi:TT.bind(null,i),Or:sC.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,de.Z)(function*(c){yield function DT(n,e){return Td.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=Ub();if(!Wv.C(t))throw new Oe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ly{initialize(e,t){var r=this;return(0,de.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>wT(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,r.syncEngine),yield cw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yT}createDatastore(e){const t=Hm(e.databaseInfo.databaseId),r=new sT(e.databaseInfo);return new aT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>wT(this.syncEngine,p,0),c=Kv.C()?new Kv:new Lb,new Hb(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const T=new Qb(r,i,u,c,p,y);return b&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const r=We(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield uf(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cy(n,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $p{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class AT{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(i);return new Wb(JSON.parse(u),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,de.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,de.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,de.Z)(function*(u,c){const p=We(u),y=Yh(p.It)+"/documents",b={documents:c.map(V=>ma(p.It,V))},T=yield p.fo("BatchGetDocuments",y,b,c.length),M=new Map;T.forEach(V=>{const j=function KE(n,e){return"found"in e?function(t,r){At(!!r.found);const i=To(t,r.found.name),u=Jn(r.found.updateTime),c=new lr({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=To(t,r.missing),u=Jn(r.readTime);return hn.newNoDocument(i,u)}(n,e):nt()}(p.It,V);M.set(j.key.toString(),j)});const F=[];return c.forEach(V=>{const j=M.get(V.toString());At(!!j),F.push(j)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new GE(u,e.precondition(u)))}),yield(r=(0,de.Z)(function*(i,u){const c=We(i),p=Yh(c.It)+"/documents",y={writes:u.map(b=>Op(c.It,b))};yield c.co("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Oe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CM{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new Bb(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,de.Z)(function*(){const t=new MT(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Oc(u)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!um(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!zE(t)}return!1}}class kw{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gr.UNAUTHENTICATED,this.clientId=V_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,de.Z)(function*(p){Ne("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ne("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=cf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function dy(n,e){return hy.apply(this,arguments)}function hy(){return hy=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,de.Z)(function*(u){r.isEqual(u)||(yield Lp(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),hy.apply(this,arguments)}function fy(n,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Pw(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>lw(e.remoteStore,u)),n.onlineComponents=e}),Gp.apply(this,arguments)}function Pw(n){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,de.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield dy(n,new aC)),n.offlineComponents}),Rw.apply(this,arguments)}function py(n){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,de.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield fy(n,new ly)),n.onlineComponents}),Fw.apply(this,arguments)}function Lw(n){return Pw(n).then(e=>e.persistence)}function pf(n){return Pw(n).then(e=>e.localStore)}function Vw(n){return py(n).then(e=>e.remoteStore)}function Uw(n){return py(n).then(e=>e.syncEngine)}function Ad(n){return gy.apply(this,arguments)}function gy(){return gy=(0,de.Z)(function*(n){const e=yield py(n),t=e.eventManager;return t.onListen=Jb.bind(null,e.syncEngine),t.onUnlisten=vT.bind(null,e.syncEngine),t}),gy.apply(this,arguments)}function hC(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(i,u,c,p,y){const b=new $p({next:M=>{u.enqueueAndForget(()=>gw(i,T));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Oe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Oe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),T=new qb(sd(c.path),b,{includeMetadataChanges:!0,Nu:!0});return pw(i,T)}(yield Ad(n),n.asyncQueue,e,t,r)})),r.promise}function Bw(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(i,u,c,p,y){const b=new $p({next:M=>{u.enqueueAndForget(()=>gw(i,T)),M.fromCache&&"server"===p.source?y.reject(new Oe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),T=new qb(c,b,{includeMetadataChanges:!0,Nu:!0});return pw(i,T)}(yield Ad(n),n.asyncQueue,e,t,r)})),r.promise}const kT=new Map;function pC(n,e,t){if(!t)throw new Oe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jw(n,e,t,r){if(!0===e&&!0===r)throw new Oe(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Hw(n){if(!Ge.isDocumentKey(n))throw new Oe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mf(n){if(Ge.isDocumentKey(n))throw new Oe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function my(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=my(n);throw new Oe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gC(n,e){if(e<=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $w{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $w({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $w(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Wc;switch(t.type){case"gapi":return new gD(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kT.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),kT.delete(e),t.terminate())}(this),Promise.resolve()}}class Pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Oo extends zr{constructor(e,t,r){super(e,t,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Ge(e))}withConverter(e){return new Oo(this.firestore,e,this._path)}}function Gw(n,e,...t){if(n=(0,jt.m9)(n),pC("collection","path",e),n instanceof zp){const r=tn.fromString(e,...t);return mf(r),new Oo(n,null,r)}{if(!(n instanceof Pn||n instanceof Oo))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return mf(r),new Oo(n.firestore,null,r)}}function pu(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=V_.R()),pC("doc","path",e),n instanceof zp){const r=tn.fromString(e,...t);return Hw(r),new Pn(n,null,new Ge(r))}{if(!(n instanceof Pn||n instanceof Oo))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return Hw(r),new Pn(n.firestore,n instanceof Oo?n.converter:null,new Ge(r))}}function RT(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof Pn||n instanceof Oo)&&(e instanceof Pn||e instanceof Oo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zw(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof zr&&e instanceof zr&&n.firestore===e.firestore&&Qi(n._query,e._query)&&n.converter===e.converter}class FT{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Bb(this,"async_queue_retry"),this.jc=()=>{const t=Yv();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Yv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Yv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Or;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,de.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!_i(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,ar("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=hw.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(i),i}Wc(){this.qc&&nt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function _y(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class yf{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends zp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new FT,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||VT(this),this._firestoreClient.terminate()}}function Dr(n){return n._firestoreClient||VT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VT(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mM(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new kw(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yC(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,de.Z)(function*(){try{yield dy(n,t),yield fy(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===he.FAILED_PRECONDITION||c.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;qc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function qw(n){if(n._initialized||n._terminated)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(Nr.fromBase64String(e))}catch(t){throw new Oe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new No(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(e){this._methodName=e}}class qp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const qT=/^__.*__$/;class WT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new $h(e,this.data,t,this.fieldTransforms)}}class ZT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ww(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class Zw{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Zw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Iy(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Ww(this.na)&&qT.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class IM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Hm(e)}fa(e,t,r,i=!1){return new Zw({na:e,methodName:t,la:r,path:ur.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function _f(n){const e=n._freezeSettings(),t=Hm(n._databaseId);return new IM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Kw(n,e,t,r,i,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,i);Cy("Data must be an object, but it was:",c,r);const p=YT(r,c);let y,b;if(u.merge)y=new Yi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const F=Qw(e,M,t);if(!c.contains(F))throw new Oe(he.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);CC(T,F)||T.push(F)}y=new Yi(T),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new WT(new lr(p),y,b)}class vy extends Vl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vy}}function KT(n,e,t){return new Zw({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class EC extends Vl{_toFieldTransform(e){return new Hh(e.path,new Bh)}isEqual(e){return e instanceof EC}}class DM extends Vl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=KT(this,e,!0),r=this.da.map(u=>Ul(u,t)),i=new au(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class wy extends Vl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=KT(this,e,!0),r=this.da.map(u=>Ul(u,t)),i=new jh(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class TM extends Vl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Dl(e.It,ym(e.It,this._a));return new Hh(e.path,t)}isEqual(e){return this===e}}function Ey(n,e,t,r){const i=n.fa(1,e,t);Cy("Data must be an object, but it was:",i,r);const u=[],c=lr.empty();ru(r,(y,b)=>{const T=Jw(e,y,t);b=(0,jt.m9)(b);const M=i.ua(T);if(b instanceof vy)u.push(T);else{const F=Ul(b,M);null!=F&&(u.push(T),c.set(T,F))}});const p=new Yi(u);return new ZT(c,p,i.fieldTransforms)}function vf(n,e,t,r,i,u){const c=n.fa(1,e,t),p=[Qw(e,r,t)],y=[i];if(u.length%2!=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(Qw(e,u[F])),y.push(u[F+1]);const b=[],T=lr.empty();for(let F=p.length-1;F>=0;--F)if(!CC(b,p[F])){const V=p[F];let j=y[F];j=(0,jt.m9)(j);const re=c.ua(V);if(j instanceof vy)b.push(V);else{const Ee=Ul(j,re);null!=Ee&&(b.push(V),T.set(V,Ee))}}const M=new Yi(b);return new ZT(T,M,c.fieldTransforms)}function Yw(n,e,t,r=!1){return Ul(t,n.fa(r?4:3,e))}function Ul(n,e){if(by(n=(0,jt.m9)(n)))return Cy("Unsupported field value:",e,n),YT(n,e);if(n instanceof Vl)return function(t,r){if(!Ww(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Ul(c,r.ca(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ym(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Hn.fromDate(t);return{timestampValue:ga(r.It,i)}}if(t instanceof Hn){const i=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ga(r.It,i)}}if(t instanceof qp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof No)return{bytesValue:dd(r.It,t._byteString)};if(t instanceof Pn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tl(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${my(t)}`)}(n,e)}function YT(n,e){const t={};return om(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(n,(r,i)=>{const u=Ul(i,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function by(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof qp||n instanceof No||n instanceof Pn||n instanceof Vl)}function Cy(n,e,t){if(!by(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=my(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function Qw(n,e,t){if((e=(0,jt.m9)(e))instanceof gu)return e._internalPath;if("string"==typeof e)return Jw(n,e);throw Iy("Field path arguments must be of type string or ",n,!1,void 0,t)}const bC=new RegExp("[~\\*/\\[\\]]");function Jw(n,e,t){if(e.search(bC)>=0)throw Iy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gu(...e.split("."))._internalPath}catch{throw Iy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Iy(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Oe(he.INVALID_ARGUMENT,p+n+y)}function CC(n,e){return n.some(t=>t.isEqual(e))}class Wp{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dy extends Wp{data(){return super.data()}}function Ty(n,e){return"string"==typeof e?Jw(n,e):e instanceof gu?e._internalPath:e._delegate._internalPath}class wf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends Wp{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sy extends Bl{data(e={}){return super.data(e)}}class jl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sy(this._firestore,this._userDataWriter,r.key,r,new wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Sy(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Sy(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:QT(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function IC(n,e){return n instanceof Bl&&e instanceof Bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof jl&&e instanceof jl&&n._firestore===e._firestore&&zw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function JT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zp{}function mu(n,...e){for(const t of e)n=t._apply(n);return n}class DC extends Zp{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=_f(e.firestore),r=function(i,u,c,p,y,b,T){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){n0(T,b);const V=[];for(const j of T)V.push(MC(p,i,j));M={arrayValue:{values:V}}}else M=MC(p,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||n0(T,b),M=Yw(c,"where",T,"in"===b||"not-in"===b);const F=ai.create(y,b,M);return function(V,j){if(j.dt()){const Ee=J_(V);if(null!==Ee&&!Ee.isEqual(j.field))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${j.field.toString()}'`);const Le=pm(V);null!==Le&&r0(0,j.field,Le)}const re=function(Ee,Le){for(const Xe of Ee.filters)if(Le.indexOf(Xe.op)>=0)return Xe.op;return null}(V,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==re)throw new Oe(he.INVALID_ARGUMENT,re===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${re.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new zr(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new ou(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ko extends Zp{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Uh(i,u);return function(p,y){if(null===pm(p)){const b=J_(p);null!==b&&r0(0,b,y.field)}}(r,c),c}(e._query,this.wa,this.ya);return new zr(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new ou(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ay extends Zp{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new zr(e.firestore,e.converter,gm(e._query,this.pa,this.Ia))}}class TC extends Zp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=t0(e,this.type,this.Ta,this.Ea);return new zr(e.firestore,e.converter,(i=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class SC extends Zp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=t0(e,this.type,this.Ta,this.Ea);return new zr(e.firestore,e.converter,(i=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function t0(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof Wp)return function(i,u,c,p,y){if(!p)throw new Oe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const T of od(i))if(T.field.isKeyField())b.push(su(u,p.key));else{const M=p.data.field(T.field);if(wp(M))throw new Oe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=T.field.canonicalString();throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new id(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_f(n.firestore);return function(u,c,p,y,b,T){const M=u.explicitOrderBy;if(b.length>M.length)throw new Oe(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let V=0;V<b.length;V++){const j=b[V];if(M[V].field.isKeyField()){if("string"!=typeof j)throw new Oe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof j}`);if(!X_(u)&&-1!==j.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${j}' contains a slash.`);const re=u.path.child(tn.fromString(j));if(!Ge.isDocumentKey(re))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const Ee=new Ge(re);F.push(su(c,Ee))}else{const re=Yw(p,y,j);F.push(re)}}return new id(F,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function MC(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&-1!==t.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Ge.isDocumentKey(r))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return su(n,new Ge(r))}if(t instanceof Pn)return su(n,t._key);throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${my(t)}.`)}function n0(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function r0(n,e,t){if(!t.isEqual(e))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const nS={maxAttempts:5};class My{convertValue(e,t="none"){switch(Fh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return ru(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new qp(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ED(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(am(e));default:return null}}convertTimestamp(e){const t=iu(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);At(mv(r));const i=new Xc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||ar(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class s0 extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}class yu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_f(e)}set(e,t,r){this._verifyNotCommitted();const i=_u(e,this._firestore),u=xy(i.converter,t,r),c=Kw(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Mn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=_u(e,this._firestore);let c;return c="string"==typeof(t=(0,jt.m9)(t))||t instanceof gu?vf(this._dataReader,"WriteBatch.update",u._key,t,r,i):Ey(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_u(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _u(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new Oe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pi extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}function xC(n){n=Gt(n,zr);const e=Gt(n.firestore,Rn),t=Dr(e),r=new Pi(e);return JT(n._query),Bw(t,n._query).then(i=>new jl(e,r,n,i))}function a0(n,e,t){n=Gt(n,Pn);const r=Gt(n.firestore,Rn),i=xy(n.converter,e,t);return Kp(r,[Kw(_f(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Mn.none())])}function Oy(n,e,t,...r){n=Gt(n,Pn);const i=Gt(n.firestore,Rn),u=_f(i);let c;return c="string"==typeof(e=(0,jt.m9)(e))||e instanceof gu?vf(u,"updateDoc",n._key,e,t,r):Ey(u,"updateDoc",n._key,e),Kp(i,[c.toMutation(n._key,Mn.exists(!0))])}function oS(n){return Kp(Gt(n.firestore,Rn),[new zh(n._key,Mn.none())])}function NC(n,...e){var t,r,i;n=(0,jt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||_y(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(_y(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,T;if(n instanceof Pn)b=Gt(n.firestore,Rn),T=sd(n._key.path),y={next:M=>{e[c]&&e[c](Yp(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Gt(n,zr);b=Gt(M.firestore,Rn),T=M._query;const F=new Pi(b);y={next:V=>{e[c]&&e[c](new jl(b,F,M,V))},error:e[c+1],complete:e[c+2]},JT(n._query)}return function(M,F,V,j){const re=new $p(j),Ee=new qb(F,re,V);return M.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return pw(yield Ad(M),Ee)})),()=>{re.Rc(),M.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return gw(yield Ad(M),Ee)}))}}(Dr(b),T,p,y)}function Kp(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function EM(n,e,t){return ry.apply(this,arguments)}(yield Uw(t),r,i)})),i.promise}(Dr(n),e)}function Yp(n,e,t){const r=t.docs.get(e._key),i=new Pi(n);return new Bl(n,i,e._key,r,new wf(t.hasPendingWrites,t.fromCache),e.converter)}class PC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_f(e)}get(e){const t=_u(e,this._firestore),r=new s0(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const u=i[0];if(u.isFoundDocument())return new Wp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Wp(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=_u(e,this._firestore),u=xy(i.converter,t,r),c=Kw(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=_u(e,this._firestore);let c;return c="string"==typeof(t=(0,jt.m9)(t))||t instanceof gu?vf(this._dataReader,"Transaction.update",u._key,t,r,i):Ey(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=_u(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_u(e,this._firestore),r=new Pi(this._firestore);return super.get(e).then(i=>new Bl(this._firestore,r,t._key,i._document,new wf(!1,!1),t.converter))}}function l0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lS(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function cS(){if(!function pM(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nh=Wi.SDK_VERSION,(0,Wi._registerComponent)(new oh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Rn(new F_(t.getProvider("auth-internal")),new hM(t.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(p.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(k_,"3.4.15",n),(0,Wi.registerVersion)(k_,"3.4.15","esm2017")}();class Ef{constructor(e){this._delegate=e}static fromBase64String(e){return cS(),new Ef(No.fromBase64String(e))}static fromUint8Array(e){return lS(),new Ef(No.fromUint8Array(e))}toBase64(){return cS(),this._delegate.toBase64()}toUint8Array(){return lS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function c0(n){return function dS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hS{enableIndexedDbPersistence(e,t){return function UT(n,e){qw(n=Gt(n,Rn));const t=Dr(n),r=n._freezeSettings(),i=new ly;return yC(t,i,new uC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function BT(n){qw(n=Gt(n,Rn));const e=Dr(n),t=n._freezeSettings(),r=new ly;return yC(e,r,new lC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _C(n){if(n._initialized&&!n._terminated)throw new Oe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(r){if(!Gs.C())return Promise.resolve();const i=r+"main";yield Gs.delete(i)}),function(r){return t.apply(this,arguments)})(Uv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function PT(n,e,t,r={}){var i;const u=(n=Gt(n,zp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&qc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Gr.MOCK_USER;else{c=(0,jt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Oe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Gr(y)}n._authCredentials=new pD(new R_(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function jT(n){return function xT(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield Lw(n),t=yield Vw(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i._u.delete(0),fu(i)}(t)}))}(Dr(n=Gt(n,Rn)))}(this._delegate)}disableNetwork(){return function wC(n){return function cC(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield Lw(n),t=yield Vw(n);return e.setNetworkEnabled(!1),(r=(0,de.Z)(function*(i){const u=We(i);u._u.add(0),yield uf(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Dr(n=Gt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vC(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function bT(n,e){return Iw.apply(this,arguments)}(yield Uw(e),t)})),t.promise}(Dr(n=Gt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function kC(n,e){return function ki(n,e){const t=new $p(e);return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield Ad(n),i=t,We(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield Ad(n),i=t,void We(r).Ru.delete(i);var r,i}))}}(Dr(n=Gt(n,Rn)),_y(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hl(this,Gw(this._delegate,e))}catch(t){throw Fi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ri(this,pu(this._delegate,e))}catch(t){throw Fi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ci(this,function yy(n,e){if(n=Gt(n,zp),pC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(n,null,(t=e,new ou(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function RC(n,e,t){n=Gt(n,Rn);const r=Object.assign(Object.assign({},nS),t);return function(i){if(i.maxAttempts<1)throw new Oe(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function gf(n,e,t){const r=new Or;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const i=yield(u=n,py(u).then(c=>c.datastore));var u;new CM(n.asyncQueue,i,t,e,r).run()})),r.promise}(Dr(n),i=>e(new PC(n,i)),r)}(this._delegate,t=>e(new pS(this,t)))}batch(){return Dr(this._delegate),new gS(new yu(this._delegate,e=>Kp(this._delegate,e)))}loadBundle(e){return function $T(n,e){const t=Dr(n=Gt(n,Rn)),r=new yf;return function OT(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return cy(y,b);if(y instanceof ArrayBuffer)return cy(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new AT(y,c);var y}(t,Hm(e));n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function uy(n,e,t){const r=We(n);var i;(i=(0,de.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,V){const j=We(F),re=Jn(V.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Ee=>j.Ns.getBundleMetadata(Ee,V.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(re)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(ey(y));const b=new _T(y,u.localStore,c.It);let T=yield c.wc();for(;T;){const F=yield b.Ou(T);F&&p._updateProgress(F),T=yield c.wc()}const M=yield b.complete();return yield ya(u,M.Bu,void 0),yield function(F,V){const j=We(F);return j.persistence.runTransaction("Save bundle","readwrite",re=>j.Ns.saveBundleMetadata(re,V))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.$u)}catch(y){return qc("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Uw(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GT(n,e){return function NT(n,e){return n.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield pf(n),e)}))}(Dr(n=Gt(n,Rn)),e).then(t=>t?new zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ci(this,t):null)}}class d0 extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(new No(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ri.forKey(t,this.firestore,null)}}class pS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new d0(e)}get(e){const t=vu(e);return this._delegate.get(t).then(r=>new Po(this._firestore,new Bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=vu(e);return r?(l0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=vu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=vu(e);return this._delegate.delete(t),this}}class gS{constructor(e){this._delegate=e}set(e,t,r){const i=vu(e);return r?(l0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=vu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=vu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Md{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Md.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Md(e,new d0(e),t),i.set(t,u)),u}}Md.INSTANCES=new WeakMap;class Ri{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new d0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ri(t,new Pn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Ri(t,new Pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hl(this.firestore,Gw(this._delegate,e))}catch(t){throw Fi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof Pn&&RT(this._delegate,e)}set(e,t){t=l0("DocumentReference.set",t);try{return t?a0(this._delegate,e,t):a0(this._delegate,e)}catch(r){throw Fi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Oy(this._delegate,e):Oy(this._delegate,e,t,...r)}catch(i){throw Fi(i,"updateDoc()","DocumentReference.update()")}}delete(){return oS(this._delegate)}onSnapshot(...e){const t=BC(e),r=h0(e,i=>new Po(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NC(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function rS(n){n=Gt(n,Pn);const e=Gt(n.firestore,Rn),t=Dr(e),r=new Pi(e);return function dC(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(i,u,c){try{const p=yield function(y,b){const T=We(y);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Oe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=cf(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield pf(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bl(e,r,n._key,i,new wf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function AM(n){n=Gt(n,Pn);const e=Gt(n.firestore,Rn);return hC(Dr(e),n._key,{source:"server"}).then(t=>Yp(e,n,t))}(this._delegate):function o0(n){n=Gt(n,Pn);const e=Gt(n.firestore,Rn);return hC(Dr(e),n._key).then(t=>Yp(e,n,t))}(this._delegate),t.then(r=>new Po(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ri(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function Fi(n,e,t){return n.message=n.message.replace(e,t),n}function BC(n){for(const e of n)if("object"==typeof e&&!c0(e))return e;return{}}function h0(n,e){var t,r;let i;return i=c0(n[0])?n[0]:c0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Po{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ri(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IC(this._delegate,e._delegate)}}class bf extends Po{data(e){const t=this._delegate.data(e);return function CE(n,e){n||nt()}(void 0!==t),t}}class ci{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new d0(e)}where(e,t,r){try{return new ci(this.firestore,mu(this._delegate,function SM(n,e,t){const r=e,i=Ty("where",n);return new DC(i,r,t)}(e,t,r)))}catch(i){throw Fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ci(this.firestore,mu(this._delegate,function XT(n,e="asc"){const t=e,r=Ty("orderBy",n);return new ko(r,t)}(e,t)))}catch(r){throw Fi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ci(this.firestore,mu(this._delegate,function eS(n){return gC("limit",n),new Ay("limit",n,"F")}(e)))}catch(t){throw Fi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ci(this.firestore,mu(this._delegate,function Zs(n){return gC("limitToLast",n),new Ay("limitToLast",n,"L")}(e)))}catch(t){throw Fi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ci(this.firestore,mu(this._delegate,function Xw(...n){return new TC("startAt",n,!0)}(...e)))}catch(t){throw Fi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ci(this.firestore,mu(this._delegate,function tS(...n){return new TC("startAfter",n,!1)}(...e)))}catch(t){throw Fi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ci(this.firestore,mu(this._delegate,function e0(...n){return new SC("endBefore",n,!1)}(...e)))}catch(t){throw Fi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ci(this.firestore,mu(this._delegate,function AC(...n){return new SC("endAt",n,!0)}(...e)))}catch(t){throw Fi(t,"endAt()","Query.endAt()")}}isEqual(e){return zw(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function iS(n){n=Gt(n,zr);const e=Gt(n.firestore,Rn),t=Dr(e),r=new Pi(e);return function fC(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(i,u,c){try{const p=yield Um(i,u,!0),y=new ty(u,p.Hi),b=y.ju(p.documents),T=y.applyChanges(b,!1);c.resolve(T.snapshot)}catch(p){const y=cf(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield pf(n),e,t);var r})),t.promise}(t,n._query).then(i=>new jl(e,r,n,i))}(this._delegate):"server"===e?.source?function sS(n){n=Gt(n,zr);const e=Gt(n.firestore,Rn),t=Dr(e),r=new Pi(e);return Bw(t,n._query,{source:"server"}).then(i=>new jl(e,r,n,i))}(this._delegate):xC(this._delegate),t.then(r=>new p0(this.firestore,new jl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BC(e),r=h0(e,i=>new p0(this.firestore,new jl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NC(this._delegate,t,r)}withConverter(e){return new ci(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}class f0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class p0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ci(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new f0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bf(this._firestore,r))})}isEqual(e){return IC(this._delegate,e._delegate)}}class Hl extends ci{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ri(this.firestore,e):null}doc(e){try{return new Ri(this.firestore,void 0===e?pu(this._delegate):pu(this._delegate,e))}catch(t){throw Fi(t,"doc()","CollectionReference.doc()")}}add(e){return function OC(n,e){const t=Gt(n.firestore,Rn),r=pu(n),i=xy(n.converter,e);return Kp(t,[Kw(_f(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ri(this.firestore,t))}isEqual(e){return RT(this._delegate,e._delegate)}withConverter(e){return new Hl(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function vu(n){return Gt(n,Pn)}class Cf{constructor(...e){this._delegate=new gu(...e)}static documentId(){return new Cf(ur.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof gu&&this._delegate._internalPath.isEqual(e._internalPath)}}class If{constructor(e){this._delegate=e}static serverTimestamp(){const e=function LC(){return new EC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new If(e)}static delete(){const e=function FC(){return new vy("deleteField")}();return e._methodName="FieldValue.delete",new If(e)}static arrayUnion(...e){const t=function VC(...n){return new DM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new If(t)}static arrayRemove(...e){const t=function Ny(...n){return new wy("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new If(t)}static increment(e){const t=function ky(n){return new TM("increment",n)}(e);return t._methodName="FieldValue.increment",new If(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OM={Firestore:fS,GeoPoint:qp,Timestamp:Hn,Blob:Ef,Transaction:pS,WriteBatch:gS,DocumentReference:Ri,DocumentSnapshot:Po,Query:ci,QueryDocumentSnapshot:bf,QuerySnapshot:p0,CollectionReference:Hl,FieldPath:Cf,FieldValue:If,setLogLevel:function xM(n){!function bE(n){vl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function kM(n){(function NM(n,e){n.INTERNAL.registerComponent(new oh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OM)))})(n,(e,t)=>new fS(e,t,new hS)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(ol.Z);var di=R(7579),mS=R(6451),Py=R(5363),Ry=R(8421);function qr(n,e){return(0,Bn.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,In.x)(r,y=>{i?.unsubscribe();let b=0;const T=u++;(0,Ry.Xf)(n(y,T)).subscribe(i=(0,In.x)(r,M=>r.next(e?e(y,M,T,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var jC=R(6063);class HC extends di.x{constructor(e=1/0,t=1/0,r=jC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var $C=R(3099);function GC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,$C.B)({connector:()=>new HC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Qp=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wu=R(515);function Fy(n){return n<=0?()=>wu.E:(0,Bn.e)((e,t)=>{let r=0;e.subscribe((0,In.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Jp(n){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ly(n=_S){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _S(){return new Qp}function Eu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,u)=>n(i,u,r)):sh.y,Fy(1),t?Jp(e):Ly(()=>new Qp))}function vS(n,e){return(0,ti.m)(e)?qr(()=>n,e):qr(()=>n)}var zC=R(9468);R(5867);const l=new Map,h={activated:!1,tokenObservers:[]},g={initialized:!1,enabled:!1};function _(n){return l.get(n)||h}function E(n,e){l.set(n,e)}function C(){return g}class Pe{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,de.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function qe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rt=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yt(n){if(!_(n).activated)throw rt.create("use-before-activation",{appName:n.name})}function bu(n,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,de.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const V=yield c.getHeartbeatsHeader();V&&(u["X-Firebase-Client"]=V)}const p={method:"POST",body:JSON.stringify(e),headers:u};let y,b;try{y=yield fetch(n,p)}catch(V){throw rt.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==y.status)throw rt.create("fetch-status-error",{httpStatus:y.status});try{b=yield y.json()}catch(V){throw rt.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw rt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(T[1]),F=Date.now();return{token:b.token,expireTimeMillis:F+M,issuedAtTimeMillis:F}}),Xp.apply(this,arguments)}function y0(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const xd="firebase-app-check-store";let Df=null;function FM(){return Df||(Df=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(rt.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(xd,{keyPath:"compositeKey"})}}catch(r){e(rt.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Df)}function bS(){return bS=(0,de.Z)(function*(n,e){const r=(yield FM()).transaction(xd,"readwrite"),u=r.objectStore(xd).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(rt.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),bS.apply(this,arguments)}const w0=new oa.Yd("@firebase/app-check");function BM(n,e){return(0,jt.hl)()?function Zk(n,e){return function LM(n,e){return bS.apply(this,arguments)}(function UM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{w0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jM(){return C().enabled}function HM(){return TS.apply(this,arguments)}function TS(){return TS=(0,de.Z)(function*(){const n=C();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TS.apply(this,arguments)}const eP={error:"UNKNOWN_ERROR"};function tP(n){return jt.US.encodeString(JSON.stringify(n),!1)}function ZC(n){return SS.apply(this,arguments)}function SS(){return SS=(0,de.Z)(function*(n,e=!1){const t=n.app;yt(t);const r=_(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&KC(y)&&(i=y)}if(!e&&i&&KC(i))return{token:i.token};let p,c=!1;if(jM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bu(y0(t,yield HM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield BM(t,y),E(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?w0.warn(y.message):w0.error(y),u=y}return i?(p={token:i.token},E(t,Object.assign(Object.assign({},r),{token:i})),yield BM(t,i)):p=rP(u),c&&GM(t,p),p}),SS.apply(this,arguments)}function MS(n,e){const t=_(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),E(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function $M(n){const{app:e}=n,t=_(e);let r=t.tokenRefresher;r||(r=function nP(n){const{app:e}=n;return new Pe((0,de.Z)(function*(){let r;if(r=_(e).token?yield ZC(n,!0):yield ZC(n),r.error)throw r.error}),()=>!0,()=>{const t=_(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),E(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function GM(n,e){const t=_(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function KC(n){return n.expireTimeMillis-Date.now()>0}function rP(n){return{token:tP(eP),error:n}}class iP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_(this.app);for(const t of e)MS(this.app,t.next);return Promise.resolve()}}const JM="app-check-internal";!function _P(){(0,Wi._registerComponent)(new oh.wA("app-check",n=>function sP(n,e){return new iP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JM).initialize()})),(0,Wi._registerComponent)(new oh.wA(JM,n=>function oP(n){return{getToken:e=>ZC(n,e),addTokenListener:e=>function AS(n,e,t,r){const{app:i}=n,u=_(i),c={next:t,error:r,type:e};if(E(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&KC(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),$M(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$M(n))}(n,"INTERNAL",e),removeTokenListener:e=>MS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wi.registerVersion)("@firebase/app-check","0.5.12")}();class kS{constructor(){return(0,Er.vb)("app-check")}}typeof window<"u"&&window;var ex=R(127);const tx=new d.OlP("angularfire2.auth.use-emulator"),nx=new d.OlP("angularfire2.auth.settings"),rx=new d.OlP("angularfire2.auth.tenant-id"),ix=new d.OlP("angularfire2.auth.langugage-code"),sx=new d.OlP("angularfire2.auth.use-device-language"),ox=new d.OlP("angularfire.auth.persistence"),ax=(n,e,t,r,i,u,c,p)=>(0,qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,T]of Object.entries(c))y.settings[b]=T;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let QC=(()=>{class n{constructor(t,r,i,u,c,p,y,b,T,M,F,V){const j=new di.x,re=Je(void 0).pipe((0,Py.Q)(c.outsideAngular),qr(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,2274)))),(0,_t.U)(()=>(0,qi.on)(t,u,r)),(0,_t.U)(Ee=>ax(Ee,u,p,b,T,M,y,F)),GC({bufferSize:1,refCount:!1}));if(wr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{re.pipe(Eu()).subscribe();const Le=re.pipe(qr(it=>it.getRedirectResult().then(Tt=>Tt,()=>null)),Er.iC,GC({bufferSize:1,refCount:!1})),Xe=re.pipe(qr(it=>new ei.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(Mt=>Tt.next(Mt),Mt=>Tt.error(Mt),()=>Tt.complete()))})))),pt=re.pipe(qr(it=>new ei.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(Mt=>Tt.next(Mt),Mt=>Tt.error(Mt),()=>Tt.complete()))}))));this.authState=Le.pipe(vS(Xe),(0,zC.R)(c.outsideAngular),(0,Py.Q)(c.insideAngular)),this.user=Le.pipe(vS(pt),(0,zC.R)(c.outsideAngular),(0,Py.Q)(c.insideAngular)),this.idToken=this.user.pipe(qr(it=>it?(0,en.D)(it.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(qr(it=>it?(0,en.D)(it.getIdTokenResult()):Je(null))),this.credential=(0,mS.T)(Le,j,this.authState.pipe(Ar(it=>!it))).pipe((0,_t.U)(it=>it?.user?it:null),(0,zC.R)(c.outsideAngular),(0,Py.Q)(c.insideAngular))}return(0,qi.pX)(this,re,u,{spy:{apply:(Ee,Le,Xe)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&Xe.then(pt=>j.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Er.HU),d.LFG(tx,8),d.LFG(nx,8),d.LFG(rx,8),d.LFG(ix,8),d.LFG(sx,8),d.LFG(ox,8),d.LFG(kS,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IP=(()=>{class n{constructor(){ex.Z.registerVersion("angularfire",Er.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[QC]}),n})();function ux(n,e){return function DP(n,e=Xy.z){return new ei.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function RS(n,e){return ux(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function JC(n,e){return RS(n,e).pipe(rh(void 0),ih(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(T=>T.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function lx(n,e,t){return JC(n,t).pipe(sl((r,i)=>function SP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function AP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Wf(n,e=sh.y){return n=n??e_,(0,Bn.e)((t,r)=>{let i,u=!0;t.subscribe((0,In.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function FS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function cx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(rh(void 0),ih(),Ar(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),Er.iC)}auditTrail(e){return this.stateChanges(e).pipe(sl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cx(e);return lx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return RS(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Er.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Er.iC)}add(e){return this.ref.add(e)}doc(e){return new hx(this.ref.doc(e),this.afs)}}class hx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=gx(r,t);return new dx(i,u,this.afs)}snapshotChanges(){return function TP(n,e){return ux(n,e).pipe(rh(void 0),ih(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(Er.iC)}}class MP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JC(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),Er.iC):JC(this.query,this.afs.schedulers.outsideAngular).pipe(Er.iC)}auditTrail(e){return this.stateChanges(e).pipe(sl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cx(e);return lx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return RS(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Er.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Er.iC)}}const fx=new d.OlP("angularfire2.enableFirestorePersistence"),px=new d.OlP("angularfire2.firestore.persistenceSettings"),xP=new d.OlP("angularfire2.firestore.settings"),OP=new d.OlP("angularfire2.firestore.use-emulator");function gx(n,e=(t=>t)){return{query:e(n),ref:n}}let XC=(()=>{class n{constructor(t,r,i,u,c,p,y,b,T,M,F,V,j,re,Ee,Le,Xe){this.schedulers=y;const pt=(0,qi.on)(t,p,r),it=T;M&&ax(pt,p,F,j,re,Ee,V,Le),[this.firestore,this.persistenceEnabled$]=(0,qi.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Tt=p.runOutsideAngular(()=>pt.firestore());if(u&&Tt.settings(u),it&&Tt.useEmulator(...it),i&&!wr(c)){const Mt=()=>{try{return(0,en.D)(Tt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(on){return typeof console<"u"&&console.warn(on),Je(!1)}};return[Tt,p.runOutsideAngular(Mt)]}return[Tt,Je(!1)]},[u,it,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=gx(i,r),p=this.schedulers.ngZone.run(()=>u);return new dx(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new MP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new hx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(fx,8),d.LFG(xP,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Er.HU),d.LFG(px,8),d.LFG(OP,8),d.LFG(QC,8),d.LFG(tx,8),d.LFG(nx,8),d.LFG(rx,8),d.LFG(ix,8),d.LFG(sx,8),d.LFG(ox,8),d.LFG(kS,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),NP=(()=>{class n{constructor(){ex.Z.registerVersion("angularfire",Er.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:fx,useValue:!0},{provide:px,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[XC]}),n})();const{isArray:kP}=Array,{getPrototypeOf:PP,prototype:RP,keys:FP}=Object;function mx(n){if(1===n.length){const e=n[0];if(kP(e))return{args:e,keys:null};if(function LP(n){return n&&"object"==typeof n&&PP(n)===RP}(e)){const t=FP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:VP}=Array;function yx(n){return(0,_t.U)(e=>function UP(n,e){return VP(e)?n(...e):n(e)}(n,e))}function _x(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let vx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),eg=(()=>{class n extends vx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const $l=new d.OlP("NgValueAccessor"),HP={provide:$l,useExisting:(0,d.Gpc)(()=>tg),multi:!0},GP=new d.OlP("CompositionEventMode");let tg=(()=>{class n extends vx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $P(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(GP,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([HP]),d.qOj]}),n})();const Xi=new d.OlP("NgValidators"),Sf=new d.OlP("NgAsyncValidators");function xx(n){return null!=n}function Ox(n){return(0,d.QGY)(n)?(0,en.D)(n):n}function Nx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function kx(n,e){return e.map(t=>t(n))}function Px(n){return n.map(e=>function WP(n){return!n.validate}(e)?e:t=>e.validate(t))}function LS(n){return null!=n?function Rx(n){if(!n)return null;const e=n.filter(xx);return 0==e.length?null:function(t){return Nx(kx(t,e))}}(Px(n)):null}function VS(n){return null!=n?function Fx(n){if(!n)return null;const e=n.filter(xx);return 0==e.length?null:function(t){return function BP(...n){const e=(0,Ls.jO)(n),{args:t,keys:r}=mx(n),i=new ei.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let T=0;T<c;T++){let M=!1;(0,Ry.Xf)(t[T]).subscribe((0,In.x)(u,F=>{M||(M=!0,b--),p[T]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?_x(r,p):p),u.complete())}))}});return e?i.pipe(yx(e)):i}(kx(t,e).map(Ox)).pipe((0,_t.U)(Nx))}}(Px(n)):null}function Lx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function US(n){return n?Array.isArray(n)?n:[n]:[]}function tI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bx(n,e){const t=US(e);return US(n).forEach(i=>{tI(t,i)||t.push(i)}),t}function jx(n,e){return US(e).filter(t=>!tI(n,t))}class Hx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class bs extends Hx{get formDirective(){return null}get path(){return null}}class Af extends Hx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $x{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let E0=(()=>{class n extends $x{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Af,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),BS=(()=>{class n extends $x{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(bs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const b0="VALID",rI="INVALID",By="PENDING",C0="DISABLED";function GS(n){return(iI(n)?n.validators:n)||null}function zx(n){return Array.isArray(n)?LS(n):n||null}function zS(n,e){return(iI(e)?e.asyncValidators:n)||null}function qx(n){return Array.isArray(n)?VS(n):n||null}function iI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Kx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=zx(this._rawValidators),this._composedAsyncValidatorFn=qx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===b0}get invalid(){return this.status===rI}get pending(){return this.status==By}get disabled(){return this.status===C0}get enabled(){return this.status!==C0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=zx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=qx(e)}addValidators(e){this.setValidators(Bx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jx(e,this._rawAsyncValidators))}hasValidator(e){return tI(this._rawValidators,e)}hasAsyncValidator(e){return tI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=By,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=b0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===b0||this.status===By)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C0:b0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=By,this._hasOwnPendingAsyncValidator=!0;const t=Ox(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?C0:this.errors?rI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(By)?By:this._anyControlsHaveStatus(rI)?rI:b0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class qS extends Kx{constructor(e,t,r){super(GS(t),zS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Zx(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Wx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function I0(n,e){WS(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function nR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Yx(n,e)})}(n,e),function iR(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Yx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function aI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WS(n,e){const t=function Vx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Lx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Ux(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Lx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();aI(e._rawValidators,i),aI(e._rawAsyncValidators,i)}function Yx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const lR={provide:bs,useExisting:(0,d.Gpc)(()=>T0)},D0=(()=>Promise.resolve(null))();let T0=(()=>{class n extends bs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new qS({},LS(t),VS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){D0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),I0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){D0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){D0.then(()=>{const r=this._findContainer(t.path),i=new qS({});(function Qx(n,e){WS(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){D0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){D0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Xx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xi,10),d.Y36(Sf,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([lR]),d.qOj]}),n})();function eO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nO=class extends Kx{constructor(e=null,t,r){super(GS(t),zS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},hR={provide:Af,useExisting:(0,d.Gpc)(()=>jy)},sO=(()=>Promise.resolve(null))();let jy=(()=>{class n extends Af{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new nO,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function KS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===tg?t=u:function aR(n){return Object.getPrototypeOf(n.constructor)===eg}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ZS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){I0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);sO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function sI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(bs,9),d.Y36(Xi,10),d.Y36(Sf,10),d.Y36($l,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([hR]),d.qOj,d.TTD]}),n})(),YS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),FR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[aO]}),n})(),LR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[FR]}),n})();class DO{}const Od="*";function BR(n,e){return{type:7,name:n,definitions:e,options:{}}}function TO(n,e=null){return{type:4,styles:e,timings:n}}function SO(n,e=null){return{type:2,steps:n,options:e}}function S0(n){return{type:6,styles:n,offset:null}}function rA(n,e,t){return{type:0,name:n,styles:e,options:t}}function AO(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function MO(n){Promise.resolve(null).then(n)}class A0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){MO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?MO(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function OO(n){return new d.vHH(3e3,!1)}function E1(){return typeof window<"u"&&typeof window.document<"u"}function sA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Mf(n){switch(n.length){case 0:return new A0;case 1:return n[0];default:return new xO(n)}}function NO(n,e,t,r,i=new Map,u=new Map){const c=[],p=[];let y=-1,b=null;if(r.forEach(T=>{const M=T.get("offset"),F=M==y,V=F&&b||new Map;T.forEach((j,re)=>{let Ee=re,Le=j;if("offset"!==re)switch(Ee=e.normalizePropertyName(Ee,c),Le){case"!":Le=i.get(re);break;case Od:Le=u.get(re);break;default:Le=e.normalizeStyleValue(re,Ee,Le,c)}V.set(Ee,Le)}),F||p.push(V),b=V,y=M}),c.length)throw function l1(n){return new d.vHH(3502,!1)}();return p}function oA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&aA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&aA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&aA(t,"destroy",n)))}}function aA(n,e,t){const u=uA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function uA(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Ro(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function kO(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let lA=(n,e)=>!1,PO=(n,e,t)=>[],RO=null;function cA(n){const e=n.parentNode||n.host;return e===RO?null:e}(sA()||typeof Element<"u")&&(E1()?(RO=(()=>document.documentElement)(),lA=(n,e)=>{for(;e;){if(e===n)return!0;e=cA(e)}return!1}):lA=(n,e)=>n.contains(e),PO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let rg=null,FO=!1;const LO=lA,VO=PO;let UO=(()=>{class n{validateStyleProperty(t){return function C1(n){rg||(rg=function I1(){return typeof document<"u"?document.body:null}()||{},FO=!!rg.style&&"WebkitAppearance"in rg.style);let e=!0;return rg.style&&!function b1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in rg.style,!e&&FO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in rg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return LO(t,r)}getParentElement(t){return cA(t)}query(t,r,i){return VO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new A0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),dA=(()=>{class n{}return n.NOOP=new UO,n})();const hA="ng-enter",lI="ng-leave",cI="ng-trigger",dI=".ng-trigger",jO="ng-animating",fA=".ng-animating";function xf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pA(parseFloat(e[1]),e[2])}function pA(n,e){return"s"===e?1e3*n:n}function hI(n,e,t){return n.hasOwnProperty("duration")?n:function S1(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(OO()),{duration:0,delay:0,easing:""};i=pA(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=pA(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function jR(){return new d.vHH(3100,!1)}()),p=!0),u<0&&(e.push(function HR(){return new d.vHH(3101,!1)}()),p=!0),p&&e.splice(y,0,OO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function M0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function HO(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Of(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function GO(n,e,t){return t?e+":"+t+";":""}function zO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=GO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=GO(0,O1(t),n.style[t]));n.setAttribute("style",e)}function Gl(n,e,t){n.style&&(e.forEach((r,i)=>{const u=mA(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),sA()&&zO(n))}function ig(n,e){n.style&&(e.forEach((t,r)=>{const i=mA(r);n.style[i]=""}),sA()&&zO(n))}function x0(n){return Array.isArray(n)?1==n.length?n[0]:SO(n):n}const gA=new RegExp("{{\\s*(.+?)\\s*}}","g");function qO(n){let e=[];if("string"==typeof n){let t;for(;t=gA.exec(n);)e.push(t[1]);gA.lastIndex=0}return e}function fI(n,e,t){const r=n.toString(),i=r.replace(gA,(u,c)=>{let p=e[c];return null==p&&(t.push(function GR(n){return new d.vHH(3003,!1)}()),p=""),p.toString()});return i==r?n:i}function pI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const x1=/-+([a-z0-9])/g;function mA(n){return n.replace(x1,(...e)=>e[1].toUpperCase())}function O1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function zR(n){return new d.vHH(3004,!1)}()}}function WO(n,e){return window.getComputedStyle(n)[e]}function L1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function V1(n,e,t){if(":"==n[0]){const y=function U1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function s1(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function i1(n){return new d.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(ZO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(ZO(c,i))}(r,t,e)):t.push(n),t}const _I=new Set(["true","1"]),vI=new Set(["false","0"]);function ZO(n,e){const t=_I.has(n)||vI.has(n),r=_I.has(e)||vI.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?_I.has(n):vI.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?_I.has(e):vI.has(e)),c&&p}}const B1=new RegExp("s*:selfs*,?","g");function yA(n,e,t,r){return new j1(n).build(e,t,r)}class j1{constructor(e){this._driver=e}build(e,t,r){const i=new G1(t);return this._resetContextStyleTimingState(i),Fo(this,x0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function WR(){return new d.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(T=>{y.name=T,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function ZR(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(y=>{qO(y).forEach(b=>{c.hasOwnProperty(b)||u.add(b)})})}),u.size&&(pI(u.values()),t.errors.push(function KR(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fo(this,x0(e.animation),t);return{type:1,matchers:L1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:sg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fo(this,r,t)),options:sg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Fo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:sg(e.options)}}visitAnimate(e,t){const r=function q1(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return _A(hI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=_A(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=hI(t,e);return _A(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:S0({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=S0(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of i)"string"==typeof p?p===Od?r.push(p):t.errors.push(new d.vHH(3002,!1)):r.push(HO(p));let u=!1,c=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(c=p.get("easing"),p.delete("easing")),!u))for(let y of p.values())if(y.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((p,y)=>{const b=t.collectedStyles.get(t.currentQuerySelector),T=b.get(y);let M=!0;T&&(u!=i&&u>=T.startTime&&i<=T.endTime&&(t.errors.push(function QR(n,e,t,r,i){return new d.vHH(3010,!1)}()),M=!1),u=T.startTime),M&&b.set(y,{startTime:u,endTime:i}),t.options&&function M1(n,e,t){const r=e.params||{},i=qO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function $R(n){return new d.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function JR(){return new d.vHH(3011,!1)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const T=e.steps.map(Le=>{const Xe=this._makeStyleAst(Le,t);let pt=null!=Xe.offset?Xe.offset:function z1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Xe.styles),it=0;return null!=pt&&(u++,it=Xe.offset=pt),y=y||it<0||it>1,p=p||it<b,b=it,c.push(it),Xe});y&&t.errors.push(function XR(){return new d.vHH(3012,!1)}()),p&&t.errors.push(function e1(){return new d.vHH(3200,!1)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function t1(){return new d.vHH(3202,!1)}()):0==u&&(F=1/(M-1));const V=M-1,j=t.currentTime,re=t.currentAnimateTimings,Ee=re.duration;return T.forEach((Le,Xe)=>{const pt=F>0?Xe==V?1:F*Xe:c[Xe],it=pt*Ee;t.currentTime=j+re.delay+it,re.duration=it,this._validateStyleAst(Le,t),Le.offset=pt,r.styles.push(Le)}),r}visitReference(e,t){return{type:8,animation:Fo(this,x0(e.animation),t),options:sg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:sg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:sg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function H1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(B1,"")),n=n.replace(/@\*/g,dI).replace(/@\w+/g,t=>dI+"-"+t.slice(1)).replace(/:animating/g,fA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Ro(t.collectedStyles,t.currentQuerySelector,new Map);const p=Fo(this,x0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:sg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function n1(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:hI(e.timings,t.errors,!0);return{type:12,animation:Fo(this,x0(e.animation),t),timings:r,options:null}}}class G1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function sg(n){return n?(n=M0(n)).params&&(n.params=function $1(n){return n?M0(n):null}(n.params)):n={},n}function _A(n,e,t){return{duration:n,delay:e,easing:t}}function vA(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class wI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const K1=new RegExp(":enter","g"),Q1=new RegExp(":leave","g");function wA(n,e,t,r,i,u=new Map,c=new Map,p,y,b=[]){return(new J1).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class J1{buildKeyframes(e,t,r,i,u,c,p,y,b,T=[]){b=b||new wI;const M=new EA(e,t,b,i,u,T,[]);M.options=y;const F=y.delay?xf(y.delay):0;M.currentTimeline.delayNextStep(F),M.currentTimeline.setStyles([c],null,M.errors,y),Fo(this,r,M);const V=M.timelines.filter(j=>j.containsAnimation());if(V.length&&p.size){let j;for(let re=V.length-1;re>=0;re--){const Ee=V[re];if(Ee.element===t){j=Ee;break}}j&&!j.allowOnlyTimelineStyles()&&j.setStyles([p],null,M.errors,y)}return V.length?V.map(j=>j.buildKeyframes()):[vA(t,[],[],[],0,F,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?xf(r.duration):null,p=null!=r.delay?xf(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Fo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=EI);const c=xf(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Fo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?xf(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Fo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return hI(t.params?fI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?xf(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=EI);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,T)=>{t.currentQueryIndex=T;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),Fo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const T=t.currentTimeline;y&&T.delayNextStep(y);const M=T.currentTime;Fo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const EI={};class EA{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=EI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new bI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xf(r.duration)),null!=r.delay&&(i.delay=xf(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=fI(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new EA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=EI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new X1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(K1,"."+this._enterClassName)).replace(Q1,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function r1(n){return new d.vHH(3014,!1)}()),p}}class bI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Od),this._currentKeyframe.set(t,Od);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function eF(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Od)}else Of(i,t)}),t}(e,this._globalTimelineStyles);for(let[p,y]of c){const b=fI(y,u,r);this._pendingStyles.set(p,b),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Od),this._updateStyle(p,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=Of(p,new Map,this._backFill);b.forEach((T,M)=>{"!"===T?e.add(M):T===Od&&t.add(M)}),r||b.set("offset",y/this.duration),i.push(b)});const u=e.size?pI(e.values()):[],c=t.size?pI(t.values()):[];if(r){const p=i[0],y=new Map(p);p.set("offset",0),y.set("offset",1),i=[p,y]}return vA(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class X1 extends bI{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=Of(e[0]);y.set("offset",0),u.push(y);const b=Of(e[0]);b.set("offset",QO(p)),u.push(b);const T=e.length-1;for(let M=1;M<=T;M++){let F=Of(e[M]);const V=F.get("offset");F.set("offset",QO((t+V*r)/c)),u.push(F)}r=c,t=0,i="",e=u}return vA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function QO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class bA{}const tF=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class nF extends bA{normalizePropertyName(e,t){return mA(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(tF.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function qR(n,e){return new d.vHH(3005,!1)}())}return c+u}}function JO(n,e,t,r,i,u,c,p,y,b,T,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:T,totalTime:M,errors:F}}const CA={};class XO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function rF(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,p,y,b,T){const M=[],F=this.ast.options&&this.ast.options.params||CA,j=this.buildStyles(r,p&&p.params||CA,M),re=y&&y.params||CA,Ee=this.buildStyles(i,re,M),Le=new Set,Xe=new Map,pt=new Map,it="void"===i,Tt={params:iF(re,F),delay:this.ast.options?.delay},Mt=T?[]:wA(e,t,this.ast.animation,u,c,j,Ee,Tt,b,M);let on=0;if(Mt.forEach(Pd=>{on=Math.max(Pd.duration+Pd.delay,on)}),M.length)return JO(t,this._triggerName,r,i,it,j,Ee,[],[],Xe,pt,on,M);Mt.forEach(Pd=>{const Rd=Pd.element,kk=Ro(Xe,Rd,new Set);Pd.preStyleProps.forEach(dg=>kk.add(dg));const K0=Ro(pt,Rd,new Set);Pd.postStyleProps.forEach(dg=>K0.add(dg)),Rd!==t&&Le.add(Rd)});const Cs=pI(Le.values());return JO(t,this._triggerName,r,i,it,j,Ee,Mt,Cs,Xe,pt,on)}}function iF(n,e){const t=M0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class sF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=M0(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,p)=>{c&&(c=fI(c,i,t));const y=this.normalizer.normalizePropertyName(p,t);c=this.normalizer.normalizeStyleValue(p,y,c,t),r.set(y,c)})}),r}}class aF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new sF(i.style,i.options&&i.options.params||{},r))}),eN(this.states,"true","1"),eN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new XO(e,i,this.states))}),this.fallbackTransition=function uF(n,e,t){return new XO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function eN(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const lF=new wI;class cF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=yA(this._driver,t,r,[]);if(r.length)throw function c1(n){return new d.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=NO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const p=new Map;if(u?(c=wA(this._driver,t,u,hA,lI,new Map,new Map,r,lF,i),c.forEach(T=>{const M=Ro(p,T.element,new Map);T.postStyleProps.forEach(F=>M.set(F,null))})):(i.push(function d1(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function h1(n){return new d.vHH(3504,!1)}();p.forEach((T,M)=>{T.forEach((F,V)=>{T.set(V,this._driver.computeStyle(M,V,Od))})});const b=Mf(c.map(T=>{const M=p.get(T.element);return this._buildPlayer(T,new Map,M)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function f1(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=uA(t,"","","");return oA(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const tN="ng-animate-queued",IA="ng-animate-disabled",gF=[],nN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_a="__ng_removed";class DA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function wF(n){return n??null}(r?e.value:e),r){const u=M0(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const O0="void",TA=new DA(O0);class yF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,va(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function p1(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function g1(n){return new d.vHH(3303,!1)}();if(!function EF(n){return"start"==n||"done"==n}(r))throw function m1(n,e){return new d.vHH(3400,!1)}();const u=Ro(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Ro(this._engine.statesByElement,e,new Map);return p.has(t)||(va(e,cI),va(e,cI+"-"+t),p.set(t,TA)),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function y1(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new SA(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(va(e,cI),va(e,cI+"-"+t),this._engine.statesByElement.set(e,p=new Map));let y=p.get(t);const b=new DA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p.set(t,b),y||(y=TA),b.value!==O0&&y.value===b.value){if(!function IF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const re=[],Ee=u.matchStyles(y.value,y.params,re),Le=u.matchStyles(b.value,b.params,re);re.length?this._engine.reportError(re):this._engine.afterFlush(()=>{ig(e,Ee),Gl(e,Le)})}return}const F=Ro(this._engine.playersByElement,e,[]);F.forEach(re=>{re.namespaceId==this.id&&re.triggerName==t&&re.queued&&re.destroy()});let V=u.matchTransition(y.value,b.value,e,b.params),j=!1;if(!V){if(!i)return;V=u.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:y,toState:b,player:c,isFallbackTransition:j}),j||(va(e,tN),c.onStart(()=>{Hy(e,tN)})),c.onDone(()=>{let re=this.players.indexOf(c);re>=0&&this.players.splice(re,1);const Ee=this._engine.playersByElement.get(e);if(Ee){let Le=Ee.indexOf(c);Le>=0&&Ee.splice(Le,1)}}),this.players.push(c),F.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,dI,!0);r.forEach(i=>{if(i[_a])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(u.forEach((y,b)=>{if(c.set(b,y.value),this._triggers.has(b)){const T=this.trigger(e,b,O0,i);T&&p.push(T)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers.get(c).fallbackTransition,b=r.get(c)||TA,T=new DA(O0),M=new SA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:T,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[_a];(!u||u===nN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){va(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=uA(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,oA(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class _F{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new yF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(CI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!CI(t))return;const u=t[_a];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),va(e,IA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hy(e,IA))}removeNode(e,t,r,i){if(CI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[_a]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return CI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,dI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,fA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[_a];if(t&&t.setForRemoval){if(e[_a]=nN,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)va(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function _1(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new wI,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,T=new Set;this.disabledNodes.forEach(ct=>{T.add(ct);const Ct=this.driver.query(ct,".ng-animate-queued",!0);for(let xt=0;xt<Ct.length;xt++)T.add(Ct[xt])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),V=sN(F,this.collectedEnterElements),j=new Map;let re=0;V.forEach((ct,Ct)=>{const xt=hA+re++;j.set(Ct,xt),ct.forEach(dn=>va(dn,xt))});const Ee=[],Le=new Set,Xe=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Ct=this.collectedLeaveElements[ct],xt=Ct[_a];xt&&xt.setForRemoval&&(Ee.push(Ct),Le.add(Ct),xt.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(dn=>Le.add(dn)):Xe.add(Ct))}const pt=new Map,it=sN(F,Array.from(Le));it.forEach((ct,Ct)=>{const xt=lI+re++;pt.set(Ct,xt),ct.forEach(dn=>va(dn,xt))}),e.push(()=>{V.forEach((ct,Ct)=>{const xt=j.get(Ct);ct.forEach(dn=>Hy(dn,xt))}),it.forEach((ct,Ct)=>{const xt=pt.get(Ct);ct.forEach(dn=>Hy(dn,xt))}),Ee.forEach(ct=>{this.processLeaveNode(ct)})});const Tt=[],Mt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(xt=>{const dn=xt.player,wi=xt.element;if(Tt.push(dn),this.collectedEnterElements.length){const ts=wi[_a];if(ts&&ts.setForMove){if(ts.previousTriggersValues&&ts.previousTriggersValues.has(xt.triggerName)){const hg=ts.previousTriggersValues.get(xt.triggerName),ba=this.statesByElement.get(xt.element);if(ba&&ba.has(xt.triggerName)){const ZI=ba.get(xt.triggerName);ZI.value=hg,ba.set(xt.triggerName,ZI)}}return void dn.destroy()}}const ql=!M||!this.driver.containsElement(M,wi),Lo=pt.get(wi),Pf=j.get(wi),_r=this._buildInstruction(xt,r,Pf,Lo,ql);if(_r.errors&&_r.errors.length)return void Mt.push(_r);if(ql)return dn.onStart(()=>ig(wi,_r.fromStyles)),dn.onDestroy(()=>Gl(wi,_r.toStyles)),void i.push(dn);if(xt.isFallbackTransition)return dn.onStart(()=>ig(wi,_r.fromStyles)),dn.onDestroy(()=>Gl(wi,_r.toStyles)),void i.push(dn);const Fk=[];_r.timelines.forEach(ts=>{ts.stretchStartingKeyframe=!0,this.disabledNodes.has(ts.element)||Fk.push(ts)}),_r.timelines=Fk,r.append(wi,_r.timelines),c.push({instruction:_r,player:dn,element:wi}),_r.queriedElements.forEach(ts=>Ro(p,ts,[]).push(dn)),_r.preStyleProps.forEach((ts,hg)=>{if(ts.size){let ba=y.get(hg);ba||y.set(hg,ba=new Set),ts.forEach((ZI,cM)=>ba.add(cM))}}),_r.postStyleProps.forEach((ts,hg)=>{let ba=b.get(hg);ba||b.set(hg,ba=new Set),ts.forEach((ZI,cM)=>ba.add(cM))})});if(Mt.length){const ct=[];Mt.forEach(Ct=>{ct.push(function v1(n,e){return new d.vHH(3505,!1)}())}),Tt.forEach(Ct=>Ct.destroy()),this.reportError(ct)}const on=new Map,Cs=new Map;c.forEach(ct=>{const Ct=ct.element;r.has(Ct)&&(Cs.set(Ct,Ct),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,on))}),i.forEach(ct=>{const Ct=ct.element;this._getPreviousPlayers(Ct,!1,ct.namespaceId,ct.triggerName,null).forEach(dn=>{Ro(on,Ct,[]).push(dn),dn.destroy()})});const Pd=Ee.filter(ct=>aN(ct,y,b)),Rd=new Map;iN(Rd,this.driver,Xe,b,Od).forEach(ct=>{aN(ct,y,b)&&Pd.push(ct)});const K0=new Map;V.forEach((ct,Ct)=>{iN(K0,this.driver,new Set(ct),y,"!")}),Pd.forEach(ct=>{const Ct=Rd.get(ct),xt=K0.get(ct);Rd.set(ct,new Map([...Array.from(Ct?.entries()??[]),...Array.from(xt?.entries()??[])]))});const dg=[],Pk=[],Rk={};c.forEach(ct=>{const{element:Ct,player:xt,instruction:dn}=ct;if(r.has(Ct)){if(T.has(Ct))return xt.onDestroy(()=>Gl(Ct,dn.toStyles)),xt.disabled=!0,xt.overrideTotalTime(dn.totalTime),void i.push(xt);let wi=Rk;if(Cs.size>1){let Lo=Ct;const Pf=[];for(;Lo=Lo.parentNode;){const _r=Cs.get(Lo);if(_r){wi=_r;break}Pf.push(Lo)}Pf.forEach(_r=>Cs.set(_r,wi))}const ql=this._buildAnimation(xt.namespaceId,dn,on,u,K0,Rd);if(xt.setRealPlayer(ql),wi===Rk)dg.push(xt);else{const Lo=this.playersByElement.get(wi);Lo&&Lo.length&&(xt.parentPlayer=Mf(Lo)),i.push(xt)}}else ig(Ct,dn.fromStyles),xt.onDestroy(()=>Gl(Ct,dn.toStyles)),Pk.push(xt),T.has(Ct)&&i.push(xt)}),Pk.forEach(ct=>{const Ct=u.get(ct.element);if(Ct&&Ct.length){const xt=Mf(Ct);ct.setRealPlayer(xt)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Ee.length;ct++){const Ct=Ee[ct],xt=Ct[_a];if(Hy(Ct,lI),xt&&xt.hasAnimation)continue;let dn=[];if(p.size){let ql=p.get(Ct);ql&&ql.length&&dn.push(...ql);let Lo=this.driver.query(Ct,fA,!0);for(let Pf=0;Pf<Lo.length;Pf++){let _r=p.get(Lo[Pf]);_r&&_r.length&&dn.push(..._r)}}const wi=dn.filter(ql=>!ql.destroyed);wi.length?bF(this,Ct,wi):this.processLeaveNode(Ct)}return Ee.length=0,dg.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Ct=this.players.indexOf(ct);this.players.splice(Ct,1)}),ct.play()}),dg}elementContainsData(e,t){let r=!1;const i=t[_a];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==O0;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,T=b!==u,M=Ro(r,b,[]);this._getPreviousPlayers(b,T,c,p,t.toState).forEach(V=>{const j=V.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),V.destroy(),M.push(V)})}ig(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],T=new Set,M=new Set,F=t.timelines.map(j=>{const re=j.element;T.add(re);const Ee=re[_a];if(Ee&&Ee.removedBeforeQueried)return new A0(j.duration,j.delay);const Le=re!==y,Xe=function CF(n){const e=[];return oN(n,e),e}((r.get(re)||gF).map(on=>on.getRealPlayer())).filter(on=>!!on.element&&on.element===re),pt=u.get(re),it=c.get(re),Tt=NO(0,this._normalizer,0,j.keyframes,pt,it),Mt=this._buildPlayer(j,Tt,Xe);if(j.subTimeline&&i&&M.add(re),Le){const on=new SA(e,p,re);on.setRealPlayer(Mt),b.push(on)}return Mt});b.forEach(j=>{Ro(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function vF(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,j.element,j))}),T.forEach(j=>va(j,jO));const V=Mf(F);return V.onDestroy(()=>{T.forEach(j=>Hy(j,jO)),Gl(y,t.toStyles)}),M.forEach(j=>{Ro(i,j,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new A0(e.duration,e.delay)}}class SA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new A0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>oA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ro(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function CI(n){return n&&1===n.nodeType}function rN(n,e){const t=n.style.display;return n.style.display=e??"none",t}function iN(n,e,t,r,i){const u=[];t.forEach(y=>u.push(rN(y)));const c=[];r.forEach((y,b)=>{const T=new Map;y.forEach(M=>{const F=e.computeStyle(b,M,i);T.set(M,F),(!F||0==F.length)&&(b[_a]=mF,c.push(b))}),n.set(b,T)});let p=0;return t.forEach(y=>rN(y,u[p++])),c}function sN(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function va(n,e){n.classList?.add(e)}function Hy(n,e){n.classList?.remove(e)}function bF(n,e,t){Mf(t).onDone(()=>n.processLeaveNode(e))}function oN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof xO?oN(r.players,e):e.push(r)}}function aN(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class II{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new _F(e,t,r),this._timelineEngine=new cF(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],T=yA(this._driver,u,y,[]);if(y.length)throw function u1(n,e){return new d.vHH(3404,!1)}();p=function oF(n,e,t){return new aF(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=kO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=kO(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let TF=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gl(this._element,this._initialStyles),this._endStyles&&(Gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ig(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ig(this._element,this._endStyles),this._endStyles=null),Gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function AA(n){let e=null;return n.forEach((t,r)=>{(function SF(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uN{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:WO(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class AF{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return LO(e,t)}getParentElement(e){return cA(e)}query(e,t,r){return VO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b=new Map,T=c.filter(V=>V instanceof uN);(function N1(n,e){return 0===n||0===e})(r,i)&&T.forEach(V=>{V.currentSnapshot.forEach((j,re)=>b.set(re,j))});let M=function A1(n){return n.length?n[0]instanceof Map?n:n.map(e=>HO(e)):[]}(t).map(V=>Of(V));M=function k1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(p=>c.set(p,WO(n,p)))}}return e}(e,M,b);const F=function DF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=AA(e[0]),e.length>1&&(r=AA(e[e.length-1]))):e instanceof Map&&(t=AA(e)),t||r?new TF(n,t,r):null}(e,M);return new uN(e,M,y,F)}}let MF=(()=>{class n extends DO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?SO(t):t;return lN(this._renderer,null,r,"register",[i]),new xF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class xF extends class UR{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new OF(this._id,e,t||{},this._renderer)}}class OF{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return lN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function lN(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const cN="@.disabled";let NF=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=c?.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new dN("",u,this.engine),this._rendererCache.set(u,T)),T}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=T=>{Array.isArray(T)?T.forEach(y):this.engine.registerTrigger(c,p,t,T.name,T)};return r.data.animation.forEach(y),new kF(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(II),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class dN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==cN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class kF extends dN{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==cN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function PF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function RF(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let FF=(()=>{class n extends II{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(dA),d.LFG(bA),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hN=[{provide:DO,useClass:MF},{provide:bA,useFactory:function LF(){return new nF}},{provide:II,useClass:FF},{provide:d.FYo,useFactory:function VF(n,e,t){return new NF(n,e,t)},deps:[uo,II,d.R0b]}],MA=[{provide:dA,useFactory:()=>new AF},{provide:d.QbO,useValue:"BrowserAnimations"},...hN],fN=[{provide:dA,useClass:UO},{provide:d.QbO,useValue:"NoopAnimations"},...hN];let UF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?fN:MA}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:MA,imports:[Yu]}),n})();const pN=["toast-component",""];function BF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function jF(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function HF(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,jF,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function $F(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function GF(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function zF(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class JF{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class TI{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new di.x,this._onAction=new di.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const mN=new d.OlP("ToastConfig");class eL{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new di.x,this._activate=new di.x,this._manualClose=new di.x,this._resetTimeout=new di.x,this._countDuplicate=new di.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class tL{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===TI?this._toastPackage:this._parentInjector.get(e,t,r)}}class nL extends class XF{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class rL{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let iL=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sL=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new nL(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new rL(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(iL),d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N0=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts){const y=c&&p.title===t;if((!c||y)&&p.message===r)return p.toastRef.onDuplicate(i,u),p}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const y=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&u.enableHtml&&(b=this.sanitizer.sanitize(d.q3G.HTML,r));const T=new eL(y),M=new TI(this.index,u,b,i,t,T),F=new tL(M,this._injector),V=new JF(u.toastComponent,F),j=y.attach(V,this.toastrConfig.newestOnTop);T.componentInstance=j.instance;const re={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:M.onTap(),onAction:M.onAction(),portal:j};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{re.toastRef.activate()})),this.toasts.push(re),re}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mN),d.LFG(sL),d.LFG(d.zs3),d.LFG(Ga),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oL={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(N0),d.Y36(TI),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},attrs:pN,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,BF,3,0,"button",0),d.YNc(1,HF,3,5,"div",1),d.YNc(2,$F,1,3,"div",2),d.YNc(3,GF,2,4,"div",3),d.YNc(4,zF,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[Cn],encapsulation:2,data:{animation:[BR("flyInOut",[rA("inactive",S0({opacity:0})),rA("active",S0({opacity:1})),rA("removed",S0({opacity:0})),AO("inactive => active",TO("{{ easeTime }}ms {{ easing }}")),AO("active => removed",TO("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let aL=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:mN,useValue:{default:oL,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Uo]}),n})();class Ks extends di.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var uL=R(9672);function yN(...n){const e=(0,Ls.yG)(n),t=(0,Ls.jO)(n),{args:r,keys:i}=mx(n);if(0===r.length)return(0,en.D)([],e);const u=new ei.y(function lL(n,e,t=sh.y){return r=>{_N(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)_N(e,()=>{const b=(0,en.D)(n[y],e);let T=!1;b.subscribe((0,In.x)(r,M=>{u[y]=M,T||(T=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>_x(i,c):sh.y));return t?u.pipe(yx(t)):u}function _N(n,e,t){n?(0,uL.f)(t,n,e):e()}function vN(n){return new ei.y(e=>{(0,Ry.Xf)(n()).subscribe(e)})}var cL=R(9635);function k0(n,e){const t=(0,ti.m)(n)?n:()=>n,r=i=>i.error(t());return new ei.y(e?i=>e.schedule(r,0,i):r)}var wN=R(727);function xA(){return(0,Bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,In.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class EN extends ei.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wN.w0;const t=this.getSubject();e.add(this.source.subscribe((0,In.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wN.w0.EMPTY)}return e}refCount(){return xA()(this)}}var es=R(8505);function Nf(n){return(0,Bn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,In.x)(t,void 0,void 0,c=>{u=(0,Ry.Xf)(n(c,Nf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function OA(n){return n<=0?()=>wu.E:(0,Bn.e)((e,t)=>{let r=[];e.subscribe((0,In.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bN(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,u)=>n(i,u,r)):sh.y,OA(1),t?Jp(e):Ly(()=>new Qp))}function NA(n){return(0,Bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",P0=Symbol("RouteTitle");class fL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $y(n){return new fL(n)}function pL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!CN(n[i],e[i]))return!1;return!0}function CN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function IN(n){return Array.prototype.concat.apply([],n)}function DN(n){return n.length>0?n[n.length-1]:null}function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kf(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,en.D)(Promise.resolve(n)):Je(n)}const yL={exact:function AN(n,e,t){if(!ag(n.segments,e.segments)||!SI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!AN(n.children[r],e.children[r],t))return!1;return!0},subset:MN},TN={exact:function _L(n,e){return zl(n,e)},subset:function vL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CN(n[t],e[t]))},ignored:()=>!0};function SN(n,e,t){return yL[t.paths](n.root,e.root,t.matrixParams)&&TN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function MN(n,e,t){return xN(n,e,e.segments,t)}function xN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ag(i,t)||e.hasChildren()||!SI(i,t,r))}if(n.segments.length===t.length){if(!ag(n.segments,t)||!SI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!MN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ag(n.segments,i)&&SI(n.segments,i,r)&&n.children[zt])&&xN(n.children[zt],e,u,r)}}function SI(n,e,t){return e.every((r,i)=>TN[t](n[i].parameters,r.parameters))}class og{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$y(this.queryParams)),this._queryParamMap}toString(){return bL.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return AI(this)}}class R0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$y(this.parameters)),this._parameterMap}toString(){return PN(this)}}function ag(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ON=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new PA},providedIn:"root"}),n})();class PA{parse(e){const t=new OL(e);return new og(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${F0(e.root,!0)}`,r=function DL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${MI(t)}=${MI(i)}`).join("&"):`${MI(t)}=${MI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function CL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const bL=new PA;function AI(n){return n.segments.map(e=>PN(e)).join("/")}function F0(n,e){if(!n.hasChildren())return AI(n);if(e){const t=n.children[zt]?F0(n.children[zt],!1):"",r=[];return Li(n.children,(i,u)=>{u!==zt&&r.push(`${u}:${F0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function EL(n,e){let t=[];return Li(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),Li(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[F0(n.children[zt],!1)]:[`${i}:${F0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${AI(n)}/${t[0]}`:`${AI(n)}/(${t.join("//")})`}}function NN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function MI(n){return NN(n).replace(/%3B/gi,";")}function RA(n){return NN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xI(n){return decodeURIComponent(n)}function kN(n){return xI(n.replace(/\+/g,"%20"))}function PN(n){return`${RA(n.path)}${function IL(n){return Object.keys(n).map(e=>`;${RA(e)}=${RA(n[e])}`).join("")}(n.parameters)}`}const TL=/^[^\/()?;=#]+/;function OI(n){const e=n.match(TL);return e?e[0]:""}const SL=/^[^=?&#]+/,ML=/^[^&#]+/;class OL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Zt(e,t)),r}parseSegment(){const e=OI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new R0(xI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=OI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=OI(this.remaining);i&&(r=i,this.capture(r))}e[xI(t)]=xI(r)}parseQueryParam(e){const t=function AL(n){const e=n.match(SL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function xL(n){const e=n.match(ML);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=kN(t),u=kN(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=OI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[zt]:new Zt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function FA(n){return n.segments.length>0?new Zt([],{[zt]:n}):n}function NI(n){const e={};for(const r of Object.keys(n.children)){const u=NI(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function NL(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}function ug(n){return n instanceof og}function RL(n,e,t,r,i){if(0===t.length)return Gy(e.root,e.root,e.root,r,i);const u=function LN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new FN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Li(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new FN(t,e,r)}(t);return u.toRoot()?Gy(e.root,e.root,new Zt([],{}),r,i):function c(y){const b=function LL(n,e,t,r){if(n.isAbsolute)return new zy(e.root,!0,0);if(-1===r)return new zy(t,t===e.root,0);return function VN(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new zy(r,!1,i-u)}(t,r+(L0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,y),T=b.processChildren?U0(b.segmentGroup,b.index,u.commands):VA(b.segmentGroup,b.index,u.commands);return Gy(e.root,b.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function L0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function V0(n){return"object"==typeof n&&null!=n&&n.outlets}function Gy(n,e,t,r,i){let c,u={};r&&Li(r,(y,b)=>{u[b]=Array.isArray(y)?y.map(T=>`${T}`):`${y}`}),c=n===e?t:RN(n,e,t);const p=FA(NI(c));return new og(p,u,i)}function RN(n,e,t){const r={};return Li(n.children,(i,u)=>{r[u]=i===e?t:RN(i,e,t)}),new Zt(n.segments,r)}class FN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&L0(r[0]))throw new d.vHH(4003,!1);const i=r.find(V0);if(i&&i!==DN(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VA(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return U0(n,e,t);const r=function UL(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(V0(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!BN(y,b,c))return u;r+=2}else{if(!BN(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Zt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Zt(n.segments.slice(r.pathIndex),n.children),U0(u,0,i)}return r.match&&0===i.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?UA(n,e,t):r.match?U0(n,0,i):UA(n,e,t)}function U0(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function VL(n){return V0(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return Li(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=VA(n.children[c],e,u))}),Li(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Zt(n.segments,i)}}function UA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(V0(u)){const y=BL(u.outlets);return new Zt(r,y)}if(0===i&&L0(t[0])){r.push(new R0(n.segments[e].path,UN(t[0]))),i++;continue}const c=V0(u)?u.outlets[zt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&L0(p)?(r.push(new R0(c,UN(p))),i+=2):(r.push(new R0(c,{})),i++)}return new Zt(r,{})}function BL(n){const e={};return Li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=UA(new Zt([],{}),0,t))}),e}function UN(n){const e={};return Li(n,(t,r)=>e[r]=`${t}`),e}function BN(n,e,t){return n==t.path&&zl(e,t.parameters)}class Nd{constructor(e,t){this.id=e,this.url=t}}class BA extends Nd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lg extends Nd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kI extends Nd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jN extends Nd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $L extends Nd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class WL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ZL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YL{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $N{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=HA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return HA(e,this._root).map(t=>t.value)}}function jA(n,e){if(n===e.value)return e;for(const t of e.children){const r=jA(n,t);if(r)return r}return null}function HA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=HA(n,t);if(r.length)return r.unshift(e),r}return[]}class kd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class GN extends $N{constructor(e,t){super(e),this.snapshot=t,$A(this,e)}toString(){return this.snapshot.toString()}}function zN(n,e){const t=function XL(n,e){const c=new PI([],{},{},"",{},zt,e,null,n.root,-1,{});return new WN("",new kd(c,[]))}(n,e),r=new Ks([new R0("",{})]),i=new Ks({}),u=new Ks({}),c=new Ks({}),p=new Ks(""),y=new Cu(r,i,c,p,u,zt,e,t.root);return y.snapshot=t.root,new GN(new kd(y,[]),t)}class Cu{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,_t.U)(b=>b[P0]))??Je(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>$y(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>$y(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function eV(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class PI{constructor(e,t,r,i,u,c,p,y,b,T,M,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.[P0],this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=T,this._correctedLastPathIndex=F??T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$y(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$y(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class WN extends $N{constructor(e,t){super(t),this.url=e,$A(this,t)}toString(){return ZN(this._root)}}function $A(n,e){e.value._routerState=n,e.children.forEach(t=>$A(n,t))}function ZN(n){const e=n.children.length>0?` { ${n.children.map(ZN).join(", ")} } `:"";return`${n.value}${e}`}function GA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zl(e.params,t.params)||n.params.next(t.params),function gL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zA(n,e){const t=zl(n.params,e.params)&&function wL(n,e){return ag(n,e)&&n.every((t,r)=>zl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zA(n.parent,e.parent))}function B0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function nV(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return B0(n,r,i);return B0(n,r)})}(n,e,t);return new kd(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>B0(n,p)),c}}const r=function rV(n){return new Cu(new Ks(n.url),new Ks(n.params),new Ks(n.queryParams),new Ks(n.fragment),new Ks(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>B0(n,u));return new kd(r,i)}}const qA="ngNavigationCancelingError";function KN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ug(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function YN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function QN(n){return JN(n)&&ug(n.url)}function JN(n){return n&&n[qA]}class iV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new j0,this.attachRef=null}}let j0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iV,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RI=!1;let FI=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,RI);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,RI);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,RI);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,RI);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,y=new sV(t,p,i.injector);if(r&&function oV(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=i.createComponent(b,i.length,y)}else this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(j0),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class sV{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Cu?this.route:e===j0?this.childContexts:this.parent.get(e,t)}}let WA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[FI],encapsulation:2}),n})();function XN(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function KA(n){const e=n.children&&n.children.map(KA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=WA),t}function wa(n){return n.outlet||zt}function ek(n,e){const t=n.filter(r=>wa(r)===e);return t.push(...n.filter(r=>wa(r)!==e)),t}function H0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class dV{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),GA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=qy(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Li(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=qy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=qy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=qy(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new QL(u.value.snapshot))}),e.children.length&&this.forwardEvent(new KL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(GA(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),GA(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=H0(i.snapshot),y=p?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=y,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class tk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class LI{constructor(e,t){this.component=e,this.route=t}}function hV(n,e,t){const r=n._root;return $0(r,e?e._root:null,t,[r.value])}function Wy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function $0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=qy(e);return n.children.forEach(c=>{(function pV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function gV(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ag(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ag(n.url,e.url)||!zl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zA(n,e)||!zl(n.queryParams,e.queryParams);default:return!zA(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new tk(r)):(u.data=c.data,u._resolvedData=c._resolvedData),$0(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new LI(p.outlet.component,c))}else c&&G0(e,p,i),i.canActivateChecks.push(new tk(r)),$0(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Li(u,(c,p)=>G0(c,t.getContext(p),i)),i}function G0(n,e,t){const r=qy(n),i=n.value;Li(r,(u,c)=>{G0(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new LI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function z0(n){return"function"==typeof n}function YA(n){return n instanceof Qp||"EmptyError"===n?.name}const VI=Symbol("INITIAL_VALUE");function Zy(){return qr(n=>yN(n.map(e=>e.pipe(Fy(1),rh(VI)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===VI)return VI;if(!1===t||t instanceof og)return t}return!0}),Ar(e=>e!==VI),Fy(1)))}function nk(n){return(0,cL.z)((0,es.b)(e=>{if(ug(e))throw KN(0,e)}),(0,_t.U)(e=>!0===e))}const QA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rk(n,e,t,r,i){const u=JA(n,e,t);return u.matched?function NV(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const p=Wy(c,n);return kf(function EV(n){return n&&z0(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Zy(),nk()):Je(!0)}(r=XN(e,r),e,t).pipe((0,_t.U)(c=>!0===c?u:{...QA})):Je(u)}function JA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...QA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||pL)(t,n,e);if(!i)return{...QA};const u={};Li(i.posParams,(p,y)=>{u[y]=p.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function UI(n,e,t,r,i="corrected"){if(t.length>0&&function RV(n,e,t){return t.some(r=>BI(n,e,r)&&wa(r)!==zt)}(n,t,r)){const c=new Zt(e,function PV(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&wa(u)!==zt){const c=new Zt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[wa(u)]=c}return i}(n,e,r,new Zt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function FV(n,e,t){return t.some(r=>BI(n,e,r))}(n,t,r)){const c=new Zt(n.segments,function kV(n,e,t,r,i,u){const c={};for(const p of r)if(BI(n,t,p)&&!i[wa(p)]){const y=new Zt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[wa(p)]=y}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function BI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ik(n,e,t,r){return!!(wa(n)===r||r!==zt&&BI(e,t,n))&&("**"===n.path||JA(e,n,t).matched)}function sk(n,e,t){return 0===e.length&&!n.children[t]}const jI=!1;class HI{constructor(e){this.segmentGroup=e||null}}class ok{constructor(e){this.urlTree=e}}function q0(n){return k0(new HI(n))}function ak(n){return k0(new ok(n))}class BV{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=UI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,_t.U)(u=>this.createUrlTree(NI(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nf(u=>{if(u instanceof ok)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof HI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,_t.U)(i=>this.createUrlTree(NI(i),e.queryParams,e.fragment))).pipe(Nf(i=>{throw i instanceof HI?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,jI)}createUrlTree(e,t,r){const i=FA(e);return new og(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(u=>new Zt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,en.D)(i).pipe(fs(u=>{const c=r.children[u],p=ek(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,_t.U)(y=>({segment:y,outlet:u})))}),sl((u,c)=>(u[c.outlet]=c.segment,u),{}),bN())}expandSegment(e,t,r,i,u,c){return(0,en.D)(r).pipe(fs(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Nf(b=>{if(b instanceof HI)return Je(null);throw b}))),Eu(p=>!!p),Nf((p,y)=>{if(YA(p))return sk(t,i,u)?Je(new Zt([],{})):q0(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return ik(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):q0(t):q0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ak(u):this.lineralizeSegments(r,u).pipe((0,cn.z)(c=>{const p=new Zt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:T}=JA(t,i,u);if(!p)return q0(t);const M=this.applyRedirectCommands(y,i.redirectTo,T);return i.redirectTo.startsWith("/")?ak(M):this.lineralizeSegments(i,M).pipe((0,cn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=XN(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Zt(i,{})))):Je(new Zt(i,{}))):rk(t,r,i,e).pipe(qr(({matched:c,consumedSegments:p,remainingSegments:y})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,cn.z)(T=>{const M=T.injector??e,F=T.routes,{segmentGroup:V,slicedSegments:j}=UI(t,p,y,F),re=new Zt(V.segments,V.children);if(0===j.length&&re.hasChildren())return this.expandChildren(M,F,re).pipe((0,_t.U)(pt=>new Zt(p,pt)));if(0===F.length&&0===j.length)return Je(new Zt(p,{}));const Ee=wa(r)===u;return this.expandSegment(M,re,F,j,Ee?zt:u,!0).pipe((0,_t.U)(Xe=>new Zt(p.concat(Xe.segments),Xe.children)))})):q0(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function OV(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const p=Wy(c,n);return kf(function yV(n){return n&&z0(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Zy(),nk())}(e,t,r).pipe((0,cn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,es.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function VV(n){return k0(YN(jI,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[zt])return k0(new d.vHH(4e3,jI));i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new og(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Li(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Li(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new Zt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,jI);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class HV{}class zV{constructor(e,t,r,i,u,c,p,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=y}recognize(){const e=UI(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new PI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new kd(r,t),u=new WN(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=qN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(fs(i=>{const u=r.children[i],c=ek(t,i);return this.processSegmentGroup(e,c,u,i)}),sl((i,u)=>i&&u?(i.push(...u),i):null),function dL(n,e=!1){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Jp(null),bN(),(0,_t.U)(i=>{if(null===i)return null;const u=uk(i);return function qV(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,en.D)(t).pipe(fs(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),Eu(c=>!!c),Nf(c=>{if(YA(c))return sk(r,i,u)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!ik(t,r,i,u))return Je(null);let c;if("**"===t.path){const p=i.length>0?DN(i).parameters:{},y=ck(r)+i.length;c=Je({snapshot:new PI(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hk(t),wa(t),t.component??t._loadedComponent??null,t,lk(r),y,fk(t),y),consumedSegments:[],remainingSegments:[]})}else c=rk(r,t,i,e).pipe((0,_t.U)(({matched:p,consumedSegments:y,remainingSegments:b,parameters:T})=>{if(!p)return null;const M=ck(r)+y.length;return{snapshot:new PI(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hk(t),wa(t),t.component??t._loadedComponent??null,t,lk(r),M,fk(t),M),consumedSegments:y,remainingSegments:b}}));return c.pipe(qr(p=>{if(null===p)return Je(null);const{snapshot:y,consumedSegments:b,remainingSegments:T}=p;e=t._injector??e;const M=t._loadedInjector??e,F=function WV(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:j}=UI(r,b,T,F.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===j.length&&V.hasChildren())return this.processChildren(M,F,V).pipe((0,_t.U)(Ee=>null===Ee?null:[new kd(y,Ee)]));if(0===F.length&&0===j.length)return Je([new kd(y,[])]);const re=wa(t)===u;return this.processSegment(M,F,V,j,re?zt:u).pipe((0,_t.U)(Ee=>null===Ee?null:[new kd(y,Ee)]))}))}}function ZV(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uk(n){const e=[],t=new Set;for(const r of n){if(!ZV(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=uk(r.children);e.push(new kd(r.value,i))}return e.filter(r=>!t.has(r))}function lk(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ck(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function hk(n){return n.data||{}}function fk(n){return n.resolve||{}}function pk(n){return"string"==typeof n.title||null===n.title}function XA(n){return qr(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,_t.U)(()=>e)):Je(e)})}let gk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[P0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(mk)},providedIn:"root"}),n})(),mk=(()=>{class n extends gk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ds))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nU{}class iU extends class rU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const GI=new d.OlP("",{providedIn:"root",factory:()=>({})}),eM=new d.OlP("ROUTES");let tM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=kf(t.loadComponent()).pipe((0,es.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),NA(()=>{this.componentLoaders.delete(t)})),i=new EN(r,()=>new di.x).pipe(xA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,b,T=!1;Array.isArray(p)?b=p:(y=p.create(t).injector,b=IN(y.get(eM,[],d.XFs.Self|d.XFs.Optional)));return{routes:b.map(KA),injector:y}}),NA(()=>{this.childrenLoaders.delete(r)})),c=new EN(u,()=>new di.x).pipe(xA());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return kf(t()).pipe((0,cn.z)(r=>r instanceof d.YKP||Array.isArray(r)?Je(r):(0,en.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oU{}class aU{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uU(n){throw n}function lU(n,e,t){return e.parse("/")}const cU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _k(){const n=(0,d.f3M)(ON),e=(0,d.f3M)(j0),t=(0,d.f3M)(Ae),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),u=(0,d.f3M)(eM,{optional:!0})??[],c=(0,d.f3M)(GI,{optional:!0})??{},p=(0,d.f3M)(mk),y=(0,d.f3M)(gk,{optional:!0}),b=(0,d.f3M)(oU,{optional:!0}),T=(0,d.f3M)(nU,{optional:!0}),M=new cr(null,n,e,t,r,i,IN(u));return b&&(M.urlHandlingStrategy=b),T&&(M.routeReuseStrategy=T),M.titleStrategy=y??p,function hU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let cr=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new di.x,this.errorHandler=uU,this.malformedUriErrorHandler=lU,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new aU,this.routeReuseStrategy=new iU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(tM),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new WL(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new qL(F)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const M=c.get(d.R0b);this.isNgZoneEnabled=M instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function mL(){return new og(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zN(this.currentUrlTree,this.rootComponentType),this.transitions=new Ks({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ar(i=>0!==i.id),(0,_t.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),qr(i=>{let u=!1,c=!1;return Je(i).pipe((0,es.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qr(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return vk(p.source)&&(this.browserUrlTree=p.extractedUrl),Je(p).pipe(qr(M=>{const F=this.transitions.getValue();return r.next(new BA(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?wu.E:Promise.resolve(M)}),function jV(n,e,t,r){return qr(i=>function UV(n,e,t,r,i){return new BV(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,es.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function YV(n,e,t,r,i,u){return(0,cn.z)(c=>function GV(n,e,t,r,i,u,c="emptyOnly",p="legacy"){return new zV(n,e,t,r,i,c,p,u).recognize().pipe(qr(y=>null===y?function $V(n){return new ei.y(e=>e.error(n))}(new HV):Je(y)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,_t.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,es.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(V,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new jL(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:V,source:j,restoredState:re,extras:Ee}=p,Le=new BA(F,this.serializeUrl(V),j,re);r.next(Le);const Xe=zN(V,this.rootComponentType).snapshot;return Je(i={...p,targetSnapshot:Xe,urlAfterRedirects:V,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),wu.E}),(0,es.b)(p=>{const y=new HL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,_t.U)(p=>i={...p,guards:hV(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function CV(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Je({...t,guardsResult:!0}):function IV(n,e,t,r){return(0,en.D)(n).pipe((0,cn.z)(i=>function xV(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(p=>{const y=H0(e)??i,b=Wy(p,y);return kf(function wV(n){return n&&z0(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):y.runInContext(()=>b(n,e,t,r))).pipe(Eu())})).pipe(Zy()):Je(!0)}(i.component,i.route,t,e,r)),Eu(i=>!0!==i,!0))}(c,r,i,n).pipe((0,cn.z)(p=>p&&function mV(n){return"boolean"==typeof n}(p)?function DV(n,e,t,r){return(0,en.D)(e).pipe(fs(i=>Ka(function SV(n,e){return null!==n&&e&&e(new ZL(n)),Je(!0)}(i.route.parent,r),function TV(n,e){return null!==n&&e&&e(new YL(n)),Je(!0)}(i.route,r),function MV(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function fV(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>vN(()=>Je(c.guards.map(y=>{const b=H0(c.node)??t,T=Wy(y,b);return kf(function vV(n){return n&&z0(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(Eu())})).pipe(Zy())));return Je(u).pipe(Zy())}(n,i.path,t),function AV(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(u=>vN(()=>{const c=H0(e)??t,p=Wy(u,c);return kf(function _V(n){return n&&z0(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(Eu())}));return Je(i).pipe(Zy())}(n,i.route,t))),Eu(i=>!0!==i,!0))}(r,u,n,e):Je(p)),(0,_t.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,es.b)(p=>{if(i.guardsResult=p.guardsResult,ug(p.guardsResult))throw KN(0,p.guardsResult);const y=new $L(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Ar(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),XA(p=>{if(p.guards.canActivateChecks.length)return Je(p).pipe((0,es.b)(y=>{const b=new GL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),qr(y=>{let b=!1;return Je(y).pipe(function QV(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let u=0;return(0,en.D)(i).pipe(fs(c=>function JV(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!pk(i)&&(u[P0]=i.title),function XV(n,e,t,r){const i=function eU(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const u={};return(0,en.D)(i).pipe((0,cn.z)(c=>function tU(n,e,t,r){const i=H0(e)??r,u=Wy(n,i);return kf(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Eu(),(0,es.b)(p=>{u[c]=p}))),OA(1),function hL(n){return(0,_t.U)(()=>n)}(u),Nf(c=>YA(c)?wu.E:k0(c)))}(u,n,e,r).pipe((0,_t.U)(c=>(n._resolvedData=c,n.data=qN(n,t).resolve,i&&pk(i)&&(n.data[P0]=i.title),null)))}(c.route,r,n,e)),(0,es.b)(()=>u++),OA(1),(0,cn.z)(c=>u===i.length?Je(t):wu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,es.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,es.b)(y=>{const b=new zL(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),XA(p=>{const y=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,es.b)(M=>{b.component=M}),(0,_t.U)(()=>{})));for(const M of b.children)T.push(...y(M));return T};return yN(y(p.targetSnapshot.root)).pipe(Jp(),Fy(1))}),XA(()=>this.afterPreactivation()),(0,_t.U)(p=>{const y=function tV(n,e,t){const r=B0(n,e._root,t?t._root:void 0);return new GN(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:y}}),(0,es.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new dV(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,es.b)({next(){u=!0},complete(){u=!0}}),NA(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Nf(p=>{if(c=!0,JN(p)){QN(p)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new kI(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(y),QN(p)){const b=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vk(i.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new jN(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return wu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(KA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,T=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),RL(b,this.currentUrlTree,t,M,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ug(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fU(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...cU}:!1===r?{...dU}:r,ug(t))return SN(this.currentUrlTree,t,i);const u=this.parseUrl(t);return SN(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new lg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let p,y,b;c?(p=c.resolve,y=c.reject,b=c.promise):b=new Promise((F,V)=>{p=F,y=V});const T=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:T,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:y,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new kI(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return _k()},providedIn:"root"}),n})();function vk(n){return"imperative"!==n}let nM=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new di.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(Cu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),cg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new di.x,this.subscription=t.events.subscribe(u=>{u instanceof lg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){return!!(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(Cu),d.Y36(_e))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),rM=(()=>{class n{constructor(t,r,i,u,c,p){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof lg&&this.update()})}ngAfterContentInit(){Je(this.links.changes,this.linksWithHrefs.changes,Je(null)).pipe((0,il.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,en.D)(t).pipe((0,il.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function pU(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(nM,8),d.Y36(cg,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,nM,5),d.Suo(i,cg,5)),2&t){let u;d.iGM(u=d.CRH())&&(r.links=u),d.iGM(u=d.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class wk{}let gU=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof lg),fs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,en.D)(i).pipe((0,il.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=i.pipe((0,cn.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,en.D)([u,c]).pipe((0,il.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(wk),d.LFG(tM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iM=new d.OlP("");let Ek=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof BA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof HN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new HN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ky(n,e){return{\u0275kind:n,\u0275providers:e}}function sM(n){return[{provide:eM,multi:!0,useValue:n}]}function Ck(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(cr),i=n.get(Ik);1===n.get(oM)&&r.initialNavigation(),n.get(Dk,null,d.XFs.Optional)?.setUpPreloading(),n.get(iM,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const Ik=new d.OlP("",{factory:()=>new di.x}),oM=new d.OlP("",{providedIn:"root",factory:()=>1});const Dk=new d.OlP("");function vU(n){return Ky(0,[{provide:Dk,useExisting:gU},{provide:wk,useExisting:n}])}const Tk=new d.OlP("ROUTER_FORROOT_GUARD"),wU=[Ae,{provide:ON,useClass:PA},{provide:cr,useFactory:_k},j0,{provide:Cu,useFactory:function bk(n){return n.routerState.root},deps:[cr]},tM];function EU(){return new d.PXZ("Router",cr)}let Sk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wU,[],sM(t),{provide:Tk,useFactory:DU,deps:[[cr,new d.FiY,new d.tp0]]},{provide:GI,useValue:r||{}},r?.useHash?{provide:_e,useClass:st}:{provide:_e,useClass:Ke},{provide:iM,useFactory:()=>{const n=(0,d.f3M)(cr),e=(0,d.f3M)(Au),t=(0,d.f3M)(GI);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ek(n,e,t)}},r?.preloadingStrategy?vU(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:EU},r?.initialNavigation?TU(r):[],[{provide:Ak,useFactory:Ck},{provide:d.tb,multi:!0,useExisting:Ak}]]}}static forChild(t){return{ngModule:n,providers:[sM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tk,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[WA]}),n})();function DU(n){return"guarded"}function TU(n){return["disabled"===n.initialNavigation?Ky(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:oM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ky(2,[{provide:oM,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(H,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(cr),p=e.get(Ik);(function i(u){e.get(cr).events.pipe(Ar(p=>p instanceof lg||p instanceof kI||p instanceof jN),(0,_t.U)(p=>p instanceof lg||p instanceof kI&&(0===p.code||1===p.code)&&null),Ar(p=>null!==p),Fy(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||p.closed?Je(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const Ak=new d.OlP("");let W0=(()=>{class n{constructor(t){this.firestore=t,this._books$=new Ks([]),this.books$=this._books$.asObservable(),this.books=[]}queryBooks(t){var r=this;return(0,de.Z)(function*(){try{const i=r.firestore.collection("books").ref,u=yield xC(i);if(r.books=u.docs.map(c=>{const p=c.data();if("object"==typeof p)return{_id:c.id,...p}}),t?.txt){const c=t.txt.toLowerCase();r.books=r.books.filter(p=>{if(p.title.toLowerCase().includes(c))return p})}r._books$.next(r.books)}catch(i){console.log("cannot get books",i)}})()}getById(t){const r=this.books.find(i=>i._id===t);return r?Je({...r}):Je()}saveEntity(t){var r=this;return(0,de.Z)(function*(){const i=r.firestore.collection("books").ref;if(t._id){const u=JSON.parse(JSON.stringify(t)),c=pu(i,t._id);delete u._id;try{return yield Oy(c,u),t}catch(p){console.error("Error updating document: ",p)}}else try{const u=pu(i);yield a0(u,t)}catch(u){console.error("Error saving document: ",u)}})()}removeEntity(t){var r=this;return(0,de.Z)(function*(){const i=r.firestore.collection("books").ref;try{return yield oS(pu(i,t)),!0}catch(u){return console.error("Error deleting document: ",u),!1}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(XC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AU(n,e){if(1&n&&d._UZ(0,"img",9),2&n){const t=d.oxw();d.Q6J("src","assets/img/"+t.book.imgUrl,d.LSH)}}function MU(n,e){if(1&n&&d._UZ(0,"img",10),2&n){const t=d.oxw();d.Q6J("src",t.book.imgUrl,d.LSH)}}const xU=function(){return{"limit-txt":!0}};let OU=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.toastr=i,this.deleteBook=new d.vpe}details(){var t=this;return(0,de.Z)(function*(){(yield t.router.navigate([t.book._id],{relativeTo:t.route}))||t.showMsg("You need to login or signup first!","","warning")})()}edit(){var t=this;return(0,de.Z)(function*(){(yield t.router.navigate(["edit/"+t.book._id],{relativeTo:t.route}))||t.showMsg("You need to login or signup first!","","warning")})()}delete(){var t=this;return(0,de.Z)(function*(){t.deleteBook.emit(t.book._id)})()}showMsg(t,r,i){this.toastr.warning(t,r,{toastClass:`user-msg ${i}`,positionClass:"toast-top-right"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cu),d.Y36(cr),d.Y36(N0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-preview"]],inputs:{book:"book"},outputs:{deleteBook:"deleteBook"},decls:18,vars:7,consts:[[1,"flex","book-card"],[3,"src",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"info"],[1,"details-title",3,"click"],[3,"ngClass"],[1,"read-more",3,"click"],[1,"book-actions"],[1,"action-btn",3,"click"],[3,"src"],["alt","",3,"src"]],template:function(t,r){if(1&t&&(d.TgZ(0,"li",0),d.YNc(1,AU,1,1,"img",1),d.YNc(2,MU,1,1,"ng-template",null,2,d.W1O),d.TgZ(4,"section",3)(5,"h3",4),d.NdJ("click",function(){return r.details()}),d._uU(6),d.qZA(),d.TgZ(7,"h5"),d._uU(8),d.qZA(),d.TgZ(9,"p",5),d._uU(10),d.qZA(),d.TgZ(11,"span",6),d.NdJ("click",function(){return r.details()}),d._uU(12,"... Read More"),d.qZA()(),d.TgZ(13,"section",7)(14,"button",8),d.NdJ("click",function(){return r.edit()}),d._uU(15,"edit"),d.qZA(),d.TgZ(16,"button",8),d.NdJ("click",function(){return r.delete()}),d._uU(17,"delete"),d.qZA()()()),2&t){const i=d.MAs(3);d.xp6(1),d.Q6J("ngIf","http"!==r.book.imgUrl.slice(0,4))("ngIfElse",i),d.xp6(5),d.Oqu(r.book.title),d.xp6(2),d.Oqu(r.book.author),d.xp6(1),d.Q6J("ngClass",d.DdM(6,xU)),d.xp6(1),d.Oqu(r.book.description)}},dependencies:[sn,Cn],styles:['.book-card[_ngcontent-%COMP%]{padding:1rem;overflow:hidden;gap:1rem;max-width:625px;box-shadow:0 1px #a29f9f5e;height:180px}.book-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:120px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden}.book-card[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%], .book-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]{align-self:flex-start;cursor:pointer}.book-card[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]:hover, .book-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]:hover{text-decoration:underline}.book-card[_ngcontent-%COMP%]   .book-actions[_ngcontent-%COMP%]{gap:15px;display:flex;flex-direction:column}.book-card[_ngcontent-%COMP%]   .book-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border-radius:10px;padding-inline:1rem}.limit-txt[_ngcontent-%COMP%]{max-height:40px}.limit-txt[_ngcontent-%COMP%]:after{content:"Read More"}']}),n})();function NU(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"book-preview",5),d.NdJ("deleteBook",function(i){d.CHM(t);const u=d.oxw();return d.KtG(u.deleteBook(i))}),d.qZA()}2&n&&d.Q6J("book",e.$implicit)}let kU=(()=>{class n{constructor(t,r,i,u){this.FirestoreService=t,this.route=r,this.router=i,this.toastr=u}ngOnInit(){}toEdit(){var t=this;return(0,de.Z)(function*(){(yield t.router.navigate(["edit"],{relativeTo:t.route}))||t.toastr.warning("You need to login or signup first!","",{toastClass:"user-msg",positionClass:"toast-top-right"})})()}deleteBook(t){var r=this;return(0,de.Z)(function*(){(yield r.FirestoreService.removeEntity(t))?(yield r.FirestoreService.queryBooks({}),r.toastr.success("Book deleted","",{toastClass:"user-msg",positionClass:"toast-top-right"})):r.toastr.error("Cannot delete book","",{toastClass:"user-msg",positionClass:"toast-top-right"})})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(W0),d.Y36(Cu),d.Y36(cr),d.Y36(N0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-list"]],inputs:{books:"books"},decls:6,vars:1,consts:[[1,"narrow-container","book-list-wrapper"],[1,"book-actions","flex","justify-center"],[1,"action-btn",3,"click"],[1,"clean-list","book-list"],[3,"book","deleteBook",4,"ngFor","ngForOf"],[3,"book","deleteBook"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"section",1)(2,"a",2),d.NdJ("click",function(){return r.toEdit()}),d._uU(3,"add book"),d.qZA()(),d.TgZ(4,"ul",3),d.YNc(5,NU,1,1,"book-preview",4),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.books))},dependencies:[As,OU],styles:[".book-list-wrapper[_ngcontent-%COMP%]   .book-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;margin-top:50px;background-color:inherit;gap:20px}@media (max-width: 1250px){.book-list-wrapper[_ngcontent-%COMP%]   .book-list[_ngcontent-%COMP%]{grid-template-columns:100%}}@media (max-width: 900px){.book-list-wrapper[_ngcontent-%COMP%]{padding-inline:0}}"]}),n})(),PU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["loader"]],decls:24,vars:0,consts:[[1,"loader-wrapper"],[1,"loader"],["viewBox","0 0 90 120","fill","currentColor"],["d","M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"div")(3,"ul")(4,"li"),d.O4$(),d.TgZ(5,"svg",2),d._UZ(6,"path",3),d.qZA()(),d.kcU(),d.TgZ(7,"li"),d.O4$(),d.TgZ(8,"svg",2),d._UZ(9,"path",3),d.qZA()(),d.kcU(),d.TgZ(10,"li"),d.O4$(),d.TgZ(11,"svg",2),d._UZ(12,"path",3),d.qZA()(),d.kcU(),d.TgZ(13,"li"),d.O4$(),d.TgZ(14,"svg",2),d._UZ(15,"path",3),d.qZA()(),d.kcU(),d.TgZ(16,"li"),d.O4$(),d.TgZ(17,"svg",2),d._UZ(18,"path",3),d.qZA()(),d.kcU(),d.TgZ(19,"li"),d.O4$(),d.TgZ(20,"svg",2),d._UZ(21,"path",3),d.qZA()()()(),d.kcU(),d.TgZ(22,"span"),d._uU(23,"Loading"),d.qZA()()())},styles:['.loader-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-block-start:1rem;background-color:#f3e0cd36;padding:4rem}.loader[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f3e0cdf7, rgb(122, 29, 29));--shadow: rgba(249, 172, 172, .28);--text: #6C7486;--page: rgba(255, 255, 255, .36);--page-fold: rgba(255, 255, 255, .52);--duration: 3s;width:200px;height:140px;position:relative}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{--r: -6deg;content:"";position:absolute;bottom:8px;width:120px;top:80%;box-shadow:0 16px 12px var(--shadow);transform:rotate(var(--r))}.loader[_ngcontent-%COMP%]:before{left:4px}.loader[_ngcontent-%COMP%]:after{--r: 6deg;right:4px}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:13px;position:relative;z-index:1;perspective:600px;box-shadow:0 4px 6px var(--shadow);background-image:var(--background)}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;position:relative}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{--r: 180deg;--o: 0;--c: var(--page);position:absolute;top:10px;left:10px;transform-origin:100% 50%;color:var(--c);opacity:var(--o);transform:rotateY(var(--r));animation:var(--duration) ease infinite}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){--c: var(--page-fold);animation-name:page-2}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){--c: var(--page-fold);animation-name:page-3}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){--c: var(--page-fold);animation-name:page-4}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){--c: var(--page-fold);animation-name:page-5}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:90px;height:120px;display:block}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{--r: 0deg;--o: 1}.loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{--o: 1}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;left:0;right:0;top:100%;margin-top:20px;text-align:center;color:var(--text)}@keyframes page-2{0%{transform:rotateY(180deg);opacity:0}20%{opacity:1}35%,to{opacity:0}50%,to{transform:rotateY(0)}}@keyframes page-3{15%{transform:rotateY(180deg);opacity:0}35%{opacity:1}50%,to{opacity:0}65%,to{transform:rotateY(0)}}@keyframes page-4{30%{transform:rotateY(180deg);opacity:0}50%{opacity:1}65%,to{opacity:0}80%,to{transform:rotateY(0)}}@keyframes page-5{45%{transform:rotateY(180deg);opacity:0}65%{opacity:1}80%,to{opacity:0}95%,to{transform:rotateY(0)}}html[_ngcontent-%COMP%]{box-sizing:border-box;-webkit-font-smoothing:antialiased}*[_ngcontent-%COMP%]{box-sizing:inherit}*[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:inherit}body[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:#1C212E;font-family:Roboto,Arial}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]{position:fixed;display:block;right:24px;bottom:24px}body[_ngcontent-%COMP%]   .dribbble[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:76px}']}),n})();function RU(n,e){if(1&n&&(d._UZ(0,"book-list",3),d.ALo(1,"async")),2&n){const t=d.oxw();d.Q6J("books",d.lcZ(1,1,t.books$))}}function FU(n,e){1&n&&d._UZ(0,"loader")}let LU=(()=>{class n{constructor(t){this.FirestoreService=t,this.isLoading=!1}ngOnInit(){this.FirestoreService.queryBooks({txt:""}),this.books$=this.FirestoreService.books$}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(W0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-app"]],decls:5,vars:2,consts:[[1,"container","books-container"],[3,"books",4,"ngIf","ngIfElse"],["showLoader",""],[3,"books"]],template:function(t,r){if(1&t&&(d.TgZ(0,"section",0),d.YNc(1,RU,2,3,"book-list",1),d.YNc(2,FU,1,0,"ng-template",null,2,d.W1O),d._UZ(4,"router-outlet"),d.qZA()),2&t){const i=d.MAs(3);d.xp6(1),d.Q6J("ngIf",!r.isLoading)("ngIfElse",i)}},dependencies:[Cn,FI,kU,PU,Du],styles:[".books-container[_ngcontent-%COMP%]{height:100%;background-color:inherit}"]}),n})();class Ea{constructor(e,t="",r="",i="",u="",c=[]){this._id=e,this.title=t,this.description=r,this.author=i,this.imgUrl=u,this.reviews=c}}let aM=(()=>{class n{constructor(){}setId(){var t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<10;u++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}generateRandom(t=100){let r=Math.random()*t;return r=Math.floor(r),r}store(t,r){return localStorage[t]=JSON.stringify(r),r}load(t){var r=localStorage[t]||"null";return JSON.parse(r)}refresh(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uM=(()=>{class n{constructor(t,r){this.UtilService=t,this.firestore=r,this._BOOKdb=[],this.KEY="books",this.books=[],this._books$=new Ks([]),this.books$=this._books$.asObservable()}mockDB(){this._BOOKdb=this.UtilService.load(this.KEY)||this.UtilService.store(this.KEY,[new Ea("5a56640269f443a5d64b32ca","The Lightning Thief","Percy Jackson is a good kid, but he can't seem to focus on his schoolwork or control his temper. And lately, being away at boarding school is only getting worse - Percy could have sworn his pre-algebra teacher turned into a monster and tried to kill him. When Percy's mom finds out, she knows it's time that he knew the truth about where he came from, and that he go to the one place he'll be safe. She sends Percy to Camp Half Blood, a summer camp for demigods (on Long Island), where he learns that the father he never knew is Poseidon, God of the Sea. Soon a mystery unfolds and together with his friends\u2014one a satyr and the other the demigod daughter of Athena - Percy sets out on a quest across the United States to reach the gates of the Underworld (located in a recording studio in Hollywood) and prevent a catastrophic war between the gods.","Rick Riordan","1.png"),new Ea("5a5664025f6ae9aa24a99fde","The Bad Beginning","Dear Reader, I'm sorry to say that the book you are holding in your hands is extremely unpleasant. It tells an unhappy tale about three very unlucky children. Even though they are charming and clever, the Baudelaire siblings lead lives filled with misery and woe. From the very first page of this book when the children are at the beach and receive terrible news, continuing on through the entire story, disaster lurks at their heels. One might say they are magnets for misfortune.In this short book alone, the three youngsters encounter a greedy and repulsive villain, itchy clothing, a disastrous fire, a plot to steal their fortune, and cold porridge for breakfast. It is my sad duty to write down these unpleasant tales, but there is nothing stopping you from putting this book down at once and reading something happy, if you prefer that sort of thing. With all due respect Lemony Snicket"," ","2.png"),new Ea("5a56640252d6acddd183d319","Minno","It isn't easy being thirteen ... and being raised by your grandfather ... and having a name like Minno ... and then having to journey through a strange land. But Minno is doing the best she can. For all her young life Minno believed her parents were dead. Then she learns they're alive, but they're in grave danger. Her friend Hailey thought she was having a sleepover at her friend's house. Now she's Minno's ally and partner on an incredible quest. Together the girls embark on the adventure of a lifetime, where they face a veritable menagerie of strange creatures, both friendly and unfriendly to their cause. Oh, yea, then there's one evil high minister Craveaux, who must stop Minno while he steals all the magic in the kingdom for his own sinister purposes. Minno has to save her parents, and along the way discover who she really is.","James Barlog","3.png"),new Ea("5a566402ed1cf349f0b47b4d","Amanda Lester and the Pink Sugar Conspiracy","Twelve-year-old Amanda Lester wouldn't be caught dead going into the family business. Just because she's related to Inspector G. Lestrade, that bumbler who sometimes worked with master sleuth Sherlock Holmes, doesn't mean she should become a detective and give up her dream of becoming a filmmaker. Unfortunately, her plans are in jeopardy. Her latest project with the Stick Dog Filmmakers Club and Production Company isn't coming together, and her control freak tendencies have driven away all her actors. If she doesn't make a winning film soon, her parents will insist that she go into the L.A.P.D. young cadets training program, and her budding career will be over. So when Herb and Lila Lester suddenly send her to a secret English school for the descendants of famous detectives, Amanda resists-until she and her new friends notice drops of blood and weird pink substances in odd places. Are these strange happenings clues to a real mystery or simply part of the elaborate class project the teachers assign every year? The answer comes all too soon. When Amanda's father disappears and the school's cook is found dead with her head in a bag of sugar, the kids are certain that crimes are taking place. Now Amanda must embrace her destiny and uncover the truth. The only snag is that arch-villain Blixus Moriarty, a descendant of Holmes's nemesis Professor James Moriarty, might be involved, and he doesn't like nosy little girls interfering in his business.","Paula Berinstein","4.png"),new Ea("5a566402abce24c6bfe4699d","The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new Ea("5a566402a6499c1d4da9220a","School of Fear","With very few options left, the parents of these four twelve year-olds send them to the highly elusive and exclusive School of Fear to help them overcome their phobias. But when their peculiar teacher, Mrs. Wellington, and her unconventional teaching methods turn out to be more frightening than even their fears, the foursome realize that this just may be the scariest summer of their lives.","Gitty Daneshvari, Emma Walton Hamilton","6.png"),new Ea("5a566402f90ae30e97f990db","Artemis Fowl","Twelve-year-old Artemis Fowl is a millionaire, a genius, and above all, a criminal mastermind. But even Artemis doesn't know what he's taken on when he kidnaps a fairy, Captain Holly Short of the LEPrecon Unit. These aren't the fairies of bedtime stories\u2014they're dangerous! Full of unexpected twists and turns, Artemis Fowl is a riveting, magical adventure.","Eoin Colfer","7.png"),new Ea(this.UtilService.setId(),"A Suitable Boy","Vikram Seth's novel is, at its core, a love story: Lata and her mother, Mrs. Rupa Mehra, are both trying to find\u2014through love or through exacting maternal appraisal\u2014a suitable boy for Lata to marry. Set in the early 1950s, in an India newly independent and struggling through a time of crisis, A Suitable Boy takes us into the richly imagined world of four large extended families and spins a compulsively readable tale of their lives and loves. A sweeping panoramic portrait of a complex, multiethnic society in flux, A Suitable Boy remains the story of ordinary people caught up in a web of love and ambition, humor and sadness, prejudice and reconciliation, the most delicate social etiquette and the most appalling violence.","Vikram Seth","8.png"),new Ea(this.UtilService.setId(),"Infernal Devices","HE INHERITED A WATCHMAKER'S STORE - AND A WHOLE HEAP OF TROUBLE. But idle sometime-musician George has little talent for clockwork. And when a shadowy figure tries to steal an old device from the premises, George finds himself embroiled in a mystery of time travel, music and sexual intrigue. A genuine lost classic, a steampunk original whose time has come.","K.W. Jeter","9.png"),new Ea(this.UtilService.setId(),"The Reapers are the Angels","Zombies have infested a fallen America. A young girl named Temple is on the run. Haunted by her past and pursued by a killer, Temple is surrounded by death and danger, hoping to be set free. For twenty-five years, civilization has survived in meager enclaves, guarded against a plague of the dead. Temple wanders this blighted landscape, keeping to herself - and keeping her demons inside. She can't remember a time before the zombies, but she does remember an old man who took her in and the younger brother she cared for until the tragedy that set her on a personal journey toward redemption. Moving back and forth between the insulated remnants of society and the brutal frontier beyond, Temple must decide where ultimately to make a home and find the salvation she seeks.","Alden Bell","10.png"),new Ea(this.UtilService.setId(),"How to Fall Out of Love Madly","Joy and Annie are friends and roommates whose thirtysomething existences aren't exactly what they'd imagined for themselves. Struggling to make ends meet, they decide to rent their extra bedroom to Theo, who charms Joy with his salt-and-pepper hair and adoration of their one-eyed cat. When Annie goes to live with her boyfriend, Theo and Joy settle into a comfortable domesticity. Then Theo brings home Celine, the girlfriend he's never mentioned and who is possibly the most stunning woman Joy has ever seen. Joy resolves to do whatever it takes to nurture the bond she and Theo have forged. Anything Celine might deny him, Joy will grant. Distracted by her need to please Theo, Joy fails to see that Celine's beauty doesn't protect her from her own insecurities. Celine is so haunted by an event in her past that she can't access the confidence she yearns to exude.","Jana Casale","11.png"),new Ea(this.UtilService.setId(),"Sacrificio","Set in Cuba in 1998, Sacrificio is a triumphant and mesmeric work of violence, loss, and identity, following a group of young HIV-positive counterrevolutionaries who seek to overthrow the Castro government. Rafa, an Afro-Cuban orphan, moves to Havana with nothing to his name and falls into a job at a caf\xe9. He is soon drawn into a web of bizarre, ever-shifting entanglements with his boss\u2019s son, the charismatic Renato, leader of the counterrevolutionary group \u201cLos Injected Ones,\u201d which is planning a violent overthrow of the Castro government during Pope John Paul II's upcoming visit.","Ernesto Mestre-Reed","12.png")])}loadBooks(){this.mockDB(),this.books=this._BOOKdb,this._books$.next(this.books)}getById(t){const r=this.books.find(i=>i._id===t);return r?Je({...r}):Je()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aM),d.LFG(XC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VU=(()=>{class n{constructor(t,r){this.http=t,this.UtilService=r}getQuotesFromApi(){return this.http.get("https://goquotes-api.herokuapp.com/api/v1/random?count=300").pipe((0,_t.U)(t=>t.quotes),(0,_t.U)(t=>t[this.UtilService.generateRandom(t.length)]))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mo),d.LFG(aM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-hero"]],decls:5,vars:0,consts:[[1,"app-hero"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h1")(2,"span"),d._uU(3,"Find your new "),d.qZA(),d._uU(4,"favorite book."),d.qZA()())},styles:[".app-hero[_ngcontent-%COMP%]{background-image:url(https://wallpaperaccess.com/full/934061.jpg);background-size:cover;background-repeat:no-repeat;background-position-y:-300px;width:100%;height:300px;display:flex;justify-content:center;align-items:center}.app-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:800;font-size:3.5rem;max-width:350px;line-height:60px;text-shadow:1px 1px 10px rgba(233,227,227,.608);color:#7a1d1d}.app-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fceeee;text-shadow:1px 1px 10px rgba(249,172,172,.808)}@media (max-width: 960px){.app-hero[_ngcontent-%COMP%]{background-position-y:0}}"]}),n})(),BU=(()=>{class n{constructor(t){this.router=t}goToBooks(){console.log("hi"),this.router.navigateByUrl("/explore")}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["explore-btn"]],decls:8,vars:0,consts:[[1,"animated-arrow",3,"click"],[1,"explore-btn","-left"],[1,"shaft"],[1,"main"],[1,"text"],[1,"explore-btn","-right"]],template:function(t,r){1&t&&(d.TgZ(0,"button",0),d.NdJ("click",function(){return r.goToBooks()}),d.TgZ(1,"span",1),d._UZ(2,"span",2),d.qZA(),d.TgZ(3,"span",3)(4,"span",4),d._uU(5," Explore More "),d.qZA(),d.TgZ(6,"span",5),d._UZ(7,"span",2),d.qZA()()())},styles:['.explore-btn[_ngcontent-%COMP%]{width:1px;transition:all .2s}.explore-btn.-left[_ngcontent-%COMP%]{position:absolute;top:60%;left:0}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:0;background-color:#000}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:0;background-color:#000}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(0)}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(0)}.explore-btn.-right[_ngcontent-%COMP%]{top:3px}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:1px;transition-delay:.2s}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:8px;transition-delay:.3s;transition:all .5s}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(40deg)}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(-40deg)}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{background-color:#000;display:block;height:1px;position:relative;transition:all .2s;transition-delay:0;will-change:transform}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{background-color:#000;content:"";display:block;height:1px;position:absolute;top:0;right:0;transition:all .2s;transition-delay:0}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform-origin:top right}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform-origin:bottom right}.animated-arrow[_ngcontent-%COMP%]{display:inline-block;color:#000;font-size:1.25em;text-decoration:none;position:relative;transition:all .2s;font-family:inherit;cursor:pointer}.animated-arrow[_ngcontent-%COMP%]:hover{color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:30px;transition-delay:.1s;background-color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:8px;transition-delay:.1s;background-color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(40deg)}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(-40deg)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%]{transform:translate(17px);transform:translate(30px)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:0;transform:translate(200%);transition-delay:0}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:0;transition-delay:0;transition:all .1s}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(0)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(0)}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%]{display:flex;align-items:center;transition:all .2s}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{margin:0 16px 0 0;line-height:1}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%] > .explore-btn[_ngcontent-%COMP%]{position:relative}']}),n})();function jU(n,e){1&n&&d._UZ(0,"img",4),2&n&&d.Q6J("src","assets/img/"+e.$implicit.imgUrl,d.LSH)}function HU(n,e){1&n&&d._UZ(0,"img",4),2&n&&d.Q6J("src","assets/img/"+e.$implicit.imgUrl,d.LSH)}let $U=(()=>{class n{constructor(){this.fantasyBooks=[],this.thrillerBooks=[]}ngOnInit(){!this.books||(this.fantasyBooks=this.books.slice(0,6),this.thrillerBooks=this.books.slice(6,12))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["discover"]],inputs:{books:"books"},decls:14,vars:2,consts:[[1,"flex","column","discover-container"],[1,"covers-container","flex","align-center"],[1,"cover-imgs"],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"h4"),d._uU(2,"Browse more fantasy books"),d.qZA(),d.TgZ(3,"div",1)(4,"div",2),d.YNc(5,jU,1,1,"img",3),d.qZA(),d._UZ(6,"explore-btn"),d.qZA()(),d.TgZ(7,"section",0)(8,"h4"),d._uU(9,"Browse more thriller books"),d.qZA(),d.TgZ(10,"div",1)(11,"div",2),d.YNc(12,HU,1,1,"img",3),d.qZA(),d._UZ(13,"explore-btn"),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngForOf",r.fantasyBooks),d.xp6(7),d.Q6J("ngForOf",r.thrillerBooks))},dependencies:[As,BU],styles:[".discover-container[_ngcontent-%COMP%]{margin-block-start:1rem;gap:3px;background-color:#ffedd9a2;padding:1rem;outline:1.5px solid rgba(0,0,0,.078);gap:10px}.discover-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px}.discover-container[_ngcontent-%COMP%]   .covers-container[_ngcontent-%COMP%]{gap:5px;flex-wrap:wrap}.discover-container[_ngcontent-%COMP%]   .cover-imgs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;min-width:150px}"]}),n})();const GU=function(n){return{fade:n}};function zU(n,e){if(1&n&&(d.TgZ(0,"section",8)(1,"div",9)(2,"h2"),d._uU(3),d.qZA(),d.TgZ(4,"span",10),d._uU(5),d.qZA()()()),2&n){const t=d.oxw();d.Q6J("ngClass",d.VKq(3,GU,t.isFade)),d.xp6(3),d.Oqu(t.quote.text),d.xp6(2),d.Oqu(t.quote.author)}}let Mk=(()=>{class n{constructor(t,r){this.BookService=t,this.QuoteService=r,this.quote=null,this.quoteIntervalID=null,this.isFade=!1}ngOnInit(){this.BookService.loadBooks(),this.books$=this.BookService.books$,this.subscription=this.QuoteService.getQuotesFromApi().subscribe(t=>{this.quote=t}),this.quoteIntervalID=setInterval(()=>{this.subscription=this.QuoteService.getQuotesFromApi().subscribe(t=>{this.isFade=!0,setTimeout(()=>{this.quote=t,this.isFade=!1},500)})},4500)}ngOnDestroy(){this.subscription.unsubscribe(),this.quoteIntervalID&&clearInterval(this.quoteIntervalID)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uM),d.Y36(VU))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:27,vars:4,consts:[[1,"narrow-container","home-paragraphs","flex"],[1,"narrow-container","home-wrapper"],[1,"discover-books"],[3,"books"],[1,"quote-title"],["class","quote-wrapper",3,"ngClass",4,"ngIf"],[1,"ad"],["src","https://thepienews.com/wp-content/uploads/2011/10/ad-placeholder-empty-without.png"],[1,"quote-wrapper",3,"ngClass"],[1,"quote-info"],[1,"small-title"]],template:function(t,r){1&t&&(d.TgZ(0,"div"),d._UZ(1,"app-hero"),d.TgZ(2,"div",0)(3,"section")(4,"h3"),d._uU(5,"Deciding what to read next?"),d.qZA(),d.TgZ(6,"p"),d._uU(7," You\u2019re in the right place. Tell us what titles or genres you\u2019ve enjoyed in the past, and we\u2019ll give you surprisingly insightful recommendations. "),d.qZA()(),d.TgZ(8,"section")(9,"h3"),d._uU(10,"What are your friends reading?"),d.qZA(),d.TgZ(11,"p"),d._uU(12," Chances are your friends are discussing their favorite (and least favorite) books on missBooks. "),d.qZA()()(),d.TgZ(13,"section",1)(14,"section",2)(15,"h3"),d._uU(16,"Books to discover"),d.qZA(),d._UZ(17,"a")(18,"discover",3),d.ALo(19,"async"),d.TgZ(20,"h3",4),d._uU(21,"Get inspired while you're here.."),d.qZA(),d.YNc(22,zU,6,5,"section",5),d.qZA(),d.TgZ(23,"section",6),d._UZ(24,"img",7)(25,"img",7)(26,"img",7),d.qZA()()()),2&t&&(d.xp6(18),d.Q6J("books",d.lcZ(19,2,r.books$)),d.xp6(4),d.Q6J("ngIf",r.quote))},dependencies:[sn,Cn,UU,$U,Du],styles:[".home-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 30%;margin-block-start:2rem;gap:10px}.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]{grid-column:2}.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}@media (max-width: 900px){.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]{grid-column:1}}@media (max-width: 900px){.home-wrapper[_ngcontent-%COMP%]{padding-inline:30px}}.home-paragraphs[_ngcontent-%COMP%]{margin-block-start:1rem;gap:30px}.home-paragraphs[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:300px;word-wrap:break-word;line-height:20px;margin-block-start:1rem;font-size:14px}@media (max-width: 900px){.home-paragraphs[_ngcontent-%COMP%]{flex-direction:column;padding-inline:30px}}.quote-wrapper[_ngcontent-%COMP%]{transition:all .6s;opacity:1}.quote-wrapper.fade[_ngcontent-%COMP%]{opacity:0}.quote-title[_ngcontent-%COMP%]{padding-block:1rem}.quote-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();function qU(n,e){if(1&n&&d._UZ(0,"img",7),2&n){const t=d.oxw();d.Q6J("src","assets/img/"+t.book.imgUrl,d.LSH)}}function WU(n,e){if(1&n&&d._UZ(0,"img",7),2&n){const t=d.oxw();d.Q6J("src",t.book.imgUrl,d.LSH)}}let ZU=(()=>{class n{constructor(t,r){this.BookService=t,this.route=r}ngOnInit(){this.route.data.subscribe(t=>{console.log(t),this.book=t.book})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uM),d.Y36(Cu))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-details"]],decls:14,vars:5,consts:[[1,"details-container"],[1,"book-details"],["routerLink","/explore",1,"back"],["alt","",3,"src",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"book-info","flex","column"],[1,"small-title"],["alt","",3,"src"]],template:function(t,r){if(1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"a",2),d._uU(3,"X"),d.qZA(),d.YNc(4,qU,1,1,"img",3),d.YNc(5,WU,1,1,"ng-template",null,4,d.W1O),d.TgZ(7,"div",5)(8,"h2"),d._uU(9),d.qZA(),d.TgZ(10,"span",6),d._uU(11),d.qZA(),d.TgZ(12,"p"),d._uU(13),d.qZA()()()()),2&t){const i=d.MAs(6);d.xp6(4),d.Q6J("ngIf","http"!==r.book.imgUrl.slice(0,4))("ngIfElse",i),d.xp6(5),d.Oqu(r.book.title),d.xp6(2),d.Oqu(r.book.author),d.xp6(2),d.hij(" ",r.book.description," ")}},dependencies:[Cn,cg],styles:[".details-container[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#0000007c;position:fixed;top:0;left:0;overflow:auto}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translate(50%,-50%);padding:2rem;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;gap:15px}@media (max-width: 650px){.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]{width:100%}}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px}"]}),n})(),Z0=(()=>{class n{constructor(t,r,i,u,c,p){this.afAuth=t,this.ngZone=r,this.UtilService=i,this.toastr=u,this.router=c,this.db=p,this.isLoggedIn=!1,this.currentUser=null,this.authStatusSub=new Ks(this.currentUser),this.currentAuthStatus=this.authStatusSub.asObservable(),this.authStatusListener()}SetUserData(t){return this.db.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName},{merge:!0})}authStatusListener(){this.afAuth.onAuthStateChanged(t=>{t?(this.authStatusSub.next(t),this.isLoggedIn=!0):(this.authStatusSub.next(null),this.isLoggedIn=!1,console.log("User is logged out"))})}showMsg(t,r,i){this.toastr.success(r,t,{toastClass:`user-msg ${i}`,positionClass:"toast-top-right"})}checkUserLogin(){return Je(this.isLoggedIn)}signin(t){var r=this;return(0,de.Z)(function*(){const{email:i,password:u}=t;try{i&&u&&(r.userData=yield r.afAuth.signInWithEmailAndPassword(i,u),r.showMsg("","Login succeeded!","success"),r.router.navigateByUrl("/home"))}catch(c){console.log(c,"Couldn't signup"),r.showMsg("","Login failed!","error")}})()}signup(t){var r=this;return(0,de.Z)(function*(){const{email:i,password:u,displayName:c}=t;try{if(i&&u){r.userData=yield r.afAuth.createUserWithEmailAndPassword(i,u),yield r.userData.user.updateProfile({displayName:c});const{uid:p}=r.userData.user;yield r.SetUserData({uid:p,email:i,displayName:c}),r.showMsg("","Signup succeeded!","success"),r.router.navigateByUrl("/home")}}catch(p){console.log(p,"Couldn't signup"),r.showMsg("","Signup failed!","error")}})()}signout(){var t=this;return(0,de.Z)(function*(){try{yield t.afAuth.signOut(),t.showMsg("","Logout succeeded!","success")}catch(r){console.log("cannot logout",r),t.showMsg("","Logout failed!","error")}localStorage.removeItem("user")})()}getEmptyUser(){return{uid:"",email:"",password:"",displayName:""}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QC),d.LFG(d.R0b),d.LFG(aM),d.LFG(N0),d.LFG(cr),d.LFG(XC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KU=(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r}ngOnInit(){this.user=this.AuthService.getEmptyUser()}onSignup(){var t=this;return(0,de.Z)(function*(){yield t.AuthService.signup({...t.user}),t.router.navigateByUrl("/home")})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Z0),d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["signup"]],decls:14,vars:3,consts:[[1,"container","flex","column","align-center","justify-center","signup-wrapper"],[1,"flex","column",3,"ngSubmit"],["for","name"],["type","text","name","name","id","name","placeholder","Name",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","id","email","placeholder","Email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","placeholder","Password",3,"ngModel","ngModelChange"],[1,"nice-button"],[1,"imgs"],["src","assets/img/lady-reading.png",1,"signup-img"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"h1"),d._uU(2,"Join our community!"),d.qZA(),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.onSignup()}),d.TgZ(4,"label",2)(5,"input",3),d.NdJ("ngModelChange",function(u){return r.user.displayName=u}),d.qZA()(),d.TgZ(6,"label",4)(7,"input",5),d.NdJ("ngModelChange",function(u){return r.user.email=u}),d.qZA()(),d.TgZ(8,"label",6)(9,"input",7),d.NdJ("ngModelChange",function(u){return r.user.password=u}),d.qZA()(),d.TgZ(10,"button",8),d._uU(11,"Sign me up!"),d.qZA()(),d.TgZ(12,"div",9),d._UZ(13,"img",10),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngModel",r.user.displayName),d.xp6(2),d.Q6J("ngModel",r.user.email),d.xp6(2),d.Q6J("ngModel",r.user.password))},dependencies:[YS,tg,E0,BS,jy,T0],styles:[".signup-wrapper[_ngcontent-%COMP%]{gap:30px;padding:1.5rem;margin-block-start:5rem}.signup-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem}@media (max-width: 700px){.signup-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.signup-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:5px}.signup-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:280px}.signup-img[_ngcontent-%COMP%]{max-width:450px}@media (max-width: 500px){.signup-img[_ngcontent-%COMP%]{left:20px;max-width:320px}}"]}),n})(),YU=(()=>{class n{constructor(t){this.AuthService=t}ngOnInit(){this.user=this.AuthService.getEmptyUser()}onSignin(){var t=this;return(0,de.Z)(function*(){t.AuthService.signin({...t.user})})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Z0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-signin"]],decls:12,vars:2,consts:[[1,"container","flex","column","align-center","justify-center","signin-wrapper"],[1,"flex","column",3,"ngSubmit"],["for","email"],["type","email","name","email","id","email","placeholder","Email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","placeholder","Password",3,"ngModel","ngModelChange"],[1,"nice-button"],[1,"imgs"],["src","assets/img/read-book.png",1,"signin-img"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"h1"),d._uU(2,"Log in to your account"),d.qZA(),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.onSignin()}),d.TgZ(4,"label",2)(5,"input",3),d.NdJ("ngModelChange",function(u){return r.user.email=u}),d.qZA()(),d.TgZ(6,"label",4)(7,"input",5),d.NdJ("ngModelChange",function(u){return r.user.password=u}),d.qZA()(),d.TgZ(8,"button",6),d._uU(9,"Sign in"),d.qZA()(),d.TgZ(10,"div",7),d._UZ(11,"img",8),d.qZA()()),2&t&&(d.xp6(5),d.Q6J("ngModel",r.user.email),d.xp6(2),d.Q6J("ngModel",r.user.password))},dependencies:[YS,tg,E0,BS,jy,T0],styles:[".signin-wrapper[_ngcontent-%COMP%]{gap:30px;padding:1.5rem;margin-block-start:5rem}.signin-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem}@media (max-width: 700px){.signin-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.signin-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:5px}.signin-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:280px}.signin-img[_ngcontent-%COMP%]{max-width:450px}@media (max-width: 500px){.signin-img[_ngcontent-%COMP%]{right:20px;max-width:320px}}"]}),n})(),xk=(()=>{class n{constructor(t,r){this.BookService=t,this.FirestoreService=r}resolve(t){return this.FirestoreService.getById(t.params.id)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uM),d.LFG(W0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lM=(()=>{class n{constructor(t){this.authService=t}canActivate(t){return this.authService.checkUserLogin()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Z0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ok=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.FirestoreService=i,this.book={title:"",author:"",description:"",imgUrl:"",reviews:[]}}ngOnInit(){this.route.data.subscribe(t=>{t.book&&(this.book=t.book)})}addBook(){var t=this;return(0,de.Z)(function*(){try{yield t.FirestoreService.saveEntity(t.book),yield t.FirestoreService.queryBooks({}),t.router.navigate(["explore"])}catch(r){console.log("Cannot save book...",r)}})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cu),d.Y36(cr),d.Y36(W0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-edit"]],decls:20,vars:4,consts:[[1,"edit-container"],[1,"wrapper"],["routerLink","/explore",1,"back"],[1,"flex","column","justify-center","align-center",2,"width","100%"],["elseBlock",""],["for","imageUrl"],["type","text","id","imageUrl",3,"ngModel","ngModelChange"],["for","title"],["type","text","id","title",3,"ngModel","ngModelChange"],["for","author"],["type","text","id","author",3,"ngModel","ngModelChange"],["for","description"],["width","200","id","description","height","200","type","text",3,"ngModel","ngModelChange"],[1,"action-btn",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"a",2),d._uU(3,"X"),d.qZA(),d.TgZ(4,"div",3,4)(6,"label",5),d._uU(7,"Book Image"),d.qZA(),d.TgZ(8,"input",6),d.NdJ("ngModelChange",function(u){return r.book.imgUrl=u}),d.qZA()(),d.TgZ(9,"label",7),d._uU(10,"Book Title"),d.qZA(),d.TgZ(11,"input",8),d.NdJ("ngModelChange",function(u){return r.book.title=u}),d.qZA(),d.TgZ(12,"label",9),d._uU(13,"Author"),d.qZA(),d.TgZ(14,"input",10),d.NdJ("ngModelChange",function(u){return r.book.author=u}),d.qZA(),d.TgZ(15,"label",11),d._uU(16,"Summary"),d.qZA(),d.TgZ(17,"textarea",12),d.NdJ("ngModelChange",function(u){return r.book.description=u}),d.qZA(),d.TgZ(18,"button",13),d.NdJ("click",function(){return r.addBook()}),d._uU(19,"submit"),d.qZA()()()),2&t&&(d.xp6(8),d.Q6J("ngModel",r.book.imgUrl),d.xp6(3),d.Q6J("ngModel",r.book.title),d.xp6(3),d.Q6J("ngModel",r.book.author),d.xp6(3),d.Q6J("ngModel",r.book.description))},dependencies:[cg,tg,E0,jy],styles:[".edit-container[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#0000007c;position:fixed;top:0;left:0;overflow:auto}.edit-container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translate(50%,-50%);padding:2rem;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;gap:15px;min-height:450px;min-width:450px}.edit-container[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px}.edit-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:200px;width:400px;font-size:1rem;resize:none}.edit-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px}"]}),n})();const QU=[{path:"explore",component:LU,children:[{path:"edit",component:Ok,canActivate:[lM]},{path:"edit/:id",component:Ok,canActivate:[lM],resolve:{book:xk}},{path:":id",component:ZU,canActivate:[lM],resolve:{book:xk}}]},{path:"signup",component:KU},{path:"signin",component:YU},{path:"home",component:Mk},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:Mk}];let JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Sk.forRoot(QU,{useHash:!0}),Sk]}),n})(),XU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-navbar"]],decls:5,vars:0,consts:[[1,"main-nav","flex","align-center"],["exact","","routerLink","/home","routerLinkActive","selected",1,"main-nav-item"],["routerLink","/explore","routerLinkActive","selected",1,"main-nav-item"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2," Home "),d.qZA(),d.TgZ(3,"a",2),d._uU(4," Explore "),d.qZA()())},dependencies:[cg,rM],styles:[".main-nav[_ngcontent-%COMP%]{gap:10px;font-size:15px;font-family:Nanum Gothic}"]}),n})(),eB=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-logo"]],decls:5,vars:0,consts:[[1,"book-logo"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"h1"),d._uU(2,"miss"),d.TgZ(3,"span"),d._uU(4,"books"),d.qZA()()())},styles:[".book-logo[_ngcontent-%COMP%]{font-family:Nanum Gothic}.book-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:200;color:#7a1d1d;margin:0;font-size:1.75rem}.book-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Nanum Gothic;font-weight:700;color:#671f1f}"]}),n})();function tB(n,e){1&n&&(d.TgZ(0,"section",3)(1,"a",4),d._uU(2," Sign in "),d.qZA(),d.TgZ(3,"a",5),d._uU(4," Join "),d.qZA()())}function nB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",6)(1,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onLogout())}),d._uU(2,"Logout"),d.qZA()()}}let rB=(()=>{class n{constructor(t){this.AuthService=t,this.logout=new d.vpe}ngOnInit(){this.AuthService.authStatusListener(),this.AuthService.currentAuthStatus.subscribe(t=>{this.isUser=t})}onLogout(){this.logout.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Z0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["user-navbar"]],outputs:{logout:"logout"},decls:4,vars:2,consts:[[1,"user-nav","flex","align-center"],["class","signed-out flex align-center",4,"ngIf","ngIfElse"],["signedIn",""],[1,"signed-out","flex","align-center"],["routerLink","/signin","routerLinkActive","selected",1,"main-nav-item"],["exact","","routerLink","/signup","routerLinkActive","selected",1,"main-nav-item"],[1,"signed-in"],[1,"main-nav-item",3,"click"]],template:function(t,r){if(1&t&&(d.TgZ(0,"nav",0),d.YNc(1,tB,5,0,"section",1),d.YNc(2,nB,3,0,"ng-template",null,2,d.W1O),d.qZA()),2&t){const i=d.MAs(3);d.xp6(1),d.Q6J("ngIf",!r.isUser)("ngIfElse",i)}},dependencies:[Cn,cg,rM],styles:[".signed-out[_ngcontent-%COMP%]{gap:20px;font-family:Nanum Gothic}.signed-out[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-inline:.5rem}.signed-in[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}"]}),n})(),iB=(()=>{class n{constructor(t){this.FirestoreService=t,this.filterBy={txt:""}}ngOnInit(){}filterBooks(){var t=this;return(0,de.Z)(function*(){try{yield t.FirestoreService.queryBooks(t.filterBy)}catch(r){console.log("cannot filter books",r)}})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(W0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["filter"]],decls:1,vars:1,consts:[["type","text","placeholder","Search books",1,"filter-input",3,"ngModel","ngModelChange","input"]],template:function(t,r){1&t&&(d.TgZ(0,"input",0),d.NdJ("ngModelChange",function(u){return r.filterBy.txt=u})("input",function(){return r.filterBooks()}),d.qZA()),2&t&&d.Q6J("ngModel",r.filterBy.txt)},dependencies:[tg,E0,jy],styles:["[_nghost-%COMP%]{flex-basis:40%}@media (max-width: 450px){input[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}}"]}),n})(),sB=(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r}onLogout(){this.AuthService.signout(),console.log(localStorage.getItem("user")),this.router.navigateByUrl("/home")}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Z0),d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["book-header"]],inputs:{logout:"logout"},decls:5,vars:0,consts:[[1,"narrow-container"],[3,"logout"]],template:function(t,r){1&t&&(d.TgZ(0,"header",0),d._UZ(1,"book-logo")(2,"book-navbar")(3,"filter"),d.TgZ(4,"user-navbar",1),d.NdJ("logout",function(){return r.onLogout()}),d.qZA()())},dependencies:[XU,eB,rB,iB],styles:["header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff4e8f7;gap:14px;box-shadow:0 1px 2px #00000026;flex-wrap:wrap;-webkit-user-select:none;user-select:none}@media (max-width: 900px){header[_ngcontent-%COMP%]{gap:.6rem;padding-inline:30px}}"]}),n})(),oB=(()=>{class n{constructor(){this.title="books-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"book-header")(1,"router-outlet")},dependencies:[FI,sB]}),n})();const Nk_firebaseConfig={apiKey:"AIzaSyApUkhOG6XKFLhBOz5PAu8e2DblfiYhIEg",authDomain:"missbooks-13d4f.firebaseapp.com",projectId:"missbooks-13d4f",storageBucket:"missbooks-13d4f.appspot.com",messagingSenderId:"632164729990",appId:"1:632164729990:web:4bb5c778ffbb054dc1fd07",measurementId:"G-NSVEWWXF1G"};let aB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[oB]}),n.\u0275inj=d.cJS({imports:[Yu,JU,ia,LR,qi.hO.initializeApp(Nk_firebaseConfig),NP,IP,UF,aL.forRoot({preventDuplicates:!0})]}),n})();(0,d.G48)(),Ku().bootstrapModule(aB).catch(n=>console.error(n))},5867:(lt,Se,R)=>{R.d(Se,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=R(9681);(0,d.registerVersion)("firebase","9.9.4","app")},127:(lt,Se,R)=>{R.d(Se,{Z:()=>d.Z});var d=R(3942);d.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(lt,Se,R)=>{R.r(Se);var d=R(5861),ee=R(3942),k=R(2090),ae=R(9681),se=R(655),fe=R(1877),ue=R(4859);const we=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new fe.Yd("@firebase/auth");function st(v,...f){Ke.logLevel<=fe.in.ERROR&&Ke.error(`Auth (${ae.SDK_VERSION}): ${v}`,...f)}function Ae(v,...f){throw je(v,...f)}function ve(v,...f){return je(v,...f)}function Ce(v,f,m){const w=Object.assign(Object.assign({},et()),{[f]:m});return new k.LL("auth","Firebase",w).create(f,{appName:v.name})}function Be(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ae(v,"argument-error"),Ce(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return _e.create(v,...f)}function B(v,f,...m){if(!v)throw je(f,...m)}function ye(v){const f="INTERNAL ASSERTION FAILED: "+v;throw st(f),new Error(f)}function Y(v,f){v||ye(f)}const X=new Map;function oe(v){Y(v instanceof Function,"Expected a class definition");let f=X.get(v);return f?(Y(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,X.set(v,f),f)}function ke(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ht(){return"http:"===qt()||"https:"===qt()}function qt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class un{constructor(f,m){this.shortDelay=f,this.longDelay=m,Y(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(v,f){Y(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Yt{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pr=new un(3e4,6e4);function Ft(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function an(v,f,m,w){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(v,f,m,w,A={}){return Wr(v,A,(0,d.Z)(function*(){let N={},Z={};w&&("GET"===f?Z=w:N={body:JSON.stringify(w)});const ce=(0,k.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Fe=yield v._getAdditionalHeaders();return Fe["Content-Type"]="application/json",v.languageCode&&(Fe["X-Firebase-Locale"]=v.languageCode),Yt.fetch()(Vi(v,v.config.apiHost,m,ce),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Wr(v,f,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qt),f);try{const A=new Kr(v),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const Z=yield N.json();if("needConfirmation"in Z)throw Ei(v,"account-exists-with-different-credential",Z);if(N.ok&&!("errorMessage"in Z))return Z;{const ce=N.ok?Z.errorMessage:Z.error.message,[Fe,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Ei(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Fe)throw Ei(v,"email-already-in-use",Z);if("USER_DISABLED"===Fe)throw Ei(v,"user-disabled",Z);const vt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ce(v,vt,Qe);Ae(v,vt)}}catch(A){if(A instanceof k.ZR)throw A;Ae(v,"network-request-failed")}})).apply(this,arguments)}function Zr(v,f,m,w){return Is.apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(v,f,m,w,A={}){const N=yield an(v,f,m,w,A);return"mfaPendingCredential"in N&&Ae(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Vi(v,f,m,w){const A=`${f}${m}?${w}`;return v.config.emulator?Fn(v.config,A):`${v.config.apiScheme}://${A}`}class Kr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ve(this.auth,"network-request-failed")),Pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ei(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=ve(v,f,w);return A.customData._tokenResponse=m,A}function Ze(){return(Ze=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Yr(v,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ln(v,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function hi(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function gn(){return(gn=(0,d.Z)(function*(v,f=!1){const m=(0,k.m9)(v),w=yield m.getIdToken(f),A=ut(w);B(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,Z=N?.sign_in_provider;return{claims:A,token:w,authTime:hi(gt(A.auth_time)),issuedAtTime:hi(gt(A.iat)),expirationTime:hi(gt(A.exp)),signInProvider:Z||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function gt(v){return 1e3*Number(v)}function ut(v){var f;const[m,w,A]=v.split(".");if(void 0===m||void 0===w||void 0===A)return st("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(w);return N?JSON.parse(N):(st("Failed to decode base64 JWT payload"),null)}catch(N){return st("Caught error parsing JWT payload as JSON",null===(f=N)||void 0===f?void 0:f.toString()),null}}function dr(v,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof k.ZR&&Rr(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Rr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class It{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class rs{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jt(v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),A=yield dr(v,Ln(m,{idToken:w}));B(A?.users.length,m,"internal-error");const N=A.users[0];v._notifyReloadListener(N);const Z=null!==(f=N.providerUserInfo)&&void 0!==f&&f.length?U(N.providerUserInfo):[],ce=$(v.providerData,Z),vt=!!v.isAnonymous&&!(v.email&&N.passwordHash||ce?.length),ot={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new rs(N.createdAt,N.lastLoginAt),isAnonymous:vt};Object.assign(v,ot)})).apply(this,arguments)}function K(){return(K=(0,d.Z)(function*(v){const f=(0,k.m9)(v);yield Jt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function $(v,f){return[...v.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function U(v){return v.map(f=>{var{providerId:m}=f,w=(0,se._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function W(){return(W=(0,d.Z)(function*(v,f){const m=yield Wr(v,{},(0,d.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:N}=v.config,Z=Vi(v,A,"/v1/token",`key=${N}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(Z,{method:"POST",headers:ce,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(typeof f.idToken<"u","internal-error"),B(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ln(v){const f=ut(v);return B(f,"internal-error"),B(typeof f.exp<"u","internal-error"),B(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return B(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:Z}=yield function z(v,f){return W.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,N,Number(Z))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:N}=m,Z=new Ie;return w&&(B("string"==typeof w,"internal-error",{appName:f}),Z.refreshToken=w),A&&(B("string"==typeof A,"internal-error",{appName:f}),Z.accessToken=A),N&&(B("number"==typeof N,"internal-error",{appName:f}),Z.expirationTime=N),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ie,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Ue(v,f){B("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class at{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,N=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new It(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new rs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield dr(m,m.stsTokenManager.getToken(m.auth,f));return B(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Xn(v){return gn.apply(this,arguments)}(this,f)}reload(){return function Kt(v){return K.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new at(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Jt(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield dr(f,function Vo(v,f){return Ze.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,N,Z,ce,Fe,Qe,vt;const ot=null!==(w=m.displayName)&&void 0!==w?w:void 0,or=null!==(A=m.email)&&void 0!==A?A:void 0,yi=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,pl=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Xa=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,gl=null!==(Fe=m._redirectEventId)&&void 0!==Fe?Fe:void 0,$r=null!==(Qe=m.createdAt)&&void 0!==Qe?Qe:void 0,rp=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Co,emailVerified:wh,isAnonymous:Rg,providerData:eu,stsTokenManager:Fg}=m;B(Co&&Fg,f,"internal-error");const f_=Ie.fromJSON(this.name,Fg);B("string"==typeof Co,f,"internal-error"),Ue(ot,f.name),Ue(or,f.name),B("boolean"==typeof wh,f,"internal-error"),B("boolean"==typeof Rg,f,"internal-error"),Ue(yi,f.name),Ue(pl,f.name),Ue(Xa,f.name),Ue(gl,f.name),Ue($r,f.name),Ue(rp,f.name);const ml=new at({uid:Co,auth:f,email:or,emailVerified:wh,displayName:ot,isAnonymous:Rg,photoURL:pl,phoneNumber:yi,tenantId:Xa,stsTokenManager:f_,createdAt:$r,lastLoginAt:rp});return eu&&Array.isArray(eu)&&(ml.providerData=eu.map(Lg=>Object.assign({},Lg))),gl&&(ml._redirectEventId=gl),ml}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const A=new Ie;A.updateFromServerResponse(m);const N=new at({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Jt(N),N})()}}const Xt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,d.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function er(v,f,m){return`firebase:${v}:${f}:${m}`}class Vt{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:N}=this.auth;this.fullUserKey=er(this.userKey,A.apiKey,N),this.fullPersistenceKey=er("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?at._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Vt(oe(Xt),f,w);const A=(yield Promise.all(m.map(function(){var Qe=(0,d.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=A[0]||oe(Xt);const Z=er(w,f.config.apiKey,f.name);let ce=null;for(const Qe of m)try{const vt=yield Qe._get(Z);if(vt){const ot=at._fromJSON(f,vt);Qe!==N&&(ce=ot),N=Qe;break}}catch{}const Fe=A.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ce&&(yield N._set(Z,ce.toJSON())),yield Promise.all(m.map(function(){var Qe=(0,d.Z)(function*(vt){if(vt!==N)try{yield vt._remove(Z)}catch{}});return function(vt){return Qe.apply(this,arguments)}}())),new Vt(N,f,w)):new Vt(N,f,w)})()}}function kt(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Fr(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(wn(f))return"Firefox";if(f.includes("silk/"))return"Silk";if($e(f))return"Blackberry";if(wt(f))return"Webos";if(zn(f))return"Safari";if((f.includes("chrome/")||Ui(f))&&!f.includes("edge/"))return"Chrome";if(qn(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function wn(v=(0,k.z$)()){return/firefox\//i.test(v)}function zn(v=(0,k.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ui(v=(0,k.z$)()){return/crios\//i.test(v)}function Fr(v=(0,k.z$)()){return/iemobile/i.test(v)}function qn(v=(0,k.z$)()){return/android/i.test(v)}function $e(v=(0,k.z$)()){return/blackberry/i.test(v)}function wt(v=(0,k.z$)()){return/webos/i.test(v)}function rn(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ys(v=(0,k.z$)()){return rn(v)||qn(v)||wt(v)||$e(v)||/windows phone/i.test(v)||Fr(v)}function Ds(v,f=[]){let m;switch(v){case"Browser":m=kt((0,k.z$)());break;case"Worker":m=`${kt((0,k.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${w}`}class Qs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=N=>new Promise((Z,ce)=>{try{Z(f(N))}catch(Fe){ce(Fe)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){var w;if(m.auth.currentUser===f)return;const A=[];try{for(const N of m.queue)yield N(f),N.onAbort&&A.push(N.onAbort)}catch(N){A.reverse();for(const Z of A)try{Z()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Pt{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Js(this),this.idTokenSubscription=new Js(this),this.beforeStateQueue=new Qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,N;if(!w._deleted&&(w.persistenceManager=yield Vt.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let N=A,Z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=N?._redirectEventId,Qe=yield m.tryRedirectSignIn(f);(!ce||ce===Fe)&&Qe?.user&&(N=Qe.user,Z=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(N)}catch(ce){N=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return B(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){var w;try{yield Jt(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,k.m9)(f):null;return w&&B(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&B(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&oe(f)||m._popupRedirectResolver;B(w,m,"argument-error"),m.redirectPersistenceManager=yield Vt.create(m,[oe(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ds(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function bn(v){return(0,k.m9)(v)}class Js{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bi(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Ts(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class vr{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,m){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function Zn(v,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:resetPassword",Ft(v,f))})).apply(this,arguments)}function sn(v,f){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kl(v,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:update",Ft(v,f))})).apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithPassword",Ft(v,f))})).apply(this,arguments)}function Ms(v,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:sendOobCode",Ft(v,f))})).apply(this,arguments)}function Cn(v,f){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,d.Z)(function*(v,f){return Ms(v,f)})).apply(this,arguments)}function fr(v,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(v,f){return Ms(v,f)})).apply(this,arguments)}function Iu(v,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,d.Z)(function*(v,f){return Ms(v,f)})).apply(this,arguments)}function Ql(v,f){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(v,f){return Ms(v,f)})).apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithEmailLink",Ft(v,f))})).apply(this,arguments)}function Jl(){return(Jl=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithEmailLink",Ft(v,f))})).apply(this,arguments)}class Xl extends vr{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Xl(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Xl(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Da(v,f){return As.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Rf(v,f){return Fd.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return sn(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ff(v,f){return Jl.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function nr(v,f){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithIdp",Ft(v,f))})).apply(this,arguments)}class is extends vr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new is(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,N=(0,se._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const Z=new is(w,A);return Z.idToken=N.idToken||void 0,Z.accessToken=N.accessToken||void 0,Z.secret=N.secret,Z.nonce=N.nonce,Z.pendingToken=N.pendingToken||null,Z}_getIdTokenResponse(f){return nr(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,nr(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,nr(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,k.xO)(m)}return f}}function pg(v,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:sendVerificationCode",Ft(v,f))})).apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ft(v,f))})).apply(this,arguments)}function Vd(){return(Vd=(0,d.Z)(function*(v,f){const m=yield Zr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ft(v,f));if(m.temporaryProof)throw Ei(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const mg={USER_NOT_FOUND:"user-not-found"};function Ud(){return(Ud=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithPhoneNumber",Ft(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),mg)})).apply(this,arguments)}class Os extends vr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Os({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Os({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function ec(v,f){return xs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function gg(v,f){return Vd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function yg(v,f){return Ud.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:N}=f;return w||m||A||N?new Os({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:N}):null}}class Tu{constructor(f){var m,w,A,N,Z,ce;const Fe=(0,k.zd)((0,k.pd)(f)),Qe=null!==(m=Fe.apiKey)&&void 0!==m?m:null,vt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,ot=function Bd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);B(Qe&&vt&&ot,"argument-error"),this.apiKey=Qe,this.operation=ot,this.code=vt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(Z=Fe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ce=Fe.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function jd(v){const f=(0,k.zd)((0,k.pd)(v)).link,m=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||m||f||v}(f);try{return new Tu(m)}catch{return null}}}let ji=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return Xl._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=Tu.parseLink(w);return B(A,"argument-error"),Xl._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class os extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class eo extends os{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return B("providerId"in m&&"signInMethod"in m,"argument-error"),is._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return eo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return eo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:N,nonce:Z,providerId:ce}=f;if(!w&&!A&&!m&&!N||!ce)return null;try{return new eo(ce)._credential({idToken:m,accessToken:w,nonce:Z,pendingToken:N})}catch{return null}}}let Sa=(()=>{class v extends os{constructor(){super("facebook.com")}static credential(m){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Su=(()=>{class v extends os{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),tc=(()=>{class v extends os{constructor(){super("github.com")}static credential(m){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Uo extends vr{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return nr(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,nr(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,nr(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:N}=m;return w&&A&&N&&w===A?new Uo(w,N):null}static _create(f,m){return new Uo(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pi extends ss{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return pi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return pi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Uo.fromJSON(f);return B(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Uo._create(w,m)}catch{return null}}}let Qr=(()=>{class v extends os{constructor(){super("twitter.com")}static credential(m,w){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Bo(v,f){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signUp",Ft(v,f))})).apply(this,arguments)}class wr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,d.Z)(function*(){const N=yield at._fromIdTokenResponse(f,w,A),Z=Uf(w);return new wr({user:N,providerId:Z,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Uf(w);return new wr({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function Uf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function xn(){return(xn=(0,d.Z)(function*(v){var f;const m=bn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new wr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Bo(m,{returnSecureToken:!0}),A=yield wr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Au extends k.ZR{constructor(f,m,w,A){var N;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new Au(f,m,w,A)}}function jf(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Au._fromErrorAndOperation(v,N,f,w):N})}function gi(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Mu(){return(Mu=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v);yield $t(!0,m,f);const{providerUserInfo:w}=yield Yr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=gi(w||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function to(v,f){return us.apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(v,f,m=!1){const w=yield dr(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return wr._forOperation(v,"link",w)})).apply(this,arguments)}function $t(v,f,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(v,f,m){yield Jt(f);const A=!1===v?"provider-already-linked":"no-such-provider";B(gi(f.providerData).has(m)===v,f.auth,A)})).apply(this,arguments)}function no(v,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(v,f,m=!1){var w;const{auth:A}=v,N="reauthenticate";try{const Z=yield dr(v,jf(A,N,f,v),m);B(Z.idToken,A,"internal-error");const ce=ut(Z.idToken);B(ce,A,"internal-error");const{sub:Fe}=ce;return B(v.uid===Fe,A,"user-mismatch"),wr._forOperation(v,N,Z)}catch(Z){throw"auth/user-not-found"===(null===(w=Z)||void 0===w?void 0:w.code)&&Ae(A,"user-mismatch"),Z}})).apply(this,arguments)}function Ti(v,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,d.Z)(function*(v,f,m=!1){const w="signIn",A=yield jf(v,w,f),N=yield wr._fromIdTokenResponse(v,w,A);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Dn(v,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(v,f){return Ti(bn(v),f)})).apply(this,arguments)}function Nu(v,f){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v);return yield $t(!1,m,f.providerId),to(m,f)})).apply(this,arguments)}function ku(v,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,d.Z)(function*(v,f){return no((0,k.m9)(v),f)})).apply(this,arguments)}function nc(v,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(v,f){return Zr(v,"POST","/v1/accounts:signInWithCustomToken",Ft(v,f))})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(v,f){const m=bn(v),w=yield nc(m,{token:f,returnSecureToken:!0}),A=yield wr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class De{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ut._fromServerResponse(f,m):Ae(f,"internal-error")}}class Ut extends De{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ut(m)}}function Ru(v,f,m){var w;B((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),B(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(B(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(B(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function On(){return(On=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v),A={requestType:"PASSWORD_RESET",email:f};m&&Ru(w,A,m),yield fr(w,A)})).apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(v,f,m){yield Zn((0,k.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(v,f){yield Kl((0,k.m9)(v),{oobCode:f})})).apply(this,arguments)}function Oa(v,f){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v),w=yield Zn(m,{oobCode:f}),A=w.requestType;switch(B(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(w.mfaInfo,m,"internal-error");default:B(w.email,m,"internal-error")}let N=null;return w.mfaInfo&&(N=De._fromServerResponse(bn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function $d(){return($d=(0,d.Z)(function*(v,f){const{data:m}=yield Oa((0,k.m9)(v),f);return m.email})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(v,f,m){const w=bn(v),A=yield Bo(w,{returnSecureToken:!0,email:f,password:m}),N=yield wr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};B(m.handleCodeInApp,w,"argument-error"),m&&Ru(w,A,m),yield Iu(w,A)})).apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v),A=ji.credentialWithLink(f,m||ke());return B(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Dn(w,A)})).apply(this,arguments)}function vg(v,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:createAuthUri",Ft(v,f))})).apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(v,f){const w={identifier:f,continueUri:ht()?ke():"http://localhost"},{signinMethods:A}=yield vg((0,k.m9)(v),w);return A||[]})).apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ru(m.auth,A,f);const{email:N}=yield Cn(m.auth,A);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Ru(w.auth,N,m);const{email:Z}=yield Ql(w.auth,N);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function Bu(v,f){return cc.apply(this,arguments)}function cc(){return(cc=(0,d.Z)(function*(v,f){return an(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,k.m9)(v),N={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield dr(w,Bu(w.auth,N));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const ce=w.providerData.find(({providerId:Fe})=>"password"===Fe);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function oo(v,f,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(v,f,m){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const Z=yield dr(v,sn(w,N));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Jr{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class mn extends Jr{constructor(f,m,w,A){super(f,m,w),this.username=A}}class fc extends Jr{constructor(f,m){super(f,"facebook.com",m)}}class pc extends mn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class zd extends Jr{constructor(f,m){super(f,"google.com",m)}}class gc extends mn{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Hu(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function rr(v){var f,m;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Z=null===(m=null===(f=ut(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new Jr(N,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new fc(N,A);case"github.com":return new pc(N,A);case"google.com":return new zd(N,A);case"twitter.com":return new gc(N,A,v.screenName||null);case"custom":case"anonymous":return new Jr(N,null);default:return new Jr(N,w,A)}}(m)}class ao{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ao("enroll",f)}static _fromMfaPendingCredential(f){return new ao("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ao._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return ao._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $u{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=bn(f),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(ce=>De._fromServerResponse(w,ce));B(A.mfaPendingCredential,w,"internal-error");const Z=ao._fromMfaPendingCredential(A.mfaPendingCredential);return new $u(Z,N,function(){var ce=(0,d.Z)(function*(Fe){const Qe=yield Fe._process(w,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const vt=Object.assign(Object.assign({},A),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(m.operationType){case"signIn":const ot=yield wr._fromIdTokenResponse(w,m.operationType,vt);return yield w._updateCurrentUser(ot.user),ot;case"reauthenticate":return B(m.user,w,"internal-error"),wr._forOperation(m.user,m.operationType,vt);default:Ae(w,"internal-error")}});return function(Fe){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function Gu(v,f){return an(v,"POST","/v2/accounts/mfaEnrollment:start",Ft(v,f))}class $f{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>De._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new $f(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ao._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const A=f,N=yield w.getSession(),Z=yield dr(w.user,A._process(w.user.auth,N,m));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,N=yield m.user.getIdToken(),Z=yield dr(m.user,function Kd(v,f){return an(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(v,f))}(m.user.auth,{idToken:N,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ce})=>ce!==A),yield m.user._updateTokensIfNecessary(Z);try{yield m.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const uo=new WeakMap,lo="__sak";class qu{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class v extends qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ra(){const v=(0,k.z$)();return zn(v)||rn(v)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ys(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),N=this.localCache[w];A!==N&&m(w,N,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((ce,Fe,Qe)=>{this.notifyListeners(ce,Qe)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const N=()=>{const ce=this.storage.getItem(A);!w&&this.localCache[A]===ce||this.notifyListeners(A,ce)},Z=this.storage.getItem(A);!function tr(){return(0,k.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,N=this;return(0,d.Z)(function*(){yield A().call(N,m,w),N.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const N=yield w().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),$i=(()=>{class v extends qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let Jd=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(N=>N.isListeningto(m));if(w)return w;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const A=m,{eventId:N,eventType:Z,data:ce}=A.data,Fe=w.handlersMap[Z];if(!Fe?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:Z});const Qe=Array.from(Fe).map(function(){var ot=(0,d.Z)(function*(or){return or(A.origin,ce)});return function(or){return ot.apply(this,arguments)}}()),vt=yield function Va(v){return Promise.all(v.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Qe);A.ports[0].postMessage({status:"done",eventId:N,eventType:Z,response:vt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ua(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class yc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,d.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let Z,ce;return new Promise((Fe,Qe)=>{const vt=Ua("",20);N.port1.start();const ot=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ce={messageChannel:N,onMessage(or){const yi=or;if(yi.data.eventId===vt)switch(yi.data.status){case"ack":clearTimeout(ot),Z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Fe(yi.data.response);break;default:clearTimeout(ot),clearTimeout(Z),Qe(new Error("invalid_response"))}}},A.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:f,eventId:vt,data:m},[N.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function Un(){return window}function Wu(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function Ba(){return(Ba=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ps="firebaseLocalStorageDb",Rs="firebaseLocalStorage",Yu="fbase_key";class ho{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ja(v,f){return v.transaction([Rs],f?"readwrite":"readonly").objectStore(Rs)}function qo(){const v=indexedDB.open(Ps,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Rs,{keyPath:Yu})}catch(A){m(A)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Rs)?f(w):(w.close(),yield function eh(){const v=indexedDB.deleteDatabase(Ps);return new ho(v).toPromise()}(),f(yield qo()))}))})}function ds(v,f,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(v,f,m){const w=ja(v,!0).put({[Yu]:f,value:m});return new ho(w).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(v,f){const m=ja(v,!1).get(f),w=yield new ho(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function fo(v,f){const m=ja(v,!0).delete(f);return new ho(m).toPromise()}const Wo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield qo()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const N=yield w._openDb();return yield m(N)}catch(N){if(A++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Wu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Jd._getInstance(function Ku(){return Wu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function co(){return Ba.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new yc(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Zu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield qo();return yield ds(m,lo,"1"),yield fo(m,lo),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(N=>ds(N,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(N=>function Qu(v,f){return Ha.apply(this,arguments)}(N,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>fo(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(Z=>{const ce=ja(Z,!1).getAll();return new ho(ce).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:Z,value:ce}of w)N.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ce)&&(m.notifyListeners(Z,ce),A.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!N.has(Z)&&(m.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Zo(v,f){return an(v,"POST","/v2/accounts/mfaSignIn:start",Ft(v,f))}function Fs(){return(Fs=(0,d.Z)(function*(v){return(yield an(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yo(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=A=>{const N=ve("internal-error");N.customData=A,m(N)},w.type="text/javascript",w.charset="UTF-8",function Ko(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function el(v){return`__${v}${Math.floor(1e6*Math.random())}`}const $a=1e12;class pn{constructor(f){this.auth=f,this.counter=$a,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new wg(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||$a;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||$a))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||$a))||void 0===w||w.execute(),""})()}}class wg{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;B(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yy(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eg=el("rcb"),Qy=new un(3e4,6e4);class Gf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Un().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return B(function Y0(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Un().grecaptcha):new Promise((w,A)=>{const N=Un().setTimeout(()=>{A(ve(f,"network-request-failed"))},Qy.get());Un()[Eg]=()=>{Un().clearTimeout(N),delete Un()[Eg];const ce=Un().grecaptcha;if(!ce)return void A(ve(f,"internal-error"));const Fe=ce.render;ce.render=(Qe,vt)=>{const ot=Fe(Qe,vt);return this.counter++,ot},this.hostLanguage=m,w(ce)},Yo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Eg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ga{load(f){return(0,d.Z)(function*(){return new pn(f)})()}clearedOneInstance(){}}const bg="recaptcha",Cg={theme:"light",type:"image"};class gr{constructor(f,m=Object.assign({},Cg),w){this.parameters=m,this.type=bg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(w),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;B(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ga:new Gf,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(N=>{const Z=ce=>{!ce||(f.tokenChangeListeners.delete(Z),N(ce))};f.tokenChangeListeners.add(Z),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=Un()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){B(ht()&&!Wu(),f.auth,"internal-error"),yield function Ls(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Xr(v){return Fs.apply(this,arguments)}(f.auth);B(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class en{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Os._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function ei(){return(ei=(0,d.Z)(function*(v,f,m){const w=bn(v),A=yield In(w,f,(0,k.m9)(m));return new en(A,N=>Dn(w,N))})).apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v);yield $t(!1,w,"phone");const A=yield In(w.auth,f,(0,k.m9)(m));return new en(A,N=>Nu(w,N))})).apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v),A=yield In(w.auth,f,(0,k.m9)(m));return new en(A,N=>ku(w,N))})).apply(this,arguments)}function In(v,f,m){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(v,f,m){var w;const A=yield m.verify();try{let N;if(B("string"==typeof A,v,"argument-error"),B(m.type===bg,v,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const Z=N.session;if("phoneNumber"in N)return B("enroll"===Z.type,v,"internal-error"),(yield Gu(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,v,"internal-error");const ce=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return B(ce,v,"missing-multi-factor-info"),(yield Zo(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield pg(v,{phoneNumber:N.phoneNumber,recaptchaToken:A});return Z}}finally{m._reset()}})).apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(v,f){yield to((0,k.m9)(v),f)})).apply(this,arguments)}let za=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=bn(m)}verifyPhoneNumber(m,w){return In(this.auth,m,(0,k.m9)(w))}static credential(m,w){return Os._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?Os._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ur(v,f){return f?oe(f):(B(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class wc extends vr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return nr(f,this._buildIdpRequest())}_linkToIdToken(f,m){return nr(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return nr(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ni(v){return Ti(v.auth,new wc(v),v.bypassAuthState)}function qa(v){const{auth:f,user:m}=v;return B(m,f,"internal-error"),no(m,new wc(v),v.bypassAuthState)}function Vs(v){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(v){const{auth:f,user:m}=v;return B(m,f,"internal-error"),to(m,new wc(v),v.bypassAuthState)})).apply(this,arguments)}class Jo{constructor(f,m,w,A,N=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:N,tenantId:Z,error:ce,type:Fe}=f;if(ce)return void m.reject(ce);const Qe={auth:m.auth,requestUri:w,sessionId:A,tenantId:Z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Fe)(Qe))}catch(vt){m.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ni;case"linkViaPopup":case"linkViaRedirect":return Vs;case"reauthViaPopup":case"reauthViaRedirect":return qa;default:Ae(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xo=new un(2e3,1e4);function rl(){return(rl=(0,d.Z)(function*(v,f,m){const w=bn(v);Be(v,f,ss);const A=Ur(w,m);return new go(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v);Be(w.auth,f,ss);const A=Ur(w.auth,m);return new go(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v);Be(w.auth,f,ss);const A=Ur(w.auth,m);return new go(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let go=(()=>{class v extends Jo{constructor(m,w,A,N,Z){super(m,w,N,Z),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return B(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){Y(1===m.filter.length,"Popup operations only handle one event");const w=Ua();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Xo.get())};m()}}return v.currentPopupAction=null,v})();const Br=new Map;class Tn extends Jo{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=Br.get(m.auth._key());if(!w){try{const N=(yield function ta(v,f){return Ai.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(N)}catch(A){w=()=>Promise.reject(A)}Br.set(m.auth._key(),w)}return m.bypassAuthState||Br.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ai(){return(Ai=(0,d.Z)(function*(v,f){const m=bc(f),w=ps(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function na(v,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(v,f){return ps(v)._set(bc(f),"true")})).apply(this,arguments)}function mo(v,f){Br.set(v._key(),f)}function ps(v){return oe(v._redirectPersistence)}function bc(v){return er("pendingRedirect",v.config.apiKey,v.name)}function I(){return(I=(0,d.Z)(function*(v,f,m){const w=bn(v);Be(v,f,ss);const A=Ur(w,m);return yield na(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v);Be(w.auth,f,ss);const A=Ur(w.auth,m);yield na(A,w.auth);const N=yield dt(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(v,f,m){const w=(0,k.m9)(v);Be(w.auth,f,ss);const A=Ur(w.auth,m);yield $t(!1,w,f.providerId),yield na(A,w.auth);const N=yield dt(w);return A._openRedirect(w.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(v,f){return yield bn(v)._initializationPromise,Et(v,f,!1)})).apply(this,arguments)}function Et(v,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(v,f,m=!1){const w=bn(v),A=Ur(w,f),Z=yield new Tn(w,A,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,f)),Z})).apply(this,arguments)}function dt(v){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(v){const f=Ua(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ra{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Za(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yo(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!yo(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ve(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Us(f))}saveEventToCache(f){this.cachedEventUids.add(Us(f)),this.lastProcessedEventTime=Date.now()}}function Us(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function yo({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function _o(v){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(v,f={}){return an(v,"GET","/v1/projects",f)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sa=/^https?/;function qi(){return(qi=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield _o(v);for(const m of f)try{if(Xy(m))return}catch{}Ae(v,"unauthorized-domain")})).apply(this,arguments)}function Xy(v){const f=ke(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===w}if(!sa.test(m))return!1;if(ia.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Er=new un(3e4,6e4);function il(){const v=Un().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Ka=null;function rh(v){return Ka=Ka||function nh(v){return new Promise((f,m)=>{var w,A,N;function Z(){il(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{il(),m(ve(v,"network-request-failed"))},timeout:Er.get()})}if(null!==(A=null===(w=Un().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(N=Un().gapi)||void 0===N||!N.load){const ce=el("iframefcb");return Un()[ce]=()=>{gapi.load?Z():m(ve(v,"network-request-failed"))},Yo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Fe=>m(Fe))}Z()}}).catch(f=>{throw Ka=null,f})}(v),Ka}const ih=new un(5e3,15e3),sh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e_(v){const f=v.config;B(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?Fn(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:ae.SDK_VERSION},A=Wf.get(v.config.apiHost);A&&(w.eid=A);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${m}?${(0,k.xO)(w).slice(1)}`}function ol(){return ol=(0,d.Z)(function*(v){const f=yield rh(v),m=Un().gapi;return B(m,v,"internal-error"),f.open({where:document.body,url:e_(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sh,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(N,Z){yield w.restyle({setHideOnLeave:!1});const ce=ve(v,"network-request-failed"),Fe=Un().setTimeout(()=>{Z(ce)},ih.get());function Qe(){Un().clearTimeout(Fe),N(w)}w.ping(Qe).then(Qe,()=>{Z(ce)})});return function(N,Z){return A.apply(this,arguments)}}()))}),ol.apply(this,arguments)}const de={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zi(v,f,m,w,A,N){B(v.config.authDomain,v,"auth-domain-config-required"),B(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:ae.SDK_VERSION,eventId:A};if(f instanceof ss){f.setDefaultLanguage(v.languageCode),Z.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Qe]of Object.entries(N||{}))Z[Fe]=Qe}if(f instanceof os){const Fe=f.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(Z.scopes=Fe.join(","))}v.tenantId&&(Z.tid=v.tenantId);const ce=Z;for(const Fe of Object.keys(ce))void 0===ce[Fe]&&delete ce[Fe];return`${function Zf({config:v}){return v.emulator?Fn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(ce).slice(1)}`}const Ya="webStorageSupport";class ms extends class r_{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ms(f)}_finalizeEnroll(f,m,w){return function zu(v,f){return an(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Xu(v,f){return an(v,"POST","/v2/accounts/mfaSignIn:finalize",Ft(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let al=(()=>{class v{constructor(){}static assertion(m){return ms._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var br="@firebase/auth";class Mr{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wo(){return window}function lh(){return(lh=(0,d.Z)(function*(v,f,m){var w;const{BuildInfo:A}=wo();Y(f.sessionId,"AuthEvent did not contain a session ID");const N=yield Qf(f.sessionId),Z={};return rn()?Z.ibi=A.packageName:qn()?Z.apn=A.packageName:Ae(v,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=N,Zi(v,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(v){const{BuildInfo:f}=wo(),m={};rn()?m.iosBundleId=f.packageName:qn()?m.androidPackageName=f.packageName:Ae(v,"operation-not-supported-in-this-environment"),yield _o(v,m)})).apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(v,f,m){const{cordova:w}=wo();let A=()=>{};try{yield new Promise((N,Z)=>{let ce=null;function Fe(){var ot;N();const or=null===(ot=w.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof or&&or(),"function"==typeof m?.close&&m.close()}function Qe(){ce||(ce=window.setTimeout(()=>{Z(ve(v,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Qe()}f.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),qn()&&document.addEventListener("visibilitychange",vt,!1),A=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",vt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Qf(v){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,d.Z)(function*(v){const f=Sg(v),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Sg(v){if(Y(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),m=new Uint8Array(f);for(let w=0;w<v.length;w++)m[w]=v.charCodeAt(w);return m}!function i_(v){(0,ae._registerComponent)(new ue.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:N,authDomain:Z}=w.options;return((ce,Fe)=>{B(N&&!N.includes(":"),"invalid-api-key",{appName:ce.name}),B(!Z?.includes(":"),"argument-error",{appName:ce.name});const Qe={apiKey:N,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ds(v)},vt=new Pt(ce,Fe,Qe);return function Re(v,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(oe);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,f?.popupRedirectResolver)}(vt,m),vt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",f=>{const m=bn(f.getProvider("auth").getImmediate());return new Mr(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(br,"0.20.6",function aa(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(br,"0.20.6","esm2017")}("Browser");class a_ extends ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function dh(v){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,d.Z)(function*(v){const f=yield Ac()._get(hh(v));return f&&(yield Ac()._remove(hh(v))),f})).apply(this,arguments)}function Jf(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);v.push(f.charAt(w))}return v.join("")}function Ac(){return oe(Fa)}function hh(v){return er("authEvent",v.config.apiKey,v.name)}function ua(v){if(!v?.includes("?"))return{};const[f,...m]=v.split("?");return(0,k.zd)(m.join("?"))}function xg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function ll(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function cl(v=(0,k.z$)()){return!("file:"!==ll()&&"ionic:"!==ll()&&"capacitor:"!==ll()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function gh(){try{const v=self.localStorage,f=Ua();if(v)return v.setItem(f,"1"),v.removeItem(f),!function X0(v=(0,k.z$)()){return function xc(){return(0,k.w1)()&&11===document?.documentMode}()||function c_(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return js()&&(0,k.hl)()}return!1}function js(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qa(){return(function Hr(){return"http:"===ll()||"https:"===ll()}()||(0,k.ru)()||cl())&&!function l_(){return(0,k.b$)()||(0,k.UG)()}()&&gh()&&!js()}function Oc(){return cl()&&typeof document<"u"}function dl(){return(dl=(0,d.Z)(function*(){return!!Oc()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const ri={LOCAL:"local",NONE:"none",SESSION:"session"},hl=B,Nc="persistence";function kc(v){return fl.apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(v){yield v._initializationPromise;const f=Pc(),m=er(Nc,v.config.apiKey,v.name);f&&f.setItem(m,v._getPersistence())})).apply(this,arguments)}function Pc(){var v;try{return(null===(v=function Ng(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const bo=B;class Hs{constructor(){this.browserResolver=oe(class n_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$i,this._completeRedirectFn=Et,this._overrideRedirectResult=mo}_openPopup(f,m,w,A){var N=this;return(0,d.Z)(function*(){var Z;Y(null===(Z=N.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ce=Zi(f,m,w,ke(),A);return function gs(v,f,m,w=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Fe=Object.assign(Object.assign({},de),{width:w.toString(),height:A.toString(),top:N,left:Z}),Qe=(0,k.z$)().toLowerCase();m&&(ce=Ui(Qe)?"_blank":m),wn(Qe)&&(f=f||"http://localhost",Fe.scrollbars="yes");const vt=Object.entries(Fe).reduce((or,[yi,pl])=>`${or}${yi}=${pl},`,"");if(function Ii(v=(0,k.z$)()){var f;return rn(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Qe)&&"_self"!==ce)return function Ye(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",ce),new Cc(null);const ot=window.open(f||"",ce,vt);B(ot,v,"popup-blocked");try{ot.focus()}catch{}return new Cc(ot)}(f,ce,Ua())})()}_openRedirect(f,m,w,A){var N=this;return(0,d.Z)(function*(){return yield N._originValidation(f),function Si(v){Un().location.href=v}(Zi(f,m,w,ke(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(Y(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function t_(v){return ol.apply(this,arguments)}(f),A=new ra(f);return w.register("authEvent",N=>(B(N?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Ya,{type:Ya},A=>{var N;const Z=null===(N=A?.[0])||void 0===N?void 0:N[Ya];void 0!==Z&&m(!!Z),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function qf(v){return qi.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ys()||zn()||rn()}}),this.cordovaResolver=oe(class fh{constructor(){this._redirectPersistence=$i,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Et,this._overrideRedirectResult=mo}_initialize(f){var m=this;return(0,d.Z)(function*(){const w=f._key();let A=m.eventManagers.get(w);return A||(A=new a_(f),m.eventManagers.set(w,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,A){var N=this;return(0,d.Z)(function*(){!function jr(v){var f,m,w,A,N,Z,ce,Fe,Qe,vt;const ot=wo();B("function"==typeof(null===(f=ot?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(typeof(null===(m=ot?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(N=null===(A=null===(w=ot?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Fe=null===(ce=null===(Z=ot?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(vt=null===(Qe=ot?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===vt?void 0:vt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield N._initialize(f);yield Z.initialized(),Z.resetRedirect(),function Ec(){Br.clear()}(),yield N._originValidation(f);const ce=function ch(v,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Jf(),postBody:null,tenantId:v.tenantId,error:ve(v,"no-auth-event")}}(f,w,A);yield function Tc(v,f){return Ac()._set(hh(v),f)}(f,ce);const Fe=yield function s_(v,f,m){return lh.apply(this,arguments)}(f,ce,m),Qe=yield function Yf(v){const{cordova:f}=wo();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(v):A=f.InAppBrowser.open(v,function fi(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(A)})})}(Fe);return function Sn(v,f,m){return Eo.apply(this,arguments)}(f,Z,Qe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Kf(v){return Bs.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:A,BuildInfo:N}=wo(),Z=setTimeout((0,d.Z)(function*(){yield dh(f),m.onEvent(xg())}),500),ce=function(){var vt=(0,d.Z)(function*(ot){clearTimeout(Z);const or=yield dh(f);let yi=null;or&&ot?.url&&(yi=function Sc(v,f){var m,w;const A=function Mg(v){const f=ua(v),m=f.link?decodeURIComponent(f.link):void 0,w=ua(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ua(A).link||A||w||m||v}(f);if(A.includes("/__/auth/callback")){const N=ua(A),Z=N.firebaseError?function u_(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(w=null===(m=Z?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Fe=ce?ve(ce):null;return Fe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(or,ot.url)),m.onEvent(yi||xg())});return function(or){return vt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Fe=A,Qe=`${N.packageName.toLowerCase()}://`;wo().handleOpenURL=function(){var vt=(0,d.Z)(function*(ot){if(ot.toLowerCase().startsWith(Qe)&&ce({url:ot}),"function"==typeof Fe)try{Fe(ot)}catch(or){console.error(or)}});return function(ot){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=$i,this._completeRedirectFn=Et,this._overrideRedirectResult=mo}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,A){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,w,A)})()}_openRedirect(f,m,w,A){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,w,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Oc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function mh(){return dl.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Yn(v){return v.unwrap()}function yh(v){return Fc(v)}function Fc(v){const{_tokenResponse:f}=v instanceof k.ZR?v.customData:v;if(!f)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return za.credentialFromResult(v);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=Su;break;case"facebook.com":w=Sa;break;case"github.com":w=tc;break;case"twitter.com":w=Qr;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:Z,pendingToken:ce,nonce:Fe}=f;return N||Z||A||ce?ce?m.startsWith("saml.")?Uo._create(m,ce):is._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:A,accessToken:N}):new eo(m).credential({idToken:A,accessToken:N,rawNonce:Fe}):null}return v instanceof k.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function sr(v,f){return f.catch(m=>{throw m instanceof k.ZR&&function Rc(v,f){var m,w;const A=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new h_(v,function kn(v,f){var m;const w=(0,k.m9)(v),A=f;return B(f.customData.operationType,w,"argument-error"),B(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),$u._fromError(w,A)}(v,f));else if(A){const N=Fc(f),Z=f;N&&(Z.credential=N,Z.tenantId=A.tenantId||void 0,Z.email=A.email||void 0,Z.phoneNumber=A.phoneNumber||void 0)}}(v,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:yh(m),additionalUserInfo:Hu(m),user:ys.getOrCreate(A)}})}function Lc(v,f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,d.Z)(function*(v,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>sr(v,m.confirm(w))}})).apply(this,arguments)}class h_{constructor(f,m){this.resolver=m,this.auth=function ir(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return sr(Yn(this.auth),this.resolver.resolveSignIn(f))}}class ys{constructor(f){this._delegate=f,this.multiFactor=function zo(v){const f=(0,k.m9)(v);return uo.has(f)||uo.set(f,$f._fromUser(f)),uo.get(f)}(f)}static getOrCreate(f){return ys.USER_MAP.has(f)||ys.USER_MAP.set(f,new ys(f)),ys.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return sr(m.auth,Nu(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,d.Z)(function*(){return Lc(w.auth,function cn(v,f,m){return ti.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return sr(m.auth,function zf(v,f,m){return ea.apply(this,arguments)}(m._delegate,f,Hs))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield kc(bn(m.auth)),function J(v,f,m){return function le(v,f,m){return Te.apply(this,arguments)}(v,f,m)}(m._delegate,f,Hs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return sr(m.auth,ku(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Lc(this.auth,function fs(v,f,m){return Bn.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return sr(this.auth,function Ig(v,f,m){return th.apply(this,arguments)}(this._delegate,f,Hs))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield kc(bn(m.auth)),function D(v,f,m){return function x(v,f,m){return L.apply(this,arguments)}(v,f,m)}(m._delegate,f,Hs)})()}sendEmailVerification(f){return function uc(v,f){return Pa.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function Vr(v,f){return Mu.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Gd(v,f){return oo((0,k.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function so(v,f){return oo((0,k.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function _t(v,f){return tl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function dc(v,f){return hc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function lc(v,f,m){return Uu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ys.USER_MAP=new WeakMap;const la=B;let Ja=(()=>{class v{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;la(A,"invalid-api-key",{appName:m.name}),la(A,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?Hs:void 0;this._delegate=w.initialize({options:{persistence:Pg(A,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Wl(v,f,m){const w=bn(v);B(w._canInitEmulator,w,"emulator-config-failed"),B(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,N=Bi(f),{host:Z,port:ce}=function Wn(v){const f=Bi(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const N=A[1];return{host:N,port:Ts(w.substr(N.length+1))}}{const[N,Z]=w.split(":");return{host:N,port:Ts(Z)}}}(f);w.config.emulator={url:`${N}//${Z}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Ss(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,w)}applyActionCode(m){return function mi(v,f){return xa.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Oa(this._delegate,m)}confirmPasswordReset(m,w){return function Lu(v,f,m){return jo.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var A=this;return(0,d.Z)(function*(){return sr(A._delegate,function ro(v,f,m){return Nn.apply(this,arguments)}(A._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Vu(v,f){return ka.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function cs(v,f){return"EMAIL_SIGNIN"===Tu.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){la(Qa(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function He(v,f){return ft.apply(this,arguments)}(m._delegate,Hs);return w?sr(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Kn(v,f){bn(v)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,A){const{next:N,error:Z,complete:ce}=_h(m,w,A);return this._delegate.onAuthStateChanged(N,Z,ce)}onIdTokenChanged(m,w,A){const{next:N,error:Z,complete:ce}=_h(m,w,A);return this._delegate.onIdTokenChanged(N,Z,ce)}sendSignInLinkToEmail(m,w){return function oc(v,f,m){return io.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Fu(v,f,m){return On.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let A;switch(function d_(v,f){hl(Object.values(ri).includes(f),v,"invalid-persistence-type"),(0,k.b$)()?hl(f!==ri.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?hl(f===ri.NONE,v,"unsupported-persistence-type"):js()?hl(f===ri.NONE||f===ri.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):hl(f===ri.NONE||gh(),v,"unsupported-persistence-type")}(w._delegate,m),m){case ri.SESSION:A=$i;break;case ri.LOCAL:A=(yield oe(Wo)._isAvailable())?Wo:Fa;break;case ri.NONE:A=Xt;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return sr(this._delegate,function Bf(v){return xn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return sr(this._delegate,Dn(this._delegate,m))}signInWithCustomToken(m){return sr(this._delegate,function rc(v,f){return Ma.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return sr(this._delegate,function Hi(v,f,m){return Dn((0,k.m9)(v),ji.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return sr(this._delegate,function _g(v,f,m){return Na.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Lc(this._delegate,function Je(v,f,m){return ei.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return la(Qa(),w._delegate,"operation-not-supported-in-this-environment"),sr(w._delegate,function Gi(v,f,m){return rl.apply(this,arguments)}(w._delegate,m,Hs))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return la(Qa(),w._delegate,"operation-not-supported-in-this-environment"),yield kc(w._delegate),function jn(v,f,m){return function Dg(v,f,m){return I.apply(this,arguments)}(v,f,m)}(w._delegate,m,Hs)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function sc(v,f){return $d.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=ri,v})();function _h(v,f,m){let w=v;"function"!=typeof v&&({next:w,error:f,complete:m}=v);const A=w;return{next:Z=>A(Z&&ys.getOrCreate(Z)),error:f,complete:m}}function Pg(v,f){const m=function kg(v,f){const m=Pc();if(!m)return[];const w=er(Nc,v,f);switch(m.getItem(w)){case ri.NONE:return[Xt];case ri.LOCAL:return[Wo,$i];case ri.SESSION:return[$i];default:return[]}}(v,f);if(typeof self<"u"&&!m.includes(Wo)&&m.push(Wo),typeof window<"u")for(const w of[Fa,$i])m.includes(w)||m.push(w);return m.includes(Xt)||m.push(Xt),m}class ep{constructor(){this.providerId="phone",this._delegate=new za(Yn(ee.Z.auth()))}static credential(f,m){return za.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}ep.PHONE_SIGN_IN_METHOD=za.PHONE_SIGN_IN_METHOD,ep.PROVIDER_ID=za.PROVIDER_ID;const vh=B;class Uc{constructor(f,m,w=ee.Z.app()){var A;vh(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new gr(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function np(v){v.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Ja(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ji,FacebookAuthProvider:Sa,GithubAuthProvider:tc,GoogleAuthProvider:Su,OAuthProvider:eo,SAMLAuthProvider:pi,PhoneAuthProvider:ep,PhoneMultiFactorGenerator:al,RecaptchaVerifier:Uc,TwitterAuthProvider:Qr,Auth:Ja,AuthCredential:vr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.19")}(ee.Z)},9751:(lt,Se,R)=>{R.d(Se,{y:()=>pe});var d=R(2961),ee=R(727),k=R(8822),ae=R(9635),se=R(2416),fe=R(576),ue=R(2806);let pe=(()=>{class Q{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const we=new Q;return we.source=this,we.operator=xe,we}subscribe(xe,we,et){const _e=function G(Q){return Q&&Q instanceof d.Lv||function H(Q){return Q&&(0,fe.m)(Q.next)&&(0,fe.m)(Q.error)&&(0,fe.m)(Q.complete)}(Q)&&(0,ee.Nn)(Q)}(xe)?xe:new d.Hp(xe,we,et);return(0,ue.x)(()=>{const{operator:ge,source:Ke}=this;_e.add(ge?ge.call(_e,Ke):Ke?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(xe){try{return this._subscribe(xe)}catch(we){xe.error(we)}}forEach(xe,we){return new(we=me(we))((et,_e)=>{const ge=new d.Hp({next:Ke=>{try{xe(Ke)}catch(st){_e(st),ge.unsubscribe()}},error:_e,complete:et});this.subscribe(ge)})}_subscribe(xe){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(xe)}[k.L](){return this}pipe(...xe){return(0,ae.U)(xe)(this)}toPromise(xe){return new(xe=me(xe))((we,et)=>{let _e;this.subscribe(ge=>_e=ge,ge=>et(ge),()=>we(_e))})}}return Q.create=Ve=>new Q(Ve),Q})();function me(Q){var Ve;return null!==(Ve=Q??se.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(lt,Se,R)=>{R.d(Se,{x:()=>ue});var d=R(9751),ee=R(727);const ae=(0,R(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=R(8737),fe=R(2806);let ue=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new pe(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:Ve,observers:xe}=this;return Q||Ve?ee.Lc:(this.currentObservers=null,xe.push(G),new ee.w0(()=>{this.currentObservers=null,(0,se.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:Ve,isStopped:xe}=this;Q?G.error(Ve):xe&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return me.create=(H,G)=>new pe(H,G),me})();class pe extends ue{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,H)}error(H){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==Q?Q:ee.Lc}}},2961:(lt,Se,R)=>{R.d(Se,{Hp:()=>et,Lv:()=>Q});var d=R(576),ee=R(727),k=R(2416),ae=R(7849);function se(){}const fe=me("C",void 0,void 0);function me(Ae,ve,Ce){return{kind:Ae,value:ve,error:Ce}}var H=R(3410),G=R(2806);class Q extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=st}static create(ve,Ce,Be){return new et(ve,Ce,Be)}next(ve){this.isStopped?Ke(function pe(Ae){return me("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ke(function ue(Ae){return me("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ke(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function xe(Ae,ve){return Ve.call(Ae,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ve)}catch(Be){_e(Be)}}error(ve){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ve)}catch(Be){_e(Be)}else _e(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ce){_e(Ce)}}}class et extends Q{constructor(ve,Ce,Be){let je;if(super(),(0,d.m)(ve)||!ve)je={next:ve??void 0,error:Ce??void 0,complete:Be??void 0};else{let B;this&&k.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&xe(ve.next,B),error:ve.error&&xe(ve.error,B),complete:ve.complete&&xe(ve.complete,B)}):je=ve}this.destination=new we(je)}}function _e(Ae){k.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ae):(0,ae.h)(Ae)}function Ke(Ae,ve){const{onStoppedNotification:Ce}=k.v;Ce&&H.z.setTimeout(()=>Ce(Ae,ve))}const st={closed:!0,next:se,error:function ge(Ae){throw Ae},complete:se}},727:(lt,Se,R)=>{R.d(Se,{Lc:()=>fe,w0:()=>se,Nn:()=>ue});var d=R(576);const k=(0,R(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,Ve)=>`${Ve+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=R(8737);class se{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(xe){H=xe instanceof k?xe.errors:[xe]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const xe of Ve)try{pe(xe)}catch(we){H=H??[],we instanceof k?H=[...H,...we.errors]:H.push(we)}}if(H)throw new k(H)}}add(H){var G;if(H&&H!==this)if(this.closed)pe(H);else{if(H instanceof se){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,ae.P)(G,H),H instanceof se&&H._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const fe=se.EMPTY;function ue(me){return me instanceof se||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function pe(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(lt,Se,R)=>{R.d(Se,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Se,R)=>{R.d(Se,{E:()=>ee});const ee=new(R(9751).y)(se=>se.complete())},8996:(lt,Se,R)=>{R.d(Se,{D:()=>ve});var d=R(8421),ee=R(5363),k=R(9468),fe=R(9751),pe=R(2202),me=R(576),H=R(9672);function Q(Ce,Be){if(!Ce)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,H.f)(je,Be,()=>{const B=Ce[Symbol.asyncIterator]();(0,H.f)(je,Be,()=>{B.next().then(ye=>{ye.done?je.complete():je.next(ye.value)})},0,!0)})})}var Ve=R(3670),xe=R(8239),we=R(1144),et=R(6495),_e=R(2206),ge=R(4532),Ke=R(3260);function ve(Ce,Be){return Be?function Ae(Ce,Be){if(null!=Ce){if((0,Ve.c)(Ce))return function ae(Ce,Be){return(0,d.Xf)(Ce).pipe((0,k.R)(Be),(0,ee.Q)(Be))}(Ce,Be);if((0,we.z)(Ce))return function ue(Ce,Be){return new fe.y(je=>{let B=0;return Be.schedule(function(){B===Ce.length?je.complete():(je.next(Ce[B++]),je.closed||this.schedule())})})}(Ce,Be);if((0,xe.t)(Ce))return function se(Ce,Be){return(0,d.Xf)(Ce).pipe((0,k.R)(Be),(0,ee.Q)(Be))}(Ce,Be);if((0,_e.D)(Ce))return Q(Ce,Be);if((0,et.T)(Ce))return function G(Ce,Be){return new fe.y(je=>{let B;return(0,H.f)(je,Be,()=>{B=Ce[pe.h](),(0,H.f)(je,Be,()=>{let ye,Y;try{({value:ye,done:Y}=B.next())}catch(X){return void je.error(X)}Y?je.complete():je.next(ye)},0,!0)}),()=>(0,me.m)(B?.return)&&B.return()})}(Ce,Be);if((0,Ke.L)(Ce))return function st(Ce,Be){return Q((0,Ke.Q)(Ce),Be)}(Ce,Be)}throw(0,ge.z)(Ce)}(Ce,Be):(0,d.Xf)(Ce)}},8421:(lt,Se,R)=>{R.d(Se,{Xf:()=>Ve});var d=R(655),ee=R(1144),k=R(8239),ae=R(9751),se=R(3670),fe=R(2206),ue=R(4532),pe=R(6495),me=R(3260),H=R(576),G=R(7849),Q=R(8822);function Ve(Ae){if(Ae instanceof ae.y)return Ae;if(null!=Ae){if((0,se.c)(Ae))return function xe(Ae){return new ae.y(ve=>{const Ce=Ae[Q.L]();if((0,H.m)(Ce.subscribe))return Ce.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,ee.z)(Ae))return function we(Ae){return new ae.y(ve=>{for(let Ce=0;Ce<Ae.length&&!ve.closed;Ce++)ve.next(Ae[Ce]);ve.complete()})}(Ae);if((0,k.t)(Ae))return function et(Ae){return new ae.y(ve=>{Ae.then(Ce=>{ve.closed||(ve.next(Ce),ve.complete())},Ce=>ve.error(Ce)).then(null,G.h)})}(Ae);if((0,fe.D)(Ae))return ge(Ae);if((0,pe.T)(Ae))return function _e(Ae){return new ae.y(ve=>{for(const Ce of Ae)if(ve.next(Ce),ve.closed)return;ve.complete()})}(Ae);if((0,me.L)(Ae))return function Ke(Ae){return ge((0,me.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function ge(Ae){return new ae.y(ve=>{(function st(Ae,ve){var Ce,Be,je,B;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,d.KL)(Ae);!(Be=yield Ce.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(ye){je={error:ye}}finally{try{Be&&!Be.done&&(B=Ce.return)&&(yield B.call(Ce))}finally{if(je)throw je.error}}ve.complete()})})(Ae,ve).catch(Ce=>ve.error(Ce))})}},6451:(lt,Se,R)=>{R.d(Se,{T:()=>fe});var d=R(8189),ee=R(8421),k=R(515),ae=R(7669),se=R(8996);function fe(...ue){const pe=(0,ae.yG)(ue),me=(0,ae._6)(ue,1/0),H=ue;return H.length?1===H.length?(0,ee.Xf)(H[0]):(0,d.J)(me)((0,se.D)(H,pe)):k.E}},5403:(lt,Se,R)=>{R.d(Se,{x:()=>ee});var d=R(2961);function ee(ae,se,fe,ue,pe){return new k(ae,se,fe,ue,pe)}class k extends d.Lv{constructor(se,fe,ue,pe,me,H){super(se),this.onFinalize=me,this.shouldUnsubscribe=H,this._next=fe?function(G){try{fe(G)}catch(Q){se.error(Q)}}:super._next,this._error=pe?function(G){try{pe(G)}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(lt,Se,R)=>{R.d(Se,{U:()=>k});var d=R(4482),ee=R(5403);function k(ae,se){return(0,d.e)((fe,ue)=>{let pe=0;fe.subscribe((0,ee.x)(ue,me=>{ue.next(ae.call(se,me,pe++))}))})}},8189:(lt,Se,R)=>{R.d(Se,{J:()=>k});var d=R(5577),ee=R(4671);function k(ae=1/0){return(0,d.z)(ee.y,ae)}},5577:(lt,Se,R)=>{R.d(Se,{z:()=>pe});var d=R(4004),ee=R(8421),k=R(4482),ae=R(9672),se=R(5403),ue=R(576);function pe(me,H,G=1/0){return(0,ue.m)(H)?pe((Q,Ve)=>(0,d.U)((xe,we)=>H(Q,xe,Ve,we))((0,ee.Xf)(me(Q,Ve))),G):("number"==typeof H&&(G=H),(0,k.e)((Q,Ve)=>function fe(me,H,G,Q,Ve,xe,we,et){const _e=[];let ge=0,Ke=0,st=!1;const Ae=()=>{st&&!_e.length&&!ge&&H.complete()},ve=Be=>ge<Q?Ce(Be):_e.push(Be),Ce=Be=>{xe&&H.next(Be),ge++;let je=!1;(0,ee.Xf)(G(Be,Ke++)).subscribe((0,se.x)(H,B=>{Ve?.(B),xe?ve(B):H.next(B)},()=>{je=!0},void 0,()=>{if(je)try{for(ge--;_e.length&&ge<Q;){const B=_e.shift();we?(0,ae.f)(H,we,()=>Ce(B)):Ce(B)}Ae()}catch(B){H.error(B)}}))};return me.subscribe((0,se.x)(H,ve,()=>{st=!0,Ae()})),()=>{et?.()}}(Q,Ve,me,G)))}},5363:(lt,Se,R)=>{R.d(Se,{Q:()=>ae});var d=R(9672),ee=R(4482),k=R(5403);function ae(se,fe=0){return(0,ee.e)((ue,pe)=>{ue.subscribe((0,k.x)(pe,me=>(0,d.f)(pe,se,()=>pe.next(me),fe),()=>(0,d.f)(pe,se,()=>pe.complete(),fe),me=>(0,d.f)(pe,se,()=>pe.error(me),fe)))})}},3099:(lt,Se,R)=>{R.d(Se,{B:()=>se});var d=R(8421),ee=R(7579),k=R(2961),ae=R(4482);function se(ue={}){const{connector:pe=(()=>new ee.x),resetOnError:me=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=ue;return Q=>{let Ve,xe,we,et=0,_e=!1,ge=!1;const Ke=()=>{xe?.unsubscribe(),xe=void 0},st=()=>{Ke(),Ve=we=void 0,_e=ge=!1},Ae=()=>{const ve=Ve;st(),ve?.unsubscribe()};return(0,ae.e)((ve,Ce)=>{et++,!ge&&!_e&&Ke();const Be=we=we??pe();Ce.add(()=>{et--,0===et&&!ge&&!_e&&(xe=fe(Ae,G))}),Be.subscribe(Ce),!Ve&&et>0&&(Ve=new k.Hp({next:je=>Be.next(je),error:je=>{ge=!0,Ke(),xe=fe(st,me,je),Be.error(je)},complete:()=>{_e=!0,Ke(),xe=fe(st,H),Be.complete()}}),(0,d.Xf)(ve).subscribe(Ve))})(Q)}}function fe(ue,pe,...me){if(!0===pe)return void ue();if(!1===pe)return;const H=new k.Hp({next:()=>{H.unsubscribe(),ue()}});return pe(...me).subscribe(H)}},9468:(lt,Se,R)=>{R.d(Se,{R:()=>ee});var d=R(4482);function ee(k,ae=0){return(0,d.e)((se,fe)=>{fe.add(k.schedule(()=>se.subscribe(fe),ae))})}},8505:(lt,Se,R)=>{R.d(Se,{b:()=>se});var d=R(576),ee=R(4482),k=R(5403),ae=R(4671);function se(fe,ue,pe){const me=(0,d.m)(fe)||ue||pe?{next:fe,error:ue,complete:pe}:fe;return me?(0,ee.e)((H,G)=>{var Q;null===(Q=me.subscribe)||void 0===Q||Q.call(me);let Ve=!0;H.subscribe((0,k.x)(G,xe=>{var we;null===(we=me.next)||void 0===we||we.call(me,xe),G.next(xe)},()=>{var xe;Ve=!1,null===(xe=me.complete)||void 0===xe||xe.call(me),G.complete()},xe=>{var we;Ve=!1,null===(we=me.error)||void 0===we||we.call(me,xe),G.error(xe)},()=>{var xe,we;Ve&&(null===(xe=me.unsubscribe)||void 0===xe||xe.call(me)),null===(we=me.finalize)||void 0===we||we.call(me)}))}):ae.y}},4408:(lt,Se,R)=>{R.d(Se,{o:()=>se});var d=R(727);class ee extends d.w0{constructor(ue,pe){super()}schedule(ue,pe=0){return this}}const k={setInterval(fe,ue,...pe){const{delegate:me}=k;return me?.setInterval?me.setInterval(fe,ue,...pe):setInterval(fe,ue,...pe)},clearInterval(fe){const{delegate:ue}=k;return(ue?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=R(8737);class se extends ee{constructor(ue,pe){super(ue,pe),this.scheduler=ue,this.work=pe,this.pending=!1}schedule(ue,pe=0){if(this.closed)return this;this.state=ue;const me=this.id,H=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(H,me,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(H,this.id,pe),this}requestAsyncId(ue,pe,me=0){return k.setInterval(ue.flush.bind(ue,this),me)}recycleAsyncId(ue,pe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return pe;k.clearInterval(pe)}execute(ue,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ue,pe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,pe){let H,me=!1;try{this.work(ue)}catch(G){me=!0,H=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ue,scheduler:pe}=this,{actions:me}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(me,this),null!=ue&&(this.id=this.recycleAsyncId(pe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Se,R)=>{R.d(Se,{v:()=>k});var d=R(6063);class ee{constructor(se,fe=ee.now){this.schedulerActionCtor=se,this.now=fe}schedule(se,fe=0,ue){return new this.schedulerActionCtor(this,se).schedule(ue,fe)}}ee.now=d.l.now;class k extends ee{constructor(se,fe=ee.now){super(se,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:fe}=this;if(this._active)return void fe.push(se);let ue;this._active=!0;do{if(ue=se.execute(se.state,se.delay))break}while(se=fe.shift());if(this._active=!1,ue){for(;se=fe.shift();)se.unsubscribe();throw ue}}}},4986:(lt,Se,R)=>{R.d(Se,{z:()=>k});var d=R(4408);const k=new(R(7565).v)(d.o)},6063:(lt,Se,R)=>{R.d(Se,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(lt,Se,R)=>{R.d(Se,{z:()=>d});const d={setTimeout(ee,k,...ae){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(ee,k,...ae):setTimeout(ee,k,...ae)},clearTimeout(ee){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(lt,Se,R)=>{R.d(Se,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Se,R)=>{R.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Se,R)=>{R.d(Se,{_6:()=>fe,jO:()=>ae,yG:()=>se});var d=R(576);function k(ue){return ue[ue.length-1]}function ae(ue){return(0,d.m)(k(ue))?ue.pop():void 0}function se(ue){return function ee(ue){return ue&&(0,d.m)(ue.schedule)}(k(ue))?ue.pop():void 0}function fe(ue,pe){return"number"==typeof k(ue)?ue.pop():pe}},8737:(lt,Se,R)=>{function d(ee,k){if(ee){const ae=ee.indexOf(k);0<=ae&&ee.splice(ae,1)}}R.d(Se,{P:()=>d})},3888:(lt,Se,R)=>{function d(ee){const ae=ee(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}R.d(Se,{d:()=>d})},2806:(lt,Se,R)=>{R.d(Se,{O:()=>ae,x:()=>k});var d=R(2416);let ee=null;function k(se){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!ee;if(fe&&(ee={errorThrown:!1,error:null}),se(),fe){const{errorThrown:ue,error:pe}=ee;if(ee=null,ue)throw pe}}else se()}function ae(se){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=se)}},9672:(lt,Se,R)=>{function d(ee,k,ae,se=0,fe=!1){const ue=k.schedule(function(){ae(),fe?ee.add(this.schedule(null,se)):this.unsubscribe()},se);if(ee.add(ue),!fe)return ue}R.d(Se,{f:()=>d})},4671:(lt,Se,R)=>{function d(ee){return ee}R.d(Se,{y:()=>d})},1144:(lt,Se,R)=>{R.d(Se,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(lt,Se,R)=>{R.d(Se,{D:()=>ee});var d=R(576);function ee(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(lt,Se,R)=>{function d(ee){return"function"==typeof ee}R.d(Se,{m:()=>d})},3670:(lt,Se,R)=>{R.d(Se,{c:()=>k});var d=R(8822),ee=R(576);function k(ae){return(0,ee.m)(ae[d.L])}},6495:(lt,Se,R)=>{R.d(Se,{T:()=>k});var d=R(2202),ee=R(576);function k(ae){return(0,ee.m)(ae?.[d.h])}},8239:(lt,Se,R)=>{R.d(Se,{t:()=>ee});var d=R(576);function ee(k){return(0,d.m)(k?.then)}},3260:(lt,Se,R)=>{R.d(Se,{L:()=>ae,Q:()=>k});var d=R(655),ee=R(576);function k(se){return(0,d.FC)(this,arguments,function*(){const ue=se.getReader();try{for(;;){const{value:pe,done:me}=yield(0,d.qq)(ue.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(pe)}}finally{ue.releaseLock()}})}function ae(se){return(0,ee.m)(se?.getReader)}},4482:(lt,Se,R)=>{R.d(Se,{A:()=>ee,e:()=>k});var d=R(576);function ee(ae){return(0,d.m)(ae?.lift)}function k(ae){return se=>{if(ee(se))return se.lift(function(fe){try{return ae(fe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Se,R)=>{R.d(Se,{U:()=>k,z:()=>ee});var d=R(4671);function ee(...ae){return k(ae)}function k(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(fe){return ae.reduce((ue,pe)=>pe(ue),fe)}}},7849:(lt,Se,R)=>{R.d(Se,{h:()=>k});var d=R(2416),ee=R(3410);function k(ae){ee.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw ae;se(ae)})}},4532:(lt,Se,R)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Se,{z:()=>d})},655:(lt,Se,R)=>{function ae(Y,X){var oe={};for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&X.indexOf(ne)<0&&(oe[ne]=Y[ne]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(ne=Object.getOwnPropertySymbols(Y);Re<ne.length;Re++)X.indexOf(ne[Re])<0&&Object.prototype.propertyIsEnumerable.call(Y,ne[Re])&&(oe[ne[Re]]=Y[ne[Re]])}return oe}function pe(Y,X,oe,ne){return new(oe||(oe=Promise))(function(ke,ht){function qt(un){try{ze(ne.next(un))}catch(Fn){ht(Fn)}}function Bt(un){try{ze(ne.throw(un))}catch(Fn){ht(Fn)}}function ze(un){un.done?ke(un.value):function Re(ke){return ke instanceof oe?ke:new oe(function(ht){ht(ke)})}(un.value).then(qt,Bt)}ze((ne=ne.apply(Y,X||[])).next())})}function _e(Y){return this instanceof _e?(this.v=Y,this):new _e(Y)}function ge(Y,X,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ne=oe.apply(Y,X||[]),ke=[];return Re={},ht("next"),ht("throw"),ht("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function ht(Yt){ne[Yt]&&(Re[Yt]=function(Qt){return new Promise(function(Pr,Ft){ke.push([Yt,Qt,Pr,Ft])>1||qt(Yt,Qt)})})}function qt(Yt,Qt){try{!function Bt(Yt){Yt.value instanceof _e?Promise.resolve(Yt.value.v).then(ze,un):Fn(ke[0][2],Yt)}(ne[Yt](Qt))}catch(Pr){Fn(ke[0][3],Pr)}}function ze(Yt){qt("next",Yt)}function un(Yt){qt("throw",Yt)}function Fn(Yt,Qt){Yt(Qt),ke.shift(),ke.length&&qt(ke[0][0],ke[0][1])}}function st(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,X=Y[Symbol.asyncIterator];return X?X.call(Y):(Y=function Q(Y){var X="function"==typeof Symbol&&Symbol.iterator,oe=X&&Y[X],ne=0;if(oe)return oe.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ne>=Y.length&&(Y=void 0),{value:Y&&Y[ne++],done:!Y}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),oe={},ne("next"),ne("throw"),ne("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ne(ke){oe[ke]=Y[ke]&&function(ht){return new Promise(function(qt,Bt){!function Re(ke,ht,qt,Bt){Promise.resolve(Bt).then(function(ze){ke({value:ze,done:qt})},ht)}(qt,Bt,(ht=Y[ke](ht)).done,ht.value)})}}}R.d(Se,{FC:()=>ge,KL:()=>st,_T:()=>ae,mG:()=>pe,qq:()=>_e})},4650:(lt,Se,R)=>{R.d(Se,{$8M:()=>Xu,$Z:()=>nu,AFp:()=>Yw,ALo:()=>rC,AaK:()=>pe,BQk:()=>Mm,CHM:()=>Ru,CRH:()=>gy,CZH:()=>vf,CqO:()=>yv,D6c:()=>wS,DdM:()=>iy,EJc:()=>Ty,EiD:()=>fh,EpF:()=>mv,F4k:()=>tb,FYo:()=>vt,FiY:()=>He,G48:()=>l0,GfV:()=>pl,Gpc:()=>G,JOm:()=>da,JVY:()=>Ic,KtG:()=>Fu,L6k:()=>Mr,LAX:()=>i_,LFG:()=>jn,LSH:()=>Xf,Lbi:()=>Qw,Lck:()=>mw,MAs:()=>pv,MMx:()=>ey,NdJ:()=>Ws,O4$:()=>fc,OlP:()=>pn,Oqu:()=>Xh,PXZ:()=>iS,Q6J:()=>Dm,QGY:()=>li,QP$:()=>Ui,QbO:()=>Iy,Qsj:()=>ot,R0b:()=>Zs,RDi:()=>e_,Rgc:()=>Sd,SBq:()=>ce,Sil:()=>QT,Suo:()=>Ad,TTD:()=>os,TgZ:()=>Tm,Tol:()=>Sv,Udp:()=>kp,VKq:()=>eC,W1O:()=>Bw,X6Q:()=>uS,XFs:()=>Ze,Xpm:()=>z,Xts:()=>Qa,Y36:()=>Yc,YKP:()=>zb,YNc:()=>QE,Yjl:()=>Vt,Yz7:()=>Qt,Z0I:()=>Ca,ZZ4:()=>wu,_Bn:()=>Jm,_UZ:()=>Sl,_Vd:()=>A,_c5:()=>qC,_uU:()=>Jh,aQg:()=>Ly,c2e:()=>CC,cJS:()=>Ft,cg1:()=>rf,d8E:()=>Lv,dDg:()=>nS,dqk:()=>ln,eBb:()=>aa,eFA:()=>OC,ekj:()=>Nm,eoX:()=>My,f3M:()=>I,g9A:()=>Cy,h0i:()=>df,hGG:()=>Vy,hij:()=>xl,iGM:()=>Vw,ifc:()=>ut,ip1:()=>Ey,jDz:()=>yw,kL8:()=>Vv,kcU:()=>zd,lG2:()=>er,lcZ:()=>sC,lqb:()=>sr,lri:()=>n0,mCW:()=>Bs,n5z:()=>hs,oAB:()=>at,oJD:()=>ph,oxw:()=>ib,pB0:()=>J0,q3G:()=>Kn,q4F:()=>Xa,qLn:()=>bh,qOj:()=>fa,qZA:()=>Sm,qzn:()=>al,rWj:()=>r0,sBO:()=>c0,sIi:()=>Ap,s_b:()=>uy,soG:()=>Dy,tb:()=>bC,tp0:()=>Et,uIk:()=>uv,vHH:()=>we,vpe:()=>xo,wAp:()=>mt,xp6:()=>bE,ynx:()=>Am,z2F:()=>Ny,z3N:()=>ms,zSh:()=>Yn,zs3:()=>Wc});var d=R(7579),ee=R(727),k=R(9751),ae=R(6451),se=R(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=fe({__forward_ref__:fe});function G(s){return s.__forward_ref__=G,s.toString=function(){return pe(this())},s}function Q(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}class we extends Error{constructor(o,a){super(function et(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new we(-201,!1)}function Bt(s,o){null==s&&function ze(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function an(s){return Wr(s,Vi)||Wr(s,Ei)}function Ca(s){return null!==an(s)}function Wr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Is(s){return s&&(s.hasOwnProperty(Kr)||s.hasOwnProperty(Vo))?s[Kr]:null}const Vi=fe({\u0275prov:fe}),Kr=fe({\u0275inj:fe}),Ei=fe({ngInjectableDef:fe}),Vo=fe({ngInjectorDef:fe});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Yr;function Ln(s){const o=Yr;return Yr=s,o}function bi(s,o,a){const l=an(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==o?o:void ve(pe(s))}function Vn(s){return{toString:s}.toString()}var Xn=(()=>((Xn=Xn||{})[Xn.OnPush=0]="OnPush",Xn[Xn.Default=1]="Default",Xn))(),ut=(()=>{return(s=ut||(ut={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ut;var s})();const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rr={},It=[],rs=fe({\u0275cmp:fe}),Jt=fe({\u0275dir:fe}),Ci=fe({\u0275pipe:fe}),Kt=fe({\u0275mod:fe}),K=fe({\u0275fac:fe}),$=fe({__NG_ELEMENT_ID__:fe});let U=0;function z(s){return Vn(()=>{const a=!0===s.standalone,l={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||It,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ut.Emulated,id:"c"+U++,styles:s.styles||It,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,_=s.features;return h.inputs=Xt(s.inputs,l),h.outputs=Xt(s.outputs),_&&_.forEach(E=>E(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ie).filter(Ue):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(zn).filter(Ue):null,h})}function Ie(s){return kt(s)||wn(s)}function Ue(s){return null!==s}function at(s){return Vn(()=>({type:s.type,bootstrap:s.bootstrap||It,declarations:s.declarations||It,imports:s.imports||It,exports:s.exports||It,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Xt(s,o){if(null==s)return Rr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=l,o&&(o[h]=g)}return a}const er=z;function Vt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function kt(s){return s[rs]||null}function wn(s){return s[Jt]||null}function zn(s){return s[Ci]||null}function Ui(s){const o=kt(s)||wn(s)||zn(s);return null!==o&&o.standalone}function Fr(s,o){const a=s[Kt]||null;if(!a&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return a}function fr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Lr(s){return Array.isArray(s)&&!0===s[1]}function Iu(s){return 0!=(8&s.flags)}function Ta(s){return 2==(2&s.flags)}function Ql(s){return 1==(1&s.flags)}function Sr(s){return null!==s.template}function Rf(s){return 0!=(256&s[2])}function ji(s,o){return s.hasOwnProperty(K)?s[K]:null}class ss{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function os(){return eo}function eo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Su),Sa}function Sa(){const s=Vf(this),o=s?.current;if(o){const a=s.previous;if(a===Rr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Su(s,o,a,l){const h=Vf(s)||function Uo(s,o){return s[tc]=o}(s,{previous:Rr,current:null}),g=h.current||(h.current={}),_=h.previous,E=this.declaredInputs[a],C=_[E];g[E]=new ss(C&&C.currentValue,o,_===Rr),s[l]=o}os.ngInherit=!0;const tc="__ngSimpleChanges__";function Vf(s){return s[tc]||null}function xn(s){for(;Array.isArray(s);)s=s[0];return s}function gi(s,o){return xn(o[s])}function Vr(s,o){return xn(o[s.index])}function to(s,o){return s.data[o]}function us(s,o){return s[o]}function $t(s,o){const a=o[s];return fr(a)?a:a[0]}function Aa(s){return 4==(4&s[2])}function no(s){return 64==(64&s[2])}function Ti(s,o){return null==o?null:s[o]}function Ou(s){s[18]=0}function Dn(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Dt={lFrame:dc(null),bindingsEnabled:!0};function ls(){return Dt.bindingsEnabled}function De(){return Dt.lFrame.lView}function Ut(){return Dt.lFrame.tView}function Ru(s){return Dt.lFrame.contextLView=s,s[8]}function Fu(s){return Dt.lFrame.contextLView=null,s}function On(){let s=Lu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Lu(){return Dt.lFrame.currentTNode}function mi(s,o){const a=Dt.lFrame;a.currentTNode=s,a.isParent=o}function xa(){return Dt.lFrame.isParent}function Oa(){Dt.lFrame.isParent=!1}function Nn(){const s=Dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function io(){return Dt.lFrame.bindingIndex++}function cs(s){const o=Dt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function vg(s,o){const a=Dt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Vu(o)}function Vu(s){Dt.lFrame.currentDirectiveIndex=s}function ka(s){const o=Dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function uc(){return Dt.lFrame.currentQueryIndex}function Pa(s){Dt.lFrame.currentQueryIndex=s}function lc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uu(s,o,a){if(a&Ze.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&Ze.Host||(h=lc(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const l=Dt.lFrame=cc();return l.currentTNode=o,l.lView=s,!0}function Bu(s){const o=cc(),a=s[1];Dt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function cc(){const s=Dt.lFrame,o=null===s?null:s.child;return null===o?dc(s):o}function dc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function hc(){const s=Dt.lFrame;return Dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Gd=hc;function so(){const s=hc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function rr(){return Dt.lFrame.selectedIndex}function Jr(s){Dt.lFrame.selectedIndex=s}function mn(){const s=Dt.lFrame;return to(s.tView,s.selectedIndex)}function fc(){Dt.lFrame.currentNamespace="svg"}function zd(){!function gc(){Dt.lFrame.currentNamespace=null}()}function mc(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:O}=g;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(a,O)}}function Ho(s,o,a){Go(s,o,3,a)}function $o(s,o,a,l){(3&s[2])===a&&Go(s,o,a,l)}function Wd(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Go(s,o,a,l){const g=l??-1,_=o.length-1;let E=0;for(let C=void 0!==l?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Zd(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Zd(s,o,a,l){const h=a[l]<0,g=a[l+1],E=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class ks{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function zo(s,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const g=a[l++],_=a[l++],E=a[l++];s.setAttribute(o,_,E,g)}else{const g=h,_=a[++l];qu(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),l++}}return l}function lo(s){return 3===s||4===s||6===s}function qu(s){return 64===s.charCodeAt(0)}function Ra(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||Yd(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function Yd(s,o,a,l,h){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(s[g+1]=h));if(l===s[g+1])return void(s[g+2]=h)}g++,null!==l&&g++,null!==h&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==h&&s.splice(g++,0,h)}function Qd(s){return-1!==s}function pr(s){return 32767&s}function La(s,o){let a=function Fa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let $i=!0;function Va(s){const o=$i;return $i=s,o}let Un=0;const Si={};function co(s,o){const a=Zu(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Ba(l.data,s),Ba(o,null),Ba(l.blueprint,null));const h=Ku(s,o),g=s.injectorIndex;if(Qd(h)){const _=pr(h),E=La(h,o),C=E[1].data;for(let S=0;S<8;S++)o[g+S]=E[_+S]|C[_+S]}return o[g+8]=h,g}function Ba(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Zu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ku(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Zo(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ps(s,o,a){!function Wu(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty($)&&(l=a[$]),null==l&&(l=a[$]=Un++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function Rs(s,o,a){if(a&Ze.Optional)return s;ve()}function Yu(s,o,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const h=s[9],g=Ln(void 0);try{return h?h.get(o,l,a&Ze.Optional):bi(o,l,a&Ze.Optional)}finally{Ln(g)}}return Rs(l,0,a)}function ho(s,o,a,l=Ze.Default,h){if(null!==s){if(1024&o[2]){const _=function Wo(s,o,a,l,h){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=ja(g,_,a,l|Ze.Self,Si);if(E!==Si)return E;let C=g.parent;if(!C){const S=_[21];if(S){const O=S.get(a,Si,l);if(O!==Si)return O}C=Zo(_),_=_[15]}g=C}return h}(s,o,a,l,Si);if(_!==Si)return _}const g=ja(s,o,a,l,Si);if(g!==Si)return g}return Yu(o,a,l,h)}function ja(s,o,a,l,h){const g=function _c(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty($)?s[$]:void 0;return"number"==typeof o?o>=0?255&o:vc:o}(a);if("function"==typeof g){if(!Uu(o,s,l))return l&Ze.Host?Rs(h,0,l):Yu(o,a,l,h);try{const _=g(l);if(null!=_||l&Ze.Optional)return _;ve()}finally{Gd()}}else if("number"==typeof g){let _=null,E=Zu(s,o),C=-1,S=l&Ze.Host?o[16][6]:null;for((-1===E||l&Ze.SkipSelf)&&(C=-1===E?Ku(s,o):o[E+8],-1!==C&&Ha(l,!1)?(_=o[1],E=pr(C),o=La(C,o)):E=-1);-1!==E;){const O=o[1];if(Qu(g,E,O.data)){const P=eh(E,o,a,_,l,S);if(P!==Si)return P}C=o[E+8],-1!==C&&Ha(l,o[1].data[E+8]===S)&&Qu(g,E,o)?(_=O,E=pr(C),o=La(C,o)):E=-1}}return h}function eh(s,o,a,l,h,g){const _=o[1],E=_.data[s+8],O=qo(E,_,a,null==l?Ta(E)&&$i:l!=_&&0!=(3&E.type),h&Ze.Host&&g===E);return null!==O?ds(o,_,O,E):Si}function qo(s,o,a,l,h){const g=s.providerIndexes,_=o.data,E=1048575&g,C=s.directiveStart,O=g>>20,q=h?E+O:s.directiveEnd;for(let te=l?E:E+O;te<q;te++){const be=_[te];if(te<C&&a===be||te>=C&&be.type===a)return te}if(h){const te=_[C];if(te&&Sr(te)&&te.type===a)return C}return null}function ds(s,o,a,l){let h=s[a];const g=o.data;if(function ao(s){return s instanceof ks}(h)){const _=h;_.resolving&&function Ke(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new we(-200,`Circular dependency in DI detected for ${s}${a}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}(g[a]));const E=Va(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?Ln(_.injectImpl):null;Uu(s,l,Ze.Default);try{h=s[a]=_.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function qd(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(l){const _=eo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&Ln(C),Va(E),_.resolving=!1,Gd()}}return h}function Qu(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ha(s,o){return!(s&Ze.Self||s&Ze.Host&&o)}class fo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return ho(this._tNode,this._lView,o,l,a)}}function vc(){return new fo(On(),De())}function hs(s){return Vn(()=>{const o=s.prototype.constructor,a=o[K]||Ju(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const g=h[K]||Ju(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ju(s){return Ve(s)?()=>{const o=Ju(Q(s));return o&&o()}:ji(s)}function Zo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Xu(s){return function Xd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const g=a[h];if(lo(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(On(),s)}const Fs="__parameters__";function Qo(s,o,a){return Vn(()=>{const l=function el(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...g){if(this instanceof h)return l.apply(this,g),this;const _=new h(...g);return E.annotation=_,E;function E(C,S,O){const P=C.hasOwnProperty(Fs)?C[Fs]:Object.defineProperty(C,Fs,{value:[]})[Fs];for(;P.length<=O;)P.push(null);return(P[O]=P[O]||[]).push(_),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class pn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),cn(l,o)):o!==s&&o.push(l)}return o}function ti(s,o){s.forEach(a=>Array.isArray(a)?ti(a,o):o(a))}function fs(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Bn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ni(s,o,a){let l=Vs(s,o);return l>=0?s[1|l]=a:(l=~l,function tl(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function qa(s,o){const a=Vs(s,o);if(a>=0)return s[1|a]}function Vs(s,o){return function Jo(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const g=l+(h-l>>1),_=s[g<<a];if(o===_)return g<<a;_>o?h=g:l=g+1}return~(h<<a)}(s,o,1)}const Br={},Tn="__NG_DI_FLAG__",ta="ngTempTokenPath",na=/\n/gm,Ec="__source";let mo;function ps(s){const o=mo;return mo=s,o}function bc(s,o=Ze.Default){if(void 0===mo)throw new we(-203,!1);return null===mo?bi(s,void 0,o):mo.get(s,o&Ze.Optional?null:void 0,o)}function jn(s,o=Ze.Default){return(function ns(){return Yr}()||bc)(Q(s),o)}function I(s,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),jn(s,o)}function D(s){const o=[];for(let a=0;a<s.length;a++){const l=Q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let h,g=Ze.Default;for(let _=0;_<l.length;_++){const E=l[_],C=L(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(jn(h,g))}else o.push(jn(l))}return o}function x(s,o){return s[Tn]=o,s.prototype[Tn]=o,s}function L(s){return s[Tn]}const He=x(Qo("Optional"),8),Et=x(Qo("SkipSelf"),4);let Wf,ol,Cc;function e_(s){Wf=s}function Wi(s){return function de(){if(void 0===ol&&(ol=null,ln.trustedTypes))try{ol=ln.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ol}()?.createHTML(s)||s}function Ye(s){return function gs(){if(void 0===Cc&&(Cc=null,ln.trustedTypes))try{Cc=ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Cc}()?.createHTML(s)||s}class Zi{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zf extends Zi{getTypeName(){return"HTML"}}class Ya extends Zi{getTypeName(){return"Style"}}class n_ extends Zi{getTypeName(){return"Script"}}class uh extends Zi{getTypeName(){return"URL"}}class r_ extends Zi{getTypeName(){return"ResourceURL"}}function ms(s){return s instanceof Zi?s.changingThisBreaksApplicationSecurity:s}function al(s,o){const a=function br(s){return s instanceof Zi&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Ic(s){return new Zf(s)}function Mr(s){return new Ya(s)}function aa(s){return new n_(s)}function i_(s){return new uh(s)}function J0(s){return new r_(s)}class Tg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Wi(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class s_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Wi(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Wi(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const _=a.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Kf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Bs(s){return(s=String(s)).match(Kf)?s:"unsafe:"+s}function Sn(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Eo(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const jr=Sn("area,br,col,hr,img,wbr"),Qf=Sn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dc=Sn("rp,rt"),ch=Eo(jr,Eo(Qf,Sn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Eo(Dc,Sn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Eo(Dc,Qf)),Tc=Sn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dh=Sn("srcset"),Jf=Eo(Tc,dh,Sn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ac=Sn("script,style,template");class hh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!ch.hasOwnProperty(a))return this.sanitizedSomething=!0,!Ac.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let h=0;h<l.length;h++){const g=l.item(h),_=g.name,E=_.toLowerCase();if(!Jf.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=g.value;Tc[E]&&(C=Bs(C)),dh[E]&&(s=C,C=(s=String(s)).split(",").map(o=>Bs(o.trim())).join(", ")),this.buf.push(" ",_,'="',ua(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();ch.hasOwnProperty(a)&&!jr.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(ua(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const u_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mg=/([^\#-~ |!])/g;function ua(s){return s.replace(/&/g,"&amp;").replace(u_,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Mg,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ul;function fh(s,o){let a=null;try{ul=ul||function wo(s){const o=new s_(s);return function lh(){try{return!!(new window.DOMParser).parseFromString(Wi(""),"text/html")}catch{return!1}}()?new Tg(o):o}(s);let l=o?String(o):"";a=ul.getInertBodyElement(l);let h=5,g=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=g,g=a.innerHTML,a=ul.getInertBodyElement(l)}while(l!==g);return Wi((new hh).sanitizeChildren(Mc(a)||a))}finally{if(a){const l=Mc(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Mc(s){return"content"in s&&function xg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function ph(s){const o=js();return o?Ye(o.sanitize(Kn.HTML,s)||""):al(s,"HTML")?Ye(ms(s)):fh(function t_(){return void 0!==Wf?Wf:typeof document<"u"?document:void 0}(),_e(s))}function Xf(s){const o=js();return o?o.sanitize(Kn.URL,s)||"":al(s,"URL")?ms(s):Bs(_e(s))}function js(){const s=De();return s&&s[12]}const Qa=new pn("ENVIRONMENT_INITIALIZER"),Oc=new pn("INJECTOR",-1),mh=new pn("INJECTOR_DEF_TYPES");class dl{get(o,a=Br){if(a===Br){const l=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw l.name="NullInjectorError",l}return a}}function Ng(...s){return{\u0275providers:ri(0,s)}}function ri(s,...o){const a=[],l=new Set;let h;return ti(o,g=>{const _=g;Nc(_,a,[],l)&&(h||(h=[]),h.push(_))}),void 0!==h&&hl(h,a),a}function hl(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];ti(h,g=>{o.push(g)})}}function Nc(s,o,a,l){if(!(s=Q(s)))return!1;let h=null,g=Is(s);const _=!g&&kt(s);if(g||_){if(_&&!_.standalone)return!1;h=s}else{const C=s.ngModule;if(g=Is(C),!g)return!1;h=C}const E=l.has(h);if(_){if(E)return!1;if(l.add(h),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const S of C)Nc(S,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let S;l.add(h);try{ti(g.imports,O=>{Nc(O,o,a,l)&&(S||(S=[]),S.push(O))})}finally{}void 0!==S&&hl(S,o)}if(!E){const S=ji(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:It},{provide:mh,useValue:h,multi:!0},{provide:Qa,useValue:()=>jn(h),multi:!0})}const C=g.providers;null==C||E||ti(C,O=>{o.push(O)})}}return h!==s&&void 0!==s.providers}const kc=fe({provide:String,useValue:fe});function fl(s){return null!==s&&"object"==typeof s&&kc in s}function bo(s){return"function"==typeof s}const Yn=new pn("Set Injector scope."),ir={},yh={};let Rc;function Fc(){return void 0===Rc&&(Rc=new dl),Rc}class sr{}class Lc extends sr{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uc(o,_=>this.processProvider(_)),this.records.set(Oc,Ja(void 0,this)),h.has("environment")&&this.records.set(sr,Ja(void 0,this));const g=this.records.get(Yn);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(mh.multi,It,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=ps(this),l=Ln(void 0);try{return o()}finally{ps(a),Ln(l)}}get(o,a=Br,l=Ze.Default){this.assertNotDestroyed();const h=ps(this),g=Ln(void 0);try{if(!(l&Ze.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function ep(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&an(o);E=C&&this.injectableDefInScope(C)?Ja(Vc(o),ir):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ze.Self?Fc():this.parent).get(o,a=l&Ze.Optional&&a===Br?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[ta]=_[ta]||[]).unshift(pe(o)),h)throw _;return function J(s,o,a,l){const h=s[ta];throw o[Ec]&&h.unshift(o[Ec]),s.message=function le(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=pe(o);if(Array.isArray(o))h=o.map(pe).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];g.push(_+":"+("string"==typeof E?JSON.stringify(E):pe(E)))}h=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(na,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[ta]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Ln(g),ps(h)}}resolveInjectorInitializers(){const o=ps(this),a=Ln(void 0);try{const l=this.get(Qa.multi,It,Ze.Self);for(const h of l)h()}finally{ps(o),Ln(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(pe(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=bo(o=Q(o))?o:Q(o&&o.provide);const l=function ys(s){return fl(s)?Ja(void 0,s.useValue):Ja(la(s),ir)}(o);if(bo(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Ja(void 0,ir,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===ir&&(a.value=yh,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Pg(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Vc(s){const o=an(s),a=null!==o?o.factory:ji(s);if(null!==a)return a;if(s instanceof pn)throw new we(204,!1);if(s instanceof Function)return function h_(s){const o=s.length;if(o>0)throw function In(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function Tr(s){const o=s&&(s[Vi]||s[Ei]);if(o){const a=function Zr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new we(204,!1)}function la(s,o,a){let l;if(bo(s)){const h=Q(s);return ji(h)||Vc(h)}if(fl(s))l=()=>Q(s.useValue);else if(function Pc(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...D(s.deps||[]));else if(function kg(s){return!(!s||!s.useExisting)}(s))l=()=>jn(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function _h(s){return!!s.deps}(s))return ji(h)||Vc(h);l=()=>new h(...D(s.deps))}return l}function Ja(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function vh(s){return!!s.\u0275providers}function Uc(s,o){for(const a of s)Array.isArray(a)?Uc(a,o):vh(a)?Uc(a.\u0275providers,o):o(a)}class np{}class w{resolveComponentFactory(o){throw function v(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let A=(()=>{class s{}return s.NULL=new w,s})();function N(){return Z(On(),De())}function Z(s,o){return new ce(Vr(s,o))}let ce=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=N,s})();function Fe(s){return s instanceof ce?s.nativeElement:s}class vt{}let ot=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function or(){const s=De(),a=$t(On().index,s);return(fr(a)?a:s)[11]}(),s})(),yi=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class pl{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Xa=new pl("14.2.0"),gl={};function Ug(s){return s.ngOriginalError}class bh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ug(o);for(;a&&Ug(a);)a=Ug(a);return a||null}}const v_=new Map;let w_=0;const Ih="__ngContext__";function xr(s,o){fr(o)?(s[Ih]=o[20],function E_(s){v_.set(s[20],s)}(o)):s[Ih]=o}function Dh(s){const o=s[Ih];return"number"==typeof o?function yl(s){return v_.get(s)||null}(o):o||null}function An(s){const o=Dh(s);return o?fr(o)?o:o.lView:null}function ca(s){return s instanceof Function?s():s}var da=(()=>((da=da||{})[da.Important=1]="Important",da[da.DashCase=2]="DashCase",da))();function $g(s,o){return undefined(s,o)}function Sh(s){const o=s[3];return Lr(o)?o[3]:o}function D_(s){return dp(s[13])}function T_(s){return dp(s[4])}function dp(s){for(;null!==s&&!Lr(s);)s=s[4];return s}function tu(s,o,a,l,h){if(null!=l){let g,_=!1;Lr(l)?g=l:fr(l)&&(_=!0,l=l[0]);const E=xn(l);0===s&&null!==a?null==h?Kg(o,a,E):$c(o,a,E,h||null,!0):1===s&&null!==a?$c(o,a,E,h||null,!0):2===s?function x_(s,o,a){const l=Gc(s,o);l&&function hE(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,E,_):3===s&&o.destroyNode(E),null!=g&&function yE(s,o,a,l,h){const g=a[7];g!==xn(a)&&tu(o,s,l,g,h);for(let E=10;E<a.length;E++){const C=a[E];Oh(C[1],C,s,o,l,g)}}(o,s,g,a,h)}}function Hc(s,o,a){return s.createElement(o,a)}function cE(s,o){const a=s[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Dn(h,-1)),a.splice(l,1)}function qg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&cE(h,l),o>0&&(s[a-1][4]=l[4]);const g=Bn(s,10+o);!function sD(s,o){Oh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function A_(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Oh(s,o,a,3,null,null),function oD(s){let o=s[13];if(!o)return Wg(s[1],s);for(;o;){let a=null;if(fr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)fr(o)&&Wg(o[1],o),o=o[3];null===o&&(o=s),fr(o)&&Wg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Wg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function dE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ks)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const E=h[g[_]],C=g[_+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Zg(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],E="function"==typeof _?_(o):xn(o[_]),C=l[h=a[g+2]],S=a[g+3];"boolean"==typeof S?E.removeEventListener(a[g],C,S):S>=0?l[h=S]():l[h=-S].unsubscribe(),g+=2}else{const _=l[h=a[g+1]];a[g].call(_)}if(null!==l){for(let g=h+1;g<l.length;g++)(0,l[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Lr(o[3])){a!==o[3]&&cE(a,o);const l=o[19];null!==l&&l.detachView(s)}!function rE(s){v_.delete(s[20])}(o)}}function ha(s,o,a){return function M_(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===ut.None||h===ut.Emulated)return null}return Vr(l,a)}(s,o.parent,a)}function $c(s,o,a,l,h){s.insertBefore(o,a,l,h)}function Kg(s,o,a){s.appendChild(o,a)}function Ah(s,o,a,l,h){null!==l?$c(s,o,a,l,h):Kg(s,o,a)}function Gc(s,o){return s.parentNode(o)}let gE=function pp(s,o,a){return 40&s.type?Vr(s,a):null};function gp(s,o,a,l){const h=ha(s,l,o),g=o[11],E=function Yg(s,o,a){return gE(s,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)Ah(g,h,a[C],E,!1);else Ah(g,h,a,E,!1)}function mp(s,o){if(null!==o){const a=o.type;if(3&a)return Vr(o,s);if(4&a)return yp(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return mp(s,l);{const h=s[o.index];return Lr(h)?yp(-1,h):xn(h)}}if(32&a)return $g(o,s)()||xn(s[o.index]);{const l=Jg(s,o);return null!==l?Array.isArray(l)?l[0]:mp(Sh(s[16]),l):mp(s,o.next)}}return null}function Jg(s,o){return null!==o?s[16][6].projection[o.projection]:null}function yp(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return mp(l,h)}return o[7]}function xh(s,o,a,l,h,g,_){for(;null!=a;){const E=l[a.index],C=a.type;if(_&&0===o&&(E&&xr(xn(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)xh(s,o,a.child,l,h,g,!1),tu(o,s,h,E,g);else if(32&C){const S=$g(a,l);let O;for(;O=S();)tu(o,s,h,O,g);tu(o,s,h,E,g)}else 16&C?_l(s,o,l,a,h,g):tu(o,s,h,E,g);a=_?a.projectionNext:a.next}}function Oh(s,o,a,l,h,g){xh(a,l,s.firstChild,o,h,g,!1)}function _l(s,o,a,l,h,g){const _=a[16],C=_[6].projection[l.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)tu(o,s,h,C[S],g);else xh(s,o,C,_[3],h,g,!0)}function O_(s,o,a){s.setAttribute(o,"style",a)}function Xg(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function _p(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===l||s.charCodeAt(h+g)<=32)return h}a=h+1}}const N_="ng-template";function vE(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==_p(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function zc(s){return 4===s.type&&s.value!==N_}function lD(s,o,a){return o===(4!==s.type||a?s.value:N_)}function cD(s,o,a){let l=4;const h=s.attrs||[],g=function hD(s){for(let o=0;o<s.length;o++)if(lo(s[o]))return o;return s.length}(h);let _=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!_)if(4&l){if(l=2|1&l,""!==C&&!lD(s,C,a)||""===C&&1===o.length){if(vs(l))return!1;_=!0}}else{const S=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!vE(s.attrs,S,a)){if(vs(l))return!1;_=!0}continue}const P=dD(8&l?"class":C,h,zc(s),a);if(-1===P){if(vs(l))return!1;_=!0;continue}if(""!==S){let q;q=P>g?"":h[P+1].toLowerCase();const te=8&l?q:null;if(te&&-1!==_p(te,S,0)||2&l&&S!==q){if(vs(l))return!1;_=!0}}}}else{if(!_&&!vs(l)&&!vs(C))return!1;if(_&&vs(C))continue;_=!1,l=C|1&l}}return vs(l)||_}function vs(s){return 0==(1&s)}function dD(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let g=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)g=!0;else{if(1===_||2===_){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=g?1:2}return-1}return function em(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function wE(s,o,a=!1){for(let l=0;l<o.length;l++)if(cD(s,o[l],a))return!0;return!1}function k_(s,o){return s?":not("+o.trim()+")":o}function Gr(s){let o=s[0],a=1,l=2,h="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&l){const E=s[++a];h+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+_:4&l&&(h+=" "+_);else""!==h&&!vs(_)&&(o+=k_(g,h),h=""),l=_,g=g||!vs(l);a++}return""!==h&&(o+=k_(g,h)),o}const Nt={};function bE(s){Ne(Ut(),De(),rr()+s,!1)}function Ne(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ho(o,g,a)}else{const g=s.preOrderHooks;null!==g&&$o(o,g,0,a)}Jr(a)}function Or(s,o=null,a=null,l){const h=R_(s,o,a,l);return h.resolveInjectorInitializers(),h}function R_(s,o=null,a=null,l,h=new Set){const g=[a||It,Ng(s)];return l=l||("object"==typeof s?void 0:pe(s)),new Lc(g,o||Fc(),l||null,h)}let Wc=(()=>{class s{static create(a,l){if(Array.isArray(a))return Or({name:""},l,a,"");{const h=a.name??"";return Or({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=Br,s.NULL=new dl,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>jn(Oc)}),s.__NG_ELEMENT_ID__=-1,s})();function Yc(s,o=Ze.Default){const a=De();return null===a?jn(s,o):ho(On(),a,Q(s),o)}function nu(){throw new Error("invalid")}function ie(s,o){return s<<17|o<<2}function Ki(s){return s>>17&32767}function Qc(s){return 2|s}function _i(s){return(131068&s)>>2}function j_(s,o){return-131069&s|o<<2}function sm(s){return 1|s}function Lh(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],g=a[l+1];if(-1!==g){const _=s.data[g];Pa(h),_.contentQueries(2,o[g],g)}}}function hm(s,o,a,l,h,g,_,E,C,S,O){const P=o.blueprint.slice();return P[0]=h,P[2]=76|l,(null!==O||s&&1024&s[2])&&(P[2]|=1024),Ou(P),P[3]=P[15]=s,P[8]=a,P[10]=_||s&&s[10],P[11]=E||s&&s[11],P[12]=C||s&&s[12]||null,P[9]=S||s&&s[9]||null,P[6]=g,P[20]=function Ch(){return w_++}(),P[21]=O,P[16]=2==o.type?s[16]:P,P}function nd(s,o,a,l,h){let g=s.data[o];if(null===g)g=function fm(s,o,a,l,h){const g=Lu(),_=xa(),C=s.data[o]=function TD(s,o,a,l,h,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(_?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,a,l,h),function _g(){return Dt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=h;const _=function jo(){const s=Dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return mi(g,!0),g}function lr(s,o,a,l){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function Ep(s,o,a){Bu(o);try{const l=s.viewQuery;null!==l&&Dl(1,l,a);const h=s.template;null!==h&&W_(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Lh(s,o),s.staticViewQueries&&Dl(2,s.viewQuery,a);const g=s.components;null!==g&&function CD(s,o){for(let a=0;a<o.length;a++)_m(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,so()}}function hn(s,o,a,l){const h=o[2];if(128!=(128&h)){Bu(o);try{Ou(o),function oc(s){return Dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&W_(s,o,a,2,l);const _=3==(3&h);if(_){const S=s.preOrderCheckHooks;null!==S&&Ho(o,S,null)}else{const S=s.preOrderHooks;null!==S&&$o(o,S,0,null),Wd(o,0)}if(function UE(s){for(let o=D_(s);null!==o;o=T_(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],g=h[3];0==(512&h[2])&&Dn(g,1),h[2]|=512}}}(o),function xD(s){for(let o=D_(s);null!==o;o=T_(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];no(l)&&hn(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&Lh(s,o),_){const S=s.contentCheckHooks;null!==S&&Ho(o,S)}else{const S=s.contentHooks;null!==S&&$o(o,S,1),Wd(o,1)}!function dm(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Jr(~h);else{const g=h,_=a[++l],E=a[++l];vg(_,g),E(2,o[g])}}}finally{Jr(-1)}}(s,o);const E=s.components;null!==E&&function OE(s,o){for(let a=0;a<o.length;a++)BE(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&Dl(2,C,l),_){const S=s.viewCheckHooks;null!==S&&Ho(o,S)}else{const S=s.viewHooks;null!==S&&$o(o,S,2),Wd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Dn(o[3],-1))}finally{so()}}}function ID(s,o,a,l){const h=o[10],_=Aa(o);try{!_&&h.begin&&h.begin(),_&&Ep(s,o,l),hn(s,o,a,l)}finally{!_&&h.end&&h.end()}}function W_(s,o,a,l,h){const g=rr(),_=2&l;try{Jr(-1),_&&o.length>22&&Ne(s,o,22,!1),a(l,h)}finally{Jr(g)}}function Il(s,o,a){if(Iu(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function Z_(s,o,a){!ls()||(function ou(s,o,a,l){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||co(a,o),xr(l,o);const _=a.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],S=Sr(C);S&&gm(o,a,C);const O=ds(o,s,E,a);xr(O,o),null!==_&&ev(0,E-h,O,C,0,_),S&&($t(a.index,o)[8]=O)}}(s,o,a,Vr(a,o)),128==(128&a.flags)&&function LE(s,o,a){const l=a.directiveStart,h=a.directiveEnd,g=a.index,_=function ac(){return Dt.lFrame.currentDirectiveIndex}();try{Jr(g);for(let E=l;E<h;E++){const C=s.data[E],S=o[E];Vu(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&sd(C,S)}}finally{Jr(-1),Vu(_)}}(s,o,a))}function rd(s,o,a=Vr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],E=-1===_?a(o,s):s[_];s[h++]=E}}}function bp(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Vh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Vh(s,o,a,l,h,g,_,E,C,S){const O=22+l,P=O+h,q=function NE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Nt);return a}(O,P),te="function"==typeof S?S():S;return q[1]={type:s,blueprint:q,template:a,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function kE(s,o,a,l){const h=iv(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&Hh(s).push(l,h.length-1))}function PE(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function K_(s,o){const l=o.directiveEnd,h=s.data,g=o.attrs,_=[];let E=null,C=null;for(let S=o.directiveStart;S<l;S++){const O=h[S],P=O.inputs,q=null===g||zc(o)?null:tv(P,g);_.push(q),E=PE(P,S,E),C=PE(O.outputs,S,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=C}function ws(s,o,a,l,h,g,_,E){const C=Vr(o,a);let O,S=o.inputs;!E&&null!=S&&(O=S[l])?(Mn(s,a,O,l,h),Ta(o)&&RE(a,o.index)):3&o.type&&(l=function SD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=_?_(h,o.value||"",l):h,g.setProperty(C,l,h))}function RE(s,o){const a=$t(o,s);16&a[2]||(a[2]|=32)}function Y_(s,o,a,l){let h=!1;if(ls()){const g=function VE(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];wE(a,_.selectors,!1)&&(h||(h=[]),Ps(co(a,o),s,_.type),Sr(_)?(pm(s,a),h.unshift(_)):h.push(_))}return h}(s,o,a),_=null===l?null:{"":-1};if(null!==g){h=!0,od(a,s.data.length,g.length);for(let O=0;O<g.length;O++){const P=g[O];P.providersResolver&&P.providersResolver(P)}let E=!1,C=!1,S=lr(s,o,g.length,null);for(let O=0;O<g.length;O++){const P=g[O];a.mergedAttrs=Ra(a.mergedAttrs,P.hostAttrs),xi(s,a,o,S,P),X_(S,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const q=P.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),S++}K_(s,a)}_&&function J_(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new we(-301,!1);l.push(o[h],g)}}}(a,l,_)}return a.mergedAttrs=Ra(a.mergedAttrs,a.attrs),h}function Q_(s,o,a,l,h,g){const _=g.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function FE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,h,_)}}function sd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function pm(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function X_(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Sr(o)&&(a[""]=s)}}function od(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function xi(s,o,a,l,h){s.data[l]=h;const g=h.factory||(h.factory=ji(h.type)),_=new ks(g,Sr(h),Yc);s.blueprint[l]=_,a[l]=_,Q_(s,o,0,l,lr(s,a,h.hostVars,Nt),h)}function gm(s,o,a){const l=Vr(o,s),h=bp(a),g=s[10],_=vm(s,hm(s,h,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=_}function Qi(s,o,a,l,h,g){const _=Vr(s,o);!function mm(s,o,a,l,h,g,_){if(null==g)s.removeAttribute(o,h,a);else{const E=null==_?_e(g):_(g,l||"",h);s.setAttribute(o,h,E,a)}}(o[11],_,g,s.value,a,l,h)}function ev(s,o,a,l,h,g){const _=g[o];if(null!==_){const E=l.setInput;for(let C=0;C<_.length;){const S=_[C++],O=_[C++],P=_[C++];null!==E?l.setInput(a,P,S,O):a[O]=P}}}function tv(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function nv(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function BE(s,o){const a=$t(o,s);if(no(a)){const l=a[1];48&a[2]?hn(l,a,l.template,a[8]):a[5]>0&&ym(a)}}function ym(s){for(let l=D_(s);null!==l;l=T_(l))for(let h=10;h<l.length;h++){const g=l[h];if(no(g))if(512&g[2]){const _=g[1];hn(_,g,_.template,g[8])}else g[5]>0&&ym(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=$t(a[l],s);no(h)&&h[5]>0&&ym(h)}}function _m(s,o){const a=$t(o,s),l=a[1];(function OD(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Ep(l,a,a[8])}function vm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function wm(s){for(;s;){s[2]|=32;const o=Sh(s);if(Rf(s)&&!o)return s;s=o}return null}function Dl(s,o,a){Pa(0),o(s,a)}function iv(s){return s[7]||(s[7]=[])}function Hh(s){return s.cleanup||(s.cleanup=[])}function HE(s,o){const a=s[9],l=a?a.get(bh,null):null;l&&l.handleError(o)}function Mn(s,o,a,l,h){for(let g=0;g<a.length;){const _=a[g++],E=a[g++],C=o[_],S=s.data[_];null!==S.setInput?S.setInput(C,h,l,E):C[E]=h}}function ad(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?g=E:1==g?h=me(h,E):2==g&&(l=me(l,E+": "+o[++_]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}function Cp(s,o,a,l,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(xn(g)),Lr(g))for(let E=10;E<g.length;E++){const C=g[E],S=C[1].firstChild;null!==S&&Cp(C[1],C,S,l)}const _=a.type;if(8&_)Cp(s,o,a.child,l);else if(32&_){const E=$g(a,o);let C;for(;C=E();)l.push(C)}else if(16&_){const E=Jg(o,a);if(Array.isArray(E))l.push(...E);else{const C=Sh(o[16]);Cp(C[1],C,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class Ip{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Cp(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Lr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(qg(o,l),Bn(a,l))}this._attachedToViewContainer=!1}A_(this._lView[1],this._lView)}onDestroy(o){kE(this._lView[1],this._lView,null,o)}markForCheck(){wm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function au(s,o,a){const l=o[10];l.begin&&l.begin();try{hn(s,o,s.template,a)}catch(h){throw HE(o,h),h}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lE(s,o){Oh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class Dp extends Ip{constructor(o){super(o),this._view=o}detectChanges(){!function rv(s){!function Bh(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=An(a);if(null!==l){const h=l[1];ID(h,l,h.template,a)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class sv extends A{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=kt(o);return new Gh(a,this.ngModule)}}function ov(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class uu{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,gl,l);return h!==gl||a===gl?h:this.parentInjector.get(o,a,l)}}class Gh extends np{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Nh(s){return s.map(Gr).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ov(this.componentDef.inputs)}get outputs(){return ov(this.componentDef.outputs)}create(o,a,l,h){let g=(h=h||this.ngModule)instanceof sr?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new uu(o,g):o,E=_.get(vt,null);if(null===E)throw new we(407,!1);const C=_.get(yi,null),S=E.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",P=l?function ai(s,o,a){return s.selectRootElement(o,a===ut.ShadowDom)}(S,l,this.componentDef.encapsulation):Hc(E.createRenderer(null,this.componentDef),O,function $h(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),q=this.componentDef.onPush?288:272,te={components:[]},be=Vh(0,null,null,1,0,null,null,null,null,null),Pe=hm(null,be,te,q,null,null,E,S,C,_,null);let qe,tt;Bu(Pe);try{const rt=function RD(s,o,a,l,h,g){const _=a[1];a[22]=s;const C=nd(_,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(ad(C,S,!0),null!==s&&(zo(h,s,S),null!==C.classes&&Xg(h,s,C.classes),null!==C.styles&&O_(h,s,C.styles)));const O=l.createRenderer(s,o),P=hm(a,bp(o),null,o.onPush?32:16,a[22],C,l,O,g||null,null,null);return _.firstCreatePass&&(Ps(co(C,a),_,o.type),pm(_,C),od(C,a.length,1)),vm(a,P),a[22]=P}(P,this.componentDef,Pe,E,S);if(P)if(l)zo(S,P,["ng-version",Xa.full]);else{const{attrs:Me,classes:yt}=function vl(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++l]):8===h&&a.push(g);else{if(!vs(h))break;h=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&zo(S,P,Me),yt&&yt.length>0&&Xg(S,P,yt.join(" "))}if(tt=to(be,22),void 0!==a){const Me=tt.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Ht=a[yt];Me.push(null!=Ht?Array.from(Ht):null)}}qe=function Ir(s,o,a,l,h){const g=a[1],_=function Uh(s,o,a){const l=On();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),xi(s,l,o,lr(s,o,1,null),a),K_(s,l));const h=ds(o,s,l.directiveStart,l);xr(h,o);const g=Vr(l,o);return g&&xr(g,o),h}(g,a,o);if(l.components.push(_),s[8]=_,null!==h)for(const C of h)C(_,o);if(o.contentQueries){const C=On();o.contentQueries(1,_,C.directiveStart)}const E=On();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Jr(E.index),Q_(a[1],E,0,E.directiveStart,E.directiveEnd,o),sd(o,_)),_}(rt,this.componentDef,Pe,te,[zE]),Ep(be,Pe,null)}finally{so()}return new zh(this.componentType,qe,Z(tt,Pe),Pe,tt)}}class zh extends class tp{}{constructor(o,a,l,h,g){super(),this.location=l,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Dp(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const g=this._rootLView;Mn(g[1],g,h,o,a),RE(g,this._tNode.index)}}get injector(){return new fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function zE(){const s=On();mc(De()[1],s)}function fa(s){let o=function av(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if(Sr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const _=s;_.inputs=vi(s.inputs),_.declaredInputs=vi(s.declaredInputs),_.outputs=vi(s.outputs);const E=h.hostBindings;E&&WE(s,E);const C=h.viewQuery,S=h.contentQueries;if(C&&qE(s,C),S&&Tp(s,S),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),Sr(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let _=0;_<g.length;_++){const E=g[_];E&&E.ngInherit&&E(s),E===fa&&(a=!1)}}o=Object.getPrototypeOf(o)}!function FD(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ra(h.hostAttrs,a=Ra(a,h.hostAttrs))}}(l)}function vi(s){return s===Rr?{}:s===It?[]:s}function qE(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function Tp(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,g)=>{o(l,h,g),a(l,h,g)}:o}function WE(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Em=null;function ud(){if(!Em){const s=ln.Symbol;if(s&&s.iterator)Em=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Em=l)}}}return Em}function Ap(s){return!!ld(s)&&(Array.isArray(s)||!(s instanceof Map)&&ud()in s)}function ld(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Do(s,o,a){return s[o]=a}function ui(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function uv(s,o,a,l){const h=De();return ui(h,io(),o)&&(Ut(),Qi(mn(),h,s,o,a,l)),uv}function QE(s,o,a,l,h,g,_,E){const C=De(),S=Ut(),O=s+22,P=S.firstCreatePass?function fv(s,o,a,l,h,g,_,E,C){const S=o.consts,O=nd(o,s,4,_||null,Ti(S,E));Y_(o,a,O,Ti(S,C)),mc(o,O);const P=O.tViews=Vh(2,O,l,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,O),P.queries=o.queries.embeddedTView(O)),O}(O,S,C,o,a,l,h,g,_):S.data[O];mi(P,!1);const q=C[11].createComment("");gp(S,C,q,P),xr(q,C),vm(C,C[O]=nv(q,C,q,P)),Ql(P)&&Z_(S,C,P),null!=_&&rd(C,P,E)}function pv(s){return us(function sc(){return Dt.lFrame.contextLView}(),22+s)}function Dm(s,o,a){const l=De();return ui(l,io(),o)&&ws(Ut(),mn(),l,s,o,l[11],a,!1),Dm}function gv(s,o,a,l,h){const _=h?"class":"style";Mn(s,a,o.inputs[_],_,l)}function Tm(s,o,a,l){const h=De(),g=Ut(),_=22+s,E=h[11],C=h[_]=Hc(E,o,function Hu(){return Dt.lFrame.currentNamespace}()),S=g.firstCreatePass?function XE(s,o,a,l,h,g,_){const E=o.consts,S=nd(o,s,2,h,Ti(E,g));return Y_(o,a,S,Ti(E,_)),null!==S.attrs&&ad(S,S.attrs,!1),null!==S.mergedAttrs&&ad(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,g,h,0,o,a,l):g.data[_];mi(S,!0);const O=S.mergedAttrs;null!==O&&zo(E,C,O);const P=S.classes;null!==P&&Xg(E,C,P);const q=S.styles;return null!==q&&O_(E,C,q),64!=(64&S.flags)&&gp(g,h,C,S),0===function ku(){return Dt.lFrame.elementDepthCount}()&&xr(C,h),function Pu(){Dt.lFrame.elementDepthCount++}(),Ql(S)&&(Z_(g,h,S),Il(g,S,h)),null!==l&&rd(h,S),Tm}function Sm(){let s=On();xa()?Oa():(s=s.parent,mi(s,!1));const o=s;!function nc(){Dt.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(mc(a,s),Iu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function zu(s){return 0!=(16&s.flags)}(o)&&gv(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Kd(s){return 0!=(32&s.flags)}(o)&&gv(a,o,De(),o.stylesWithoutHost,!1),Sm}function Sl(s,o,a,l){return Tm(s,o,a,l),Sm(),Sl}function Am(s,o,a){const l=De(),h=Ut(),g=s+22,_=h.firstCreatePass?function Qh(s,o,a,l,h){const g=o.consts,_=Ti(g,l),E=nd(o,s,8,"ng-container",_);return null!==_&&ad(E,_,!0),Y_(o,a,E,Ti(g,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(g,h,l,o,a):h.data[g];mi(_,!0);const E=l[g]=l[11].createComment("");return gp(h,l,E,_),xr(E,l),Ql(_)&&(Z_(h,l,_),Il(h,_,l)),null!=a&&rd(l,_),Am}function Mm(){let s=On();const o=Ut();return xa()?Oa():(s=s.parent,mi(s,!1)),o.firstCreatePass&&(mc(o,s),Iu(s)&&o.queries.elementEnd(s)),Mm}function mv(){return De()}function li(s){return!!s&&"function"==typeof s.then}function tb(s){return!!s&&"function"==typeof s.subscribe}const yv=tb;function Ws(s,o,a,l){const h=De(),g=Ut(),_=On();return function vv(s,o,a,l,h,g,_,E){const C=Ql(l),O=s.firstCreatePass&&Hh(s),P=o[8],q=iv(o);let te=!0;if(3&l.type||E){const qe=Vr(l,o),tt=E?E(qe):qe,rt=q.length,Me=E?Ht=>E(xn(Ht[l.index])):l.index;let yt=null;if(!E&&C&&(yt=function xm(s,o,a,l){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const _=h[g];if(_===a&&h[g+1]===l){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof _&&(g+=2)}return null}(s,o,h,l.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=g,yt.__ngLastListenerFn__=g,te=!1;else{g=rb(l,o,P,g,!1);const Ht=a.listen(tt,h,g);q.push(g,Ht),O&&O.push(h,Me,rt,rt+1)}}else g=rb(l,o,P,g,!1);const be=l.outputs;let Pe;if(te&&null!==be&&(Pe=be[h])){const qe=Pe.length;if(qe)for(let tt=0;tt<qe;tt+=2){const vn=o[Pe[tt]][Pe[tt+1]].subscribe(g),bu=q.length;q.push(g,vn),O&&O.push(h,l.index,bu,-(bu+1))}}}(g,h,h[11],_,s,o,0,l),Ws}function nb(s,o,a,l){try{return!1!==a(l)}catch(h){return HE(s,h),!1}}function rb(s,o,a,l,h){return function g(_){if(_===Function)return l;wm(2&s.flags?$t(s.index,o):o);let C=nb(o,0,l,_),S=g.__ngNextListenerFn__;for(;S;)C=nb(o,0,S,_)&&C,S=S.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function ib(s=1){return function oo(s){return(Dt.lFrame.contextLView=function ju(s,o){for(;s>0;)o=o[15],s--;return o}(s,Dt.lFrame.contextLView))[8]}(s)}function gb(s,o,a,l,h){const g=s[a+1],_=null===o;let E=l?Ki(g):_i(g),C=!1;for(;0!==E&&(!1===C||_);){const O=s[E+1];bv(s[E],o)&&(C=!0,s[E+1]=l?sm(O):Qc(O)),E=l?Ki(O):_i(O)}C&&(s[a+1]=l?Qc(g):sm(g))}function bv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Vs(s,o)>=0}const Wt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Om(s){return s.substring(Wt.key,Wt.keyEnd)}function lu(s,o){const a=Wt.textEnd;return a===o?-1:(o=Wt.keyEnd=function fd(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Wt.key=o,a),cu(s,o,a))}function cu(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function kp(s,o,a){return Ji(s,o,a,!1),kp}function Nm(s,o){return Ji(s,o,null,!0),Nm}function Sv(s){!function Oi(s,o,a,l){const h=Ut(),g=cs(2);h.firstUpdatePass&&vb(h,null,g,l);const _=De();if(a!==Nt&&ui(_,g,a)){const E=h.data[rr()];if(Mv(E,l)&&!Ml(h,g)){let C=l?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(a=me(C,a||"")),gv(h,E,_,a,l)}else!function GD(s,o,a,l,h,g,_,E){h===Nt&&(h=It);let C=0,S=0,O=0<h.length?h[0]:null,P=0<g.length?g[0]:null;for(;null!==O||null!==P;){const q=C<h.length?h[C+1]:void 0,te=S<g.length?g[S+1]:void 0;let Pe,be=null;O===P?(C+=2,S+=2,q!==te&&(be=P,Pe=te)):null===P||null!==O&&O<P?(C+=2,be=O):(S+=2,be=P,Pe=te),null!==be&&Eb(s,o,a,l,be,Pe,_,E),O=C<h.length?h[C]:null,P=S<g.length?g[S]:null}}(h,E,_,_[11],_[g+1],_[g+1]=function md(s,o,a){if(null==a||""===a)return It;const l=[],h=ms(a);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(l,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(l,g,h[g]);else"string"==typeof h&&o(l,h);return l}(s,o,a),l,g)}}(ni,Ao,s,!0)}function Ao(s,o){for(let a=function Iv(s){return function Dv(s){Wt.key=0,Wt.keyEnd=0,Wt.value=0,Wt.valueEnd=0,Wt.textEnd=s.length}(s),lu(s,cu(s,0,Wt.textEnd))}(o);a>=0;a=lu(o,a))ni(s,Om(o),!0)}function Ji(s,o,a,l){const h=De(),g=Ut(),_=cs(2);g.firstUpdatePass&&vb(g,s,_,l),o!==Nt&&ui(h,_,o)&&Eb(g,g.data[rr()],h,h[11],s,h[_+1]=function zD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=pe(ms(s)))),s}(o,a),l,_)}function Ml(s,o){return o>=s.expandoStartIndex}function vb(s,o,a,l){const h=s.data;if(null===h[a+1]){const g=h[rr()],_=Ml(s,a);Mv(g,l)&&null===o&&!_&&(o=!1),o=function wb(s,o,a,l){const h=ka(s);let g=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Mo(a=gd(null,s,o,a,l),o.attrs,l),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(a=gd(h,s,o,a,l),null===g){let C=function jD(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==_i(l))return s[Ki(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=gd(null,s,o,C[1],l),C=Mo(C,o.attrs,l),function HD(s,o,a,l){s[Ki(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else g=function $D(s,o,a){let l;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)l=Mo(l,s[g].hostAttrs,a);return Mo(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,l),function fb(s,o,a,l,h,g){let _=g?o.classBindings:o.styleBindings,E=Ki(_),C=_i(_);s[l]=a;let O,S=!1;if(Array.isArray(a)){const P=a;O=P[1],(null===O||Vs(P,O)>0)&&(S=!0)}else O=a;if(h)if(0!==C){const q=Ki(s[E+1]);s[l+1]=ie(q,E),0!==q&&(s[q+1]=j_(s[q+1],l)),s[E+1]=function wD(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=ie(E,0),0!==E&&(s[E+1]=j_(s[E+1],l)),E=l;else s[l+1]=ie(C,0),0===E?E=l:s[C+1]=j_(s[C+1],l),C=l;S&&(s[l+1]=Qc(s[l+1])),gb(s,O,l,!0),gb(s,O,l,!1),function pb(s,o,a,l,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Vs(g,o)>=0&&(a[l+1]=sm(a[l+1]))}(o,O,s,l,g),_=ie(E,C),g?o.classBindings=_:o.styleBindings=_}(h,g,o,a,_,l)}}function gd(s,o,a,l,h){let g=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(g=o[E],l=Mo(l,g.hostAttrs,h),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function Mo(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?h=_:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ni(s,_,!!a||o[++g]))}return void 0===s?null:s}function Eb(s,o,a,l,h,g,_,E){if(!(3&o.type))return;const C=s.data,S=C[E+1];yd(function El(s){return 1==(1&s)}(S)?km(C,o,a,h,_i(S),_):void 0)||(yd(g)||function Gs(s){return 2==(2&s)}(S)&&(g=km(C,null,a,h,E,_)),function _E(s,o,a,l,h){if(o)h?s.addClass(a,l):s.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:da.DashCase;null==h?s.removeStyle(a,l,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=da.Important),s.setStyle(a,l,h,g))}}(l,_,gi(rr(),a),h,g))}function km(s,o,a,l,h,g){const _=null===o;let E;for(;h>0;){const C=s[h],S=Array.isArray(C),O=S?C[1]:C,P=null===O;let q=a[h+1];q===Nt&&(q=P?It:void 0);let te=P?qa(q,l):O===l?q:void 0;if(S&&!yd(te)&&(te=qa(C,l)),yd(te)&&(E=te,_))return E;const be=s[h+1];h=_?Ki(be):_i(be)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=qa(C,l))}return E}function yd(s){return void 0!==s}function Mv(s,o){return 0!=(s.flags&(o?16:32))}function Jh(s,o=""){const a=De(),l=Ut(),h=s+22,g=l.firstCreatePass?nd(l,h,1,o,null):l.data[h],_=a[h]=function hp(s,o){return s.createText(o)}(a[11],o);gp(l,a,_,g),mi(g,!1)}function Xh(s){return xl("",s,""),Xh}function xl(s,o,a){const l=De(),h=function Zh(s,o,a,l){return ui(s,io(),a)?o+_e(a)+l:Nt}(l,s,o,a);return h!==Nt&&function qs(s,o,a){const l=gi(o,s);!function S_(s,o,a){s.setValue(o,a)}(s[11],l,a)}(l,rr(),h),xl}function Lv(s,o,a){const l=De();if(ui(l,io(),o)){const g=Ut(),_=mn();ws(g,_,l,s,o,function jE(s,o,a){return(null===s||Sr(s))&&(a=function Au(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(ka(g.data),_,l),a,!0)}return Lv}const vd=void 0;var eT=["en",[["a","p"],["AM","PM"],vd],[["AM","PM"],vd,vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vd,"{1} 'at' {0}",vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XD(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let wd={};function rf(s){const o=function Lm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Fm(o);if(a)return a;const l=o.split("-")[0];if(a=Fm(l),a)return a;if("en"===l)return eT;throw new we(701,!1)}function Vv(s){return rf(s)[mt.PluralCase]}function Fm(s){return s in wd||(wd[s]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[s]),wd[s]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Ed="en-US";let jv=Ed;function Ll(s,o,a,l,h){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)Ll(s[g],o,a,l,h);else{const g=Ut(),_=De();let E=bo(s)?s:Q(s.provide),C=la(s);const S=On(),O=1048575&S.providerIndexes,P=S.directiveStart,q=S.providerIndexes>>20;if(bo(s)||!s.multi){const te=new ks(C,h,Yc),be=fw(E,o,h?O:O+q,P);-1===be?(Ps(co(S,_),g,E),Qm(g,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(te),_.push(te)):(a[be]=te,_[be]=te)}else{const te=fw(E,o,O+q,P),be=fw(E,o,O,O+q),Pe=te>=0&&a[te],qe=be>=0&&a[be];if(h&&!qe||!h&&!Pe){Ps(co(S,_),g,E);const tt=function gw(s,o,a,l,h){const g=new ks(s,a,Yc);return g.multi=[],g.index=o,g.componentProviders=0,Dd(g,h,l&&!a),g}(h?pw:yT,a.length,h,l,C);!h&&qe&&(a[be].providerFactory=tt),Qm(g,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(tt),_.push(tt)}else Qm(g,s,te>-1?te:be,Dd(a[h?be:te],C,!h&&l));!h&&l&&qe&&a[be].componentProviders++}}}function Qm(s,o,a,l){const h=bo(o),g=function Hs(s){return!!s.useClass}(o);if(h||g){const C=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=S.indexOf(a);-1===O?S.push(a,[l,C]):S[O+1].push(l,C)}else S.push(a,C)}}}function Dd(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function fw(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function yT(s,o,a,l){return Bp(this.multi,[])}function pw(s,o,a,l){const h=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ds(a,a[1],this.providerFactory.index,l);g=E.slice(0,_),Bp(h,g);for(let C=_;C<E.length;C++)g.push(E[C])}else g=[],Bp(h,g);return g}function Bp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Jm(s,o=[]){return a=>{a.providersResolver=(l,h)=>function cf(s,o,a){const l=Ut();if(l.firstCreatePass){const h=Sr(s);Ll(a,l.data,l.blueprint,h,!0),Ll(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class df{}class zb{}function mw(s,o){return new Wb(s,o??null)}class Wb extends df{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sv(this);const l=Fr(o);this._bootstrapComponents=ca(l.bootstrap),this._r3Injector=R_(o,a,[{provide:df,useValue:this},{provide:A,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xm extends zb{constructor(o){super(),this.moduleType=o}create(o){return new Wb(this.moduleType,o)}}class _T extends df{constructor(o,a,l){super(),this.componentFactoryResolver=new sv(this),this.instance=null;const h=new Lc([...o,{provide:df,useValue:this},{provide:A,useValue:this.componentFactoryResolver}],a||Fc(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ey(s,o,a=null){return new _T(s,o,a).injector}let Zb=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=ri(0,a.type),h=l.length>0?ey([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Qt({token:s,providedIn:"environment",factory:()=>new s(jn(sr))}),s})();function yw(s){s.getStandaloneInjector=o=>o.get(Zb).getOrCreateStandaloneInjector(s)}function iy(s,o,a){const l=Nn()+s,h=De();return h[l]===Nt?Do(h,l,a?o.call(a):o()):function qh(s,o){return s[o]}(h,l)}function eC(s,o,a,l){return sy(De(),Nn(),s,o,a,l)}function sy(s,o,a,l,h,g){const _=o+a;return ui(s,_,h)?Do(s,_+1,g?l.call(g,h):l(h)):function jp(s,o){const a=s[o];return a===Nt?void 0:a}(s,_+1)}function rC(s,o){const a=Ut();let l;const h=s+22;a.firstCreatePass?(l=function CT(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const g=l.factory||(l.factory=ji(l.type)),_=Ln(Yc);try{const E=Va(!1),C=g();return Va(E),function JE(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),h,C),C}finally{Ln(_)}}function sC(s,o,a){const l=s+22,h=De(),g=us(h,l);return function Td(s,o){return s[1].data[o].pure}(h,l)?sy(h,Nn(),o,g.transform,a,g):g.transform(a)}function Hp(s){return o=>{setTimeout(s,void 0,o)}}const xo=class oC extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,g=a||(()=>null),_=l;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),g=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(g=Hp(g),h&&(h=Hp(h)),_&&(_=Hp(_)));const E=super.subscribe({next:h,error:g,complete:_});return o instanceof ee.w0&&o.add(E),E}};function TT(){return this._results[ud()]()}class xw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ud(),l=xw.prototype;l[a]||(l[a]=TT)}get changes(){return this._changes||(this._changes=new xo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=cn(o);(this._changesDetected=!function ei(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],g=o[l];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sd=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nw,s})();const ST=Sd,Ow=class extends ST{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=hm(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(l)),Ep(l,h,o),new Ip(h)}};function Nw(){return ff(On(),De())}function ff(s,o){return 4&s.type?new Ow(o,s,Z(s,o)):null}let uy=(()=>{class s{}return s.__NG_ELEMENT_ID__=aC,s})();function aC(){return $p(On(),De())}const uC=uy,lC=class extends uC{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Z(this._hostTNode,this._hostLView)}get injector(){return new fo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ku(this._hostTNode,this._hostLView);if(Qd(o)){const a=La(o,this._hostLView),l=pr(o);return new fo(a[1].data[l+8],a)}return new fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ly(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,g;"number"==typeof l?h=l:null!=l&&(h=l.index,g=l.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,h),_}createComponent(o,a,l,h,g){const _=o&&!function en(s){return"function"==typeof s}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,h=P.projectableNodes,g=P.environmentInjector||P.ngModuleRef}const C=_?o:new Gh(kt(o)),S=l||this.parentInjector;if(!g&&null==C.ngModule){const q=(_?S:this.parentInjector).get(sr,null);q&&(g=q)}const O=C.create(S,h,void 0,g);return this.insert(O.hostView,E),O}insert(o,a){const l=o._lView,h=l[1];if(function xu(s){return Lr(s[3])}(l)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const P=l[3],q=new lC(P,P[6],P[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function aD(s,o,a,l){const h=10+l,g=a.length;l>0&&(a[h-1][4]=o),l<g-10?(o[4]=a[h],fs(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function uD(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,l,_,g);const E=yp(g,_),C=l[11],S=Gc(C,_[7]);return null!==S&&function Cr(s,o,a,l,h,g){l[0]=h,l[6]=o,Oh(s,l,a,1,h,g)}(h,_[6],C,l,S,E),o.attachToViewContainerRef(),fs(cy(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ly(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=qg(this._lContainer,a);l&&(Bn(cy(this._lContainer),a),A_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=qg(this._lContainer,a);return l&&null!=Bn(cy(this._lContainer),a)?new Ip(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function ly(s){return s[8]}function cy(s){return s[8]||(s[8]=[])}function $p(s,o){let a;const l=o[s.index];if(Lr(l))a=l;else{let h;if(8&s.type)h=xn(l);else{const g=o[11];h=g.createComment("");const _=Vr(s,o);$c(g,Gc(g,_),h,function pE(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=nv(l,o,h,s),vm(o,a)}return new lC(a,s,o)}class kw{constructor(o){this.queryList=o,this.matches=null}clone(){return new kw(this.queryList)}setDirty(){this.queryList.setDirty()}}class dy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);h.push(this.queries[_.indexInDeclarationView].clone())}return new dy(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==fC(o,a).matches&&this.queries[a].setDirty()}}class hy{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class fy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,h);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new fy(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gp{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Gp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const g=l[h];this.matchTNodeWithReadOption(o,a,Pw(a,g)),this.matchTNodeWithReadOption(o,a,qo(a,o,g,!1,!1))}else l===Sd?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,qo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===ce||h===uy||h===Sd&&4&a.type)this.addMatch(a.index,-2);else{const g=qo(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Pw(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function py(s,o,a,l){return-1===a?function Rw(s,o){return 11&s.type?Z(s,o):4&s.type?ff(s,o):null}(o,s):-2===a?function Fw(s,o,a){return a===ce?Z(o,s):a===Sd?ff(o,s):a===uy?$p(o,s):void 0}(s,o,l):ds(s,s[1],a,o)}function Lw(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const g=s.data,_=a.matches,E=[];for(let C=0;C<_.length;C+=2){const S=_[C];E.push(S<0?null:py(o,g[S],_[C+1],a.metadata.read))}h.matches=E}return h.matches}function pf(s,o,a,l){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const _=Lw(s,o,h,a);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)l.push(_[E/2]);else{const S=g[E+1],O=o[-C];for(let P=10;P<O.length;P++){const q=O[P];q[17]===q[3]&&pf(q[1],q,S,l)}if(null!==O[9]){const P=O[9];for(let q=0;q<P.length;q++){const te=P[q];pf(te[1],te,S,l)}}}}}return l}function Vw(s){const o=De(),a=Ut(),l=uc();Pa(l+1);const h=fC(a,l);if(s.dirty&&Aa(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?pf(a,o,l,[]):Lw(a,o,h,l);s.reset(g,Fe),s.notifyOnChanges()}return!0}return!1}function Ad(s,o,a,l){const h=Ut();if(h.firstCreatePass){const g=On();(function dC(s,o,a){null===s.queries&&(s.queries=new fy),s.queries.track(new Gp(o,a))})(h,new hy(o,a,l),g.index),function hC(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function cC(s,o,a){const l=new xw(4==(4&a));kE(s,o,l,l.destroy),null===o[19]&&(o[19]=new dy),o[19].queries.push(new kw(l))}(h,De(),a)}function gy(){return function xT(s,o){return s[19].queries[o].queryList}(De(),uc())}function fC(s,o){return s.queries.getByIndex(o)}function Bw(s,o){return ff(s,o)}function wy(...s){}const Ey=new pn("Application Initializer");let vf=(()=>{class s{constructor(a){this.appInits=a,this.resolve=wy,this.reject=wy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(li(g))a.push(g);else if(yv(g)){const _=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(jn(Ey,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Yw=new pn("AppId",{providedIn:"root",factory:function Ul(){return`${by()}${by()}${by()}`}});function by(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cy=new pn("Platform Initializer"),Qw=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bC=new pn("appBootstrapListener"),Iy=new pn("AnimationModuleType");let CC=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Dy=new pn("LocaleId",{providedIn:"root",factory:()=>I(Dy,Ze.Optional|Ze.SkipSelf)||function Wp(){return typeof $localize<"u"&&$localize.locale||Ed}()}),Ty=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jl{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let QT=(()=>{class s{compileModuleSync(a){return new Xm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=ca(Fr(a).declarations).reduce((_,E)=>{const C=kt(E);return C&&_.push(new Gh(C)),_},[]);return new jl(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const XT=(()=>Promise.resolve(0))();function Ay(s){typeof Zone>"u"?XT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function eS(){let s=ln.requestAnimationFrame,o=ln.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function SC(s){const o=()=>{!function tS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(ln,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,e0(s),s.isCheckStableRunning=!0,Xw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),e0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,g,_,E)=>{try{return AC(s),a.invokeTask(h,g,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),t0(s)}},onInvoke:(a,l,h,g,_,E,C)=>{try{return AC(s),a.invoke(h,g,_,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),t0(s)}},onHasTask:(a,l,h,g)=>{a.hasTask(h,g),l===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,e0(s),Xw(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+h,o,TC,wy,wy);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const TC={};function Xw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function e0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function AC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function t0(s){s._nesting--,Xw(s)}class MC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const n0=new pn(""),r0=new pn("");let s0,nS=(()=>{class s{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,s0||(function xy(s){s0=s}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),Ay(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ay(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(jn(Zs),jn(My),jn(r0))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),My=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return s0?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),yu=null;const _u=new pn("AllowMultipleToken"),o0=new pn("PlatformDestroyListeners");class iS{constructor(o,a){this.name=o,this.token=a}}function OC(s,o,a=[]){const l=`Platform: ${o}`,h=new pn(l);return(g=[])=>{let _=Yp();if(!_||_.injector.get(_u,!1)){const E=[...a,...g,{provide:h,useValue:!0}];s?s(E):function sS(s){if(yu&&!yu.get(_u,!1))throw new we(400,!1);yu=s;const o=s.get(PC);(function Oy(s){const o=s.get(Cy,null);o&&o.forEach(a=>a())})(s)}(function kC(s=[],o){return Wc.create({name:o,providers:[{provide:Yn,useValue:"platform"},{provide:o0,useValue:new Set([()=>yu=null])},...s]})}(E,l))}return function NC(s){const o=Yp();if(!o)throw new we(401,!1);return o}()}}function Yp(){return yu?.get(PC)??null}let PC=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function FC(s,o){let a;return a="noop"===s?new MC:("zone.js"===s?void 0:s)||new Zs(o),a}(l?.ngZone,function RC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:Zs,useValue:h}];return h.run(()=>{const _=Wc.create({providers:g,parent:this.injector,name:a.moduleType.name}),E=a.create(_),C=E.injector.get(bh,null);if(!C)throw new we(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:O=>{C.handleError(O)}});E.onDestroy(()=>{ky(this._modules,E),S.unsubscribe()})}),function LC(s,o,a){try{const l=a();return li(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(C,h,()=>{const S=E.injector.get(vf);return S.runInitializers(),S.donePromise.then(()=>(function Nb(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(jv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Dy,Ed)||Ed),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const h=VC({},l);return function rS(s,o,a){const l=new Xm(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const l=a.injector.get(Ny);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(o0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(jn(Wc))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function VC(s,o){return Array.isArray(o)?o.reduce(VC,s):{...s,...o}}let Ny=(()=>{class s{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new k.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),Ay(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(g,_.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof np;if(!this._injector.get(vf).done)throw!h&&Ui(a),new we(405,false);let _;_=h?a:this._injector.get(A).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function xC(s){return s.isBoundToModule}(_)?void 0:this._injector.get(df),S=_.create(Wc.NULL,[],l||_.selector,E),O=S.location.nativeElement,P=S.injector.get(n0,null);return P?.registerApplication(O),S.onDestroy(()=>{this.detachView(S.hostView),ky(this.components,S),P?.unregisterApplication(O)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ky(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(bC,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ky(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(jn(Zs),jn(sr),jn(bh))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ky(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let u0=!0,UC=!1;function uS(){return UC=!0,u0}function l0(){if(UC)throw new Error("Cannot enable prod mode after platform setup.");u0=!1}let c0=(()=>{class s{}return s.__NG_ELEMENT_ID__=dS,s})();function dS(s){return function hS(s,o,a){if(Ta(s)&&!a){const l=$t(s.index,o);return new Ip(l,l)}return 47&s.type?new Ip(o[16],o):null}(On(),De(),16==(16&s))}class di{constructor(){}supports(o){return Ap(o)}create(o){return new Py(o)}}const mS=(s,o)=>o;class Py{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||mS}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<HC(l,h,g)?a:l,E=HC(_,h,g),C=_.currentIndex;if(_===l)h--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{g||(g=[]);const S=E-h,O=C-h;if(S!=O){for(let q=0;q<S;q++){const te=q<g.length?g[q]:g[q]=0,be=te+q;O<=be&&be<S&&(g[q]=te+1)}g[_.previousIndex]=O-S}}E!==C&&o(_,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ap(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],_=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,E),l=!0),a=a._next}else h=0,function Mp(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[ud()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new Ry(a,l),g,h),o}_verifyReinsertion(o,a,l,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new jC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ry{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qr{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class jC{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new qr,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HC(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class $C{constructor(){}supports(o){return o instanceof Map||ld(o)}create(){return new GC}}class GC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||ld(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,_=h._next;return g&&(g._next=_),_&&(_._prev=g),h._next=null,h._prev=null,h}const l=new yS(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class yS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qp(){return new wu([new di])}let wu=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Qp()),deps:[[s,new Et,new He]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new we(901,!1)}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Qp}),s})();function Jp(){return new Ly([new $C])}let Ly=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Jp()),deps:[[s,new Et,new He]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new we(901,!1)}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Jp}),s})();const qC=OC(null,"core",[]);let Vy=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(jn(Ny))},s.\u0275mod=at({type:s}),s.\u0275inj=Ft({}),s})();function wS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Se,R)=>{R.d(Se,{Z:()=>we});var d=R(2090),ee=R(4859),k=R(9681),ae=R(1877);class se{constructor(_e,ge){this._delegate=_e,this.firebase=ge,(0,k._addComponent)(_e,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(_e,ge=k._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(_e);return!st.isInitialized()&&"EXPLICIT"===(null===(Ke=st.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&st.initialize(),st.getImmediate({identifier:ge})}_removeServiceInstance(_e,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ge)}_addComponent(_e){(0,k._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,k._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function me(){const et=function pe(et){const _e={},ge={__esModule:!0,initializeApp:function Ae(je,B={}){const ye=k.initializeApp(je,B);if((0,d.r3)(_e,ye.name))return _e[ye.name];const Y=new et(ye,ge);return _e[ye.name]=Y,Y},app:st,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(je){const B=je.name,ye=B.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const Y=(X=st())=>{if("function"!=typeof X[ye])throw ue.create("invalid-app-argument",{appName:B});return X[ye]()};void 0!==je.serviceProps&&(0,d.ZB)(Y,je.serviceProps),ge[ye]=Y,et.prototype[ye]=function(...X){return this._getService.bind(this,B).apply(this,je.multipleInstances?X:[])}}return"PUBLIC"===je.type?ge[ye]:null},removeApp:function Ke(je){delete _e[je]},useAsService:function Be(je,B){return"serverAuth"===B?null:B},modularAPIs:k}};function st(je){if(!(0,d.r3)(_e,je=je||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return _e[je]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function ve(){return Object.keys(_e).map(je=>_e[je])}}),st.App=et,ge}(se);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(ge){(0,d.ZB)(et,ge)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),et}(),G=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=H;!function xe(et){(0,k.registerVersion)("@firebase/app-compat","0.1.33",et)}()},9681:(lt,Se,R)=>{R.r(Se),R.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Is,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>Qt,_apps:()=>un,_clearComponents:()=>Ca,_components:()=>Fn,_getProvider:()=>Ft,_registerComponent:()=>Pr,_removeServiceInstance:()=>an,deleteApp:()=>Vo,getApp:()=>Kr,getApps:()=>Ei,initializeApp:()=>Vi,onLog:()=>ns,registerVersion:()=>Yr,setLogLevel:()=>Ln});var d=R(5861),ee=R(4859),k=R(1877),ae=R(2090),se=R(8766);class fe{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function ue(U){return"VERSION"===U.getComponent()?.type}(W)){const Ie=W.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(W=>W).join(" ")}}const pe="@firebase/app",H=new k.Yd("@firebase/app"),Bt="[DEFAULT]",ze={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,Fn=new Map;function Yt(U,z){try{U.container.addComponent(z)}catch(W){H.debug(`Component ${z.name} failed to register with FirebaseApp ${U.name}`,W)}}function Qt(U,z){U.container.addOrOverwriteComponent(z)}function Pr(U){const z=U.name;if(Fn.has(z))return H.debug(`There were multiple attempts to register component ${z}.`),!1;Fn.set(z,U);for(const W of un.values())Yt(W,U);return!0}function Ft(U,z){const W=U.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),U.container.getProvider(z)}function an(U,z,W=Bt){Ft(U,z).clearInstance(W)}function Ca(){Fn.clear()}const Tr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zr{constructor(z,W,Ie){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Is="9.9.4";function Vi(U,z={}){"object"!=typeof z&&(z={name:z});const W=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},z),Ie=W.name;if("string"!=typeof Ie||!Ie)throw Tr.create("bad-app-name",{appName:String(Ie)});const Ue=un.get(Ie);if(Ue){if((0,ae.vZ)(U,Ue.options)&&(0,ae.vZ)(W,Ue.config))return Ue;throw Tr.create("duplicate-app",{appName:Ie})}const at=new ee.H0(Ie);for(const Xt of Fn.values())at.addComponent(Xt);const fn=new Zr(U,W,at);return un.set(Ie,fn),fn}function Kr(U=Bt){const z=un.get(U);if(!z)throw Tr.create("no-app",{appName:U});return z}function Ei(){return Array.from(un.values())}function Vo(U){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,d.Z)(function*(U){const z=U.name;un.has(z)&&(un.delete(z),yield Promise.all(U.container.getProviders().map(W=>W.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Yr(U,z,W){var Ie;let Ue=null!==(Ie=ze[U])&&void 0!==Ie?Ie:U;W&&(Ue+=`-${W}`);const at=Ue.match(/\s|\//),fn=z.match(/\s|\//);if(at||fn){const Xt=[`Unable to register library "${Ue}" with version "${z}":`];return at&&Xt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),at&&fn&&Xt.push("and"),fn&&Xt.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void H.warn(Xt.join(" "))}Pr(new ee.wA(`${Ue}-version`,()=>({library:Ue,version:z}),"VERSION"))}function ns(U,z){if(null!==U&&"function"!=typeof U)throw Tr.create("invalid-log-argument");(0,k.Am)(U,z)}function Ln(U){(0,k.Ub)(U)}const Vn="firebase-heartbeat-store";let Xn=null;function gn(){return Xn||(Xn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(U,z)=>{0===z&&U.createObjectStore(Vn)}}).catch(U=>{throw Tr.create("idb-open",{originalErrorMessage:U.message})})),Xn}function ut(){return(ut=(0,d.Z)(function*(U){var z;try{return(yield gn()).transaction(Vn).objectStore(Vn).get(hr(U))}catch(W){if(W instanceof ae.ZR)H.warn(W.message);else{const Ie=Tr.create("idb-get",{originalErrorMessage:null===(z=W)||void 0===z?void 0:z.message});H.warn(Ie.message)}}})).apply(this,arguments)}function ln(U,z){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(U,z){var W;try{const Ue=(yield gn()).transaction(Vn,"readwrite");return yield Ue.objectStore(Vn).put(z,hr(U)),Ue.done}catch(Ie){if(Ie instanceof ae.ZR)H.warn(Ie.message);else{const Ue=Tr.create("idb-set",{originalErrorMessage:null===(W=Ie)||void 0===W?void 0:W.message});H.warn(Ue.message)}}})).apply(this,arguments)}function hr(U){return`${U.name}!${U.options.appId}`}class rs{constructor(z){this.container=z,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new Kt(W),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var z=this;return(0,d.Z)(function*(){const Ie=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Jt();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!z._heartbeatsCache.heartbeats.some(at=>at.date===Ue))return z._heartbeatsCache.heartbeats.push({date:Ue,agent:Ie}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(at=>{const fn=new Date(at.date).valueOf();return Date.now()-fn<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,d.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const W=Jt(),{heartbeatsToSend:Ie,unsentEntries:Ue}=function Ci(U,z=1024){const W=[];let Ie=U.slice();for(const Ue of U){const at=W.find(fn=>fn.agent===Ue.agent);if(at){if(at.dates.push(Ue.date),K(W)>z){at.dates.pop();break}}else if(W.push({agent:Ue.agent,dates:[Ue.date]}),K(W)>z){W.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:W,unsentEntries:Ie}}(z._heartbeatsCache.heartbeats),at=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ie}));return z._heartbeatsCache.lastSentHeartbeatDate=W,Ue.length>0?(z._heartbeatsCache.heartbeats=Ue,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),at})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,d.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function gt(U){return ut.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var W=this;return(0,d.Z)(function*(){var Ie;if(yield W._canUseIndexedDBPromise){const at=yield W.read();return ln(W.app,{lastSentHeartbeatDate:null!==(Ie=z.lastSentHeartbeatDate)&&void 0!==Ie?Ie:at.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var W=this;return(0,d.Z)(function*(){var Ie;if(yield W._canUseIndexedDBPromise){const at=yield W.read();return ln(W.app,{lastSentHeartbeatDate:null!==(Ie=z.lastSentHeartbeatDate)&&void 0!==Ie?Ie:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...z.heartbeats]})}})()}}function K(U){return(0,ae.L)(JSON.stringify({version:2,heartbeats:U})).length}!function $(U){Pr(new ee.wA("platform-logger",z=>new fe(z),"PRIVATE")),Pr(new ee.wA("heartbeat",z=>new rs(z),"PRIVATE")),Yr(pe,"0.7.32",U),Yr(pe,"0.7.32","esm2017"),Yr("fire-js","")}("")},4859:(lt,Se,R)=>{R.d(Se,{H0:()=>pe,wA:()=>k});var d=R(5861),ee=R(2090);class k{constructor(H,G,Q){this.name=H,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class se{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const Q=new ee.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:G});Ve&&Q.resolve(Ve)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const Q=this.normalizeInstanceIdentifier(H?.identifier),Ve=null!==(G=H?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(xe){if(Ve)return null;throw xe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ue(me){return"EAGER"===me.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Ve});Q.resolve(xe)}catch{}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,d.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,Q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[xe,we]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(xe)&&we.resolve(Ve);return Ve}onInit(H,G){var Q;const Ve=this.normalizeInstanceIdentifier(G),xe=null!==(Q=this.onInitCallbacks.get(Ve))&&void 0!==Q?Q:new Set;xe.add(H),this.onInitCallbacks.set(Ve,xe);const we=this.instances.get(Ve);return we&&H(we,Ve),()=>{xe.delete(H)}}invokeOnInitCallbacks(H,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const Ve of Q)try{Ve(H,G)}catch{}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let Q=this.instances.get(H);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(me=H,me===ae?void 0:me),options:G}),this.instances.set(H,Q),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(Q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Q)}catch{}var me;return Q||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new se(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Se,R)=>{R.d(Se,{Am:()=>me,Ub:()=>pe,Yd:()=>ue,in:()=>ee});const d=[];var ee=(()=>{return(H=ee||(ee={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",ee;var H})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ae=ee.INFO,se={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},fe=(H,G,...Q)=>{if(G<H.logLevel)return;const Ve=(new Date).toISOString(),xe=se[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Ve}]  ${H.name}:`,...Q)};class ue{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?k[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function pe(H){d.forEach(G=>{G.setLogLevel(H)})}function me(H,G){for(const Q of d){let Ve=null;G&&G.level&&(Ve=k[G.level]),Q.userLogHandler=null===H?null:(xe,we,...et)=>{const _e=et.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");we>=(Ve??xe.logLevel)&&H({level:ee[we].toLowerCase(),message:_e,args:et,type:xe.name})}}}},8766:(lt,Se,R)=>{R.d(Se,{Lj:()=>Ae,X3:()=>st});var d=R(5861);let k,ae;const ue=new WeakMap,pe=new WeakMap,me=new WeakMap,H=new WeakMap,G=new WeakMap;let xe={get(B,ye,Y){if(B instanceof IDBTransaction){if("done"===ye)return pe.get(B);if("objectStoreNames"===ye)return B.objectStoreNames||me.get(B);if("store"===ye)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return ge(B[ye])},set:(B,ye,Y)=>(B[ye]=Y,!0),has:(B,ye)=>B instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in B};function _e(B){return"function"==typeof B?function et(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...ye){return B.apply(Ke(this),ye),ge(ue.get(this))}:function(...ye){return ge(B.apply(Ke(this),ye))}:function(ye,...Y){const X=B.call(Ke(this),ye,...Y);return me.set(X,ye.sort?ye.sort():[ye]),ge(X)}}(B):(B instanceof IDBTransaction&&function Ve(B){if(pe.has(B))return;const ye=new Promise((Y,X)=>{const oe=()=>{B.removeEventListener("complete",ne),B.removeEventListener("error",Re),B.removeEventListener("abort",Re)},ne=()=>{Y(),oe()},Re=()=>{X(B.error||new DOMException("AbortError","AbortError")),oe()};B.addEventListener("complete",ne),B.addEventListener("error",Re),B.addEventListener("abort",Re)});pe.set(B,ye)}(B),((B,ye)=>ye.some(Y=>B instanceof Y))(B,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,xe):B)}function ge(B){if(B instanceof IDBRequest)return function Q(B){const ye=new Promise((Y,X)=>{const oe=()=>{B.removeEventListener("success",ne),B.removeEventListener("error",Re)},ne=()=>{Y(ge(B.result)),oe()},Re=()=>{X(B.error),oe()};B.addEventListener("success",ne),B.addEventListener("error",Re)});return ye.then(Y=>{Y instanceof IDBCursor&&ue.set(Y,B)}).catch(()=>{}),G.set(ye,B),ye}(B);if(H.has(B))return H.get(B);const ye=_e(B);return ye!==B&&(H.set(B,ye),G.set(ye,B)),ye}const Ke=B=>G.get(B);function st(B,ye,{blocked:Y,upgrade:X,blocking:oe,terminated:ne}={}){const Re=indexedDB.open(B,ye),ke=ge(Re);return X&&Re.addEventListener("upgradeneeded",ht=>{X(ge(Re.result),ht.oldVersion,ht.newVersion,ge(Re.transaction))}),Y&&Re.addEventListener("blocked",()=>Y()),ke.then(ht=>{ne&&ht.addEventListener("close",()=>ne()),oe&&ht.addEventListener("versionchange",()=>oe())}).catch(()=>{}),ke}function Ae(B,{blocked:ye}={}){const Y=indexedDB.deleteDatabase(B);return ye&&Y.addEventListener("blocked",()=>ye()),ge(Y).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Be=new Map;function je(B,ye){if(!(B instanceof IDBDatabase)||ye in B||"string"!=typeof ye)return;if(Be.get(ye))return Be.get(ye);const Y=ye.replace(/FromIndex$/,""),X=ye!==Y,oe=Ce.includes(Y);if(!(Y in(X?IDBIndex:IDBObjectStore).prototype)||!oe&&!ve.includes(Y))return;const ne=function(){var Re=(0,d.Z)(function*(ke,...ht){const qt=this.transaction(ke,oe?"readwrite":"readonly");let Bt=qt.store;return X&&(Bt=Bt.index(ht.shift())),(yield Promise.all([Bt[Y](...ht),oe&&qt.done]))[0]});return function(ht){return Re.apply(this,arguments)}}();return Be.set(ye,ne),ne}!function we(B){xe=B(xe)}(B=>({...B,get:(ye,Y,X)=>je(ye,Y)||B.get(ye,Y,X),has:(ye,Y)=>!!je(ye,Y)||B.has(ye,Y)}))},5861:(lt,Se,R)=>{function d(k,ae,se,fe,ue,pe,me){try{var H=k[pe](me),G=H.value}catch(Q){return void se(Q)}H.done?ae(G):Promise.resolve(G).then(fe,ue)}function ee(k){return function(){var ae=this,se=arguments;return new Promise(function(fe,ue){var pe=k.apply(ae,se);function me(G){d(pe,fe,ue,me,H,"next",G)}function H(G){d(pe,fe,ue,me,H,"throw",G)}me(void 0)})}}R.d(Se,{Z:()=>ee})}},lt=>{lt(lt.s=5272)}]);