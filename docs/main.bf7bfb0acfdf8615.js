"use strict";(self.webpackChunkbooks_app=self.webpackChunkbooks_app||[]).push([[179],{2011:(at,De,P)=>{P.d(De,{Dh:()=>he,GT:()=>de,cc:()=>Ae,hO:()=>Le,on:()=>B,pX:()=>ie,xv:()=>pe});var h=P(4650),ee=P(127),N=P(5813);at=P.hmd(at);const oe=["ngOnDestroy"],ie=(fe,Ze,nt,Te={})=>new Proxy(fe,{get:(ve,Ie)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ie])return!(null===(Ue=Te?.spy)||void 0===Ue)&&Ue.get&&Te.spy.get(Ie,fe[Ie]),fe[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const Be=Ze.toPromise().then(U=>{const me=U&&U[Ie];return"function"==typeof me?me.bind(U):me&&me.then?me.then(Z=>nt.run(()=>Z)):nt.run(()=>me)});return new Proxy(()=>{},{get:(U,me)=>Be[me],apply:(U,me,Z)=>Be.then(J=>{var se;const ne=J&&J(...Z);return!(null===(se=Te?.spy)||void 0===se)&&se.apply&&Te.spy.apply(Ie,Z,ne),ne})})})}),de=(fe,Ze)=>{Ze.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Te=>{Object.defineProperty(fe.prototype,Te,Object.getOwnPropertyDescriptor(nt.prototype||nt,Te))})})};class le{constructor(Ze){return Ze}}const he=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function B(fe,Ze,nt){const ve="object"==typeof nt&&nt||{};ve.name=ve.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=ee.Z.apps.filter(Be=>Be&&Be.name===ve.name)[0]||Ze.runOutsideAngular(()=>ee.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&H("error",`${Ue.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ue)}const H=(fe,...Ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[fe](...Ze)},Y={provide:le,useFactory:B,deps:[he,h.R0b,[new h.FiY,pe]]};let Le=(()=>{class fe{constructor(nt){ee.Z.registerVersion("angularfire",N.q4.full,"core"),ee.Z.registerVersion("angularfire",N.q4.full,"app-compat"),ee.Z.registerVersion("angular",h.q4F.full,nt.toString())}static initializeApp(nt,Te){return{ngModule:fe,providers:[{provide:he,useValue:nt},{provide:pe,useValue:Te}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(h.LFG(h.Lbi))},fe.\u0275mod=h.oAB({type:fe}),fe.\u0275inj=h.cJS({providers:[Y]}),fe})();function Ae(fe,Ze,nt,Te,ve){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===fe)||[];if(Ie)return function _e(fe,Ze){try{return fe.toString()===Ze.toString()}catch{return fe===Ze}}(ve,Ue)||(ye("error",`${Ze} was already initialized on the ${nt} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:ve,was:Ue})),Ie;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([fe,Be,ve]),Be}}const Qe=!!at.hot,ye=(fe,...Ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[fe](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,P)=>{P.d(De,{q4:()=>Qr,iC:()=>os,HU:()=>Ho,vb:()=>no,JM:()=>jo});var h=P(4650),ee=P(5867),N=P(5861),oe=P(9681),ie=P(2090),de=P(4859),le=P(1877),he=P(8766);const pe="@firebase/installations",B="0.5.12",Y=`w:${B}`,Le="FIS_v2",Ze=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function Te({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function ve(b){return{token:b.token,requestStatus:2,expiresIn:J(b.expiresIn),creationTime:Date.now()}}function Ie(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(b,D){const F=(yield D.json()).error;return Ze.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function U(b,{refreshToken:D}){const x=Be(b);return x.append("Authorization",function se(b){return`${Le} ${b}`}(D)),x}function me(b){return Z.apply(this,arguments)}function Z(){return(Z=(0,N.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function J(b){return Number(b.replace("s","000"))}function ne(b,D){return ke.apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=Te(b),Q=Be(b),ae=D.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&Q.append("x-firebase-client",yt)}const je={method:"POST",headers:Q,body:JSON.stringify({fid:x,authVersion:Le,appId:b.appId,sdkVersion:Y})},ct=yield me(()=>fetch(F,je));if(ct.ok){const yt=yield ct.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:ve(yt.authToken)}}throw yield Ie("Create Installation",ct)})).apply(this,arguments)}function Re(b){return new Promise(D=>{setTimeout(D,b)})}const Ht=/^[cdef][\w-]{21}$/;function Ge(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function rn(b){return function lt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Ht.test(x)?x:""}catch{return""}}function Mn(b){return`${b.appName}!${b.appId}`}const Wt=new Map;function Zt(b,D){const x=Mn(b);nn(x,D),function oa(b,D){const x=function wr(){return!Hr&&"BroadcastChannel"in self&&(Hr=new BroadcastChannel("[Firebase] FID Change"),Hr.onmessage=b=>{nn(b.data.key,b.data.fid)}),Hr}();x&&x.postMessage({key:b,fid:D}),function $r(){0===Wt.size&&Hr&&(Hr.close(),Hr=null)}()}(x,D)}function nn(b,D){const x=Wt.get(b);if(x)for(const F of x)F(D)}let Hr=null;const Gr="firebase-installations-store";let gi=null;function Do(){return gi||(gi=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Gr)}})),gi}function We(b,D){return zr.apply(this,arguments)}function zr(){return(zr=(0,N.Z)(function*(b,D){const x=Mn(b),Q=(yield Do()).transaction(Gr,"readwrite"),ae=Q.objectStore(Gr),Ce=yield ae.get(x);return yield ae.put(D,x),yield Q.done,(!Ce||Ce.fid!==D.fid)&&Zt(b,D.fid),D})).apply(this,arguments)}function Zi(b){return On.apply(this,arguments)}function On(){return(On=(0,N.Z)(function*(b){const D=Mn(b),F=(yield Do()).transaction(Gr,"readwrite");yield F.objectStore(Gr).delete(D),yield F.done})).apply(this,arguments)}function mi(b,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,N.Z)(function*(b,D){const x=Mn(b),Q=(yield Do()).transaction(Gr,"readwrite"),ae=Q.objectStore(Gr),Ce=yield ae.get(x),je=D(Ce);return void 0===je?yield ae.delete(x):yield ae.put(je,x),yield Q.done,je&&(!Ce||Ce.fid!==je.fid)&&Zt(b,je.fid),je})).apply(this,arguments)}function Rn(b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,N.Z)(function*(b){let D;const x=yield mi(b.appConfig,F=>{const Q=cn(F),ae=dt(b,Q);return D=ae.registrationPromise,ae.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function cn(b){return _t(b||{fid:Ge(),registrationStatus:0})}function dt(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ze.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ot(b,D){return sn.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:sr(b)}:{installationEntry:D}}function sn(){return(sn=(0,N.Z)(function*(b,D){try{const x=yield ne(b,D);return We(b.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield Zi(b.appConfig):yield We(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function sr(b){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(b){let D=yield Ar(b.appConfig);for(;1===D.registrationStatus;)yield Re(100),D=yield Ar(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Rn(b);return F||x}return D})).apply(this,arguments)}function Ar(b){return mi(b,D=>{if(!D)throw Ze.create("installation-not-found");return _t(D)})}function _t(b){return function Ki(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Kt(b,D){return yi.apply(this,arguments)}function yi(){return(yi=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=qt(b,x),Q=U(b,x),ae=D.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&Q.append("x-firebase-client",yt)}const je={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:b.appId}})},ct=yield me(()=>fetch(F,je));if(ct.ok)return ve(yield ct.json());throw yield Ie("Generate Auth Token",ct)})).apply(this,arguments)}function qt(b,{fid:D}){return`${Te(b)}/${D}/authTokens:generate`}function W(b){return j.apply(this,arguments)}function j(){return(j=(0,N.Z)(function*(b,D=!1){let x;const F=yield mi(b.appConfig,ae=>{if(!st(ae))throw Ze.create("not-registered");const Ce=ae.authToken;if(!D&&un(Ce))return ae;if(1===Ce.requestStatus)return x=L(b,D),ae;{if(!navigator.onLine)throw Ze.create("app-offline");const je=Zn(ae);return x=Ee(b,je),je}});return x?yield x:F.authToken})).apply(this,arguments)}function L(b,D){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(b,D){let x=yield z(b.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield z(b.appConfig);const F=x.authToken;return 0===F.requestStatus?W(b,D):F})).apply(this,arguments)}function z(b){return mi(b,D=>{if(!st(D))throw Ze.create("not-registered");return function kt(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ee(b,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,N.Z)(function*(b,D){try{const x=yield Kt(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield We(b.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield We(b.appConfig,F)}else yield Zi(b.appConfig);throw x}})).apply(this,arguments)}function st(b){return void 0!==b&&2===b.registrationStatus}function un(b){return 2===b.requestStatus&&!function Yt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Zn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function gn(){return(gn=(0,N.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield Rn(D);return F?F.catch(console.error):W(D).catch(console.error),x.fid})).apply(this,arguments)}function Ni(){return(Ni=(0,N.Z)(function*(b,D=!1){const x=b;return yield xr(x),(yield W(x,D)).token})).apply(this,arguments)}function xr(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,N.Z)(function*(b){const{registrationPromise:D}=yield Rn(b);D&&(yield D)})).apply(this,arguments)}function gs(b){return Ze.create("missing-app-config-values",{valueName:b})}const Bs="installations",yn=b=>{const D=b.getProvider("app").getImmediate(),x=function mn(b){if(!b||!b.options)throw gs("App Configuration");if(!b.name)throw gs("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw gs(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},js=b=>{const D=b.getProvider("app").getImmediate(),x=(0,oe._getProvider)(D,Bs).getImmediate();return{getId:()=>function St(b){return gn.apply(this,arguments)}(x),getToken:Q=>function Un(b){return Ni.apply(this,arguments)}(x,Q)}};(function Tl(){(0,oe._registerComponent)(new de.wA(Bs,yn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",js,"PRIVATE"))})(),(0,oe.registerVersion)(pe,B),(0,oe.registerVersion)(pe,B,"esm2017");const ki="@firebase/remote-config",Hn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class df{constructor(D,x,F,Q){this.client=D,this.storage=x,this.storageCache=F,this.logger=Q}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Q=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Q;D.eTag=Q&&Q.eTag;const ae=yield x.client.fetch(D),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Ce),ae})()}}function Ol(b=navigator){return b.languages&&b.languages[0]||b.language}class Rl{constructor(D,x,F,Q,ae,Ce){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Q,this.apiKey=ae,this.appId=Ce}fetch(D){var x=this;return(0,N.Z)(function*(){var F,Q,ae;const[Ce,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ut={sdk_version:x.sdkVersion,app_instance_id:Ce,app_instance_id_token:je,app_id:x.appId,language_code:Ol()},hn={method:"POST",headers:Ct,body:JSON.stringify(ut)},cr=fetch(yt,hn),Go=new Promise((zo,qo)=>{D.signal.addEventListener(()=>{const Ef=new Error("The operation was aborted.");Ef.name="AbortError",qo(Ef)})});let xs;try{yield Promise.race([cr,Go]),xs=yield cr}catch(zo){let qo="fetch-client-network";throw"AbortError"===(null===(F=zo)||void 0===F?void 0:F.name)&&(qo="fetch-timeout"),Hn.create(qo,{originalErrorMessage:null===(Q=zo)||void 0===Q?void 0:Q.message})}let io=xs.status;const Oa=xs.headers.get("ETag")||void 0;let so,oo;if(200===xs.status){let zo;try{zo=yield xs.json()}catch(qo){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(ae=qo)||void 0===ae?void 0:ae.message})}so=zo.entries,oo=zo.state}if("INSTANCE_STATE_UNSPECIFIED"===oo?io=500:"NO_CHANGE"===oo?io=304:("NO_TEMPLATE"===oo||"EMPTY_CONFIG"===oo)&&(so={}),304!==io&&200!==io)throw Hn.create("fetch-status",{httpStatus:io});return{status:io,eTag:Oa,config:so}})()}}class Fp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Q=this;return(0,N.Z)(function*(){yield function Yn(b,D){return new Promise((x,F)=>{const Q=Math.max(D-Date.now(),0),ae=setTimeout(x,Q);b.addEventListener(()=>{clearTimeout(ae),F(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const ae=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function gd(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ae))throw ae;const Ce={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield Q.storage.setThrottleMetadata(Ce),Q.attemptFetch(D,Ce)}})()}}class uu{constructor(D,x,F,Q,ae){this.app=D,this._client=x,this._storageCache=F,this._storage=Q,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nl(b,D){var x;const F=b.target.error||void 0;return Hn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ws="app_namespace_store";class Bp{constructor(D,x,F,Q=function Up(){return new Promise((b,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Q=>{D(Nl(Q,"storage-open"))},F.onsuccess=Q=>{b(Q.target.result)},F.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(F){D(Hn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Q,ae)=>{var Ce;const ct=F.transaction([ws],"readonly").objectStore(ws),yt=x.createCompositeKey(D);try{const Ct=ct.get(yt);Ct.onerror=ut=>{ae(Nl(ut,"storage-get"))},Ct.onsuccess=ut=>{const hn=ut.target.result;Q(hn?hn.value:void 0)}}catch(Ct){ae(Hn.create("storage-get",{originalErrorMessage:null===(Ce=Ct)||void 0===Ce?void 0:Ce.message}))}})})()}set(D,x){var F=this;return(0,N.Z)(function*(){const Q=yield F.openDbPromise;return new Promise((ae,Ce)=>{var je;const yt=Q.transaction([ws],"readwrite").objectStore(ws),Ct=F.createCompositeKey(D);try{const ut=yt.put({compositeKey:Ct,value:x});ut.onerror=hn=>{Ce(Nl(hn,"storage-set"))},ut.onsuccess=()=>{ae()}}catch(ut){Ce(Hn.create("storage-set",{originalErrorMessage:null===(je=ut)||void 0===je?void 0:je.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Q,ae)=>{var Ce;const ct=F.transaction([ws],"readwrite").objectStore(ws),yt=x.createCompositeKey(D);try{const Ct=ct.delete(yt);Ct.onerror=ut=>{ae(Nl(ut,"storage-delete"))},Ct.onsuccess=()=>{Q()}}catch(Ct){ae(Hn.create("storage-delete",{originalErrorMessage:null===(Ce=Ct)||void 0===Ce?void 0:Ce.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class yd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),ae=yield x;ae&&(D.lastFetchStatus=ae);const Ce=yield F;Ce&&(D.lastSuccessfulFetchTimestampMillis=Ce);const je=yield Q;je&&(D.activeConfig=je)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function lu(){return hf.apply(this,arguments)}function hf(){return(hf=(0,N.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Is(){(0,oe._registerComponent)(new de.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,ie.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:ae,apiKey:Ce,appId:je}=F.options;if(!ae)throw Hn.create("registration-project-id");if(!Ce)throw Hn.create("registration-api-key");if(!je)throw Hn.create("registration-app-id");const ct=new Bp(je,F.name,x=x||"firebase"),yt=new yd(ct),Ct=new le.Yd(ki);Ct.logLevel=le.in.ERROR;const ut=new Rl(Q,oe.SDK_VERSION,x,ae,Ce,je),hn=new Fp(ut,ct),cr=new df(hn,ct,yt,Ct),Go=new uu(F,cr,yt,ct,Ct);return function $n(b){const D=(0,ie.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Go),Go},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ki,"0.3.11"),(0,oe.registerVersion)(ki,"0.3.11","esm2017")}();const Pi="/firebase-messaging-sw.js",Qi="/firebase-cloud-messaging-push-scope",Ji="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ca="google.c.a.c_id",cu="google.c.a.c_l",kl="google.c.a.ts",ff="google.c.a.e";var Xi=(()=>{return(b=Xi||(Xi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Xi;var b})();function li(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Q=new Uint8Array(F.length);for(let ae=0;ae<F.length;++ae)Q[ae]=F.charCodeAt(ae);return Q}const To="fcm_token_details_db",fr="fcm_token_object_Store";function pf(b){return gf.apply(this,arguments)}function gf(){return gf=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(To))return null;let D=null;return(yield(0,he.X3)(To,5,{upgrade:(F=(0,N.Z)(function*(Q,ae,Ce,je){var ct;if(ae<2||!Q.objectStoreNames.contains(fr))return;const yt=je.objectStore(fr),Ct=yield yt.index("fcmSenderId").get(b);if(yield yt.clear(),Ct)if(2===ae){const ut=Ct;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;D={token:ut.fcmToken,createTime:null!==(ct=ut.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:li(ut.vapidKey)}}}else if(3===ae){const ut=Ct;D={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:li(ut.auth),p256dh:li(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:li(ut.vapidKey)}}}else if(4===ae){const ut=Ct;D={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:li(ut.auth),p256dh:li(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:li(ut.vapidKey)}}}}),function(ae,Ce,je,ct){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(To),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Cn(D)?D:null;var F}),gf.apply(this,arguments)}function Cn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ci="firebase-messaging-store";let Or=null;function hu(){return Or||(Or=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(ci)}})),Or}function Gs(b){return es.apply(this,arguments)}function es(){return(es=(0,N.Z)(function*(b){const D=wi(b),F=yield(yield hu()).transaction(ci).objectStore(ci).get(D);if(F)return F;{const Q=yield pf(b.appConfig.senderId);if(Q)return yield Ut(b,Q),Q}})).apply(this,arguments)}function Ut(b,D){return ha.apply(this,arguments)}function ha(){return(ha=(0,N.Z)(function*(b,D){const x=wi(b),Q=(yield hu()).transaction(ci,"readwrite");return yield Q.objectStore(ci).put(D,x),yield Q.done,D})).apply(this,arguments)}function zs(b){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(b){const D=wi(b),F=(yield hu()).transaction(ci,"readwrite");yield F.objectStore(ci).delete(D),yield F.done})).apply(this,arguments)}function wi({appConfig:b}){return b.appId}const _n=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function wt(b,D){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(b,D){var x;const F=yield Fl(b),Q=be(D),ae={method:"POST",headers:F,body:JSON.stringify(Q)};let Ce;try{Ce=yield(yield fetch(ts(b.appConfig),ae)).json()}catch(je){throw _n.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ce.error)throw _n.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw _n.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function yf(b,D){return mu.apply(this,arguments)}function mu(){return(mu=(0,N.Z)(function*(b,D){var x;const F=yield Fl(b),Q=be(D.subscriptionOptions),ae={method:"PATCH",headers:F,body:JSON.stringify(Q)};let Ce;try{Ce=yield(yield fetch(`${ts(b.appConfig)}/${D.token}`,ae)).json()}catch(je){throw _n.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ce.error)throw _n.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw _n.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function yu(b,D){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,N.Z)(function*(b,D){var x;const Q={method:"DELETE",headers:yield Fl(b)};try{const Ce=yield(yield fetch(`${ts(b.appConfig)}/${D}`,Q)).json();if(Ce.error)throw _n.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(ae){throw _n.create("token-unsubscribe-failed",{errorInfo:null===(x=ae)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function ts({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Fl(b){return fa.apply(this,arguments)}function fa(){return(fa=(0,N.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function be({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const Q={web:{endpoint:x,auth:D,p256dh:b}};return F!==Ji&&(Q.web.applicationPubKey=F),Q}const Pt=6048e5;function vu(b){return _u.apply(this,arguments)}function _u(){return(_u=(0,N.Z)(function*(b){const D=yield Ll(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:li(D.getKey("auth")),p256dh:li(D.getKey("p256dh"))},F=yield Gs(b.firebaseDependencies);if(F){if(Id(F.subscriptionOptions,x))return Date.now()>=F.createTime+Pt?So(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield yu(b.firebaseDependencies,F.token)}catch(Q){console.warn(Q)}return pa(b.firebaseDependencies,x)}return pa(b.firebaseDependencies,x)})).apply(this,arguments)}function Dn(b){return wu.apply(this,arguments)}function wu(){return(wu=(0,N.Z)(function*(b){const D=yield Gs(b.firebaseDependencies);D&&(yield yu(b.firebaseDependencies,D.token),yield zs(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function So(b,D){return di.apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(b,D){try{const x=yield yf(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Ut(b.firebaseDependencies,F),x}catch(x){throw yield Dn(b),x}})).apply(this,arguments)}function pa(b,D){return ga.apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(b,D){const F={token:yield wt(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Ut(b,F),F.token})).apply(this,arguments)}function Ll(b,D){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,N.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qr(D)})})).apply(this,arguments)}function Id(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function qs(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Tn(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const Q=D.notification.image;Q&&(b.notification.image=Q)}(D,b),function Fi(b,D){!D.data||(b.data=D.data)}(D,b),function Ul(b,D){var x,F,Q,ae,Ce;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const je=null!==(Q=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Q?Q:null===(ae=D.notification)||void 0===ae?void 0:ae.click_action;je&&(b.fcmOptions.link=je);const ct=null===(Ce=D.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;ct&&(b.fcmOptions.analyticsLabel=ct)}(D,b),D}function Ws(b){return"object"==typeof b&&!!b&&ca in b}function ns(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function ma(b){return _n.create("missing-app-config-values",{valueName:b})}ns("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ns("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hp{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function jp(b){if(!b||!b.options)throw ma("App Configuration Object");if(!b.name)throw ma("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw ma(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Bl(b){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,N.Z)(function*(b){var D;try{b.swRegistration=yield navigator.serviceWorker.register(Pi,{scope:Qi}),b.swRegistration.update().catch(()=>{})}catch(x){throw _n.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function ya(b,D){return jl.apply(this,arguments)}function jl(){return(jl=(0,N.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Bl(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function va(b,D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,N.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Ji)})).apply(this,arguments)}function bu(){return(bu=(0,N.Z)(function*(b,D){if(!navigator)throw _n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _n.create("permission-blocked");return yield va(b,D?.vapidKey),yield ya(b,D?.serviceWorkerRegistration),vu(b)})).apply(this,arguments)}function $l(b,D,x){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,N.Z)(function*(b,D,x){const F=zl(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ca],message_name:x[cu],message_time:x[kl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zl(b){switch(b){case Xi.NOTIFICATION_CLICKED:return"notification_open";case Xi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zs(){return(Zs=(0,N.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Xi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(qs(x)):b.onMessageHandler.next(qs(x)));const F=x.data;Ws(F)&&"1"===F[ff]&&(yield $l(b,x.messageType,F))})).apply(this,arguments)}const Ks="@firebase/messaging",Qn=b=>{const D=new Hp(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ed(b,D){return Zs.apply(this,arguments)}(D,x)),D},Wr=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function Eu(b,D){return bu.apply(this,arguments)}(D,F)}};function bd(){return ql.apply(this,arguments)}function ql(){return(ql=(0,N.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dn(){(0,oe._registerComponent)(new de.wA("messaging",Qn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",Wr,"PRIVATE")),(0,oe.registerVersion)(Ks,"0.9.16"),(0,oe.registerVersion)(Ks,"0.9.16","esm2017")}();const Mo="analytics",Td="firebase_id",Ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tu="https://www.googletagmanager.com/gtag/js",Sn=new le.Yd("@firebase/analytics");function Su(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Au(b,D){const x=document.createElement("script");x.src=`${Tu}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function _f(b,D,x,F,Q,ae){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,N.Z)(function*(b,D,x,F,Q,ae){const Ce=F[Q];try{if(Ce)yield D[Ce];else{const ct=(yield Su(x)).find(yt=>yt.measurementId===Q);ct&&(yield D[ct.appId])}}catch(je){Sn.error(je)}b("config",Q,ae)})).apply(this,arguments)}function Ro(b,D,x,F,Q){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(b,D,x,F,Q){try{let ae=[];if(Q&&Q.send_to){let Ce=Q.send_to;Array.isArray(Ce)||(Ce=[Ce]);const je=yield Su(x);for(const ct of Ce){const yt=je.find(ut=>ut.measurementId===ct),Ct=yt&&D[yt.appId];if(!Ct){ae=[];break}ae.push(Ct)}}0===ae.length&&(ae=Object.values(D)),yield Promise.all(ae),b("event",F,Q||{})}catch(ae){Sn.error(ae)}})).apply(this,arguments)}function Ad(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(Tu))return D;return null}const ur=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ea=new class Li{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Md(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ba(b){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,N.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,Q={method:"GET",headers:Md(F)},ae=Ys.replace("{app-id}",x),Ce=yield fetch(ae,Q);if(200!==Ce.status&&304!==Ce.status){let je="";try{const ct=yield Ce.json();null!==(D=ct.error)&&void 0!==D&&D.message&&(je=ct.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:je})}return Ce.json()})).apply(this,arguments)}function Nn(b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,N.Z)(function*(b,D=Ea,x){const{appId:F,apiKey:Q,measurementId:ae}=b.options;if(!F)throw ur.create("no-app-id");if(!Q){if(ae)return{measurementId:ae,appId:F};throw ur.create("no-api-key")}const Ce=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Ru;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==x?x:6e4),Mu({appId:F,apiKey:Q,measurementId:ae},Ce,je,D)})).apply(this,arguments)}function Mu(b,D,x){return Js.apply(this,arguments)}function Js(){return(Js=(0,N.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,Q=Ea){var ae,Ce;const{appId:je,measurementId:ct}=b;try{yield Ca(F,D)}catch(yt){if(ct)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(ae=yt)||void 0===ae?void 0:ae.message}]`),{appId:je,measurementId:ct};throw yt}try{const yt=yield ba(b);return Q.deleteThrottleMetadata(je),yt}catch(yt){const Ct=yt;if(!Ou(Ct)){if(Q.deleteThrottleMetadata(je),ct)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:je,measurementId:ct};throw yt}const ut=503===Number(null===(Ce=Ct?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,ie.$s)(x,Q.intervalMillis,30):(0,ie.$s)(x,Q.intervalMillis),hn={throttleEndTimeMillis:Date.now()+ut,backoffCount:x+1};return Q.setThrottleMetadata(je,hn),Sn.debug(`Calling attemptFetch again in ${ut} millis`),Mu(b,hn,F,Q)}})).apply(this,arguments)}function Ca(b,D){return new Promise((x,F)=>{const Q=Math.max(D-Date.now(),0),ae=setTimeout(x,Q);b.addEventListener(()=>{clearTimeout(ae),F(ur.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Ou(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ru{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Cs,Ta;function Ds(){return(Ds=(0,N.Z)(function*(b,D,x,F,Q){if(Q&&Q.global)b("event",x,F);else{const ae=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:ae}))}})).apply(this,arguments)}function eo(b){Ta=b}function Jl(b){Cs=b}function is(){return ku.apply(this,arguments)}function ku(){return(ku=(0,N.Z)(function*(){var b;if(!(0,ie.hl)())return Sn.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Sn.warn(ur.create("indexeddb-unavailable",{errorInfo:null===(b=D)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Po(){return(Po=(0,N.Z)(function*(b,D,x,F,Q,ae,Ce){var je;const ct=Nn(b);ct.then(cr=>{x[cr.measurementId]=cr.appId,b.options.measurementId&&cr.measurementId!==b.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${cr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cr=>Sn.error(cr)),D.push(ct);const yt=is().then(cr=>{if(cr)return F.getId()}),[Ct,ut]=yield Promise.all([ct,yt]);Ad()||Au(ae,Ct.measurementId),Ta&&(Q("consent","default",Ta),eo(void 0)),Q("js",new Date);const hn=null!==(je=Ce?.config)&&void 0!==je?je:{};return hn.origin="firebase",hn.update=!0,null!=ut&&(hn[Td]=ut),Q("config",Ct.measurementId,hn),Cs&&(Q("set",Cs),Jl(void 0)),Ct.measurementId})).apply(this,arguments)}class Pu{constructor(D){this.app=D}_delete(){return delete Zr[this.app.options.appId],Promise.resolve()}}let Zr={},Ts=[];const Fo={};let Vo,to,Lo="dataLayer",Sa=!1;function fy(b,D,x){!function $p(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,Q)=>`(${Q+1}) ${F}`).join(" "),x=ur.create("invalid-analytics-context",{errorInfo:D});Sn.warn(x.message)}}();const F=b.options.appId;if(!F)throw ur.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ur.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zr[F])throw ur.create("already-exists",{id:F});if(!Sa){!function Sd(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Lo);const{wrappedGtag:ae,gtagCore:Ce}=function _a(b,D,x,F,Q){let ae=function(...Ce){window[F].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ae=window[Q]),window[Q]=function xu(b,D,x,F){function ae(){return(ae=(0,N.Z)(function*(Ce,je,ct){try{"event"===Ce?yield Ro(b,D,x,je,ct):"config"===Ce?yield _f(b,D,x,F,je,ct):"consent"===Ce?b("consent","update",ct):b("set",je)}catch(yt){Sn.error(yt)}})).apply(this,arguments)}return function Q(Ce,je,ct){return ae.apply(this,arguments)}}(ae,b,D,x),{gtagCore:ae,wrappedGtag:window[Q]}}(Zr,Ts,Fo,Lo,"gtag");to=ae,Vo=Ce,Sa=!0}return Zr[F]=function ko(b,D,x,F,Q,ae,Ce){return Po.apply(this,arguments)}(b,Ts,Fo,D,Vo,Lo,x),new Pu(b)}function gy(){return wf.apply(this,arguments)}function wf(){return(wf=(0,N.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const et="@firebase/analytics";!function on(){(0,oe._registerComponent)(new de.wA(Mo,(D,{options:x})=>fy(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function b(D){try{const x=D.getProvider(Mo).getImmediate();return{logEvent:(F,Q,ae)=>function Ss(b,D,x,F){b=(0,ie.m9)(b),function Od(b,D,x,F,Q){return Ds.apply(this,arguments)}(to,Zr[b.app.options.appId],D,x,F).catch(Q=>Sn.error(Q))}(x,F,Q,ae)}}catch(x){throw ur.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(et,"0.8.0"),(0,oe.registerVersion)(et,"0.8.0","esm2017")}();var Yr=P(4408),kn=P(7565);const Er=new class vn extends kn.v{}(class ss extends Yr.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Lu=P(4986),Aa=P(8505),Rr=P(9468),ec=P(5363);const Qr=new h.GfV("7.4.1"),xa="__angularfire_symbol__analyticsIsSupportedValue",As="__angularfire_symbol__analyticsIsSupported",Vu="__angularfire_symbol__remoteConfigIsSupportedValue",Uo="__angularfire_symbol__remoteConfigIsSupported",Bo="__angularfire_symbol__messagingIsSupportedValue",Vi="__angularfire_symbol__messagingIsSupported";function jo(b,D,x){if(D){if(1===D.length)return D[0];const ae=D.filter(Ce=>Ce.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[As]||(globalThis[As]=gy().then(b=>globalThis[xa]=b).catch(()=>globalThis[xa]=!1)),globalThis[Vi]||(globalThis[Vi]=bd().then(b=>globalThis[Bo]=b).catch(()=>globalThis[Bo]=!1)),globalThis[Uo]||(globalThis[Uo]=lu().then(b=>globalThis[Vu]=b).catch(()=>globalThis[Vu]=!1));const no=(b,D)=>{const x=D?[D]:(0,ee.C6)(),F=[];return x.forEach(Q=>{Q.container.getProvider(b).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function Ma(){}class Nr{constructor(D,x=Er){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Q=this.zone;return this.delegate.schedule(function(Ce){Q.runGuarded(()=>{D.apply(this,[Ce])})},x,F)}}class wn{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ma,{},Ma,Ma)),x.pipe((0,Aa.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ho=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Nr(Zone.current)),this.insideAngular=x.run(()=>new Nr(Zone.current,Lu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ei(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function os(b){return Ei(),function nc(b){return function(x){return(x=x.lift(new wn(b.ngZone))).pipe((0,Rr.R)(b.outsideAngular),(0,ec.Q)(b.insideAngular))}}(Ei())(b)}},2090:(at,De,P)=>{P.d(De,{$s:()=>Ki,BH:()=>Le,G6:()=>Be,L:()=>he,LL:()=>ke,Mn:()=>Ie,Sg:()=>Ae,UG:()=>ye,US:()=>de,ZB:()=>H,ZR:()=>ne,b$:()=>nt,d:()=>Te,eu:()=>me,hl:()=>U,jU:()=>fe,m9:()=>qt,ne:()=>Do,pd:()=>Gr,r3:()=>Sr,ru:()=>Ze,tV:()=>pe,uI:()=>Qe,vZ:()=>Hr,w1:()=>ve,xO:()=>ps,xb:()=>nn,z$:()=>_e,zI:()=>Z,zd:()=>Ri});const oe=function(W){const j=[];let L=0;for(let $=0;$<W.length;$++){let z=W.charCodeAt($);z<128?j[L++]=z:z<2048?(j[L++]=z>>6|192,j[L++]=63&z|128):55296==(64512&z)&&$+1<W.length&&56320==(64512&W.charCodeAt($+1))?(z=65536+((1023&z)<<10)+(1023&W.charCodeAt(++$)),j[L++]=z>>18|240,j[L++]=z>>12&63|128,j[L++]=z>>6&63|128,j[L++]=63&z|128):(j[L++]=z>>12|224,j[L++]=z>>6&63|128,j[L++]=63&z|128)}return j},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,j){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let z=0;z<W.length;z+=3){const Ee=W[z],Ve=z+1<W.length,st=Ve?W[z+1]:0,un=z+2<W.length,Yt=un?W[z+2]:0;let St=(15&st)<<2|Yt>>6,gn=63&Yt;un||(gn=64,Ve||(St=64)),$.push(L[Ee>>2],L[(3&Ee)<<4|st>>4],L[St],L[gn])}return $.join("")},encodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(W):this.encodeByteArray(oe(W),j)},decodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(W):function(W){const j=[];let L=0,$=0;for(;L<W.length;){const z=W[L++];if(z<128)j[$++]=String.fromCharCode(z);else if(z>191&&z<224){const Ee=W[L++];j[$++]=String.fromCharCode((31&z)<<6|63&Ee)}else if(z>239&&z<365){const un=((7&z)<<18|(63&W[L++])<<12|(63&W[L++])<<6|63&W[L++])-65536;j[$++]=String.fromCharCode(55296+(un>>10)),j[$++]=String.fromCharCode(56320+(1023&un))}else{const Ee=W[L++],Ve=W[L++];j[$++]=String.fromCharCode((15&z)<<12|(63&Ee)<<6|63&Ve)}}return j.join("")}(this.decodeStringToByteArray(W,j))},decodeStringToByteArray(W,j){this.init_();const L=j?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let z=0;z<W.length;){const Ee=L[W.charAt(z++)],st=z<W.length?L[W.charAt(z)]:0;++z;const Yt=z<W.length?L[W.charAt(z)]:64;++z;const kt=z<W.length?L[W.charAt(z)]:64;if(++z,null==Ee||null==st||null==Yt||null==kt)throw Error();$.push(Ee<<2|st>>4),64!==Yt&&($.push(st<<4&240|Yt>>2),64!==kt&&$.push(Yt<<6&192|kt))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},he=function(W){return function(W){const j=oe(W);return de.encodeByteArray(j,!0)}(W).replace(/\./g,"")},pe=function(W){try{return de.decodeString(W,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function H(W,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return j}for(const L in j)!j.hasOwnProperty(L)||!Y(L)||(W[L]=H(W[L],j[L]));return W}function Y(W){return"__proto__"!==W}class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,L)=>{this.resolve=j,this.reject=L})}wrapCallback(j){return(L,$)=>{L?this.reject(L):this.resolve($),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(L):j(L,$))}}}function Ae(W,j){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=j||"demo-project",z=W.iat||0,Ee=W.sub||W.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:z,exp:z+3600,auth_time:z,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},W);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ve)),""].join(".")}function _e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ze(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return _e().indexOf("Electron/")>=0}function ve(){const W=_e();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Ie(){return _e().indexOf("MSAppHost/")>=0}function Be(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function me(){return new Promise((W,j)=>{try{let L=!0;const $="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open($);z.onsuccess=()=>{z.result.close(),L||self.indexedDB.deleteDatabase($),W(!0)},z.onupgradeneeded=()=>{L=!1},z.onerror=()=>{var Ee;j((null===(Ee=z.error)||void 0===Ee?void 0:Ee.message)||"")}}catch(L){j(L)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(j,L,$){super(L),this.code=j,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor(j,L,$){this.service=j,this.serviceName=L,this.errors=$}create(j,...L){const $=L[0]||{},z=`${this.service}/${j}`,Ee=this.errors[j],Ve=Ee?function Re(W,j){return W.replace(lt,(L,$)=>{const z=j[$];return null!=z?String(z):`<${$}?>`})}(Ee,$):"Error";return new ne(z,`${this.serviceName}: ${Ve} (${z}).`,$)}}const lt=/\{\$([^}]+)}/g;function Sr(W,j){return Object.prototype.hasOwnProperty.call(W,j)}function nn(W){for(const j in W)if(Object.prototype.hasOwnProperty.call(W,j))return!1;return!0}function Hr(W,j){if(W===j)return!0;const L=Object.keys(W),$=Object.keys(j);for(const z of L){if(!$.includes(z))return!1;const Ee=W[z],Ve=j[z];if(wr(Ee)&&wr(Ve)){if(!Hr(Ee,Ve))return!1}else if(Ee!==Ve)return!1}for(const z of $)if(!L.includes(z))return!1;return!0}function wr(W){return null!==W&&"object"==typeof W}function ps(W){const j=[];for(const[L,$]of Object.entries(W))Array.isArray($)?$.forEach(z=>{j.push(encodeURIComponent(L)+"="+encodeURIComponent(z))}):j.push(encodeURIComponent(L)+"="+encodeURIComponent($));return j.length?"&"+j.join("&"):""}function Ri(W){const j={};return W.replace(/^\?/,"").split("&").forEach($=>{if($){const[z,Ee]=$.split("=");j[decodeURIComponent(z)]=decodeURIComponent(Ee)}}),j}function Gr(W){const j=W.indexOf("?");if(!j)return"";const L=W.indexOf("#",j);return W.substring(j,L>0?L:void 0)}function Do(W,j){const L=new We(W,j);return L.subscribe.bind(L)}class We{constructor(j,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{j(this)}).catch($=>{this.error($)})}next(j){this.forEachObserver(L=>{L.next(j)})}error(j){this.forEachObserver(L=>{L.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,L,$){let z;if(void 0===j&&void 0===L&&void 0===$)throw new Error("Missing Observer.");z=function Zi(W,j){if("object"!=typeof W||null===W)return!1;for(const L of j)if(L in W&&"function"==typeof W[L])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:L,complete:$},void 0===z.next&&(z.next=On),void 0===z.error&&(z.error=On),void 0===z.complete&&(z.complete=On);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),Ee}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,j)}sendOne(j,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{L(this.observers[j])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}function Ki(W,j=1e3,L=2){const $=j*Math.pow(L,W),z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+z)}function qt(W){return W&&W._delegate?W._delegate:W}},7519:(at,De,P)=>{var h=P(4650);let ee=null;function N(){return ee}const le=new h.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function pe(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const B=new h.OlP("Location Initialized");let H=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Le(){return new H((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ze)},providedIn:"root"}),n})();const fe=new h.OlP("appBaseHref");let Ze=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Qe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Qe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=_e(Ue(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Ae,n.stripTrailingSlash=_e,n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ve(){return new Te((0,h.LFG)(ye))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}function aa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}let tn=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ua{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vs=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ua(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),_s(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{_s(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function _s(n,e){n.context.$implicit=e.item}let $n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ar("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ar("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class xl{constructor(){this.$implicit=null,this.ngIf=null}}function ar(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class gd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Fp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Yi=new Fp,Lp=new gd;let uu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Yi;if((0,h.F4k)(t))return Lp;throw function Yn(n,e){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),da=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function fr(n){return"server"===n}let du=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new mf((0,h.LFG)(le),window)}),n})();class mf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Or(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ci(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs{}class Zs extends class Ed extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new Zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Cu(){return Ks=Ks||document.querySelector("base"),Ks?Ks.getAttribute("href"):null}();return null==t?null:function Wr(n){Qn=Qn||document.createElement("a"),Qn.setAttribute("href",n);const e=Qn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return aa(document.cookie,e)}}let Qn,Ks=null;const dn=new h.OlP("TRANSITION_ID"),ql=[{provide:h.ip1,useFactory:function bd(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[dn,le,h.zs3],multi:!0}];let Wl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=new h.OlP("EventManagerPlugins");let Cd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Du),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Zl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ao=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xo=(()=>{class n extends Ao{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Dd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Dd))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Dd(n){N().remove(n)}const Mo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Td=/%COMP%/g;function Au(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Au(n,o,t):(o=o.replace(Td,n),t.push(o))}return t}function Sd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ro(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ad(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new xd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Au(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cd),h.LFG(xo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ro{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Mo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(_a(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_a(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Mo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Mo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sd(r)):this.eventManager.addEventListener(e,t,Sd(r))}}function _a(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ad extends Ro{constructor(e,t,r,o){super(e),this.component=r;const u=Au(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Sn(n){return"_ngcontent-%COMP%".replace(Td,n)}(o+"-"+r.id),this.hostAttr=function Su(n){return"_nghost-%COMP%".replace(Td,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class xd extends Ro{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Au(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ur=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const wa=["alt","control","meta","shift"],Ia={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Li={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ea=(()=>{class n extends Zl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),wa.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=Ia[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),wa.forEach(d=>{d!==o&&(0,Li[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Mu(){Zs.makeCurrent()},multi:!0},{provide:le,useFactory:function Ca(){return(0,h.RDi)(document),document},deps:[]}]),Cs=new h.OlP(""),Od=[{provide:h.rWj,useClass:class vf{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Ds=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Js(){return new h.qLn},deps:[]},{provide:Du,useClass:ur,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Du,useClass:Ea,multi:!0,deps:[le]},{provide:Oo,useClass:Oo,deps:[Cd,xo,h.AFp]},{provide:h.FYo,useExisting:Oo},{provide:Ao,useExisting:xo},{provide:xo,useClass:xo,deps:[le]},{provide:Cd,useClass:Cd,deps:[Du,h.R0b]},{provide:Gs,useClass:Wl,deps:[]},[]];let Yl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:dn,useExisting:h.AFp},ql]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cs,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Ds,...Od],imports:[da,h.hGG]}),n})(),rs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function No(){return new rs((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Ss=P(7669),Qt=P(8996);function et(...n){const e=(0,Ss.yG)(n);return(0,Qt.D)(n,e)}var Kr=P(9751),on=P(5577),Yr=P(576);function ss(n,e){return(0,Yr.m)(e)?(0,on.z)(n,e,1):(0,on.z)(n,1)}var kn=P(4482),vn=P(5403);function Er(n,e){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,vn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var pt=P(4004);class Lu{}class Aa{}class Rr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Rr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Rr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Rr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===u.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Qr{encodeKey(e){return Uo(e)}encodeValue(e){return Uo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const As=/%(\d[a-f0-9])/gi,Vu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Uo(n){return encodeURIComponent(n).replace(As,(e,t)=>Vu[t]??e)}function Bo(n){return`${n}`}class Vi{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xa(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[d,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],w=t.get(d)||[];w.push(m),t.set(d,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Bo):[Bo(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vi({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Bo(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Bo(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zp{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function If(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function jo(n){return typeof Blob<"u"&&n instanceof Blob}function no(n){return typeof FormData<"u"&&n instanceof FormData}class Nr{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Nd(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Rr),this.context||(this.context=new zp),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new Vi,this.urlWithParams=t}serializeBody(){return null===this.body?null:If(this.body)||jo(this.body)||no(this.body)||function Ma(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||no(this.body)?null:jo(this.body)?this.body.type||null:If(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,C=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((O,V)=>O.set(V,e.setHeaders[V]),w)),e.setParams&&(C=Object.keys(e.setParams).reduce((O,V)=>O.set(V,e.setParams[V]),C)),new Nr(t,r,u,{params:C,headers:w,context:A,reportProgress:m,responseType:o,withCredentials:d})}}var wn=(()=>((wn=wn||{})[wn.Sent=0]="Sent",wn[wn.UploadProgress=1]="UploadProgress",wn[wn.ResponseHeader=2]="ResponseHeader",wn[wn.DownloadProgress=3]="DownloadProgress",wn[wn.Response=4]="Response",wn[wn.User=5]="User",wn))();class Ho{constructor(e,t=200,r="OK"){this.headers=e.headers||new Rr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ei extends Ho{constructor(e={}){super(e),this.type=wn.ResponseHeader}clone(e={}){return new Ei({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class $o extends Ho{constructor(e={}){super(e),this.type=wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new $o({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ui extends Ho{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ro=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof Nr)u=t;else{let w,C;w=o.headers instanceof Rr?o.headers:new Rr(o.headers),o.params&&(C=o.params instanceof Vi?o.params:new Vi({fromObject:o.params})),u=new Nr(t,r,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=et(u).pipe(ss(w=>this.handler.handle(w)));if(t instanceof Nr||"events"===o.observe)return d;const m=d.pipe(Er(w=>w instanceof $o));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,pt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vi).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,tc(o,r))}post(t,r,o={}){return this.request("POST",t,tc(o,r))}put(t,r,o={}){return this.request("PUT",t,tc(o,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class os{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const nc=new h.OlP("HTTP_INTERCEPTORS");let Pn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ct=/^\)\]\}',?\n/;let Ct=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Kr.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((K,X)=>o.setRequestHeader(K,X.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const K=t.detectContentTypeHeader();null!==K&&o.setRequestHeader("Content-Type",K)}if(t.responseType){const K=t.responseType.toLowerCase();o.responseType="json"!==K?K:"text"}const u=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const K=o.statusText||"OK",X=new Rr(o.getAllResponseHeaders()),xe=function yt(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return d=new Ei({headers:X,status:o.status,statusText:K,url:xe}),d},w=()=>{let{headers:K,status:X,statusText:xe,url:Fe}=m(),it=null;204!==X&&(it=typeof o.response>"u"?o.responseText:o.response),0===X&&(X=it?200:0);let It=X>=200&&X<300;if("json"===t.responseType&&"string"==typeof it){const Rt=it;it=it.replace(ct,"");try{it=""!==it?JSON.parse(it):null}catch(Tt){it=Rt,It&&(It=!1,it={error:Tt,text:it})}}It?(r.next(new $o({body:it,headers:K,status:X,statusText:xe,url:Fe||void 0})),r.complete()):r.error(new Ui({error:it,headers:K,status:X,statusText:xe,url:Fe||void 0}))},C=K=>{const{url:X}=m(),xe=new Ui({error:K,status:o.status||0,statusText:o.statusText||"Unknown Error",url:X||void 0});r.error(xe)};let A=!1;const O=K=>{A||(r.next(m()),A=!0);let X={type:wn.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(X.total=K.total),"text"===t.responseType&&!!o.responseText&&(X.partialText=o.responseText),r.next(X)},V=K=>{let X={type:wn.UploadProgress,loaded:K.loaded};K.lengthComputable&&(X.total=K.total),r.next(X)};return o.addEventListener("load",w),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),t.reportProgress&&(o.addEventListener("progress",O),null!==u&&o.upload&&o.upload.addEventListener("progress",V)),o.send(u),r.next({type:wn.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",w),o.removeEventListener("timeout",C),t.reportProgress&&(o.removeEventListener("progress",O),null!==u&&o.upload&&o.upload.removeEventListener("progress",V)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ut=new h.OlP("XSRF_COOKIE_NAME"),hn=new h.OlP("XSRF_HEADER_NAME");class cr{}let Go=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=aa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(h.Lbi),h.LFG(ut))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xs=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cr),h.LFG(hn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),io=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(nc,[]);this.chain=r.reduceRight((o,u)=>new os(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Aa),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),oo=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:xs,useClass:Pn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ut,useValue:t.cookieName}:[],t.headerName?{provide:hn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[xs,{provide:nc,useExisting:xs,multi:!0},{provide:cr,useClass:Go},{provide:ut,useValue:"XSRF-TOKEN"},{provide:hn,useValue:"X-XSRF-TOKEN"}]}),n})(),zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ro,{provide:Lu,useClass:io},Ct,{provide:Aa,useExisting:Ct}],imports:[oo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var Bi=P(2011),vy=P(4986),pr=P(5813),Bu=P(8189);function Ra(...n){return function kd(){return(0,Bu.J)(1)}()((0,Qt.D)(n,(0,Ss.yG)(n)))}function Pd(...n){const e=(0,Ss.yG)(n);return(0,kn.e)((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function Fd(){return(0,kn.e)((n,e)=>{let t,r=!1;n.subscribe((0,vn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function u0(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,vn.x)(d,A=>{const O=C++;w=m?n(w,A,O):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function ju(n,e){return(0,kn.e)(u0(n,e,arguments.length>=2,!0))}var Ld=P(4671);function _y(n,e){return n===e}P(2274);var Ke,Hu=P(3942),ge=P(5861),ji=P(9681),Vd=P(4859),Wo=P(1877),Lt=P(2090),rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},as={},Ud=Ud||{},Et=rc||self;function Na(){}function Cf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ka(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Bd="closure_uid_"+(1e9*Math.random()>>>0),Ey=0;function Ms(n,e,t){return n.call.apply(n.bind,arguments)}function ic(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gr(n,e,t){return(gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ms:ic).apply(null,arguments)}function jd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Pa(){this.s=this.s,this.o=this.o}var Gb={};Pa.prototype.s=!1,Pa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Iy(n){return Object.prototype.hasOwnProperty.call(n,Bd)&&n[Bd]||(n[Bd]=++Ey)}(this);delete Gb[n]}},Pa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ao=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Wp=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Hd(n){return Array.prototype.concat.apply([],arguments)}function Df(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uo(n){return/^[\s\xa0]*$/.test(n)}var Pr,Tf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function In(n,e){return-1!=n.indexOf(e)}function lo(n,e){return n<e?-1:n>e?1:0}e:{var Sf=Et.navigator;if(Sf){var sc=Sf.userAgent;if(sc){Pr=sc;break e}}Pr=""}function Zp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Cy(n){const e={};for(const t in n)e[t]=n[t];return e}var Dy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $d(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Dy.length;u++)t=Dy[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function oc(n){return oc[" "](n),n}oc[" "]=Na;var Zo,n,Kp=In(Pr,"Opera"),ac=In(Pr,"Trident")||In(Pr,"MSIE"),Af=In(Pr,"Edge"),uc=Af||ac,zd=In(Pr,"Gecko")&&!(In(Pr.toLowerCase(),"webkit")&&!In(Pr,"Edge"))&&!(In(Pr,"Trident")||In(Pr,"MSIE"))&&!In(Pr,"Edge"),Ty=In(Pr.toLowerCase(),"webkit")&&!In(Pr,"Edge");function Yp(){var n=Et.document;return n?n.documentMode:void 0}e:{var $u="",xf=(n=Pr,zd?/rv:([^\);]+)(\)|;)/.exec(n):Af?/Edge\/([\d\.]+)/.exec(n):ac?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ty?/WebKit\/(\S+)/.exec(n):Kp?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xf&&($u=xf?xf[1]:""),ac){var lc=Yp();if(null!=lc&&lc>parseFloat($u)){Zo=String(lc);break e}}Zo=$u}var Qp={};var Of=Et.document&&ac&&(Yp()||parseInt(Zo,10))||void 0,Gu=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Na,e),Et.removeEventListener("test",Na,e)}catch{}return n}();function Fr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function zu(n,e){if(Fr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zd){e:{try{oc(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Sy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zu.Z.h.call(this)}}Fr.prototype.h=function(){this.defaultPrevented=!0},kr(zu,Fr);var Sy={2:"touch",3:"pen",4:"mouse"};zu.prototype.h=function(){zu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cc="closure_listenable_"+(1e6*Math.random()|0),Ay=0;function c0(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Ay,this.ca=this.fa=!1}function qd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Os(n){this.src=n,this.g={},this.h=0}function Fa(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ao(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(qd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dc(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Os.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=dc(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new c0(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Wd="closure_lm_"+(1e6*Math.random()|0),qu={};function Xp(n,e,t,r,o){if(r&&r.once)return hc(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Xp(n,e[u],t,r,o);return null}return t=Rs(t),n&&n[cc]?n.N(e,t,ka(r)?!!r.capture:!!r,o):Jr(n,e,t,!1,r,o)}function Jr(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=ka(o)?!!o.capture:!!o,m=pc(n);if(m||(n[Wd]=m=new Os(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function Wu(){var e=eg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Gu||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Zu(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hc(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)hc(n,e[u],t,r,o);return null}return t=Rs(t),n&&n[cc]?n.O(e,t,ka(r)?!!r.capture:!!r,o):Jr(n,e,t,!0,r,o)}function xy(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)xy(n,e[u],t,r,o);else r=ka(r)?!!r.capture:!!r,t=Rs(t),n&&n[cc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dc(u=n.g[e],t,r,o))&&(qd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dc(e,t,r,o)),(t=-1<n?e[n]:null)&&fc(t))}function fc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[cc])Fa(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Zu(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pc(e))?(Fa(t,n),0==t.h&&(t.src=null,e[Wd]=null)):qd(n)}}}function Zu(n){return n in qu?qu[n]:qu[n]="on"+n}function eg(n,e){if(n.ca)n=!0;else{e=new zu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&fc(n),n=t.call(r,e)}return n}function pc(n){return(n=n[Wd])instanceof Os?n:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rs(n){return"function"==typeof n?n:(n[co]||(n[co]=function(e){return n.handleEvent(e)}),n[co])}function Gn(){Pa.call(this),this.i=new Os(this),this.P=this,this.I=null}function Xn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fr(e,n);else if(e instanceof Fr)e.target=e.target||n;else{var o=e;$d(e=new Fr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Zd(d,r,!0,e)&&o}if(o=Zd(d=e.g=n,r,!0,e)&&o,o=Zd(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Zd(d=e.g=t[u],r,!1,e)&&o}function Zd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Fa(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}kr(Gn,Pa),Gn.prototype[cc]=!0,Gn.prototype.removeEventListener=function(n,e,t,r){xy(this,n,e,t,r)},Gn.prototype.M=function(){if(Gn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qd(t[r]);delete n.g[e],n.h--}}this.I=null},Gn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var gc=Et.JSON.stringify;function mc(){var n=tg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ko,yc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vc,n=>n.reset());class vc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function My(n){Et.setTimeout(()=>{throw n},0)}function us(n,e){Ko||function La(){var n=Et.Promise.resolve(void 0);Ko=function(){n.then(Rf)}}(),Kd||(Ko(),Kd=!0),tg.add(n,e)}var Kd=!1,tg=new class er{constructor(){this.h=this.g=null}add(e,t){const r=yc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Rf(){for(var n;n=mc();){try{n.h.call(n.g)}catch(t){My(t)}var e=yc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Kd=!1}function Yd(n,e){Gn.call(this),this.h=n||1,this.g=e||Et,this.j=gr(this.kb,this),this.l=Date.now()}function _c(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Nf(n,e,t){if("function"==typeof n)t&&(n=gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function kf(n){n.g=Nf(()=>{n.g=null,n.i&&(n.i=!1,kf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(Yd,Gn),(Ke=Yd.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xn(this,"tick"),this.da&&(_c(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Yd.Z.M.call(this),_c(this),delete this.g};class v extends Pa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kf(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function f(n){Pa.call(this),this.h=n,this.g={}}kr(f,Pa);var g=[];function _(n,e,t,r){Array.isArray(t)||(t&&(g[0]=t.toString()),t=g);for(var o=0;o<t.length;o++){var u=Xp(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function S(n){Zp(n.g,function(e,t){this.g.hasOwnProperty(t)&&fc(e)},n),n.g={}}function R(){this.g=!0}function Pe(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gt(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return gc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}f.prototype.M=function(){f.Z.M.call(this),S(this)},f.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R.prototype.Aa=function(){this.g=!1},R.prototype.info=function(){};var rt={},tr=null;function hi(){return tr=tr||new Gn}function Ku(n){Fr.call(this,rt.Ma,n)}function Va(n){const e=hi();Xn(e,new Ku(e,n))}function Yu(n,e){Fr.call(this,rt.STAT_EVENT,n),this.stat=e}function Lr(n){const e=hi();Xn(e,new Yu(e,n))}function Pf(n,e){Fr.call(this,rt.Na,n),this.size=e}function ho(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}rt.Ma="serverreachability",kr(Ku,Fr),rt.STAT_EVENT="statevent",kr(Yu,Fr),rt.Na="timingevent",kr(Pf,Fr);var Qd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ng={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ua(){}function Oy(){}Ua.prototype.h=null;var Ry,Qu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ig(){Fr.call(this,"d")}function d0(){Fr.call(this,"c")}function Ff(){}function wc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new f(this),this.P=h0,this.W=new Yd(n=uc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ny}function Ny(){this.i=null,this.g="",this.h=!1}kr(ig,Fr),kr(d0,Fr),kr(Ff,Ua),Ff.prototype.g=function(){return new XMLHttpRequest},Ff.prototype.i=function(){return{}},Ry=new Ff;var h0=45e3,sg={},Jd={};function ky(n,e,t){n.K=1,n.v=ug(fo(e)),n.s=t,n.U=!0,og(n,null)}function og(n,e){n.F=Date.now(),Lf(n),n.A=fo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),y0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ny,n.g=Ky(n.l,t?e:null,!n.s),0<n.O&&(n.L=new v(gr(n.Ia,n,n.g),n.O)),_(n.V,n.g,"readystatechange",n.gb),e=n.H?Cy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Va(1),function q(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var O=A.split("_");d=2<=O.length&&"type"==O[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Xd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function f0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=zb(n,t),o==Jd){4==e&&(n.o=4,Lr(14),r=!1),Pe(n.j,n.m,null,"[Incomplete Response]");break}if(o==sg){n.o=4,Lr(15),Pe(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pe(n.j,n.m,o,null),Fy(n,o)}Xd(n)&&o!=Jd&&o!=sg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Lr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Kf(e),e.L=!0,Lr(11))):(Pe(n.j,n.m,t,"[Invalid Chunked Response]"),Ic(n),Vf(n))}function zb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Jd:(t=Number(e.substring(t,r)),isNaN(t)?sg:(r+=1)+t>e.length?Jd:(e=e.substr(r,t),n.C=r+t,e))}function Lf(n){n.Y=Date.now()+n.P,Py(n,n.P)}function Py(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ho(gr(n.eb,n),e)}function ag(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function Vf(n){0==n.l.G||n.I||uh(n.l,n)}function Ic(n){ag(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_c(n.W),S(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fy(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||jy(t.i,n)))if(t.I=n.N,!n.J&&jy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ah(t),Cc(t)}_g(t),Lr(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=ho(gr(t.ab,t),6e3));if(1>=cg(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Xu(t,11)}else if((n.J||t.g==n)&&ah(t),!uo(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const A=C[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const O=C[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const X=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var u=r.i;!u.g&&(In(X,"spdy")||In(X,"quic")||In(X,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(dg(u,u.h),u.h=null))}if(r.D){const xe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,En(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=x0(r,r.H?r.la:null,r.W),d.J){_0(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(ag(m),Lf(m)),r.g=d}else Zf(r);0<t.l.length&&qf(t)}else"stop"!=C[0]&&"close"!=C[0]||Xu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Xu(t,7):C0(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Va(4)}catch{}}function Vy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cf(n)||"string"==typeof n)Wp(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Cf(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Ly(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Cf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function eh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof eh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Uy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ju(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ju(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ju(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=wc.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==Jo(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const A=Jo(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>A)&&(3!=A||uc||this.g&&(this.h.h||this.g.ga()||Wy(this.g)))){this.I||4!=A||7==e||Va(8==e||0>=O?3:2),ag(this);var t=this.g.ba();this.N=t;t:if(Xd(this)){var r=Wy(this.g);n="";var o=r.length,u=4==Jo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ic(this),Vf(this);var d="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function ue(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uo(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Lr(12),Ic(this),Vf(this);break e}Pe(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fy(this,t)}this.U?(f0(this,A,d),uc&&this.i&&3==A&&(_(this.V,this.W,"tick",this.fb),this.W.start())):(Pe(this.j,this.m,d,null),Fy(this,d)),4==A&&Ic(this),this.i&&!this.I&&(4==A?uh(this.l,this):(this.i=!1,Lf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),Ic(this),Vf(this)}}}catch{}},Ke.fb=function(){if(this.g){var n=Jo(this.g),e=this.g.ga();this.C<e.length&&(ag(this),f0(this,n,e),this.i&&4!=n&&Lf(this))}},Ke.cancel=function(){this.I=!0,Ic(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ye(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Va(3),Lr(17)),Ic(this),this.o=2,Vf(this)):Py(this,this.Y-n)},(Ke=eh.prototype).R=function(){Uy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return Uy(this),this.g.concat()},Ke.get=function(n,e){return Ju(this.h,n)?this.h[n]:e},Ke.set=function(n,e){Ju(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var p0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dr(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof dr){this.g=void 0!==e?e:n.g,Uf(this,n.j),this.s=n.s,th(this,n.i),br(this,n.m),this.l=n.l,e=n.h;var t=new jf;t.i=e.i,e.g&&(t.g=new eh(e.g),t.h=e.h),nh(this,t),this.o=n.o}else n&&(t=String(n).match(p0))?(this.g=!!e,Uf(this,t[1]||"",!0),this.s=Bf(t[2]||""),th(this,t[3]||"",!0),br(this,t[4]),this.l=Bf(t[5]||"",!0),nh(this,t[6]||"",!0),this.o=Bf(t[7]||"")):(this.g=!!e,this.h=new jf(null,this.g))}function fo(n){return new dr(n)}function Uf(n,e,t){n.j=t?Bf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function th(n,e,t){n.i=t?Bf(e,!0):e}function br(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nh(n,e,t){e instanceof jf?(n.h=e,function kS(n,e){e&&!n.j&&(ls(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Yo(this,r),y0(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=rh(e,Qb)),n.h=new jf(e,n.g))}function En(n,e,t){n.h.set(e,t)}function ug(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rh(e,By,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rh(e,By,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(rh(t,"/"==t.charAt(0)?Yb:Kb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rh(t,Jb)),n.join("")};var By=/[#\/\?@]/g,Kb=/[#\?:]/g,Yb=/[#\?]/g,Qb=/[#\?@]/g,Jb=/#/g;function jf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ls(n){n.g||(n.g=new eh,n.h=0,n.i&&function qb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yo(n,e){ls(n),e=Hf(n,e),Ju(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ju((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Uy(n)))}function m0(n,e){return ls(n),e=Hf(n,e),Ju(n.g.h,e)}function y0(n,e,t){Yo(n,e),0<t.length&&(n.i=null,n.g.set(Hf(n,e),Df(t)),n.h+=t.length)}function Hf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xb(n){this.l=n||Qo,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=jf.prototype).add=function(n,e){ls(this),this.i=null,n=Hf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){ls(this),this.g.forEach(function(t,r){Wp(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){ls(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ke.R=function(n){ls(this);var e=[];if("string"==typeof n)m0(this,n)&&(e=Hd(e,this.g.get(Hf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Hd(e,n[t])}return e},Ke.set=function(n,e){return ls(this),this.i=null,m0(this,n=Hf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Qo=10;function lg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cg(n){return n.h?1:n.g?n.g.size:0}function jy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dg(n,e){n.g?n.g.add(e):n.h=e}function _0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ih(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Df(n.i)}function Hy(){}function eC(){this.g=new Hy}function $y(n,e,t){const r=t||"";try{Vy(n,function(o,u){let d=o;ka(o)&&(d=gc(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function $f(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function hg(n){this.l=n.$b||null,this.j=n.ib||!1}function Ba(n,e){Gn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Gf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xb.prototype.cancel=function(){if(this.i=ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Hy.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},Hy.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},kr(hg,Ua),hg.prototype.g=function(){return new Ba(this.l,this.j)},hg.prototype.i=function(n){return function(){return n}}({}),kr(Ba,Gn);var Gf=0;function zy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ec(n)}function Ec(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=Ba.prototype).open=function(n,e){if(this.readyState!=Gf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ec(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zf(this)),this.readyState=Gf},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ec(this)),this.g&&(this.readyState=3,Ec(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zf(this):Ec(this),3==this.readyState&&zy(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,zf(this))},Ke.Ta=function(n){this.g&&(this.response=n,zf(this))},Ke.ha=function(){this.g&&zf(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tC=Et.JSON.parse;function mr(n){Gn.call(this),this.headers=new eh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=w0,this.K=this.L=!1}kr(mr,Gn);var w0="",nC=/^https?$/i,rC=["POST","PUT"];function I0(n){return"content-type"==n.toLowerCase()}function fg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qy(n),gg(n)}function qy(n){n.D||(n.D=!0,Xn(n,"complete"),Xn(n,"error"))}function pg(n){if(n.h&&typeof Ud<"u"&&(!n.C[1]||4!=Jo(n)||2!=n.ba()))if(n.v&&4==Jo(n))Nf(n.Fa,0,n);else if(Xn(n,"readystatechange"),4==Jo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(p0)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!nC.test(o?o.toLowerCase():"")}t=r}if(t)Xn(n,"complete"),Xn(n,"success");else{n.m=6;try{var d=2<Jo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.ba()+"]",qy(n)}}finally{gg(n)}}}function gg(n,e){if(n.g){E0(n);const t=n.g,r=n.C[0]?Na:null;n.g=null,n.C=null,e||Xn(n,"ready");try{t.onreadystatechange=r}catch{}}}function E0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Jo(n){return n.g?n.g.readyState:0}function Wy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case w0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function bc(n){let e="";return Zp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function sh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function b0(n){this.za=0,this.l=[],this.h=new R,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sh("baseRetryDelayMs",5e3,n),this.$a=sh("retryDelaySeedMs",1e4,n),this.Ya=sh("forwardChannelMaxRetries",2,n),this.ra=sh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Xb(n&&n.concurrentRequestLimit),this.Ca=new eC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function C0(n){if(D0(n),3==n.G){var e=n.V++,t=fo(n.F);En(t,"SID",n.J),En(t,"RID",e),En(t,"TYPE","terminate"),oh(n,t),(e=new wc(n,n.h,e,void 0)).K=2,e.v=ug(fo(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ky(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Lf(e)}A0(n)}function Cc(n){n.g&&(Kf(n),n.g.cancel(),n.g=null)}function D0(n){Cc(n),n.u&&(Et.clearTimeout(n.u),n.u=null),ah(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function yg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&qf(n)}function qf(n){lg(n.i)||n.m||(n.m=!0,us(n.Ha,n),n.C=0)}function vg(n,e){var t;t=e?e.m:n.V++;const r=fo(n.F);En(r,"SID",n.J),En(r,"RID",t),En(r,"AID",n.U),oh(n,r),n.o&&n.s&&mg(r,n.o,n.s),t=new wc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Wf(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),dg(n.i,t),ky(t,r,e)}function oh(n,e){n.j&&Vy({},function(t,r){En(e,r,t)})}function Wf(n,e,t){t=Math.min(n.l.length,t);var r=n.j?gr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{$y(A,d,"req"+C+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Zf(n){n.g||n.u||(n.Y=1,us(n.Ga,n),n.A=0)}function _g(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ho(gr(n.Ga,n),S0(n,n.A)),n.A++,0))}function Kf(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function Zy(n){n.g=new wc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fo(n.oa);En(e,"RID","rpc"),En(e,"SID",n.J),En(e,"CI",n.N?"0":"1"),En(e,"AID",n.U),oh(n,e),En(e,"TYPE","xmlhttp"),n.o&&n.s&&mg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ug(fo(e)),t.s=null,t.U=!0,og(t,n)}function ah(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function uh(n,e){var t=null;if(n.g==e){ah(n),Kf(n),n.g=null;var r=2}else{if(!jy(n.i,e))return;t=e.D,_0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Xn(r=hi(),new Pf(r,t,e,o)),qf(n)}else Zf(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function T0(n,e){return!(cg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ho(gr(n.Ha,n,e),S0(n,n.C)),n.C++,0)))}(n,e)||2==r&&_g(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Xu(n,5);break;case 4:Xu(n,10);break;case 3:Xu(n,6);break;default:Xu(n,2)}}function S0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=gr(n.jb,n);t||(t=new dr("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Uf(t,"https"),ug(t)),function Gy(n,e){const t=new R;if(Et.Image){const r=new Image;r.onload=jd($f,t,r,"TestLoadImage: loaded",!0,e),r.onerror=jd($f,t,r,"TestLoadImage: error",!1,e),r.onabort=jd($f,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=jd($f,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Lr(2);n.G=0,n.j&&n.j.va(e),A0(n),D0(n)}function A0(n){n.G=0,n.I=-1,n.j&&((0!=ih(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Df(n.l),n.l.length=0),n.j.ua())}function x0(n,e,t){let r=function Wb(n){return n instanceof dr?fo(n):new dr(n,void 0)}(t);if(""!=r.i)e&&th(r,e+"."+r.i),br(r,r.m);else{const o=Et.location;r=function g0(n,e,t,r){var o=new dr(null,void 0);return n&&Uf(o,n),e&&th(o,e),t&&br(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Zp(n.aa,function(o,u){En(r,u,o)}),t=n.sa,(e=n.D)&&t&&En(r,e,t),En(r,"VER",n.ma),oh(n,r),r}function Ky(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new hg({ib:!0}):n.qa)).L=n.H,e}function wg(){}function Yf(){if(ac&&!(10<=Number(Of)))throw Error("Environmental error: no available transport.")}function Ns(n,e){Gn.call(this),this.g=new b0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!uo(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!uo(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dc(this)}function Yy(n){ig.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function M0(){d0.call(this),this.status=1}function Dc(n){this.g=n}(Ke=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ry.g(),this.C=function rg(n){return n.h||(n.h=n.i())}(this.u?this.u:Ry),this.g.onreadystatechange=gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void fg(this,u)}n=t||"";const o=new eh(this.headers);r&&Vy(r,function(u,d){o.set(d,u)}),r=function by(n){e:{var e=I0;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=ao(rC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{E0(this),0<this.B&&((this.K=function iC(n){return ac&&function Jn(){return function Gd(n){var e=Qp;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Tf(String(Zo)).split("."),t=Tf("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=lo(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||lo(0==o[2].length,0==u[2].length)||lo(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gr(this.pa,this)):this.A=Nf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){fg(this,u)}},Ke.pa=function(){typeof Ud<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xn(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xn(this,"complete"),Xn(this,"abort"),gg(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gg(this,!0)),mr.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?pg(this):this.cb())},Ke.cb=function(){pg(this)},Ke.ba=function(){try{return 2<Jo(this)?this.g.status:-1}catch{return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tC(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=b0.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new wc(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Cy(u),$d(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wf(this,o,e),En(t=fo(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),oh(this,t),this.o&&u&&mg(t,this.o,u),dg(this.i,o),this.Ra&&En(t,"TYPE","init"),this.ja?(En(t,"$req",e),En(t,"SID","null"),o.$=!0,ky(o,t,null)):ky(o,t,e),this.G=2}}else 3==this.G&&(n?vg(this,n):0==this.l.length||lg(this.i)||vg(this))},Ke.Ga=function(){if(this.u=null,Zy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ho(gr(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Lr(10),Cc(this),Zy(this))},Ke.ab=function(){null!=this.v&&(this.v=null,Cc(this),_g(this),Lr(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Lr(2)):(this.h.info("Failed to ping google.com"),Lr(1))},(Ke=wg.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Yf.prototype.g=function(n,e){return new Ns(n,e)},kr(Ns,Gn),Ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),us(gr(n.hb,n,e))),Lr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=x0(n,null,n.W),qf(n)},Ns.prototype.close=function(){C0(this.g)},Ns.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,yg(this.g,e)}else this.v?((e={}).__data__=gc(n),yg(this.g,e)):yg(this.g,n)},Ns.prototype.M=function(){this.g.j=null,delete this.j,C0(this.g),delete this.g,Ns.Z.M.call(this)},kr(Yy,ig),kr(M0,d0),kr(Dc,wg),Dc.prototype.xa=function(){Xn(this.g,"a")},Dc.prototype.wa=function(n){Xn(this.g,new Yy(n))},Dc.prototype.va=function(n){Xn(this.g,new M0(n))},Dc.prototype.ua=function(){Xn(this.g,"b")},Yf.prototype.createWebChannel=Yf.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,Qd.NO_ERROR=0,Qd.TIMEOUT=8,Qd.HTTP_ERROR=6,ng.COMPLETE="complete",Oy.EventType=Qu,Qu.OPEN="a",Qu.CLOSE="b",Qu.ERROR="c",Qu.MESSAGE="d",Gn.prototype.listen=Gn.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var sC=as.createWebChannelTransport=function(){return new Yf},oC=as.getStatEventTarget=function(){return hi()},cs=as.ErrorCode=Qd,aC=as.EventType=ng,O0=as.Event=rt,R0=as.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uC=as.FetchXmlHttpFactory=hg,Ig=as.WebChannel=Oy,lC=as.XhrIo=mr;const Qy="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let lh="9.9.4";const el=new Wo.Yd("@firebase/firestore");function Dt(){return el.logLevel}function Oe(n,...e){if(el.logLevel<=Wo.in.DEBUG){const t=e.map(Jy);el.debug(`Firestore (${lh}): ${n}`,...t)}}function nr(n,...e){if(el.logLevel<=Wo.in.ERROR){const t=e.map(Jy);el.error(`Firestore (${lh}): ${n}`,...t)}}function Tc(n,...e){if(el.logLevel<=Wo.in.WARN){const t=e.map(Jy);el.warn(`Firestore (${lh}): ${n}`,...t)}}function Jy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${lh}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function bt(n,e){n||Xe()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vr.UNAUTHENTICATED))}shutdown(){}}class cC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ev{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Cr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ge.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Cr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Xy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Vr(e)}}class tv{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new tv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PS{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.A=t.token,new hC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class nv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=fC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function ch(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Ac(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Fn(0,0))}static max(){return new vt(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tl{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends tl{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const P0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends tl{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return P0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Jt.fromString(e))}static fromName(e){return new $e(Jt.fromString(e).popFirst(5))}static empty(){return new $e(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Jt(e.slice()))}}class Eg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function rv(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}Eg.UNKNOWN_ID=-1;class bg{constructor(e,t){this.fieldPath=e,this.kind=t}}class dh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dh(0,bi.min())}}function Cg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new bi(o,$e.empty(),e)}function pC(n){return new bi(n.readTime,n.key,-1)}class bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bi(vt.min(),$e.empty(),-1)}static max(){return new bi(vt.max(),$e.empty(),-1)}}function iv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const gC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ja(n){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,ge.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==gC)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Dg.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{d[C]=A,++m,m===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Hi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Cr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Oc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=V0(r.target.error);this.P.reject(new Oc(e,o))}}static open(e,t,r,o){try{return new Hi(t,e.transaction(o,r))}catch(u){throw new Oc(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sv(t)}}class ks{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ks.D((0,Lt.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),nl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Lt.hl)())return!1;if(ks.N())return!0;const e=(0,Lt.z$)(),t=ks.D(e),r=0<t&&t<10,o=ks.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Oc(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ge.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Hi.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),re.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return nl(this.U.delete())}}class Oc extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fi(n){return"IndexedDbTransactionError"===n.name}class sv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nl(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),nl(this.store.add(e))}get(e){return nl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),nl(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),nl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const d=V0(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new re((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new mC(m),C=t(m.primaryKey,m.value,w);if(C instanceof re){const A=C.catch(O=>(w.done(),re.reject(O)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nl(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=V0(r.target.error);t(o)}})}let Tg=!1;function V0(n){const e=ks.D((0,Lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tg||(Tg=!0,setTimeout(()=>{throw r},0)),r}}return n}class U0{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){fi(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ja(r)}yield t.nt(1)}))}}class FS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=pC(u);iv(d,r)>0&&(r=d)}),new bi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Xr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Qf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Xr.at=-1;class Ln{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new Ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ov(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ov(this.root,e,this.comparator,!1)}getReverseIterator(){return new ov(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ov(this.root,e,this.comparator,!0)}}class ov{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ei.RED,this.left=o??ei.EMPTY,this.right=u??ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ei(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ei.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fn{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fn(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hh(n){return n.hasNext()?n.getNext():void 0}class $i{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new $i([])}unionWith(e){let t=new fn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ch(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const VS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(n){if(bt(!!n),"string"==typeof n){let e=0;const t=VS.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Rc(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function Jf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yC(n){const e=n.mapValue.fields.__previous_value__;return Jf(e)?yC(e):e}function Ag(n){const e=$a(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class US{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Nc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}function xg(n){return null==n}function Mg(n){return 0===n&&1/n==-1/0}function vC(n){return"number"==typeof n&&Number.isInteger(n)&&!Mg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},av={nullValue:"NULL_VALUE"};function fh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jf(n)?4:H0(n)?9007199254740991:10:Xe()}function ti(n,e){if(n===e)return!0;const t=fh(n);if(t!==fh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ag(n).isEqual(Ag(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=$a(r.timestampValue),d=$a(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Rc(n.bytesValue).isEqual(Rc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return zn(r.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return zn(r.integerValue)===zn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=zn(r.doubleValue),d=zn(o.doubleValue);return u===d?Mg(u)===Mg(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ch(n.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Qf(u)!==Qf(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ti(u[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var o}function Pc(n,e){return void 0!==(n.values||[]).find(t=>ti(t,e))}function rl(n,e){if(n===e)return 0;const t=fh(n),r=fh(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=zn(o.integerValue||o.doubleValue),m=zn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return uv(n.timestampValue,e.timestampValue);case 4:return uv(Ag(n),Ag(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Rc(o),m=Rc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=xt(d[w],m[w]);if(0!==C)return C}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(zn(o.latitude),zn(u.latitude));return 0!==d?d:xt(zn(o.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=rl(d[w],m[w]);if(C)return C}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===kc.mapValue&&u===kc.mapValue)return 0;if(o===kc.mapValue)return 1;if(u===kc.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const O=xt(m[A],C[A]);if(0!==O)return O;const V=rl(d[m[A]],w[C[A]]);if(0!==V)return V}return xt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function uv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=$a(n),r=$a(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function il(n){return Og(n)}function Og(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=$a(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Rc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Og(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Og(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function Ga(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lv(n){return!!n&&"integerValue"in n}function Ps(n){return!!n&&"arrayValue"in n}function cv(n){return!!n&&"nullValue"in n}function j0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rg(n){return!!n&&"mapValue"in n}function ph(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ph(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ph(n.arrayValue.values[t]);return e}return Object.assign({},n)}function H0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _C(n){return"nullValue"in n?av:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ga(Nc.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function Ng(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ga(Nc.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?kc:Xe()}function Fc(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kg(n,e){const t=rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ph(t)}setAll(e){let t=rr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=ph(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Rg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ha(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ir(ph(this.value))}}function Xf(n){const e=[];return Ha(n.fields,(t,r)=>{const o=new rr([t]);if(Rg(r)){const u=Xf(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new $i(e)}class an{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new an(e,0,vt.min(),vt.min(),ir.empty(),0)}static newFoundDocument(e,t,r){return new an(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new an(e,2,t,vt.min(),ir.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,vt.min(),ir.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wC{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function dv(n,e=null,t=[],r=[],o=null,u=null,d=null){return new wC(n,e,t,r,o,u,d)}function sl(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+il(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),xg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>il(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>il(r)).join(",")),e.ht=t}return e.ht}function Lc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!pv(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ti(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function ep(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gh(n,e){return n.filters.filter(t=>t instanceof ni&&t.field.isEqual(e))}function $0(n,e,t){let r=av,o=!0;for(const u of gh(n,e)){let d=av,m=!0;switch(u.op){case"<":case"<=":d=_C(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=av}Fc({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Fc({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function IC(n,e,t){let r=kc,o=!0;for(const u of gh(n,e)){let d=kc,m=!0;switch(u.op){case">=":case">":d=Ng(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=kc}kg({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];kg({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new G0(e,t,r):"array-contains"===t?new bC(e,r):"in"===t?new ds(e,r):"not-in"===t?new q0(e,r):"array-contains-any"===t?new CC(e,r):new ni(e,t,r)}static lt(e,t,r){return"in"===t?new EC(e,r):new z0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(rl(t,this.value)):null!==t&&fh(this.value)===fh(t)&&this.ft(rl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class G0 extends ni{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.ft(t)}}class EC extends ni{constructor(e,t){super(e,"in",t),this.keys=fv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z0 extends ni{constructor(e,t){super(e,"not-in",t),this.keys=fv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class bC extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ps(t)&&Pc(t.arrayValue,this.value)}}class ds extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pc(this.value.arrayValue,t)}}class q0 extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pc(this.value.arrayValue,t)}}class CC extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ps(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}}class Vc{constructor(e,t){this.position=e,this.inclusive=t}}class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function pv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function gv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):rl(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function W0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ti(n.position[t],e.position[t]))return!1;return!0}class za{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function Z0(n,e,t,r,o,u,d,m){return new za(n,e,t,r,o,u,d,m)}function Uc(n){return new za(n)}function K0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Pg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mv(n){for(const e of n.filters)if(e.dt())return e.field;return null}function yv(n){return null!==n.collectionGroup}function Bc(n){const e=qe(n);if(null===e._t){e._t=[];const t=mv(e),r=Pg(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new mh(t)),e._t.push(new mh(rr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new mh(rr.keyField(),u))}}}return e._t}function Ci(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=dv(e.path,e.collectionGroup,Bc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Bc(e))t.push(new mh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Vc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Vc(e.startAt.position,e.startAt.inclusive):null;e.wt=dv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Fg(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gi(n,e){return Lc(Ci(n),Ci(e))&&n.limitType===e.limitType}function Lg(n){return`${sl(Ci(n))}|lt:${n.limitType}`}function vv(n){return`Query(target=${function hv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${il(r.value)}`;var r}).join(", ")}]`),xg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>il(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>il(t)).join(",")),`Target(${e})`}(Ci(n))}; limitType=${n.limitType})`}function _v(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=gv(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Bc(t),r)||t.endAt&&!function(o,u,d){const m=gv(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Bc(t),r)));var t,r}function DC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wv(n){return(e,t)=>{let r=!1;for(const o of Bc(n)){const u=TC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function TC(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?rl(m,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function Y0(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mg(e)?"-0":e}}function Q0(n){return{integerValue:""+n}}function Vg(n,e){return vC(e)?Q0(e):Y0(n,e)}class Ug{constructor(){this._=void 0}}function SC(n,e,t){return n instanceof yh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof qa?Iv(n,e):n instanceof vh?AC(n,e):function(r,o){const u=jg(r,o),d=xC(u)+xC(r.yt);return lv(u)&&lv(r.yt)?Q0(d):Y0(r.It,d)}(n,e)}function Bg(n,e,t){return n instanceof qa?Iv(n,e):n instanceof vh?AC(n,e):t}function jg(n,e){return n instanceof ol?lv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yh extends Ug{}class qa extends Ug{constructor(e){super(),this.elements=e}}function Iv(n,e){const t=Ev(e);for(const r of n.elements)t.some(o=>ti(o,r))||t.push(r);return{arrayValue:{values:t}}}class vh extends Ug{constructor(e){super(),this.elements=e}}function AC(n,e){let t=Ev(e);for(const r of n.elements)t=t.filter(o=>!ti(o,r));return{arrayValue:{values:t}}}class ol extends Ug{constructor(e,t){super(),this.It=e,this.yt=t}}function xC(n){return zn(n.integerValue||n.doubleValue)}function Ev(n){return Ps(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _h{constructor(e,t){this.field=e,this.transform=t}}class X0{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fs(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class jc{}function tp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Eh(n.key,bn.none()):new wh(n.key,n.data,bn.none());{const t=n.data,r=ir.empty();let o=new fn(rr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Wa(n.key,r,new $i(o.toArray()),bn.none())}}function np(n,e,t){n instanceof wh?function(r,o,u){const d=r.value.clone(),m=eI(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Wa?function(r,o,u){if(!Fs(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=eI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Ih(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rp(n,e,t,r){return n instanceof wh?function(o,u,d,m){if(!Fs(o.precondition,u))return d;const w=o.value.clone(),C=MC(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wa?function(o,u,d,m){if(!Fs(o.precondition,u))return d;const w=MC(o.fieldTransforms,m,u),C=u.data;return C.setAll(Ih(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Fs(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function bv(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=jg(r.transform,o||null);null!=u&&(null===t&&(t=ir.empty()),t.set(r.field,u))}return t||null}function Cv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ch(t,r,(o,u)=>function J0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof qa&&r instanceof qa||t instanceof vh&&r instanceof vh?ch(t.elements,r.elements,ti):t instanceof ol&&r instanceof ol?ti(t.yt,r.yt):t instanceof yh&&r instanceof yh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class wh extends jc{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wa extends jc{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ih(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eI(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Bg(d,m,t[o]))}return r}function MC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,SC(u,d,e))}return r}class Eh extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tI extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OC{constructor(e){this.count=e}}var yr,Xt;function nI(n){switch(n){default:return Xe();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Dv(n){if(void 0===n)return nr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case yr.OK:return ce.OK;case yr.CANCELLED:return ce.CANCELLED;case yr.UNKNOWN:return ce.UNKNOWN;case yr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case yr.INTERNAL:return ce.INTERNAL;case yr.UNAVAILABLE:return ce.UNAVAILABLE;case yr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case yr.NOT_FOUND:return ce.NOT_FOUND;case yr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case yr.ABORTED:return ce.ABORTED;case yr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case yr.DATA_LOSS:return ce.DATA_LOSS;default:return Xe()}}(Xt=yr||(yr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Sg(this.inner)}size(){return this.innerSize}}const RC=new Ln($e.comparator);function pi(){return RC}const rI=new Ln($e.comparator);function ip(...n){let e=rI;for(const t of n)e=e.insert(t.key,t);return e}function iI(n){let e=rI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ea(){return sp()}function sI(){return sp()}function sp(){return new Xo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hg=new Ln($e.comparator),Hc=new fn($e.comparator);function Nt(...n){let e=Hc;for(const t of n)e=e.add(t);return e}const op=new fn(xt);function $g(){return op}class ap{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,t)),new ap(vt.min(),r,$g(),pi(),Nt())}}class $c{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new $c(Dr.EMPTY_BYTE_STRING,t,Nt(),Nt(),Nt())}}class Gg{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class po{constructor(e,t){this.targetId=e,this.At=t}}class bh{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ri{constructor(){this.Rt=0,this.bt=hs(),this.Pt=Dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Nt(),t=Nt(),r=Nt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new $c(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=hs()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Gc{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=pi(),this.qt=up(),this.Kt=new fn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(ep(u))if(0===r){const d=new $e(u.path);this.jt(t,d,an.newNoDocument(d,vt.min()))}else bt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&ep(m.target)){const w=new $e(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,an.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Nt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new ap(e,t,this.Kt,this.Ut,r);return this.Ut=pi(),this.qt=up(),this.Kt=new fn(xt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new ri,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new fn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ri),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function up(){return new Ln($e.comparator)}function hs(){return new Ln($e.comparator)}const Tv={asc:"ASCENDING",desc:"DESCENDING"},Ch={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Dh{constructor(e,t){this.databaseId=e,this.gt=t}}function ta(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zc(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Th(n,e){return ta(n,e.toTimestamp())}function qn(n){return bt(!!n),vt.fromTimestamp(function(e){const t=$a(e);return new Fn(t.seconds,t.nanos)}(n))}function al(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qc(n){const e=Jt.fromString(n);return bt(Fv(e)),e}function na(n,e){return al(n.databaseId,e.path)}function go(n,e){const t=qc(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Av(t))}function zg(n,e){return al(n.databaseId,e)}function Sv(n){const e=qc(n);return 4===e.length?Jt.emptyPath():Av(e)}function Sh(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Av(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xv(n,e,t){return{name:na(n,e),fields:t.value.mapValue.fields}}function Mv(n,e,t){const r=go(n,e.name),o=qn(e.updateTime),u=new ir({mapValue:{fields:e.fields}}),d=an.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function lp(n,e){let t;if(e instanceof wh)t={update:xv(n,e.key,e.value)};else if(e instanceof Eh)t={delete:na(n,e.key)};else if(e instanceof Wa)t={update:xv(n,e.key,e.data),updateMask:dI(e.fieldMask)};else{if(!(e instanceof tI))return Xe();t={verify:na(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof yh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof qa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof vh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ol)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Th(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function Ov(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?bn.updateTime(qn(o.updateTime)):void 0!==o.exists?bn.exists(o.exists):bn.none():bn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),m=new yh):"appendMissingElements"in d?m=new qa(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new vh(d.removeAllFromArray.values||[]):"increment"in d?m=new ol(u,d.increment):Xe();const w=rr.fromServerFormat(d.fieldPath);return new _h(w,m)}(n,o)):[];var o;if(e.update){const o=go(n,e.update.name),u=new ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new $i((e.updateMask.fieldPaths||[]).map(C=>rr.fromServerFormat(C)));return new Wa(o,u,d,t,r)}return new wh(o,u,t,r)}if(e.delete){const o=go(n,e.delete);return new Eh(o,t)}if(e.verify){const o=go(n,e.verify);return new tI(o,t)}return Xe()}function lI(n,e){return{documents:[zg(n,e.path)]}}function Rv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(A=>function(O){if("=="===O.op){if(j0(O.value))return{unaryFilter:{field:ul(O.field),op:"IS_NAN"}};if(cv(O.value))return{unaryFilter:{field:ul(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(j0(O.value))return{unaryFilter:{field:ul(O.field),op:"IS_NOT_NAN"}};if(cv(O.value))return{unaryFilter:{field:ul(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(O.field),op:Zg(O.op),value:O.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:ul((A=C).field),direction:Wg(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||xg(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function qg(n){let e=Sv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=cI(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new mh(Ah((O=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(A){let O;return O="object"==typeof A?A.value:A,xg(O)?null:O}(t.limit));let w=null;var A;t.startAt&&(w=new Vc((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Vc(A.values||[],!A.before)}(t.endAt)),Z0(e,o,d,u,m,"F",w,C)}function cI(n){return n?void 0!==n.unaryFilter?[Pv(n)]:void 0!==n.fieldFilter?[kv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cI(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function Wg(n){return Tv[n]}function Zg(n){return Ch[n]}function ul(n){return{fieldPath:n.canonicalString()}}function Ah(n){return rr.fromServerFormat(n.fieldPath)}function kv(n){return ni.create(Ah(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function Pv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ah(n.unaryFilter.field);return ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ah(n.unaryFilter.field);return ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ah(n.unaryFilter.field);return ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ah(n.unaryFilter.field);return ni.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function dI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lv(e)),e=hI(n.get(t),e);return Lv(e)}function hI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Lv(n){return n+"\x01\x01"}function Ls(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Xe()}u=d+2}return new Jt(r)}const Vv=["userId","batchId"];function Kg(n,e){return[n,ii(e)]}function Uv(n,e,t){return[n,ii(e),t]}const fI={},pI=["prefixPath","collectionGroup","readTime","documentId"],gI=["prefixPath","collectionGroup","documentId"],NC=["collectionGroup","readTime","prefixPath","documentId"],kC=["canonicalId","targetId"],PC=["targetId","path"],mI=["path","targetId"],Bv=["collectionId","parent"],yI=["indexId","uid"],vI=["uid","sequenceNumber"],_I=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wI=["indexId","uid","orderedDocumentKey"],II=["userId","collectionPath","documentId"],EI=["userId","collectionPath","largestBatchId"],bI=["userId","collectionGroup","largestBatchId"],jv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BS=[...jv,"documentOverlays"],CI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DI=CI,TI=[...DI,"indexConfiguration","indexState","indexEntries"];class Hv extends Mc{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function $t(n,e){const t=qe(n);return ks.O(t.ie,e)}class Yg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&np(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sI();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=tp(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&ch(this.mutations,e.mutations,(t,r)=>Cv(t,r))&&ch(this.baseMutations,e.baseMutations,(t,r)=>Cv(t,r))}}class $v{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=Hg;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new $v(e,t,r,o)}}class Gv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Za{constructor(e,t,r,o,u=vt.min(),d=vt.min(),m=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class SI{constructor(e){this.re=e}}function zv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ka(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:na(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ta(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wc(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Wc(e.version)}}var o,u;return r}function Ka(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zc(n){const e=new Fn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function ll(n,e){const t=(e.baseMutations||[]).map(u=>Ov(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ov(n.re,u)),o=Fn.fromMillis(e.localWriteTimeMs);return new Yg(e.batchId,o,t,r)}function cp(n){const e=Zc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Zc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=Ci(Uc(Sv(o.documents[0])))):r=Ci(qg(n.query)),new Za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function qv(n,e){const t=Wc(e.snapshotVersion),r=Wc(e.lastLimboFreeSnapshotVersion);let o;o=ep(e.target)?lI(n.re,e.target):Rv(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function xI(n){const e=qg({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fg(e,e.limit,"L"):e}function Qg(n,e){return new Gv(e.largestBatchId,Ov(n.re,e.overlayMutation))}function Jg(n,e){const t=e.path.lastSegment();return[n,ii(e.path.popLast()),t]}function mo(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wc(r.readTime),documentKey:ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class FC{getBundleMetadata(e,t){return MI(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Zc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return MI(e).put({bundleId:(r=t).id,createTime:Wc(qn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return yo(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:xI(o.bundledQuery),readTime:Zc(o.readTime)};var o})}saveNamedQuery(e,t){return yo(e).put({name:(r=t).name,readTime:Wc(qn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function MI(n){return $t(n,"bundles")}function yo(n){return $t(n,"namedQueries")}class zi{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new zi(e,t.uid||"")}getOverlay(e,t){return Di(e).get(Jg(this.userId,t)).next(r=>r?Qg(this.It,r):null)}getOverlays(e,t){const r=ea();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Gv(t,d);o.push(this.ue(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ii(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Di(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ea(),u=ii(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Di(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Qg(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ea();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Di(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const O=Qg(this.It,C);u.size()<o||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Di(e).put(function(r,o,u){const[d,m,w]=Jg(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:lp(r.re,u.mutation)}}(this.It,this.userId,t))}}function Di(n){return $t(n,"documentOverlays")}class cl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Mg(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Rc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?H0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Xe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),$e.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function OI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function RI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=OI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}cl.Te=new cl;class LC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=RI(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=RI(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class VC{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class UC{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Kc{constructor(){this.Be=new LC,this.Le=new VC(this.Be),this.Ue=new UC(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class vo{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vo(this.indexId,this.documentKey,this.arrayValue,r)}}function Yc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Wv(n.arrayValue,e.arrayValue),0!==t?t:(t=Wv(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Wv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class BC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=rv(e);if(void 0!==t&&!this.ze(t))return!1;const r=xc(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NI{constructor(){this.Ye=new Xg}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(bi.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Xg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new fn(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new fn(Jt.comparator)).toArray()}}const Qc=new Uint8Array(0);class jC{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Xg,this.Ze=new Xo(r=>sl(r),(r,o)=>Lc(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ii(o)};return Zv(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Ac(t),""],!1,!0);return Zv(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ls(d.parent))}return r})}addFieldIndex(e,t){const r=Mh(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=dl(e);return u.next(m=>{d.put(mo(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Mh(e),o=dl(e),u=xh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xh(e);let o=!0;const u=new Map;return re.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Nt();const m=[];return re.forEach(u,(w,C)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Rt=>`${Rt.fieldPath}:${Rt.kind}`).join(",")}`} to execute ${sl(t)}`);const O=function(Rt,Tt){const Ot=rv(Tt);if(void 0===Ot)return null;for(const zt of gh(Rt,Ot.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(C,w),V=function(Rt,Tt){const Ot=new Map;for(const zt of xc(Tt))for(const oi of gh(Rt,zt.fieldPath))switch(oi.op){case"==":case"in":Ot.set(zt.fieldPath.canonicalString(),oi.value);break;case"not-in":case"!=":return Ot.set(zt.fieldPath.canonicalString(),oi.value),Array.from(Ot.values())}return null}(C,w),K=function(Rt,Tt){const Ot=[];let zt=!0;for(const oi of xc(Tt)){const o0=0===oi.kind?$0(Rt,oi.fieldPath,Rt.startAt):IC(Rt,oi.fieldPath,Rt.startAt);Ot.push(o0.value),zt&&(zt=o0.inclusive)}return new Vc(Ot,zt)}(C,w),X=function(Rt,Tt){const Ot=[];let zt=!0;for(const oi of xc(Tt)){const o0=0===oi.kind?IC(Rt,oi.fieldPath,Rt.endAt):$0(Rt,oi.fieldPath,Rt.endAt);Ot.push(o0.value),zt&&(zt=o0.inclusive)}return new Vc(Ot,zt)}(C,w),xe=this.nn(w,C,K),Fe=this.nn(w,C,X),it=this.sn(w,C,V),It=this.rn(w.indexId,O,xe,K.inclusive,Fe,X.inclusive,it);return re.forEach(It,Rt=>r.J(Rt,t.limit).next(Tt=>{Tt.forEach(Ot=>{const zt=$e.fromSegments(Ot.documentKey);d.has(zt)||(d=d.add(zt),m.push(zt))})}))}).next(()=>m)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let O=0;O<w;++O){const V=t?this.on(t[O/C]):Qc,K=this.un(e,V,r[O%C],o),X=this.cn(e,V,u[O%C],d),xe=m.map(Fe=>this.un(e,V,Fe,!0));A.push(...this.createRange(K,X,xe))}return A}un(e,t,r,o){const u=new vo(e,$e.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new vo(e,$e.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new BC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new fn(rr.comparator),w=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:m=m.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Kc;for(const o of xc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);cl.Te.ce(u,d)}return r.$e()}on(e){const t=new Kc;return cl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Kc;return cl.Te.ce(Ga(this.databaseId,t),r.qe(function(o){const u=xc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new Kc);let u=0;for(const d of xc(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&Ps(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);cl.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Kc;w.seed(m.$e()),cl.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ni&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Mh(e),o=dl(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,A){const O=A?new dh(A.sequenceNumber,new bi(Zc(A.readTime),new $e(Ls(A.documentKey)),A.largestBatchId)):dh.empty(),V=C.fields.map(([K,X])=>new bg(rr.fromServerFormat(K),X));return new Eg(C.indexId,C.collectionGroup,V,O)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Mh(e),u=dl(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(mo(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?re.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,w=>this.wn(e,o,w).next(C=>{const A=this.mn(u,w);return C.isEqual(A)?re.resolve():this.gn(e,u,w,C,A)}))))})}yn(e,t,r,o){return xh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return xh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=xh(e);let u=new fn(Yc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new vo(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new fn(Yc);const o=this.an(t,e);if(null==o)return r;const u=rv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Ps(d))for(const m of d.arrayValue.values||[])r=r.add(new vo(t.indexId,e.key,this.on(m),o))}else r=r.add(new vo(t.indexId,e.key,Qc,o));return r}gn(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,A,O){const V=m.getIterator(),K=w.getIterator();let X=hh(V),xe=hh(K);for(;X||xe;){let Fe=!1,it=!1;if(X&&xe){const It=C(X,xe);It<0?it=!0:It>0&&(Fe=!0)}else null!=X?it=!0:Fe=!0;Fe?(A(xe),xe=hh(K)):it?(O(X),X=hh(V)):(X=hh(V),xe=hh(K))}}(o,u,Yc,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),re.waitFor(d)}_n(e){let t=1;return dl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Yc(d,m)).filter((d,m,w)=>!m||0!==Yc(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Yc(d,e),w=Yc(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Qc,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Qc,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Kv)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||Xe())).next(Kv)}}function Zv(n){return $t(n,"collectionParents")}function xh(n){return $t(n,"indexEntries")}function Mh(n){return $t(n,"indexConfiguration")}function dl(n){return $t(n,"indexState")}function Kv(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;iv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new bi(e.readTime,e.documentKey,t)}const Yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ti{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(A,O,V)=>(m++,V.delete()));u.push(w.next(()=>{bt(1===m)}));const C=[];for(const A of t.mutations){const O=Uv(e,A.key.path,t.batchId);u.push(o.delete(O)),C.push(A.key)}return re.waitFor(u).next(()=>C)}function dp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(41943040,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);class hp{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new hp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Oh(e),d=Ya(e);return d.add({}).next(m=>{bt("number"==typeof m);const w=new Yg(m,t,r,o),C=function(V,K,X){const xe=X.baseMutations.map(it=>lp(V.re,it)),Fe=X.mutations.map(it=>lp(V.re,it));return{userId:K,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:xe,mutations:Fe}}(this.It,this.userId,w),A=[];let O=new fn((V,K)=>xt(V.canonicalString(),K.canonicalString()));for(const V of o){const K=Uv(this.userId,V.key.path,m);O=O.add(V.key.path.popLast()),A.push(d.put(C)),A.push(u.put(K,fI))}return O.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),re.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Ya(e).get(t).next(r=>r?(bt(r.userId===this.userId),ll(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ya(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=ll(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ya(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).W("userMutationsIndex",t).next(r=>r.map(o=>ll(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Oh(e).Z({range:o},(d,m,w)=>{const[C,A,O]=d,V=Ls(A);if(C===this.userId&&t.path.isEqual(V))return Ya(e).get(O).next(K=>{if(!K)throw Xe();bt(K.userId===this.userId),u.push(ll(this.It,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(xt);const o=[];return t.forEach(u=>{const d=Kg(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Oh(e).Z({range:m},(C,A,O)=>{const[V,K,X]=C,xe=Ls(K);V===this.userId&&u.path.isEqual(xe)?r=r.add(X):O.done()});o.push(w)}),re.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Kg(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new fn(xt);return Oh(e).Z({range:d},(w,C,A)=>{const[O,V,K]=w,X=Ls(V);O===this.userId&&r.isPrefixOf(X)?X.length===o&&(m=m.add(K)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ya(e).get(u).next(d=>{if(null===d)throw Xe();bt(d.userId===this.userId),r.push(ll(this.It,d))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Qv(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Oh(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Ls(u[1]);o.push(w)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return Jv(e,this.userId,t)}Rn(e){return kI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jv(n,e,t){const r=Kg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Oh(n).Z({range:u,X:!0},(m,w,C)=>{const[A,O,V]=m;A===e&&O===o&&(d=!0),C.done()}).next(()=>d)}function Ya(n){return $t(n,"mutations")}function Oh(n){return $t(n,"documentMutations")}function kI(n){return $t(n,"mutationQueues")}class Jc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Jc(0)}static vn(){return new Jc(-1)}}class HC{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Jc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Rh(e).Z((d,m)=>{const w=cp(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Rh(e).Z((r,o)=>{const u=cp(o);t(u)})}Vn(e){return PI(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Sn(e,t){return PI(e).put("targetGlobalKey",t)}Dn(e,t){return Rh(e).put(qv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Rh(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=cp(m);Lc(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=hl(e);return t.forEach(d=>{const m=ii(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=hl(e);return re.forEach(t,u=>{const d=ii(u.path);return re.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=hl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=hl(e);let u=Nt();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Ls(d[1]),A=new $e(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ii(t.path),o=IDBKeyRange.bound([r],[Ac(r)],!1,!0);let u=0;return hl(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return Rh(e).get(t).next(r=>r?cp(r):null)}}function Rh(n){return $t(n,"targets")}function PI(n){return $t(n,"targetGlobal")}function hl(n){return $t(n,"targetDocuments")}function FI([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class $C{constructor(e){this.xn=e,this.buffer=new fn(FI),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fi(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ja(r)}yield t.Fn(3e5)}))}}class zC{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Xr.at);const r=new $C(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Yv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(C=Date.now(),Dt()<=Wo.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class qC{constructor(e,t){this.db=e,this.garbageCollector=new zC(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return em(e,r)}removeReference(e,t,r){return em(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return em(e,t)}Gn(e,t){return function(r,o){let u=!1;return kI(r).tt(d=>Jv(r,d,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,vt.min()),hl(e).delete([0,ii(d.path)])))});o.push(w)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return em(e,t)}Kn(e,t){const r=hl(e);let o,u=Xr.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Xr.at&&t(new $e(Ls(o)),u),u=C,o=w):u=Xr.at}).next(()=>{u!==Xr.at&&t(new $e(Ls(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function em(n,e){return hl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ii(e.path),sequenceNumber:r}));var r}class LI{constructor(){this.changes=new Xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fl(e).put(r)}removeEntry(e,t,r){return fl(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ka(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=an.newInvalidDocument(t);return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:an.newInvalidDocument(t)};return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nh(t))},(o,u)=>{r={document:this.jn(t,u),size:dp(u)}}).next(()=>r)}getEntries(e,t){let r=pi();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=pi(),o=new Ln($e.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,dp(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let o=new fn(e_);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Nh(o.first()),Nh(o.last())),d=o.getIterator();let m=d.getNext();return fl(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const O=$e.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&e_(m,O)<0;)r(m,null),m=d.getNext();m&&m.isEqual(O)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.j(Nh(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ka(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=pi();for(const w of d){const C=this.jn($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=pi();const d=Xv(t,r),m=Xv(t,bi.max());return fl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,A)=>{const O=this.jn($e.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(O.key,O),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new ZC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return UI(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Qn(e,t){return UI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function AI(n,e){let t;if(e.document)t=Mv(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=Zc(e.noDocument.readTime);t=an.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=$e.fromSegments(e.unknownDocument.path),o=Zc(e.unknownDocument.version);t=an.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Fn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return an.newInvalidDocument(e)}}function VI(n){return new WC(n)}class ZC extends LI{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Xo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new fn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=zv(this.Yn.It,d);o=o.add(u.path.popLast()),r+=dp(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=zv(this.Yn.It,d.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function UI(n){return $t(n,"remoteDocumentGlobal")}function fl(n){return $t(n,"remoteDocumentsV14")}function Nh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xv(n,e){const t=e.documentKey.path.toArray();return[n,Ka(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function e_(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class BI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class t_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&rp(r.mutation,o,$i.empty(),Fn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const o=ea();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=ip();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=pi();const d=sp(),m=sp();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Wa)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),rp(A.mutation,C,A.mutation.getFieldMask(),Fn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var O;return m.set(C,new BI(A,null!==(O=d.get(C))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=sp();let o=new Ln((d,m)=>d-m),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||$i.empty();A=m.applyToLocalView(C,A),r.set(w,A);const O=(o.get(m.batchId)||Nt()).add(w);o=o.insert(m.batchId,O)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,O=sI();A.forEach(V=>{if(!u.has(V)){const K=tp(t.get(V),r.get(V));null!==K&&O.set(V,K),u=u.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,O))}return re.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(ea());let m=-1,w=u;return d.next(C=>re.forEach(C,(A,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(A)?re.resolve():this.getBaseDocument(e,A,O).next(V=>{w=w.insert(A,V)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Nt())).next(A=>({batchId:m,changes:iI(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let o=ip();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=ip();return this.indexManager.getCollectionParents(e,o).next(d=>re.forEach(d,m=>{const w=(C=t,A=m.child(o),new za(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,O)=>{u=u.insert(A,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,an.newInvalidDocument(C)))});let d=ip();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&rp(C.mutation,w,$i.empty(),Fn.now()),_v(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(an.newInvalidDocument(t))}}class jI{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:qn(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xI(r.bundledQuery),readTime:qn(r.readTime)}),re.resolve();var r}}class HI{constructor(){this.overlays=new Ln($e.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ea();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=ea(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Ln((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=ea(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=ea(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return re.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Gv(t,r));let u=this.es.get(t);void 0===u&&(u=Nt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class tm{constructor(){this.ns=new fn(Tr.ss),this.rs=new fn(Tr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Tr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Tr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new $e(new Jt([])),r=new Tr(t,e),o=new Tr(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new $e(new Jt([])),r=new Tr(t,e),o=new Tr(t,e+1);let u=Nt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Tr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return $e.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||$e.comparator(e.key,t.key)}}class $I{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new fn(Tr.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new Yg(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new Tr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tr(t,0),o=new Tr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(xt);return t.forEach(o=>{const u=new Tr(o,0),d=new Tr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new Tr(new $e(u),0);let m=new fn(xt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,o=>{const u=new Tr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Tr(t,0),o=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Xc{constructor(e){this.Es=e,this.docs=new Ln($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=pi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():an.newInvalidDocument(o))}),re.resolve(r)}getAllFromCollection(e,t,r){let o=pi();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||iv(pC(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KC(this)}getSize(e){return re.resolve(this.size)}}class KC extends LI{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class YC{constructor(e){this.persistence=e,this.Rs=new Xo(t=>sl(t),Lc),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new tm,this.targetCount=0,this.vs=Jc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Jc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class ed{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Xr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new YC(this),this.indexManager=new NI,this.remoteDocumentCache=new Xc(r=>this.referenceDelegate.xs(r)),this.It=new SI(t),this.Ns=new jI(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new $I(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new jS(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class jS extends Mc{constructor(e){super(),this.currentSequenceNumber=e}}class kh{constructor(e){this.persistence=e,this.Fs=new tm,this.$s=null}static Bs(e){return new kh(e)}get Ls(){if(this.$s)return this.$s;throw Xe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const o=$e.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class HS{constructor(e){this.It=e}$(e,t,r,o){const u=new Hi("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vv,{unique:!0}),m.createObjectStore("documentMutations"),n_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),n_(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vv,{unique:!0});const A=w.store("mutations"),O=C.map(V=>A.put(V));return re.waitFor(O)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:II});w.createIndex("collectionPathOverlayIndex",EI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",bI,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:pI});w.createIndex("documentKeyIndex",gI),w.createIndex("collectionGroupIndex",NC)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:yI}).createIndex("sequenceNumberIndex",vI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:_I}).createIndex("documentKeyIndex",wI,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=dp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>re.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>re.forEach(m,w=>{bt(w.userId===u.userId);const C=ll(this.It,w);return Qv(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Jt(d),C=[0,ii(w)];u.push(t.get(C).next(A=>A?re.resolve():t.put({targetId:0,path:ii(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Bv});const r=t.store("collectionParents"),o=new Xg,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ii(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const A=Ls(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=cp(o),d=qv(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new $e(Jt.fromString(C.document.name).popFirst(5)):C.noDocument?$e.fromSegments(C.noDocument.path):C.unknownDocument?$e.fromSegments(C.unknownDocument.path):Xe()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>re.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=VI(this.It),u=new ed(kh.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Nt();ll(this.It,w).keys().forEach(O=>A=A.add(O)),m.set(w.userId,A)}),re.forEach(m,(w,C)=>{const A=new Vr(C),O=zi.oe(this.It,A),V=u.getIndexManager(A),K=hp.oe(A,this.It,V,u.referenceDelegate);return new t_(o,K,O,V).recalculateAndSaveOverlaysForDocumentKeys(new Hv(t,Xr.at),w).next()})})}}function n_(n){n.createObjectStore("targetDocuments",{keyPath:PC}).createIndex("documentTargetsIndex",mI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kC,{unique:!0}),n.createObjectStore("targetGlobal")}const nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GI{constructor(e,t,r,o,u,d,m,w,C,A,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=A,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!GI.C())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qC(this,o),this.ii=t+"main",this.It=new SI(w),this.ri=new ks(this.ii,this.Xs,new HS(this.It)),this.Cs=new HC(this.referenceDelegate,this.It),this.remoteDocumentCache=VI(this.It),this.Ns=new FC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,nm);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Xr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fi(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return ht(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return rm(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=$t(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return re.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):ht(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||rm(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Hv(t,Xr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>rm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return hp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jC(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return zi.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?TI:14===d?DI:13===d?CI:12===d?BS:11===d?jv:void Xe();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new Hv(w,this.Ss?this.Ss.next():Xr.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(ce.FAILED_PRECONDITION,gC);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return ht(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,nm)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ht(e).put("owner",t)}static C(){return ks.C()}_i(e){const t=ht(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Lt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ht(n){return $t(n,"owner")}function rm(n){return $t(n,"clientMetadata")}function r_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class i_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Nt(),o=Nt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new i_(e,t.fromCache,r,o)}}class td{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(K0(t))return re.resolve(null);let r=Ci(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Fg(t,null,"F"),r=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Nt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,Fg(t,null,"F")):this.Bi(e,C,t,w)}))})))}Mi(e,t,r,o){return K0(t)||o.isEqual(vt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Oi(e,t):(Dt()<=Wo.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vv(t)),this.Bi(e,d,t,Cg(o,-1)))})}Fi(e,t){let r=new fn(wv(e));return t.forEach((o,u)=>{_v(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return Dt()<=Wo.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",vv(t)),this.Ni.getDocumentsMatchingQuery(e,t,bi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class QC{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Ln(xt),this.qi=new Xo(u=>sl(u),Lc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function fp(n,e,t,r){return new QC(n,e,t,r)}function pp(n,e){return Vn.apply(this,arguments)}function Vn(){return Vn=(0,ge.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Nt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),Vn.apply(this,arguments)}function $S(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const A=w.batch,O=A.keys();let V=re.resolve();return O.forEach(K=>{V=V.next(()=>C.getEntry(m,K)).next(X=>{const xe=w.docVersions.get(K);bt(null!==xe),X.version.compareTo(xe)<0&&(A.applyToRemoteDocument(X,w),X.isValidDocument()&&(X.setReadTime(w.commitVersion),C.addEntry(X)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Nt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function s_(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function zI(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((A,O)=>{const V=o.get(O);if(!V)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,O)));let K=V.withSequenceNumber(u.currentSequenceNumber);var X,xe,Fe;e.targetMismatches.has(O)?K=K.withResumeToken(Dr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(A.resumeToken,r)),o=o.insert(O,K),xe=K,Fe=A,(0===(X=V).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,K))});let w=pi(),C=Nt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(qI(u,d,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(vt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(O=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function qI(n,e,t){let r=Nt(),o=Nt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=pi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(vt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function WI(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nd(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Za(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function rd(n,e,t){return im.apply(this,arguments)}function im(){return im=(0,ge.Z)(function*(n,e,t){const r=qe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!fi(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),im.apply(this,arguments)}function sm(n,e,t){const r=qe(n);let o=vt.min(),u=Nt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const A=qe(m),O=A.qi.get(C);return void 0!==O?re.resolve(A.Ui.get(O)):A.Cs.getTargetData(w,C)}(r,d,Ci(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:vt.min(),t?u:Nt())).next(m=>(Ph(r,DC(e),m),{documents:m,Hi:u})))}function ZI(n,e){const t=qe(n),r=qe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function KI(n,e){const t=qe(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Cg(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Ph(t,e,o),o))}function Ph(n,e,t){let r=vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function o_(){return o_=(0,ge.Z)(function*(n,e,t,r){const o=qe(n);let u=Nt(),d=pi();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const O=e.Yi(C);O.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,O)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield nd(o,(C=r,Ci(Uc(Jt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>qI(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),o_.apply(this,arguments)}function XC(n,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,ge.Z)(function*(n,e,t=Nt()){const r=yield nd(n,Ci(xI(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=qn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Dr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),Fh.apply(this,arguments)}function a_(n,e){return`firestore_clients_${n}_${e}`}function u_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function om(n,e){return`firestore_targets_${n}_${e}`}class am{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Me(o.error.code,o.error.message))),d?new am(e,t,o.state,u):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qa{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new Qa(e,r.state,o):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=$g();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=vC(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new pl(e,u):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class l_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new l_(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class c_{constructor(){this.activeTargetIds=$g()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d_{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ln(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=a_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new c_),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(a_(e.persistenceKey,o));if(u){const d=pl.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(om(this.persistenceKey,e));if(r){const o=Qa.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(om(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Xr.at;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),d=m}catch(m){nr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Xr.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new am(this.currentUser,e,t,r),u=u_(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=u_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=om(this.persistenceKey,e),u=new Qa(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return pl.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return am.Zi(new Vr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Qa.Zi(o,t)}yr(e){return l_.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=$g();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class h_{constructor(){this.Lr=new c_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new c_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YI{qr(e){}shutdown(){}}class f_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class QI{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class tD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ao(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.ho(m,o,u),this.lo(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Tc("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}fo(e,t,r,o,u,d){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${eD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,d)=>{const m=new lC;m.listenOnce(aC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case cs.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case cs.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case cs.HTTP_ERROR:const A=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const V=function(K){const X=K.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(X)>=0?X:ce.UNKNOWN}(O.status);d(new Me(V,O.message))}else d(new Me(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sC(),d=oC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new uC({})),this.ho(m.initMessageHeaders,t,r),(0,Lt.uI)()||(0,Lt.b$)()||(0,Lt.d)()||(0,Lt.w1)()||(0,Lt.Mn)()||(0,Lt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,O=!1;const V=new QI({Hr:X=>{O?Oe("Connection","Not sending because WebChannel is closed:",X):(A||(Oe("Connection","Opening WebChannel transport."),C.open(),A=!0),Oe("Connection","WebChannel sending:",X),C.send(X))},Jr:()=>C.close()}),K=(X,xe,Fe)=>{X.listen(xe,it=>{try{Fe(it)}catch(It){setTimeout(()=>{throw It},0)}})};return K(C,Ig.EventType.OPEN,()=>{O||Oe("Connection","WebChannel transport opened.")}),K(C,Ig.EventType.CLOSE,()=>{O||(O=!0,Oe("Connection","WebChannel transport closed"),V.io())}),K(C,Ig.EventType.ERROR,X=>{O||(O=!0,Tc("Connection","WebChannel transport errored:",X),V.io(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),K(C,Ig.EventType.MESSAGE,X=>{var xe;if(!O){const Fe=X.data[0];bt(!!Fe);const it=Fe,It=it.error||(null===(xe=it[0])||void 0===xe?void 0:xe.error);if(It){Oe("Connection","WebChannel received error:",It);const Rt=It.status;let Tt=function(zt){const oi=yr[zt];if(void 0!==oi)return Dv(oi)}(Rt),Ot=It.message;void 0===Tt&&(Tt=ce.INTERNAL,Ot="Unknown error status: "+Rt+" with message "+It.message),O=!0,V.io(new Me(Tt,Ot)),C.close()}else Oe("Connection","WebChannel received:",Fe),V.ro(Fe)}}),K(d,O0.STAT_EVENT,X=>{X.stat===R0.PROXY?Oe("Connection","Detected buffering proxy"):X.stat===R0.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function JI(){return typeof window<"u"?window:null}function p_(){return typeof document<"u"?document:null}function um(n){return new Dh(n,!0)}class XI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class nD{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new XI(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends nD{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function aI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(bt(void 0===C||"string"==typeof C),Dr.fromBase64String(C||"")):(bt(void 0===C||C instanceof Uint8Array),Dr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:Dv(w.code);return new Me(C,w.message||"")}(d);t=new bh(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=go(n,r.document.name),u=qn(r.document.updateTime),d=new ir({mapValue:{fields:r.document.fields}}),m=an.newFoundDocument(o,u,d);t=new Gg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=go(n,r.document),u=r.readTime?qn(r.readTime):vt.min(),d=an.newNoDocument(o,u);t=new Gg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=go(n,r.document);t=new Gg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new OC(r.count||0);t=new po(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?qn(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Sh(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=ep(m)?{documents:lI(o,m)}:{query:Rv(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=zc(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(d.readTime=ta(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function Nv(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Sh(this.It),t.removeTarget=e,this.Bo(t)}}class lm extends nD{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function uI(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=qn(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=qn(o)),new X0(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.Zo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Sh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lp(this.It,r))};this.Bo(t)}}class rD extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ce.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class iD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(nr(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class tE{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;ml(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(C){const A=qe(C);A._u.add(4),yield Lh(A),A.gu.set("Unknown"),A._u.delete(4),yield Ja(A)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new iD(r,o)}}function Ja(n){return g_.apply(this,arguments)}function g_(){return g_=(0,ge.Z)(function*(n){if(ml(n))for(const e of n.wu)yield e(!0)}),g_.apply(this,arguments)}function Lh(n){return m_.apply(this,arguments)}function m_(){return m_=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),m_.apply(this,arguments)}function cm(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),gl(t)?y_(t):id(t).ko()&&dm(t,e))}function gp(n,e){const t=qe(n),r=id(t);t.du.delete(e),r.ko()&&nE(t,e),0===t.du.size&&(r.ko()?r.Fo():ml(t)&&t.gu.set("Unknown"))}function dm(n,e){n.yu.Ot(e.targetId),id(n).zo(e)}function nE(n,e){n.yu.Ot(e),id(n).Ho(e)}function y_(n){n.yu=new Gc({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),id(n).start(),n.gu.uu()}function gl(n){return ml(n)&&!id(n).No()&&n.du.size>0}function ml(n){return 0===qe(n)._u.size}function v_(n){n.yu=void 0}function sD(n){return hm.apply(this,arguments)}function hm(){return hm=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{dm(n,e)})}),hm.apply(this,arguments)}function oD(n,e){return fm.apply(this,arguments)}function fm(){return fm=(0,ge.Z)(function*(n,e){v_(n),gl(n)?(n.gu.hu(e),y_(n)):n.gu.set("Unknown")}),fm.apply(this,arguments)}function aD(n,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof bh&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pm(n,r)}else if(e instanceof Gg?n.yu.Gt(e):e instanceof po?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(vt.min()))try{const r=yield s_(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Dr.EMPTY_BYTE_STRING,w.snapshotVersion)),nE(o,m);const C=new Za(w.target,m,1,w.sequenceNumber);dm(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield pm(n,r)}var r}),mp.apply(this,arguments)}function pm(n,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,ge.Z)(function*(n,e,t){if(!fi(e))throw e;n._u.add(1),yield Lh(n),n.gu.set("Offline"),t||(t=()=>s_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Ja(n)}))}),gm.apply(this,arguments)}function __(n,e){return e().catch(t=>pm(n,t,e))}function Vh(n){return w_.apply(this,arguments)}function w_(){return w_=(0,ge.Z)(function*(n){const e=qe(n),t=yl(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uD(e);)try{const o=yield WI(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,I_(e,o)}catch(o){yield pm(e,o)}rE(e)&&E_(e)}),w_.apply(this,arguments)}function uD(n){return ml(n)&&n.fu.length<10}function I_(n,e){n.fu.push(e);const t=yl(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function rE(n){return ml(n)&&!yl(n).No()&&n.fu.length>0}function E_(n){yl(n).start()}function lD(n){return b_.apply(this,arguments)}function b_(){return b_=(0,ge.Z)(function*(n){yl(n).eu()}),b_.apply(this,arguments)}function cD(n){return C_.apply(this,arguments)}function C_(){return C_=(0,ge.Z)(function*(n){const e=yl(n);for(const t of n.fu)e.Xo(t.mutations)}),C_.apply(this,arguments)}function dD(n,e,t){return D_.apply(this,arguments)}function D_(){return D_=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),o=$v.from(r,e,t);yield __(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Vh(n)}),D_.apply(this,arguments)}function hD(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,ge.Z)(function*(n,e){var t;e&&yl(n).Yo&&(yield(t=(0,ge.Z)(function*(r,o){if(nI(u=o.code)&&u!==ce.ABORTED){const d=r.fu.shift();yl(r).Oo(),yield __(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Vh(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),rE(n)&&E_(n)}),T_.apply(this,arguments)}function S_(n,e){return mm.apply(this,arguments)}function mm(){return mm=(0,ge.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=ml(t);t._u.add(3),yield Lh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ja(t)}),mm.apply(this,arguments)}function A_(n,e){return x_.apply(this,arguments)}function x_(){return x_=(0,ge.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield Ja(t)):e||(t._u.add(2),yield Lh(t),t.gu.set("Unknown"))}),x_.apply(this,arguments)}function id(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new eE(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:sD.bind(null,n),Zr:oD.bind(null,n),Wo:aD.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Oo(),gl(n)?y_(n):n.gu.set("Unknown")):(yield n.pu.stop(),v_(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function yl(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new lm(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:lD.bind(null,n),Zr:hD.bind(null,n),tu:cD.bind(null,n),Zo:dD.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Oo(),yield Vh(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class M_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new M_(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uh(n,e){if(nr("AsyncQueue",`${e}: ${n}`),fi(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class vl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=ip(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new vl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ym{constructor(){this.Tu=new Ln($e.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Xe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sd{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new sd(e,t,vl.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class O_{constructor(){this.Au=void 0,this.listeners=[]}}class fD{constructor(){this.queries=new Xo(e=>Lg(e),Gi),this.onlineState="Unknown",this.Ru=new Set}}function R_(n,e){return yp.apply(this,arguments)}function yp(){return yp=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new O_),o)try{u.Au=yield t.onListen(r)}catch(d){const m=Uh(d,`Initialization of query '${vv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&k_(t)}),yp.apply(this,arguments)}function N_(n,e){return vm.apply(this,arguments)}function vm(){return vm=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),vm.apply(this,arguments)}function Bh(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&k_(t)}function iE(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function k_(n){n.Ru.forEach(e=>{e.next()})}class sE{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class oE{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class _m{constructor(e){this.It=e}Ji(e){return go(this.It,e)}Yi(e){return e.metadata.exists?Mv(this.It,e.document,!1):an.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return qn(e)}}class pD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wm(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new _m(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Nt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function JC(n,e,t,r){return o_.apply(this,arguments)}(e.localStore,new _m(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield XC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function wm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class aE{constructor(e){this.key=e}}class P_{constructor(e){this.key=e}}class Im{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Nt(),this.mutatedKeys=Nt(),this.Ku=wv(e),this.Gu=new vl(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new ym,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,O)=>{const V=o.get(A),K=_v(this.query,O)?O:null,X=!!V&&this.mutatedKeys.has(V.key),xe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Fe=!1;V&&K?V.data.isEqual(K.data)?X!==xe&&(r.track({type:3,doc:K}),Fe=!0):this.zu(V,K)||(r.track({type:2,doc:K}),Fe=!0,(w&&this.Ku(K,w)>0||C&&this.Ku(K,C)<0)&&(m=!0)):!V&&K?(r.track({type:0,doc:K}),Fe=!0):V&&!K&&(r.track({type:1,doc:V}),Fe=!0,(w||C)&&(m=!0)),Fe&&(K?(d=d.add(K),u=xe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:d,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((C,A)=>function(O,V){const K=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return K(O)-K(V)}(C.type,A.type)||this.Ku(C.doc,A.doc)),this.Hu(r);const d=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new sd(this.query,e.Gu,o,u,e.mutatedKeys,0===m,w,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new ym,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Nt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new P_(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new aE(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Nt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return sd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class uE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lE{constructor(e){this.key=e,this.ec=!1}}class cE{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new Xo(m=>Lg(m),Gi),this.ic=new Map,this.rc=new Set,this.oc=new Ln($e.comparator),this.uc=new Map,this.cc=new tm,this.ac={},this.hc=new Map,this.lc=Jc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function dE(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,ge.Z)(function*(n,e){const t=Y_(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const d=yield nd(t.localStore,Ci(e));t.isPrimaryClient&&cm(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield L_(t,e,r,"current"===m)}return o}),F_.apply(this,arguments)}function L_(n,e,t,r){return V_.apply(this,arguments)}function V_(){return V_=(0,ge.Z)(function*(n,e,t,r){n.dc=(A,O,V)=>{return(K=(0,ge.Z)(function*(X,xe,Fe,it){let It=xe.view.ju(Fe);It.$i&&(It=yield sm(X.localStore,xe.query,!1).then(({documents:Ot})=>xe.view.ju(Ot,It)));const Rt=it&&it.targetChanges.get(xe.targetId),Tt=xe.view.applyChanges(It,X.isPrimaryClient,Rt);return z_(X,xe.targetId,Tt.Yu),Tt.snapshot}),function(X,xe,Fe,it){return K.apply(this,arguments)})(n,A,O,V);var K};const o=yield sm(n.localStore,e,!0),u=new Im(e,o.Hi),d=u.ju(o.documents),m=$c.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);z_(n,t,w.Yu);const C=new uE(e,t,u);return n.sc.set(e,C),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),w.snapshot}),V_.apply(this,arguments)}function gD(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,ge.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!Gi(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),gp(t.remoteStore,r.targetId),jh(t,r.targetId)}).catch(ja))):(jh(t,r.targetId),yield rd(t.localStore,r.targetId,!0))}),Em.apply(this,arguments)}function bm(){return bm=(0,ge.Z)(function*(n,e,t){const r=Hh(n);try{const o=yield function(u,d){const m=qe(u),w=Fn.now(),C=d.reduce((V,K)=>V.add(K.key),Nt());let A,O;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let K=pi(),X=Nt();return m.Gi.getEntries(V,C).next(xe=>{K=xe,K.forEach((Fe,it)=>{it.isValidDocument()||(X=X.add(Fe))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,K)).next(xe=>{A=xe;const Fe=[];for(const it of d){const It=bv(it,A.get(it.key).overlayedDocument);null!=It&&Fe.push(new Wa(it.key,It,Xf(It.value.mapValue),bn.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,Fe,d)}).next(xe=>{O=xe;const Fe=xe.applyToLocalDocumentSet(A,X);return m.documentOverlayCache.saveOverlays(V,xe.batchId,Fe)})}).then(()=>({batchId:O.batchId,changes:iI(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ac[u.currentUser.toKey()];w||(w=new Ln(xt)),w=w.insert(d,m),u.ac[u.currentUser.toKey()]=w}(r,o.batchId,t),yield ra(r,o.changes),yield Vh(r.remoteStore)}catch(o){const u=Uh(o,"Failed to persist write");t.reject(u)}}),bm.apply(this,arguments)}function hE(n,e){return U_.apply(this,arguments)}function U_(){return U_=(0,ge.Z)(function*(n,e){const t=qe(n);try{const r=yield zI(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.uc.get(u);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ec=!0:o.modifiedDocuments.size>0?bt(d.ec):o.removedDocuments.size>0&&(bt(d.ec),d.ec=!1))}),yield ra(t,r,e)}catch(r){yield ja(r)}}),U_.apply(this,arguments)}function mD(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((C,A)=>{for(const O of A.listeners)O.bu(d)&&(w=!0)}),w&&k_(m)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zS(n,e,t){return B_.apply(this,arguments)}function B_(){return B_=(0,ge.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let d=new Ln($e.comparator);d=d.insert(u,an.newNoDocument(u,vt.min()));const m=Nt().add(u),w=new ap(vt.min(),new Map,new fn(xt),d,m);yield hE(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),Dm(r)}else yield rd(r.localStore,e,!1).then(()=>jh(r,e,t)).catch(ja)}),B_.apply(this,arguments)}function yD(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield $S(t.localStore,e);G_(t,r,null),$_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ra(t,o)}catch(o){yield ja(o)}}),Cm.apply(this,arguments)}function fE(n,e,t){return j_.apply(this,arguments)}function j_(){return j_=(0,ge.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(bt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);G_(r,e,t),$_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ra(r,o)}catch(o){yield ja(o)}}),j_.apply(this,arguments)}function H_(){return H_=(0,ge.Z)(function*(n,e){const t=qe(n);ml(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=Uh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),H_.apply(this,arguments)}function $_(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function G_(n,e,t){const r=qe(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function jh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||pE(n,r)})}function pE(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(gp(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Dm(n))}function z_(n,e,t){for(const r of t)r instanceof aE?(n.cc.addReference(r.key,e),vp(n,r)):r instanceof P_?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||pE(n,r.key)):Xe()}function vp(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.rc.add(r),Dm(n))}function Dm(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new $e(Jt.fromString(e)),r=n.lc.next();n.uc.set(r,new lE(t)),n.oc=n.oc.insert(t,r),cm(n.remoteStore,new Za(Ci(Uc(t.path)),r,2,Xr.at))}}function ra(n,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,ge.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,w)=>{d.push(r.dc(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const A=i_.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.nc.Wo(o),yield(m=(0,ge.Z)(function*(w,C){const A=qe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>re.forEach(C,V=>re.forEach(V.Si,K=>A.persistence.referenceDelegate.addReference(O,V.targetId,K)).next(()=>re.forEach(V.Di,K=>A.persistence.referenceDelegate.removeReference(O,V.targetId,K)))))}catch(O){if(!fi(O))throw O;Oe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of C){const V=O.targetId;if(!O.fromCache){const K=A.Ui.get(V),xe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);A.Ui=A.Ui.insert(V,xe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),Tm.apply(this,arguments)}function gE(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ge.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield pp(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(d=>{d.forEach(m=>{m.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ra(t,r.ji)}var o}),Sm.apply(this,arguments)}function mE(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Nt().add(r.key);{let o=Nt();const u=t.ic.get(e);if(!u)return o;for(const d of u){const m=t.sc.get(d);o=o.unionWith(m.view.Qu)}return o}}function _D(n,e){return yE.apply(this,arguments)}function yE(){return yE=(0,ge.Z)(function*(n,e){const t=qe(n),r=yield sm(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&z_(t,e.targetId,o.Yu),o}),yE.apply(this,arguments)}function vE(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,ge.Z)(function*(n,e){const t=qe(n);return KI(t.localStore,e).then(r=>ra(t,r))}),q_.apply(this,arguments)}function wD(n,e,t,r){return W_.apply(this,arguments)}function W_(){return W_=(0,ge.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,m){const w=qe(d),C=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(O=>O?w.localDocuments.getDocuments(A,O):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Vh(o.remoteStore):"acknowledged"===t||"rejected"===t?(G_(o,e,r||null),$_(o,e),m=e,qe(qe(o.localStore).mutationQueue).An(m)):Xe(),yield ra(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),W_.apply(this,arguments)}function od(){return od=(0,ge.Z)(function*(n,e){const t=qe(n);if(Y_(t),Hh(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield _E(t,r.toArray());t.fc=!0,yield A_(t.remoteStore,!0);for(const u of o)cm(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(jh(t,d),rd(t.localStore,d,!0))),gp(t.remoteStore,d)}),yield o,yield _E(t,r),function(u){const d=qe(u);d.uc.forEach((m,w)=>{gp(d.remoteStore,w)}),d.cc.fs(),d.uc=new Map,d.oc=new Ln($e.comparator)}(t),t.fc=!1,yield A_(t.remoteStore,!1)}}),od.apply(this,arguments)}function _E(n,e,t){return _p.apply(this,arguments)}function _p(){return _p=(0,ge.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let m;const w=r.ic.get(d);if(w&&0!==w.length){m=yield nd(r.localStore,Ci(w[0]));for(const C of w){const A=r.sc.get(C),O=yield _D(r,A);O.snapshot&&u.push(O.snapshot)}}else{const C=yield ZI(r.localStore,d);m=yield nd(r.localStore,C),yield L_(r,_o(C),d,!1)}o.push(m)}return r.nc.Wo(u),o}),_p.apply(this,arguments)}function _o(n){return Z0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ED(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Z_(n,e,t,r){return ad.apply(this,arguments)}function ad(){return ad=(0,ge.Z)(function*(n,e,t,r){const o=qe(n);if(o.fc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield KI(o.localStore,DC(u[0])),m=ap.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ra(o,d,m);break}case"rejected":yield rd(o.localStore,e,!0),jh(o,e,r);break;default:Xe()}}),ad.apply(this,arguments)}function bD(n,e,t){return K_.apply(this,arguments)}function K_(){return K_=(0,ge.Z)(function*(n,e,t){const r=Y_(n);if(r.fc){for(const o of e){if(r.ic.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield ZI(r.localStore,o),d=yield nd(r.localStore,u);yield L_(r,_o(u),d.targetId,!1),cm(r.remoteStore,d)}for(const o of t)r.ic.has(o)&&(yield rd(r.localStore,o,!1).then(()=>{gp(r.remoteStore,o),jh(r,o)}).catch(ja))}}),K_.apply(this,arguments)}function Y_(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zS.bind(null,e),e.nc.Wo=Bh.bind(null,e.eventManager),e.nc._c=iE.bind(null,e.eventManager),e}function Hh(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fE.bind(null,e),e}class wE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=um(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return fp(this.persistence,new td,e.initialUser,this.It)}gc(e){return new ed(kh.Bs,this.It)}mc(e){return new h_}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IE extends wE{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield Hh(r.Ec.syncEngine),yield Vh(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return fp(this.persistence,new td,e.initialUser,this.It)}Ic(e,t){return new GC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new FS(t,this.persistence);return new U0(e.asyncQueue,r)}gc(e){const t=r_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new GI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JI(),p_(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new h_}}class EE extends IE{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof d_&&(r.sharedClientState.syncEngine={Fr:wD.bind(null,o),$r:Z_.bind(null,o),Br:bD.bind(null,o),vi:ED.bind(null,o),Or:vE.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ge.Z)(function*(d){yield function ID(n,e){return od.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=JI();if(!d_.C(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=r_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xm{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>mD(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=gE.bind(null,r.syncEngine),yield A_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fD}createDatastore(e){const t=um(e.databaseInfo.databaseId),r=new tD(e.databaseInfo);return new rD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>mD(this.syncEngine,m,0),d=f_.C()?new f_:new YI,new tE(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const A=new cE(r,o,u,d,m,w);return C&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Lh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mm(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class CD{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Cr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new oE(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ge.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class DD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(u,d){const m=qe(u),w=Sh(m.It)+"/documents",C={documents:d.map(K=>na(m.It,K))},A=yield m.fo("BatchGetDocuments",w,C,d.length),O=new Map;A.forEach(K=>{const X=function oI(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=go(t,r.found.name),u=qn(r.found.updateTime),d=new ir({mapValue:{fields:r.found.fields}});return an.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=go(t,r.missing),u=qn(r.readTime);return an.newNoDocument(o,u)}(n,e):Xe()}(m.It,K);O.set(X.key.toString(),X)});const V=[];return d.forEach(K=>{const X=O.get(K.toString());bt(!!X),V.push(X)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Eh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new tI(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(o,u){const d=qe(o),m=Sh(d.It)+"/documents",w={writes:u.map(C=>lp(d.It,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?bn.exists(!1):bn.updateTime(t):bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bn.updateTime(t)}return bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qS{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new XI(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ge.Z)(function*(){const t=new DD(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!xg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!nI(t)}return!1}}class Q_{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Vr.UNAUTHENTICATED,this.clientId=nv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ge.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Uh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Om(n,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield pp(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Rm.apply(this,arguments)}function Nm(n,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield J_(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>S_(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>S_(e.remoteStore,u)),n.onlineComponents=e}),Ip.apply(this,arguments)}function J_(n){return X_.apply(this,arguments)}function X_(){return X_=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield Om(n,new wE)),n.offlineComponents}),X_.apply(this,arguments)}function km(n){return ew.apply(this,arguments)}function ew(){return ew=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Nm(n,new xm)),n.onlineComponents}),ew.apply(this,arguments)}function tw(n){return J_(n).then(e=>e.persistence)}function $h(n){return J_(n).then(e=>e.localStore)}function nw(n){return km(n).then(e=>e.remoteStore)}function rw(n){return km(n).then(e=>e.syncEngine)}function ud(n){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,ge.Z)(function*(n){const e=yield km(n),t=e.eventManager;return t.onListen=dE.bind(null,e.syncEngine),t.onUnlisten=gD.bind(null,e.syncEngine),t}),Pm.apply(this,arguments)}function DE(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,d,m,w){const C=new wp({next:O=>{u.enqueueAndForget(()=>N_(o,A));const V=O.docs.has(d);!V&&O.fromCache?w.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&O.fromCache&&m&&"server"===m.source?w.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new sE(Uc(d.path),C,{includeMetadataChanges:!0,Nu:!0});return R_(o,A)}(yield ud(n),n.asyncQueue,e,t,r)})),r.promise}function iw(n,e,t={}){const r=new Cr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,d,m,w){const C=new wp({next:O=>{u.enqueueAndForget(()=>N_(o,A)),O.fromCache&&"server"===m.source?w.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new sE(d,C,{includeMetadataChanges:!0,Nu:!0});return R_(o,A)}(yield ud(n),n.asyncQueue,e,t,r)})),r.promise}const xD=new Map;function SE(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sw(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ow(n){if(!$e.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zh(n){if($e.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AE(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ep{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Sc;switch(t.type){case"gapi":return new dC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xD.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),xD.delete(e),t.terminate())}(this),Promise.resolve()}}class An{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class Ur{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class wo extends Ur{constructor(e,t,r){super(e,t,Uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new $e(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function uw(n,e,...t){if(n=(0,Lt.m9)(n),SE("collection","path",e),n instanceof Ep){const r=Jt.fromString(e,...t);return zh(r),new wo(n,null,r)}{if(!(n instanceof An||n instanceof wo))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return zh(r),new wo(n.firestore,null,r)}}function qh(n,e,...t){if(n=(0,Lt.m9)(n),1===arguments.length&&(e=nv.R()),SE("doc","path",e),n instanceof Ep){const r=Jt.fromString(e,...t);return ow(r),new An(n,null,new $e(r))}{if(!(n instanceof An||n instanceof wo))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return ow(r),new An(n.firestore,n instanceof wo?n.converter:null,new $e(r))}}function OD(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),(n instanceof An||n instanceof wo)&&(e instanceof An||e instanceof wo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lw(n,e){return n=(0,Lt.m9)(n),e=(0,Lt.m9)(e),n instanceof Ur&&e instanceof Ur&&n.firestore===e.firestore&&Gi(n._query,e._query)&&n.converter===e.converter}class RD{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new XI(this,"async_queue_retry"),this.jc=()=>{const t=p_();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=p_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=p_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Cr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!fi(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=M_.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&Xe()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Vm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Wh{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xn extends Ep{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new RD,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kD(this),this._firestoreClient.terminate()}}function vr(n){return n._firestoreClient||kD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kD(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new US(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Q_(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ME(n,e,t){const r=new Cr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield Om(n,t),yield Nm(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Tc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function cw(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Io(Dr.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Io(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _l{constructor(e){this._methodName=e}}class bp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const HD=/^__.*__$/;class $D{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new wh(e,this.data,t,this.fieldTransforms)}}class GD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class hw{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new hw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return yw(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(dw(this.na)&&HD.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class WS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||um(e)}fa(e,t,r,o=!1){return new hw({na:e,methodName:t,la:r,path:rr.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Zh(n){const e=n._freezeSettings(),t=um(n._databaseId);return new WS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fw(n,e,t,r,o,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,o);$m("Data must be an object, but it was:",d,r);const m=qD(r,d);let w,C;if(u.merge)w=new $i(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const O of u.mergeFields){const V=gw(e,O,t);if(!d.contains(V))throw new Me(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);FE(A,V)||A.push(V)}w=new $i(A),C=d.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,C=d.fieldTransforms;return new $D(new ir(m),w,C)}class Um extends _l{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Um}}function zD(n,e,t){return new hw({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class kE extends _l{_toFieldTransform(e){return new _h(e.path,new yh)}isEqual(e){return e instanceof kE}}class ZS extends _l{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=zD(this,e,!0),r=this.da.map(u=>wl(u,t)),o=new qa(r);return new _h(e.path,o)}isEqual(e){return this===e}}class Bm extends _l{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=zD(this,e,!0),r=this.da.map(u=>wl(u,t)),o=new vh(r);return new _h(e.path,o)}isEqual(e){return this===e}}class KS extends _l{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new ol(e.It,Vg(e.It,this._a));return new _h(e.path,t)}isEqual(e){return this===e}}function jm(n,e,t,r){const o=n.fa(1,e,t);$m("Data must be an object, but it was:",o,r);const u=[],d=ir.empty();Ha(r,(w,C)=>{const A=mw(e,w,t);C=(0,Lt.m9)(C);const O=o.ua(A);if(C instanceof Um)u.push(A);else{const V=wl(C,O);null!=V&&(u.push(A),d.set(A,V))}});const m=new $i(u);return new GD(d,m,o.fieldTransforms)}function Kh(n,e,t,r,o,u){const d=n.fa(1,e,t),m=[gw(e,r,t)],w=[o];if(u.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(gw(e,u[V])),w.push(u[V+1]);const C=[],A=ir.empty();for(let V=m.length-1;V>=0;--V)if(!FE(C,m[V])){const K=m[V];let X=w[V];X=(0,Lt.m9)(X);const xe=d.ua(K);if(X instanceof Um)C.push(K);else{const Fe=wl(X,xe);null!=Fe&&(C.push(K),A.set(K,Fe))}}const O=new $i(C);return new GD(A,O,d.fieldTransforms)}function pw(n,e,t,r=!1){return wl(t,n.fa(r?4:3,e))}function wl(n,e){if(Hm(n=(0,Lt.m9)(n)))return $m("Unsupported field value:",e,n),qD(n,e);if(n instanceof _l)return function(t,r){if(!dw(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=wl(d,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Lt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vg(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Fn.fromDate(t);return{timestampValue:ta(r.It,o)}}if(t instanceof Fn){const o=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ta(r.It,o)}}if(t instanceof bp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Io)return{bytesValue:zc(r.It,t._byteString)};if(t instanceof An){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:al(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${Fm(t)}`)}(n,e)}function qD(n,e){const t={};return Sg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(n,(r,o)=>{const u=wl(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Hm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof bp||n instanceof Io||n instanceof An||n instanceof _l)}function $m(n,e,t){if(!Hm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Fm(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function gw(n,e,t){if((e=(0,Lt.m9)(e))instanceof Xa)return e._internalPath;if("string"==typeof e)return mw(n,e);throw yw("Field path arguments must be of type string or ",n,!1,void 0,t)}const PE=new RegExp("[~\\*/\\[\\]]");function mw(n,e,t){if(e.search(PE)>=0)throw yw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xa(...e.split("."))._internalPath}catch{throw yw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yw(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Me(ce.INVALID_ARGUMENT,m+n+w)}function FE(n,e){return n.some(t=>t.isEqual(e))}class Cp{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gm extends Cp{data(){return super.data()}}function zm(n,e){return"string"==typeof e?mw(n,e):e instanceof Xa?e._internalPath:e._delegate._internalPath}class Yh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Il extends Cp{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qm extends Il{data(e={}){return super.data(e)}}class El{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Yh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qm(this._firestore,this._userDataWriter,r.key,r,new Yh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new qm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new qm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Yh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:WD(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function WD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function LE(n,e){return n instanceof Il&&e instanceof Il?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof El&&e instanceof El&&n._firestore===e._firestore&&lw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZD(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}function eu(n,...e){for(const t of e)n=t._apply(n);return n}class VE extends Dp{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Zh(e.firestore),r=function(o,u,d,m,w,C,A){let O;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){Iw(A,C);const K=[];for(const X of A)K.push(HE(m,o,X));O={arrayValue:{values:K}}}else O=HE(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||Iw(A,C),O=pw(d,"where",A,"in"===C||"not-in"===C);const V=ni.create(w,C,O);return function(K,X){if(X.dt()){const Fe=mv(K);if(null!==Fe&&!Fe.isEqual(X.field))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${X.field.toString()}'`);const it=Pg(K);null!==it&&Ew(0,X.field,it)}const xe=function(Fe,it){for(const It of Fe.filters)if(it.indexOf(It.op)>=0)return It.op;return null}(K,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(X.op));if(null!==xe)throw new Me(ce.INVALID_ARGUMENT,xe===X.op?`Invalid query. You cannot use more than one '${X.op.toString()}' filter.`:`Invalid query. You cannot use '${X.op.toString()}' filters with '${xe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Ur(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new za(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Eo extends Dp{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new mh(o,u);return function(m,w){if(null===Pg(m)){const C=mv(m);null!==C&&Ew(0,C,w.field)}}(r,d),d}(e._query,this.wa,this.ya);return new Ur(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new za(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Wm extends Dp{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Ur(e.firestore,e.converter,Fg(e._query,this.pa,this.Ia))}}class UE extends Dp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ww(e,this.type,this.Ta,this.Ea);return new Ur(e.firestore,e.converter,(o=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BE extends Dp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ww(e,this.type,this.Ta,this.Ea);return new Ur(e.firestore,e.converter,(o=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function ww(n,e,t,r){if(t[0]=(0,Lt.m9)(t[0]),t[0]instanceof Cp)return function(o,u,d,m,w){if(!m)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of Bc(o))if(A.field.isKeyField())C.push(Ga(u,m.key));else{const O=m.data.field(A.field);if(Jf(O))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const V=A.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(O)}return new Vc(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Zh(n.firestore);return function(u,d,m,w,C,A){const O=u.explicitOrderBy;if(C.length>O.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let K=0;K<C.length;K++){const X=C[K];if(O[K].field.isKeyField()){if("string"!=typeof X)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof X}`);if(!yv(u)&&-1!==X.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${X}' contains a slash.`);const xe=u.path.child(Jt.fromString(X));if(!$e.isDocumentKey(xe))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Fe=new $e(xe);V.push(Ga(d,Fe))}else{const xe=pw(m,w,X);V.push(xe)}}return new Vc(V,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function HE(n,e,t){if("string"==typeof(t=(0,Lt.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!$e.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ga(n,new $e(r))}if(t instanceof An)return Ga(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fm(t)}.`)}function Iw(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ew(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const JD={maxAttempts:5};class Zm{convertValue(e,t="none"){switch(fh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Ha(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new bp(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ag(e));default:return null}}convertTimestamp(e){const t=$a(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);bt(Fv(r));const o=new Nc(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||nr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Km(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class bw extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}class tu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zh(e)}set(e,t,r){this._verifyNotCommitted();const o=nu(e,this._firestore),u=Km(o.converter,t,r),d=fw(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,bn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=nu(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof Xa?Kh(this._dataReader,"WriteBatch.update",u._key,t,r,o):jm(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nu(e,this._firestore);return this._mutations=this._mutations.concat(new Eh(t._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nu(n,e){if((n=(0,Lt.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ai extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}function $E(n,e,t){n=Bt(n,An);const r=Bt(n.firestore,xn),o=Km(n.converter,e,t);return Tp(r,[fw(Zh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,bn.none())])}function Dw(n,e,t,...r){n=Bt(n,An);const o=Bt(n.firestore,xn),u=Zh(o);let d;return d="string"==typeof(e=(0,Lt.m9)(e))||e instanceof Xa?Kh(u,"updateDoc",n._key,e,t,r):jm(u,"updateDoc",n._key,e),Tp(o,[d.toMutation(n._key,bn.exists(!0))])}function zE(n,...e){var t,r,o;n=(0,Lt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Vm(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(Vm(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let w,C,A;if(n instanceof An)C=Bt(n.firestore,xn),A=Uc(n._key.path),w={next:O=>{e[d]&&e[d](Sp(C,n,O))},error:e[d+1],complete:e[d+2]};else{const O=Bt(n,Ur);C=Bt(O.firestore,xn),A=O._query;const V=new Ai(C);w={next:K=>{e[d]&&e[d](new El(C,V,O,K))},error:e[d+1],complete:e[d+2]},ZD(n._query)}return function(O,V,K,X){const xe=new wp(X),Fe=new sE(V,xe,K);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return R_(yield ud(O),Fe)})),()=>{xe.Rc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return N_(yield ud(O),Fe)}))}}(vr(C),A,m,w)}function Tp(n,e){return function(t,r){const o=new Cr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function GS(n,e,t){return bm.apply(this,arguments)}(yield rw(t),r,o)})),o.promise}(vr(n),e)}function Sp(n,e,t){const r=t.docs.get(e._key),o=new Ai(n);return new Il(n,o,e._key,r,new Yh(t.hasPendingWrites,t.fromCache),e.converter)}class WE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zh(e)}get(e){const t=nu(e,this._firestore),r=new bw(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new Cp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Cp(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=nu(e,this._firestore),u=Km(o.converter,t,r),d=fw(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=nu(e,this._firestore);let d;return d="string"==typeof(t=(0,Lt.m9)(t))||t instanceof Xa?Kh(this._dataReader,"Transaction.update",u._key,t,r,o):jm(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=nu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nu(e,this._firestore),r=new Ai(this._firestore);return super.get(e).then(o=>new Il(this._firestore,r,t._key,o._document,new Yh(!1,!1),t.converter))}}function Sw(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sT(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function oT(){if(!function LS(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lh=ji.SDK_VERSION,(0,ji._registerComponent)(new Vd.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new xn(new ev(t.getProvider("auth-internal")),new PS(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,ji.registerVersion)(Qy,"3.4.15",n),(0,ji.registerVersion)(Qy,"3.4.15","esm2017")}();class Qh{constructor(e){this._delegate=e}static fromBase64String(e){return oT(),new Qh(Io.fromBase64String(e))}static fromUint8Array(e){return sT(),new Qh(Io.fromUint8Array(e))}toBase64(){return oT(),this._delegate.toBase64()}toUint8Array(){return sT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Aw(n){return function aT(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class uT{enableIndexedDbPersistence(e,t){return function PD(n,e){cw(n=Bt(n,xn));const t=vr(n),r=n._freezeSettings(),o=new xm;return ME(t,o,new IE(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function FD(n){cw(n=Bt(n,xn));const e=vr(n),t=n._freezeSettings(),r=new xm;return ME(e,r,new EE(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function OE(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!ks.C())return Promise.resolve();const o=r+"main";yield ks.delete(o)}),function(r){return t.apply(this,arguments)})(r_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lT{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Tc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function MD(n,e,t,r={}){var o;const u=(n=Bt(n,Ep))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Tc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Vr.MOCK_USER;else{d=(0,Lt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vr(w)}n._authCredentials=new cC(new Xy(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function LD(n){return function TD(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield tw(n),t=yield nw(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),Ja(o)}(t)}))}(vr(n=Bt(n,xn)))}(this._delegate)}disableNetwork(){return function NE(n){return function bE(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield tw(n),t=yield nw(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const u=qe(o);u._u.add(0),yield Lh(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(vr(n=Bt(n,xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RE(n){return function(e){const t=new Cr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function vD(n,e){return H_.apply(this,arguments)}(yield rw(e),t)})),t.promise}(vr(n=Bt(n,xn)))}(this._delegate)}onSnapshotsInSync(e){return function qE(n,e){return function Si(n,e){const t=new wp(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ud(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ud(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(vr(n=Bt(n,xn)),Vm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bl(this,uw(this._delegate,e))}catch(t){throw Mi(t,"collection()","Firestore.collection()")}}doc(e){try{return new xi(this,qh(this._delegate,e))}catch(t){throw Mi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new si(this,function Lm(n,e){if(n=Bt(n,Ep),SE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ur(n,null,(t=e,new za(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Mi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ZE(n,e,t){n=Bt(n,xn);const r=Object.assign(Object.assign({},JD),t);return function(o){if(o.maxAttempts<1)throw new Me(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Gh(n,e,t){const r=new Cr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const o=yield(u=n,km(u).then(d=>d.datastore));var u;new qS(n.asyncQueue,o,t,e,r).run()})),r.promise}(vr(n),o=>e(new WE(n,o)),r)}(this._delegate,t=>e(new cT(this,t)))}batch(){return vr(this._delegate),new dT(new tu(this._delegate,e=>Tp(this._delegate,e)))}loadBundle(e){return function UD(n,e){const t=vr(n=Bt(n,xn)),r=new Wh;return function SD(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return Mm(w,C);if(w instanceof ArrayBuffer)return Mm(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new CD(w,d);var w}(t,um(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function Am(n,e,t){const r=qe(n);var o;(o=(0,ge.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(V,K){const X=qe(V),xe=qn(K.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",Fe=>X.Ns.getBundleMetadata(Fe,K.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(wm(w));const C=new pD(w,u.localStore,d.It);let A=yield d.wc();for(;A;){const V=yield C.Ou(A);V&&m._updateProgress(V),A=yield d.wc()}const O=yield C.complete();return yield ra(u,O.Bu,void 0),yield function(V,K){const X=qe(V);return X.persistence.runTransaction("Save bundle","readwrite",xe=>X.Ns.saveBundleMetadata(xe,K))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.$u)}catch(w){return Tc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield rw(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function BD(n,e){return function AD(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield $h(n),e)}))}(vr(n=Bt(n,xn)),e).then(t=>t?new Ur(n,null,t.query):null)}(this._delegate,e).then(t=>t?new si(this,t):null)}}class xw extends Zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qh(new Io(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xi.forKey(t,this.firestore,null)}}class cT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xw(e)}get(e){const t=ru(e);return this._delegate.get(t).then(r=>new bo(this._firestore,new Il(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=ru(e);return r?(Sw("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=ru(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=ru(e);return this._delegate.delete(t),this}}class dT{constructor(e){this._delegate=e}set(e,t,r){const o=ru(e);return r?(Sw("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=ru(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=ru(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ld{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ld.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new ld(e,new xw(e),t),o.set(t,u)),u}}ld.INSTANCES=new WeakMap;class xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xi(t,new An(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new xi(t,new An(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bl(this.firestore,uw(this._delegate,e))}catch(t){throw Mi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Lt.m9)(e))instanceof An&&OD(this._delegate,e)}set(e,t){t=Sw("DocumentReference.set",t);try{return t?$E(this._delegate,e,t):$E(this._delegate,e)}catch(r){throw Mi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Dw(this._delegate,e):Dw(this._delegate,e,t,...r)}catch(o){throw Mi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function JS(n){return Tp(Bt(n.firestore,xn),[new Eh(n._key,bn.none())])}(this._delegate)}onSnapshot(...e){const t=XE(e),r=Mw(e,o=>new bo(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return zE(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XD(n){n=Bt(n,An);const e=Bt(n.firestore,xn),t=vr(e),r=new Ai(e);return function CE(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,d){try{const m=yield function(w,C){const A=qe(w);return A.persistence.runTransaction("read document","readonly",O=>A.localDocuments.getDocument(O,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Uh(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield $h(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Il(e,r,n._key,o,new Yh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function QS(n){n=Bt(n,An);const e=Bt(n.firestore,xn);return DE(vr(e),n._key,{source:"server"}).then(t=>Sp(e,n,t))}(this._delegate):function Cw(n){n=Bt(n,An);const e=Bt(n.firestore,xn);return DE(vr(e),n._key).then(t=>Sp(e,n,t))}(this._delegate),t.then(r=>new bo(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xi(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function Mi(n,e,t){return n.message=n.message.replace(e,t),n}function XE(n){for(const e of n)if("object"==typeof e&&!Aw(e))return e;return{}}function Mw(n,e){var t,r;let o;return o=Aw(n[0])?n[0]:Aw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class bo{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LE(this._delegate,e._delegate)}}class Jh extends bo{data(e){const t=this._delegate.data(e);return function k0(n,e){n||Xe()}(void 0!==t),t}}class si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xw(e)}where(e,t,r){try{return new si(this.firestore,eu(this._delegate,function YS(n,e,t){const r=e,o=zm("where",n);return new VE(o,r,t)}(e,t,r)))}catch(o){throw Mi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new si(this.firestore,eu(this._delegate,function KD(n,e="asc"){const t=e,r=zm("orderBy",n);return new Eo(r,t)}(e,t)))}catch(r){throw Mi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new si(this.firestore,eu(this._delegate,function YD(n){return AE("limit",n),new Wm("limit",n,"F")}(e)))}catch(t){throw Mi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new si(this.firestore,eu(this._delegate,function Vs(n){return AE("limitToLast",n),new Wm("limitToLast",n,"L")}(e)))}catch(t){throw Mi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new si(this.firestore,eu(this._delegate,function vw(...n){return new UE("startAt",n,!0)}(...e)))}catch(t){throw Mi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new si(this.firestore,eu(this._delegate,function QD(...n){return new UE("startAfter",n,!1)}(...e)))}catch(t){throw Mi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new si(this.firestore,eu(this._delegate,function _w(...n){return new BE("endBefore",n,!1)}(...e)))}catch(t){throw Mi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new si(this.firestore,eu(this._delegate,function jE(...n){return new BE("endAt",n,!0)}(...e)))}catch(t){throw Mi(t,"endAt()","Query.endAt()")}}isEqual(e){return lw(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tT(n){n=Bt(n,Ur);const e=Bt(n.firestore,xn),t=vr(e),r=new Ai(e);return function TE(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,d){try{const m=yield sm(o,u,!0),w=new Im(u,m.Hi),C=w.ju(m.documents),A=w.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const w=Uh(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield $h(n),e,t);var r})),t.promise}(t,n._query).then(o=>new El(e,r,n,o))}(this._delegate):"server"===e?.source?function nT(n){n=Bt(n,Ur);const e=Bt(n.firestore,xn),t=vr(e),r=new Ai(e);return iw(t,n._query,{source:"server"}).then(o=>new El(e,r,n,o))}(this._delegate):function eT(n){n=Bt(n,Ur);const e=Bt(n.firestore,xn),t=vr(e),r=new Ai(e);return ZD(n._query),iw(t,n._query).then(o=>new El(e,r,n,o))}(this._delegate),t.then(r=>new Rw(this.firestore,new El(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XE(e),r=Mw(e,o=>new Rw(this.firestore,new El(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return zE(this._delegate,t,r)}withConverter(e){return new si(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}class Ow{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ow(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jh(this._firestore,r))})}isEqual(e){return LE(this._delegate,e._delegate)}}class bl extends si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xi(this.firestore,e):null}doc(e){try{return new xi(this.firestore,void 0===e?qh(this._delegate):qh(this._delegate,e))}catch(t){throw Mi(t,"doc()","CollectionReference.doc()")}}add(e){return function GE(n,e){const t=Bt(n.firestore,xn),r=qh(n),o=Km(n.converter,e);return Tp(t,[fw(Zh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xi(this.firestore,t))}isEqual(e){return OD(this._delegate,e._delegate)}withConverter(e){return new bl(this.firestore,this._delegate.withConverter(e?ld.getInstance(this.firestore,e):null))}}function ru(n){return Bt(n,An)}class Xh{constructor(...e){this._delegate=new Xa(...e)}static documentId(){return new Xh(rr.keyField().canonicalString())}isEqual(e){return(e=(0,Lt.m9)(e))instanceof Xa&&this._delegate._internalPath.isEqual(e._internalPath)}}class ef{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YE(){return new kE("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ef(e)}static delete(){const e=function KE(){return new Um("deleteField")}();return e._methodName="FieldValue.delete",new ef(e)}static arrayUnion(...e){const t=function QE(...n){return new ZS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ef(t)}static arrayRemove(...e){const t=function Ym(...n){return new Bm("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ef(t)}static increment(e){const t=function Qm(n){return new KS("increment",n)}(e);return t._methodName="FieldValue.increment",new ef(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tA={Firestore:lT,GeoPoint:bp,Timestamp:Fn,Blob:Qh,Transaction:cT,WriteBatch:dT,DocumentReference:xi,DocumentSnapshot:bo,Query:si,QueryDocumentSnapshot:Jh,QuerySnapshot:Rw,CollectionReference:bl,FieldPath:Xh,FieldValue:ef,setLogLevel:function eA(n){!function N0(n){el.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function rA(n){(function nA(n,e){n.INTERNAL.registerComponent(new Vd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},tA)))})(n,(e,t)=>new lT(e,t,new uT)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(Hu.Z);var ia=P(7579),hT=P(6451),Jm=P(5363),Xm=P(8421);function Br(n,e){return(0,kn.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,vn.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,Xm.Xf)(n(w,A)).subscribe(o=(0,vn.x)(r,O=>r.next(e?e(w,O,A,C++):O),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var eb=P(6063);class tb extends ia.x{constructor(e=1/0,t=1/0,r=eb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var nb=P(3099);function rb(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,nb.B)({connector:()=>new tb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const tf=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var iu=P(515);function ey(n){return n<=0?()=>iu.E:(0,kn.e)((e,t)=>{let r=0;e.subscribe((0,vn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Ap(n){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,vn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ty(n=pT){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,vn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pT(){return new tf}function su(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((o,u)=>n(o,u,r)):Ld.y,ey(1),t?Ap(e):ty(()=>new tf))}function gT(n,e){return(0,Yr.m)(e)?Br(()=>n,e):Br(()=>n)}var ib=P(9468);P(5867);const l=new Map,c={activated:!1,tokenObservers:[]},p={initialized:!1,enabled:!1};function y(n){return l.get(n)||c}function I(n,e){l.set(n,e)}function E(){return p}class Ne{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Lt.BH,yield function ze(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Lt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const tt=new Lt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ft(n){if(!y(n).activated)throw tt.create("use-before-activation",{appName:n.name})}function ou(n,e){return xp.apply(this,arguments)}function xp(){return xp=(0,ge.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const K=yield d.getHeartbeatsHeader();K&&(u["X-Firebase-Client"]=K)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(K){throw tt.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==w.status)throw tt.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(K){throw tt.create("fetch-parse-error",{originalErrorMessage:null===(o=K)||void 0===o?void 0:o.message})}const A=C.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw tt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const O=1e3*Number(A[1]),V=Date.now();return{token:C.token,expireTimeMillis:V+O,issuedAtTimeMillis:V}}),xp.apply(this,arguments)}function Pw(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const cd="firebase-app-check-store";let nf=null;function oA(){return nf||(nf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(tt.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(cd,{keyPath:"compositeKey"})}}catch(r){e(tt.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),nf)}function vT(){return vT=(0,ge.Z)(function*(n,e){const r=(yield oA()).transaction(cd,"readwrite"),u=r.objectStore(cd).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(tt.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),vT.apply(this,arguments)}const Vw=new Wo.Yd("@firebase/app-check");function cA(n,e){return(0,Lt.hl)()?function _O(n,e){return function aA(n,e){return vT.apply(this,arguments)}(function lA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dA(){return E().enabled}function hA(){return ET.apply(this,arguments)}function ET(){return ET=(0,ge.Z)(function*(){const n=E();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),ET.apply(this,arguments)}const DO={error:"UNKNOWN_ERROR"};function TO(n){return Lt.US.encodeString(JSON.stringify(n),!1)}function ab(n){return bT.apply(this,arguments)}function bT(){return bT=(0,ge.Z)(function*(n,e=!1){const t=n.app;ft(t);const r=y(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&ub(w)&&(o=w)}if(!e&&o&&ub(o))return{token:o.token};let m,d=!1;if(dA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ou(Pw(t,yield hA()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield cA(t,w),I(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Vw.warn(w.message):Vw.error(w),u=w}return o?(m={token:o.token},I(t,Object.assign(Object.assign({},r),{token:o})),yield cA(t,o)):m=AO(u),d&&pA(t,m),m}),bT.apply(this,arguments)}function DT(n,e){const t=y(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),I(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function fA(n){const{app:e}=n,t=y(e);let r=t.tokenRefresher;r||(r=function SO(n){const{app:e}=n;return new Ne((0,ge.Z)(function*(){let r;if(r=y(e).token?yield ab(n,!0):yield ab(n),r.error)throw r.error}),()=>!0,()=>{const t=y(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),I(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function pA(n,e){const t=y(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ub(n){return n.expireTimeMillis-Date.now()>0}function AO(n){return{token:TO(DO),error:n}}class xO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=y(this.app);for(const t of e)DT(this.app,t.next);return Promise.resolve()}}const EA="app-check-internal";!function $O(){(0,ji._registerComponent)(new Vd.wA("app-check",n=>function MO(n,e){return new xO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EA).initialize()})),(0,ji._registerComponent)(new Vd.wA(EA,n=>function OO(n){return{getToken:e=>ab(n,e),addTokenListener:e=>function CT(n,e,t,r){const{app:o}=n,u=y(o),d={next:t,error:r,type:e};if(I(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&ub(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),fA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>fA(n))}(n,"INTERNAL",e),removeTokenListener:e=>DT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ji.registerVersion)("@firebase/app-check","0.5.12")}();class xT{constructor(){return(0,pr.vb)("app-check")}}typeof window<"u"&&window;var CA=P(127);const DA=new h.OlP("angularfire2.auth.use-emulator"),TA=new h.OlP("angularfire2.auth.settings"),SA=new h.OlP("angularfire2.auth.tenant-id"),AA=new h.OlP("angularfire2.auth.langugage-code"),xA=new h.OlP("angularfire2.auth.use-device-language"),MA=new h.OlP("angularfire.auth.persistence"),OA=(n,e,t,r,o,u,d,m)=>(0,Bi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let cb=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,O,V,K){const X=new ia.x,xe=et(void 0).pipe((0,Jm.Q)(d.outsideAngular),Br(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2274)))),(0,pt.U)(()=>(0,Bi.on)(t,u,r)),(0,pt.U)(Fe=>OA(Fe,u,m,C,A,O,w,V)),rb({bufferSize:1,refCount:!1}));if(fr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{xe.pipe(su()).subscribe();const it=xe.pipe(Br(Tt=>Tt.getRedirectResult().then(Ot=>Ot,()=>null)),pr.iC,rb({bufferSize:1,refCount:!1})),It=xe.pipe(Br(Tt=>new Kr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>Tt.onAuthStateChanged(zt=>Ot.next(zt),zt=>Ot.error(zt),()=>Ot.complete()))})))),Rt=xe.pipe(Br(Tt=>new Kr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>Tt.onIdTokenChanged(zt=>Ot.next(zt),zt=>Ot.error(zt),()=>Ot.complete()))}))));this.authState=it.pipe(gT(It),(0,ib.R)(d.outsideAngular),(0,Jm.Q)(d.insideAngular)),this.user=it.pipe(gT(Rt),(0,ib.R)(d.outsideAngular),(0,Jm.Q)(d.insideAngular)),this.idToken=this.user.pipe(Br(Tt=>Tt?(0,Qt.D)(Tt.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Br(Tt=>Tt?(0,Qt.D)(Tt.getIdTokenResult()):et(null))),this.credential=(0,hT.T)(it,X,this.authState.pipe(Er(Tt=>!Tt))).pipe((0,pt.U)(Tt=>Tt?.user?Tt:null),(0,ib.R)(d.outsideAngular),(0,Jm.Q)(d.insideAngular))}return(0,Bi.pX)(this,xe,u,{spy:{apply:(Fe,it,It)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&It.then(Rt=>X.next(Rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bi.Dh),h.LFG(Bi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(pr.HU),h.LFG(DA,8),h.LFG(TA,8),h.LFG(SA,8),h.LFG(AA,8),h.LFG(xA,8),h.LFG(MA,8),h.LFG(xT,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KO=(()=>{class n{constructor(){CA.Z.registerVersion("angularfire",pr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[cb]}),n})();function RA(n,e){return function YO(n,e=vy.z){return new Kr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function OT(n,e){return RA(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function db(n,e){return OT(n,e).pipe(Pd(void 0),Fd(),(0,pt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function NA(n,e,t){return db(n,t).pipe(ju((r,o)=>function JO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function XO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return RT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return RT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function bf(n,e=Ld.y){return n=n??_y,(0,kn.e)((t,r)=>{let o,u=!0;t.subscribe((0,vn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,pt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function RT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function kA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=db(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Pd(void 0),Fd(),Er(([r,o])=>o.length>0||!r),(0,pt.U)(([r,o])=>o),pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ju((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kA(e);return NA(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pr.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(pr.iC)}add(e){return this.ref.add(e)}doc(e){return new FA(this.ref.doc(e),this.afs)}}class FA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=UA(r,t);return new PA(o,u,this.afs)}snapshotChanges(){return function QO(n,e){return RA(n,e).pipe(Pd(void 0),Fd(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(pr.iC)}}class eR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?db(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Er(t=>t.length>0),pr.iC):db(this.query,this.afs.schedulers.outsideAngular).pipe(pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ju((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kA(e);return NA(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),pr.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(pr.iC)}}const LA=new h.OlP("angularfire2.enableFirestorePersistence"),VA=new h.OlP("angularfire2.firestore.persistenceSettings"),tR=new h.OlP("angularfire2.firestore.settings"),nR=new h.OlP("angularfire2.firestore.use-emulator");function UA(n,e=(t=>t)){return{query:e(n),ref:n}}let NT=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,O,V,K,X,xe,Fe,it,It){this.schedulers=w;const Rt=(0,Bi.on)(t,m,r),Tt=A;O&&OA(Rt,m,V,X,xe,Fe,K,it),[this.firestore,this.persistenceEnabled$]=(0,Bi.cc)(`${Rt.name}.firestore`,"AngularFirestore",Rt.name,()=>{const Ot=m.runOutsideAngular(()=>Rt.firestore());if(u&&Ot.settings(u),Tt&&Ot.useEmulator(...Tt),o&&!fr(d)){const zt=()=>{try{return(0,Qt.D)(Ot.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(oi){return typeof console<"u"&&console.warn(oi),et(!1)}};return[Ot,m.runOutsideAngular(zt)]}return[Ot,et(!1)]},[u,Tt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=UA(o,r),m=this.schedulers.ngZone.run(()=>u);return new PA(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new eR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new FA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bi.Dh),h.LFG(Bi.xv,8),h.LFG(LA,8),h.LFG(tR,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(pr.HU),h.LFG(VA,8),h.LFG(nR,8),h.LFG(cb,8),h.LFG(DA,8),h.LFG(TA,8),h.LFG(SA,8),h.LFG(AA,8),h.LFG(xA,8),h.LFG(MA,8),h.LFG(xT,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rR=(()=>{class n{constructor(){CA.Z.registerVersion("angularfire",pr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:LA,useValue:!0},{provide:VA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[NT]}),n})();const{isArray:iR}=Array,{getPrototypeOf:sR,prototype:oR,keys:aR}=Object;function BA(n){if(1===n.length){const e=n[0];if(iR(e))return{args:e,keys:null};if(function uR(n){return n&&"object"==typeof n&&sR(n)===oR}(e)){const t=aR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:lR}=Array;function jA(n){return(0,pt.U)(e=>function cR(n,e){return lR(e)?n(...e):n(e)}(n,e))}function HA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let $A=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Mp=(()=>{class n extends $A{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Cl=new h.OlP("NgValueAccessor"),fR={provide:Cl,useExisting:(0,h.Gpc)(()=>Uw),multi:!0},gR=new h.OlP("CompositionEventMode");let Uw=(()=>{class n extends $A{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pR(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(gR,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([fR]),h.qOj]}),n})();const qi=new h.OlP("NgValidators"),sf=new h.OlP("NgAsyncValidators");function ex(n){return null!=n}function tx(n){return(0,h.QGY)(n)?(0,Qt.D)(n):n}function nx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function rx(n,e){return e.map(t=>t(n))}function ix(n){return n.map(e=>function vR(n){return!n.validate}(e)?e:t=>e.validate(t))}function kT(n){return null!=n?function sx(n){if(!n)return null;const e=n.filter(ex);return 0==e.length?null:function(t){return nx(rx(t,e))}}(ix(n)):null}function PT(n){return null!=n?function ox(n){if(!n)return null;const e=n.filter(ex);return 0==e.length?null:function(t){return function dR(...n){const e=(0,Ss.jO)(n),{args:t,keys:r}=BA(n),o=new Kr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let A=0;A<d;A++){let O=!1;(0,Xm.Xf)(t[A]).subscribe((0,vn.x)(u,V=>{O||(O=!0,C--),m[A]=V},()=>w--,void 0,()=>{(!w||!O)&&(C||u.next(r?HA(r,m):m),u.complete())}))}});return e?o.pipe(jA(e)):o}(rx(t,e).map(tx)).pipe((0,pt.U)(nx))}}(ix(n)):null}function ax(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FT(n){return n?Array.isArray(n)?n:[n]:[]}function fb(n,e){return Array.isArray(n)?n.includes(e):n===e}function cx(n,e){const t=FT(e);return FT(n).forEach(o=>{fb(t,o)||t.push(o)}),t}function dx(n,e){return FT(e).filter(t=>!fb(n,t))}class hx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fs extends hx{get formDirective(){return null}get path(){return null}}class af extends hx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LT=(()=>{class n extends fx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(af,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),VT=(()=>{class n extends fx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Bw="VALID",gb="INVALID",iy="PENDING",jw="DISABLED";function HT(n){return(mb(n)?n.validators:n)||null}function gx(n){return Array.isArray(n)?kT(n):n||null}function $T(n,e){return(mb(e)?e.asyncValidators:n)||null}function mx(n){return Array.isArray(n)?PT(n):n||null}function mb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _x{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gx(this._rawValidators),this._composedAsyncValidatorFn=mx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bw}get invalid(){return this.status===gb}get pending(){return this.status==iy}get disabled(){return this.status===jw}get enabled(){return this.status!==jw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=mx(e)}addValidators(e){this.setValidators(cx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dx(e,this._rawAsyncValidators))}hasValidator(e){return fb(this._rawValidators,e)}hasAsyncValidator(e){return fb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=iy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bw||this.status===iy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jw:Bw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=iy,this._hasOwnPendingAsyncValidator=!0;const t=tx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?jw:this.errors?gb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iy)?iy:this._anyControlsHaveStatus(gb)?gb:Bw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class GT extends _x{constructor(e,t,r){super(HT(t),$T(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function vx(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function yx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Hw(n,e){zT(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function SR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wx(n,e)})}(n,e),function xR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function TR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _b(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zT(n,e){const t=function ux(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ax(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function lx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ax(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();_b(e._rawValidators,o),_b(e._rawAsyncValidators,o)}function wx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const kR={provide:fs,useExisting:(0,h.Gpc)(()=>Gw)},$w=(()=>Promise.resolve(null))();let Gw=(()=>{class n extends fs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new GT({},kT(t),PT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$w.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Hw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$w.then(()=>{const r=this._findContainer(t.path),o=new GT({});(function Ix(n,e){zT(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$w.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function bx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qi,10),h.Y36(sf,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([kR]),h.qOj]}),n})();function Cx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dx(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Tx=class extends _x{constructor(e=null,t,r){super(HT(t),$T(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Dx(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Dx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},LR={provide:af,useExisting:(0,h.Gpc)(()=>Ib)},xx=(()=>Promise.resolve(null))();let Ib=(()=>{class n extends af{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new Tx,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function WT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Uw?t=u:function RR(n){return Object.getPrototypeOf(n.constructor)===Mp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);xx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function yb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fs,9),h.Y36(qi,10),h.Y36(sf,10),h.Y36(Cl,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([LR]),h.qOj,h.TTD]}),n})(),ZT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ox=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),aN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ox]}),n})(),uN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[aN]}),n})();class Co extends ia.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var cN=P(9672);function Kx(...n){const e=(0,Ss.yG)(n),t=(0,Ss.jO)(n),{args:r,keys:o}=BA(n);if(0===r.length)return(0,Qt.D)([],e);const u=new Kr.y(function dN(n,e,t=Ld.y){return r=>{Yx(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Yx(e,()=>{const C=(0,Qt.D)(n[w],e);let A=!1;C.subscribe((0,vn.x)(r,O=>{u[w]=O,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>HA(o,d):Ld.y));return t?u.pipe(jA(t)):u}function Yx(n,e,t){n?(0,cN.f)(t,n,e):e()}function Qx(n){return new Kr.y(e=>{(0,Xm.Xf)(n()).subscribe(e)})}var hN=P(9635);function zw(n,e){const t=(0,Yr.m)(n)?n:()=>n,r=o=>o.error(t());return new Kr.y(e?o=>e.schedule(r,0,o):r)}var Jx=P(727);function tS(){return(0,kn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xx extends Kr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jx.w0.EMPTY)}return e}refCount(){return tS()(this)}}var Wi=P(8505);function uf(n){return(0,kn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,vn.x)(t,void 0,void 0,d=>{u=(0,Xm.Xf)(n(d,uf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function nS(n){return n<=0?()=>iu.E:(0,kn.e)((e,t)=>{let r=[];e.subscribe((0,vn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function eM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((o,u)=>n(o,u,r)):Ld.y,nS(1),t?Ap(e):ty(()=>new tf))}function rS(n){return(0,kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",qw=Symbol("RouteTitle");class gN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sy(n){return new gN(n)}function mN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Dl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!tM(n[o],e[o]))return!1;return!0}function tM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function nM(n){return Array.prototype.concat.apply([],n)}function rM(n){return n.length>0?n[n.length-1]:null}function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lf(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):et(n)}const _N={exact:function oM(n,e,t){if(!Np(n.segments,e.segments)||!Eb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!oM(n.children[r],e.children[r],t))return!1;return!0},subset:aM},iM={exact:function wN(n,e){return Dl(n,e)},subset:function IN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tM(n[t],e[t]))},ignored:()=>!0};function sM(n,e,t){return _N[t.paths](n.root,e.root,t.matrixParams)&&iM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function aM(n,e,t){return uM(n,e,e.segments,t)}function uM(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Np(o,t)||e.hasChildren()||!Eb(o,t,r))}if(n.segments.length===t.length){if(!Np(n.segments,t)||!Eb(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!aM(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Np(n.segments,o)&&Eb(n.segments,o,r)&&n.children[jt])&&uM(n.children[jt],e,u,r)}}function Eb(n,e,t){return e.every((r,o)=>iM[t](n[o].parameters,r.parameters))}class Rp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sy(this.queryParams)),this._queryParamMap}toString(){return CN.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Oi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bb(this)}}class Ww{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sy(this.parameters)),this._parameterMap}toString(){return hM(this)}}function Np(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new sS},providedIn:"root"}),n})();class sS{parse(e){const t=new NN(e);return new Rp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zw(e.root,!0)}`,r=function SN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Cb(t)}=${Cb(o)}`).join("&"):`${Cb(t)}=${Cb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function DN(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const CN=new sS;function bb(n){return n.segments.map(e=>hM(e)).join("/")}function Zw(n,e){if(!n.hasChildren())return bb(n);if(e){const t=n.children[jt]?Zw(n.children[jt],!1):"",r=[];return Oi(n.children,(o,u)=>{u!==jt&&r.push(`${u}:${Zw(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bN(n,e){let t=[];return Oi(n.children,(r,o)=>{o===jt&&(t=t.concat(e(r,o)))}),Oi(n.children,(r,o)=>{o!==jt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===jt?[Zw(n.children[jt],!1)]:[`${o}:${Zw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${bb(n)}/${t[0]}`:`${bb(n)}/(${t.join("//")})`}}function cM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cb(n){return cM(n).replace(/%3B/gi,";")}function oS(n){return cM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Db(n){return decodeURIComponent(n)}function dM(n){return Db(n.replace(/\+/g,"%20"))}function hM(n){return`${oS(n.path)}${function TN(n){return Object.keys(n).map(e=>`;${oS(e)}=${oS(n[e])}`).join("")}(n.parameters)}`}const AN=/^[^\/()?;=#]+/;function Tb(n){const e=n.match(AN);return e?e[0]:""}const xN=/^[^=?&#]+/,ON=/^[^&#]+/;class NN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Gt(e,t)),r}parseSegment(){const e=Tb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Ww(Db(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Tb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Tb(this.remaining);o&&(r=o,this.capture(r))}e[Db(t)]=Db(r)}parseQueryParam(e){const t=function MN(n){const e=n.match(xN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function RN(n){const e=n.match(ON);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=dM(t),u=dM(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tb(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=jt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[jt]:new Gt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function aS(n){return n.segments.length>0?new Gt([],{[jt]:n}):n}function Sb(n){const e={};for(const r of Object.keys(n.children)){const u=Sb(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function kN(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function kp(n){return n instanceof Rp}function LN(n,e,t,r,o){if(0===t.length)return oy(e.root,e.root,e.root,r,o);const u=function gM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pM(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Oi(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new pM(t,e,r)}(t);return u.toRoot()?oy(e.root,e.root,new Gt([],{}),r,o):function d(w){const C=function UN(n,e,t,r){if(n.isAbsolute)return new ay(e.root,!0,0);if(-1===r)return new ay(t,t===e.root,0);return function mM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new ay(r,!1,o-u)}(t,r+(Kw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?Qw(C.segmentGroup,C.index,u.commands):lS(C.segmentGroup,C.index,u.commands);return oy(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Kw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yw(n){return"object"==typeof n&&null!=n&&n.outlets}function oy(n,e,t,r,o){let d,u={};r&&Oi(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:fM(n,e,t);const m=aS(Sb(d));return new Rp(m,u,o)}function fM(n,e,t){const r={};return Oi(n.children,(o,u)=>{r[u]=o===e?t:fM(o,e,t)}),new Gt(n.segments,r)}class pM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kw(r[0]))throw new h.vHH(4003,!1);const o=r.find(Yw);if(o&&o!==rM(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ay{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lS(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return Qw(n,e,t);const r=function jN(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Yw(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!vM(w,C,d))return u;r+=2}else{if(!vM(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Gt(n.segments.slice(0,r.pathIndex),{});return u.children[jt]=new Gt(n.segments.slice(r.pathIndex),n.children),Qw(u,0,o)}return r.match&&0===o.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?cS(n,e,t):r.match?Qw(n,0,o):cS(n,e,t)}function Qw(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function BN(n){return Yw(n[0])?n[0].outlets:{[jt]:n}}(t),o={};return Oi(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=lS(n.children[d],e,u))}),Oi(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Gt(n.segments,o)}}function cS(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Yw(u)){const w=HN(u.outlets);return new Gt(r,w)}if(0===o&&Kw(t[0])){r.push(new Ww(n.segments[e].path,yM(t[0]))),o++;continue}const d=Yw(u)?u.outlets[jt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Kw(m)?(r.push(new Ww(d,yM(m))),o+=2):(r.push(new Ww(d,{})),o++)}return new Gt(r,{})}function HN(n){const e={};return Oi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cS(new Gt([],{}),0,t))}),e}function yM(n){const e={};return Oi(n,(t,r)=>e[r]=`${t}`),e}function vM(n,e,t){return n==t.path&&Dl(e,t.parameters)}class dd{constructor(e,t){this.id=e,this.url=t}}class dS extends dd{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pp extends dd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ab extends dd{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _M extends dd{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $N extends dd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GN extends dd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zN extends dd{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qN extends dd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WN extends dd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class KN{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QN{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XN{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=fS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return fS(e,this._root).map(t=>t.value)}}function hS(n,e){if(n===e.value)return e;for(const t of e.children){const r=hS(n,t);if(r)return r}return null}function fS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=fS(n,t);if(r.length)return r.unshift(e),r}return[]}class hd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function uy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class EM extends IM{constructor(e,t){super(e),this.snapshot=t,pS(this,e)}toString(){return this.snapshot.toString()}}function bM(n,e){const t=function tk(n,e){const d=new xb([],{},{},"",{},jt,e,null,n.root,-1,{});return new DM("",new hd(d,[]))}(n,e),r=new Co([new Ww("",{})]),o=new Co({}),u=new Co({}),d=new Co({}),m=new Co(""),w=new fd(r,o,d,m,u,jt,e,t.root);return w.snapshot=t.root,new EM(new hd(w,[]),t)}class fd{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,pt.U)(C=>C[qw]))??et(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>sy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>sy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function CM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function nk(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xb{constructor(e,t,r,o,u,d,m,w,C,A,O,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[qw],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=V??A,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DM extends IM{constructor(e,t){super(t),this.url=e,pS(this,t)}toString(){return TM(this._root)}}function pS(n,e){e.value._routerState=n,e.children.forEach(t=>pS(n,t))}function TM(n){const e=n.children.length>0?` { ${n.children.map(TM).join(", ")} } `:"";return`${n.value}${e}`}function gS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Dl(e.params,t.params)||n.params.next(t.params),function yN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Dl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mS(n,e){const t=Dl(n.params,e.params)&&function EN(n,e){return Np(n,e)&&n.every((t,r)=>Dl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mS(n.parent,e.parent))}function Jw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function ik(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Jw(n,r,o);return Jw(n,r)})}(n,e,t);return new hd(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Jw(n,m)),d}}const r=function sk(n){return new fd(new Co(n.url),new Co(n.params),new Co(n.queryParams),new Co(n.fragment),new Co(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Jw(n,u));return new hd(r,o)}}const yS="ngNavigationCancelingError";function SM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=kp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=AM(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function AM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[yS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function xM(n){return MM(n)&&kp(n.url)}function MM(n){return n&&n[yS]}class ok{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xw,this.attachRef=null}}let Xw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ok,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mb=!1;let Ob=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=o||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Mb);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Mb);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Mb);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Mb);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new ak(t,m,o.injector);if(r&&function uk(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xw),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ak{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fd?this.route:e===Xw?this.childContexts:this.parent.get(e,t)}}let vS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Ob],encapsulation:2}),n})();function OM(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wS(n){const e=n.children&&n.children.map(wS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=vS),t}function sa(n){return n.outlet||jt}function RM(n,e){const t=n.filter(r=>sa(r)===e);return t.push(...n.filter(r=>sa(r)!==e)),t}function e0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fk{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),gS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=uy(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Oi(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=uy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=uy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=uy(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new XN(u.value.snapshot))}),e.children.length&&this.forwardEvent(new QN(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(gS(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),gS(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=e0(o.snapshot),w=m?.get(h._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class NM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Rb{constructor(e,t){this.component=e,this.route=t}}function pk(n,e,t){const r=n._root;return t0(r,e?e._root:null,t,[r.value])}function ly(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function t0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=uy(e);return n.children.forEach(d=>{(function mk(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function yk(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Np(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Np(n.url,e.url)||!Dl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mS(n,e)||!Dl(n.queryParams,e.queryParams);default:return!mS(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new NM(r)):(u.data=d.data,u._resolvedData=d._resolvedData),t0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Rb(m.outlet.component,d))}else d&&n0(e,m,o),o.canActivateChecks.push(new NM(r)),t0(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Oi(u,(d,m)=>n0(d,t.getContext(m),o)),o}function n0(n,e,t){const r=uy(n),o=n.value;Oi(r,(u,d)=>{n0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Rb(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function r0(n){return"function"==typeof n}function IS(n){return n instanceof tf||"EmptyError"===n?.name}const Nb=Symbol("INITIAL_VALUE");function cy(){return Br(n=>Kx(n.map(e=>e.pipe(ey(1),Pd(Nb)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===Nb)return Nb;if(!1===t||t instanceof Rp)return t}return!0}),Er(e=>e!==Nb),ey(1)))}function kM(n){return(0,hN.z)((0,Wi.b)(e=>{if(kp(e))throw SM(0,e)}),(0,pt.U)(e=>!0===e))}const ES={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PM(n,e,t,r,o){const u=bS(n,e,t);return u.matched?function kk(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?et(o.map(d=>{const m=ly(d,n);return lf(function bk(n){return n&&r0(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(cy(),kM()):et(!0)}(r=OM(e,r),e,t).pipe((0,pt.U)(d=>!0===d?u:{...ES})):et(u)}function bS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ES}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||mN)(t,n,e);if(!o)return{...ES};const u={};Oi(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function kb(n,e,t,r,o="corrected"){if(t.length>0&&function Lk(n,e,t){return t.some(r=>Pb(n,e,r)&&sa(r)!==jt)}(n,t,r)){const d=new Gt(e,function Fk(n,e,t,r){const o={};o[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&sa(u)!==jt){const d=new Gt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[sa(u)]=d}return o}(n,e,r,new Gt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Vk(n,e,t){return t.some(r=>Pb(n,e,r))}(n,t,r)){const d=new Gt(n.segments,function Pk(n,e,t,r,o,u){const d={};for(const m of r)if(Pb(n,t,m)&&!o[sa(m)]){const w=new Gt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[sa(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Gt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Pb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function FM(n,e,t,r){return!!(sa(n)===r||r!==jt&&Pb(e,t,n))&&("**"===n.path||bS(e,n,t).matched)}function LM(n,e,t){return 0===e.length&&!n.children[t]}const Fb=!1;class Lb{constructor(e){this.segmentGroup=e||null}}class VM{constructor(e){this.urlTree=e}}function s0(n){return zw(new Lb(n))}function UM(n){return zw(new VM(n))}class Hk{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=kb(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jt).pipe((0,pt.U)(u=>this.createUrlTree(Sb(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uf(u=>{if(u instanceof VM)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Lb?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jt).pipe((0,pt.U)(o=>this.createUrlTree(Sb(o),e.queryParams,e.fragment))).pipe(uf(o=>{throw o instanceof Lb?this.noMatchError(o):o}))}noMatchError(e){return new h.vHH(4002,Fb)}createUrlTree(e,t,r){const o=aS(e);return new Rp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Gt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Qt.D)(o).pipe(ss(u=>{const d=r.children[u],m=RM(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,pt.U)(w=>({segment:w,outlet:u})))}),ju((u,d)=>(u[d.outlet]=d.segment,u),{}),eM())}expandSegment(e,t,r,o,u,d){return(0,Qt.D)(r).pipe(ss(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(uf(C=>{if(C instanceof Lb)return et(null);throw C}))),su(m=>!!m),uf((m,w)=>{if(IS(m))return LM(t,o,u)?et(new Gt([],{})):s0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return FM(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):s0(t):s0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?UM(u):this.lineralizeSegments(r,u).pipe((0,on.z)(d=>{const m=new Gt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=bS(t,o,u);if(!m)return s0(t);const O=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?UM(O):this.lineralizeSegments(o,O).pipe((0,on.z)(V=>this.expandSegment(e,t,r,V.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=OM(r,e),r.loadChildren?(r._loadedRoutes?et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Gt(o,{})))):et(new Gt(o,{}))):PM(t,r,o,e).pipe(Br(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,on.z)(A=>{const O=A.injector??e,V=A.routes,{segmentGroup:K,slicedSegments:X}=kb(t,m,w,V),xe=new Gt(K.segments,K.children);if(0===X.length&&xe.hasChildren())return this.expandChildren(O,V,xe).pipe((0,pt.U)(Rt=>new Gt(m,Rt)));if(0===V.length&&0===X.length)return et(new Gt(m,{}));const Fe=sa(r)===u;return this.expandSegment(O,xe,V,X,Fe?jt:u,!0).pipe((0,pt.U)(It=>new Gt(m.concat(It.segments),It.children)))})):s0(t)))}getChildConfig(e,t,r){return t.children?et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?et({routes:t._loadedRoutes,injector:t._loadedInjector}):function Nk(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?et(!0):et(o.map(d=>{const m=ly(d,n);return lf(function _k(n){return n&&r0(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(cy(),kM())}(e,t,r).pipe((0,on.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Wi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Bk(n){return zw(AM(Fb,3))}())):et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return et(r);if(o.numberOfChildren>1||!o.children[jt])return zw(new h.vHH(4e3,Fb));o=o.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Rp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Oi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Oi(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Gt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,Fb);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Gk{}class Wk{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=kb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new xb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new hd(r,t),u=new DM(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=CM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Qt.D)(Object.keys(r.children)).pipe(ss(o=>{const u=r.children[o],d=RM(t,o);return this.processSegmentGroup(e,d,u,o)}),ju((o,u)=>o&&u?(o.push(...u),o):null),function fN(n,e=!1){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,vn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),Ap(null),eM(),(0,pt.U)(o=>{if(null===o)return null;const u=BM(o);return function Zk(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Qt.D)(t).pipe(ss(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),su(d=>!!d),uf(d=>{if(IS(d))return LM(r,o,u)?et([]):et(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!FM(t,r,o,u))return et(null);let d;if("**"===t.path){const m=o.length>0?rM(o).parameters:{},w=HM(r)+o.length;d=et({snapshot:new xb(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GM(t),sa(t),t.component??t._loadedComponent??null,t,jM(r),w,zM(t),w),consumedSegments:[],remainingSegments:[]})}else d=PM(r,t,o,e).pipe((0,pt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const O=HM(r)+w.length;return{snapshot:new xb(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GM(t),sa(t),t.component??t._loadedComponent??null,t,jM(r),O,zM(t),O),consumedSegments:w,remainingSegments:C}}));return d.pipe(Br(m=>{if(null===m)return et(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const O=t._loadedInjector??e,V=function Kk(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:X}=kb(r,C,A,V.filter(Fe=>void 0===Fe.redirectTo),this.relativeLinkResolution);if(0===X.length&&K.hasChildren())return this.processChildren(O,V,K).pipe((0,pt.U)(Fe=>null===Fe?null:[new hd(w,Fe)]));if(0===V.length&&0===X.length)return et([new hd(w,[])]);const xe=sa(t)===u;return this.processSegment(O,V,K,X,xe?jt:u).pipe((0,pt.U)(Fe=>null===Fe?null:[new hd(w,Fe)]))}))}}function Yk(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function BM(n){const e=[],t=new Set;for(const r of n){if(!Yk(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=BM(r.children);e.push(new hd(r.value,o))}return e.filter(r=>!t.has(r))}function jM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function HM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function GM(n){return n.data||{}}function zM(n){return n.resolve||{}}function qM(n){return"string"==typeof n.title||null===n.title}function CS(n){return Br(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,pt.U)(()=>e)):et(e)})}let WM=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[qw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(ZM)},providedIn:"root"}),n})(),ZM=(()=>{class n extends WM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iP{}class oP extends class sP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ub=new h.OlP("",{providedIn:"root",factory:()=>({})}),DS=new h.OlP("ROUTES");let TS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=lf(t.loadComponent()).pipe((0,Wi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),rS(()=>{this.componentLoaders.delete(t)})),o=new Xx(r,()=>new ia.x).pipe(tS());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=nM(w.get(DS,[],h.XFs.Self|h.XFs.Optional)));return{routes:C.map(wS),injector:w}}),rS(()=>{this.childrenLoaders.delete(r)})),d=new Xx(u,()=>new ia.x).pipe(tS());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return lf(t()).pipe((0,on.z)(r=>r instanceof h.YKP||Array.isArray(r)?et(r):(0,Qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uP{}class lP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function cP(n){throw n}function dP(n,e,t){return e.parse("/")}const hP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function YM(){const n=(0,h.f3M)(lM),e=(0,h.f3M)(Xw),t=(0,h.f3M)(Te),r=(0,h.f3M)(h.zs3),o=(0,h.f3M)(h.Sil),u=(0,h.f3M)(DS,{optional:!0})??[],d=(0,h.f3M)(Ub,{optional:!0})??{},m=(0,h.f3M)(ZM),w=(0,h.f3M)(WM,{optional:!0}),C=(0,h.f3M)(uP,{optional:!0}),A=(0,h.f3M)(iP,{optional:!0}),O=new _r(null,n,e,t,r,o,nM(u));return C&&(O.urlHandlingStrategy=C),A&&(O.routeReuseStrategy=A),O.titleStrategy=w??m,function pP(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,O),O}let _r=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ia.x,this.errorHandler=cP,this.malformedUriErrorHandler=dP,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>et(void 0),this.urlHandlingStrategy=new lP,this.routeReuseStrategy=new oP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(TS),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new KN(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new ZN(V)),this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const O=d.get(h.R0b);this.isNgZoneEnabled=O instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function vN(){return new Rp(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bM(this.currentUrlTree,this.rootComponentType),this.transitions=new Co({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Er(o=>0!==o.id),(0,pt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Br(o=>{let u=!1,d=!1;return et(o).pipe((0,Wi.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Br(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return QM(m.source)&&(this.browserUrlTree=m.extractedUrl),et(m).pipe(Br(O=>{const V=this.transitions.getValue();return r.next(new dS(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),V!==this.transitions.getValue()?iu.E:Promise.resolve(O)}),function $k(n,e,t,r){return Br(o=>function jk(n,e,t,r,o){return new Hk(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,pt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wi.b)(O=>{this.currentNavigation={...this.currentNavigation,finalUrl:O.urlAfterRedirects},o.urlAfterRedirects=O.urlAfterRedirects}),function Jk(n,e,t,r,o,u){return(0,on.z)(d=>function qk(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Wk(n,e,t,r,o,d,m,u).recognize().pipe(Br(w=>null===w?function zk(n){return new Kr.y(e=>e.error(n))}(new Gk):et(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,pt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wi.b)(O=>{if(o.targetSnapshot=O.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(K,O)}this.browserUrlTree=O.urlAfterRedirects}const V=new $N(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:K,source:X,restoredState:xe,extras:Fe}=m,it=new dS(V,this.serializeUrl(K),X,xe);r.next(it);const It=bM(K,this.rootComponentType).snapshot;return et(o={...m,targetSnapshot:It,urlAfterRedirects:K,extras:{...Fe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),iu.E}),(0,Wi.b)(m=>{const w=new GN(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,pt.U)(m=>o={...m,guards:pk(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function Dk(n,e){return(0,on.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?et({...t,guardsResult:!0}):function Tk(n,e,t,r){return(0,Qt.D)(n).pipe((0,on.z)(o=>function Rk(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(m=>{const w=e0(e)??o,C=ly(m,w);return lf(function Ek(n){return n&&r0(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(su())})).pipe(cy()):et(!0)}(o.component,o.route,t,e,r)),su(o=>!0!==o,!0))}(d,r,o,n).pipe((0,on.z)(m=>m&&function vk(n){return"boolean"==typeof n}(m)?function Sk(n,e,t,r){return(0,Qt.D)(e).pipe(ss(o=>Ra(function xk(n,e){return null!==n&&e&&e(new YN(n)),et(!0)}(o.route.parent,r),function Ak(n,e){return null!==n&&e&&e(new JN(n)),et(!0)}(o.route,r),function Ok(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function gk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Qx(()=>et(d.guards.map(w=>{const C=e0(d.node)??t,A=ly(w,C);return lf(function Ik(n){return n&&r0(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(su())})).pipe(cy())));return et(u).pipe(cy())}(n,o.path,t),function Mk(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const o=r.map(u=>Qx(()=>{const d=e0(e)??t,m=ly(u,d);return lf(function wk(n){return n&&r0(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(su())}));return et(o).pipe(cy())}(n,o.route,t))),su(o=>!0!==o,!0))}(r,u,n,e):et(m)),(0,pt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Wi.b)(m=>{if(o.guardsResult=m.guardsResult,kp(m.guardsResult))throw SM(0,m.guardsResult);const w=new zN(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Er(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),CS(m=>{if(m.guards.canActivateChecks.length)return et(m).pipe((0,Wi.b)(w=>{const C=new qN(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Br(w=>{let C=!1;return et(w).pipe(function Xk(n,e){return(0,on.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return et(t);let u=0;return(0,Qt.D)(o).pipe(ss(d=>function eP(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!qM(o)&&(u[qw]=o.title),function tP(n,e,t,r){const o=function nP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return et({});const u={};return(0,Qt.D)(o).pipe((0,on.z)(d=>function rP(n,e,t,r){const o=e0(e)??r,u=ly(n,o);return lf(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(su(),(0,Wi.b)(m=>{u[d]=m}))),nS(1),function pN(n){return(0,pt.U)(()=>n)}(u),uf(d=>IS(d)?iu.E:zw(d)))}(u,n,e,r).pipe((0,pt.U)(d=>(n._resolvedData=d,n.data=CM(n,t).resolve,o&&qM(o)&&(n.data[qw]=o.title),null)))}(d.route,r,n,e)),(0,Wi.b)(()=>u++),nS(1),(0,on.z)(d=>u===o.length?et(t):iu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wi.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Wi.b)(w=>{const C=new WN(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),CS(m=>{const w=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,Wi.b)(O=>{C.component=O}),(0,pt.U)(()=>{})));for(const O of C.children)A.push(...w(O));return A};return Kx(w(m.targetSnapshot.root)).pipe(Ap(),ey(1))}),CS(()=>this.afterPreactivation()),(0,pt.U)(m=>{const w=function rk(n,e,t){const r=Jw(n,e._root,t?t._root:void 0);return new EM(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,Wi.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new fk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Wi.b)({next(){u=!0},complete(){u=!0}}),rS(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),uf(m=>{if(d=!0,MM(m)){xM(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Ab(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),xM(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QM(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new _M(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return iu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(wS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let O=null;switch(m){case"merge":O={...this.currentUrlTree.queryParams,...u};break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),LN(C,this.currentUrlTree,t,O,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=kp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function gP(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...hP}:!1===r?{...fP}:r,kp(t))return sM(this.currentUrlTree,t,o);const u=this.parseUrl(t);return sM(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise((V,K)=>{m=V,w=K});const A=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),O=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):O=0,this.setTransition({id:A,targetPageId:O,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Ab(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return YM()},providedIn:"root"}),n})();function QM(n){return"imperative"!==n}let SS=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ia.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_r),h.Y36(fd),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),dy=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ia.x,this.subscription=t.events.subscribe(u=>{u instanceof Pp&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_r),h.Y36(fd),h.Y36(ye))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),AS=(()=>{class n{constructor(t,r,o,u,d,m){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof Pp&&this.update()})}ngAfterContentInit(){et(this.links.changes,this.linksWithHrefs.changes,et(null)).pipe((0,Bu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Qt.D)(t).pipe((0,Bu.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function mP(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_r),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(SS,8),h.Y36(dy,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(h.Suo(o,SS,5),h.Suo(o,dy,5)),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u),h.iGM(u=h.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class JM{}let yP=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Er(t=>t instanceof Pp),ss(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Qt.D)(o).pipe((0,Bu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):et(null);const u=o.pipe((0,on.z)(d=>null===d?et(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,Qt.D)([u,d]).pipe((0,Bu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_r),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(JM),h.LFG(TS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xS=new h.OlP("");let XM=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new wM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function hy(n,e){return{\u0275kind:n,\u0275providers:e}}function MS(n){return[{provide:DS,multi:!0,useValue:n}]}function tO(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(_r),o=n.get(nO);1===n.get(OS)&&r.initialNavigation(),n.get(rO,null,h.XFs.Optional)?.setUpPreloading(),n.get(xS,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const nO=new h.OlP("",{factory:()=>new ia.x}),OS=new h.OlP("",{providedIn:"root",factory:()=>1});const rO=new h.OlP("");function IP(n){return hy(0,[{provide:rO,useExisting:yP},{provide:JM,useExisting:n}])}const iO=new h.OlP("ROUTER_FORROOT_GUARD"),EP=[Te,{provide:lM,useClass:sS},{provide:_r,useFactory:YM},Xw,{provide:fd,useFactory:function eO(n){return n.routerState.root},deps:[_r]},TS];function bP(){return new h.PXZ("Router",_r)}let sO=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[EP,[],MS(t),{provide:iO,useFactory:SP,deps:[[_r,new h.FiY,new h.tp0]]},{provide:Ub,useValue:r||{}},r?.useHash?{provide:ye,useClass:nt}:{provide:ye,useClass:Ze},{provide:xS,useFactory:()=>{const n=(0,h.f3M)(_r),e=(0,h.f3M)(du),t=(0,h.f3M)(Ub);return t.scrollOffset&&e.setOffset(t.scrollOffset),new XM(n,e,t)}},r?.preloadingStrategy?IP(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:bP},r?.initialNavigation?AP(r):[],[{provide:oO,useFactory:tO},{provide:h.tb,multi:!0,useExisting:oO}]]}}static forChild(t){return{ngModule:n,providers:[MS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(iO,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vS]}),n})();function SP(n){return"guarded"}function AP(n){return["disabled"===n.initialNavigation?hy(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(_r);return()=>{e.setUpLocationChangeListener()}}},{provide:OS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hy(2,[{provide:OS,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(_r),m=e.get(nO);(function o(u){e.get(_r).events.pipe(Er(m=>m instanceof Pp||m instanceof Ab||m instanceof _M),(0,pt.U)(m=>m instanceof Pp||m instanceof Ab&&(0===m.code||1===m.code)&&null),Er(m=>null!==m),ey(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?et(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const oO=new h.OlP("");class jr{constructor(e,t="",r="",o="",u="",d=null,m=!1){this._id=e,this.title=t,this.description=r,this.author=o,this.imgUrl=u,this.rating=d,this.isStarred=m}}let RS=(()=>{class n{constructor(){}setId(){var t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let u=0;u<10;u++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}generateRandom(t=100){let r=Math.random()*t;return console.log(r),r=Math.floor(r),r}store(t,r){return localStorage[t]=JSON.stringify(r),r}load(t){var r=localStorage[t]||"null";return JSON.parse(r)}refresh(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NS=(()=>{class n{constructor(t){this.UtilService=t,this._BOOKdb=[],this.KEY="books",this.books=[],this._books$=new Co([]),this.books$=this._books$.asObservable()}mockDB(){this._BOOKdb=this.UtilService.load(this.KEY)||this.UtilService.store(this.KEY,[new jr("5a56640269f443a5d64b32ca","The Lightning Thief","Percy Jackson is a good kid, but he can't seem to focus on his schoolwork or control his temper. And lately, being away at boarding school is only getting worse - Percy could have sworn his pre-algebra teacher turned into a monster and tried to kill him. When Percy's mom finds out, she knows it's time that he knew the truth about where he came from, and that he go to the one place he'll be safe. She sends Percy to Camp Half Blood, a summer camp for demigods (on Long Island), where he learns that the father he never knew is Poseidon, God of the Sea. Soon a mystery unfolds and together with his friends\u2014one a satyr and the other the demigod daughter of Athena - Percy sets out on a quest across the United States to reach the gates of the Underworld (located in a recording studio in Hollywood) and prevent a catastrophic war between the gods.","Rick Riordan","1.png"),new jr("5a5664025f6ae9aa24a99fde","The Bad Beginning","Dear Reader, I'm sorry to say that the book you are holding in your hands is extremely unpleasant. It tells an unhappy tale about three very unlucky children. Even though they are charming and clever, the Baudelaire siblings lead lives filled with misery and woe. From the very first page of this book when the children are at the beach and receive terrible news, continuing on through the entire story, disaster lurks at their heels. One might say they are magnets for misfortune.In this short book alone, the three youngsters encounter a greedy and repulsive villain, itchy clothing, a disastrous fire, a plot to steal their fortune, and cold porridge for breakfast. It is my sad duty to write down these unpleasant tales, but there is nothing stopping you from putting this book down at once and reading something happy, if you prefer that sort of thing. With all due respect Lemony Snicket","Lemony Snicket","2.png"),new jr("5a56640252d6acddd183d319","Minno","It isn't easy being thirteen ... and being raised by your grandfather ... and having a name like Minno ... and then having to journey through a strange land. But Minno is doing the best she can. For all her young life Minno believed her parents were dead. Then she learns they're alive, but they're in grave danger. Her friend Hailey thought she was having a sleepover at her friend's house. Now she's Minno's ally and partner on an incredible quest. Together the girls embark on the adventure of a lifetime, where they face a veritable menagerie of strange creatures, both friendly and unfriendly to their cause. Oh, yea, then there's one evil high minister Craveaux, who must stop Minno while he steals all the magic in the kingdom for his own sinister purposes. Minno has to save her parents, and along the way discover who she really is.","James Barlog","3.png"),new jr("5a566402ed1cf349f0b47b4d","Amanda Lester and the Pink Sugar Conspiracy","Twelve-year-old Amanda Lester wouldn't be caught dead going into the family business. Just because she's related to Inspector G. Lestrade, that bumbler who sometimes worked with master sleuth Sherlock Holmes, doesn't mean she should become a detective and give up her dream of becoming a filmmaker. Unfortunately, her plans are in jeopardy. Her latest project with the Stick Dog Filmmakers Club and Production Company isn't coming together, and her control freak tendencies have driven away all her actors. If she doesn't make a winning film soon, her parents will insist that she go into the L.A.P.D. young cadets training program, and her budding career will be over. So when Herb and Lila Lester suddenly send her to a secret English school for the descendants of famous detectives, Amanda resists-until she and her new friends notice drops of blood and weird pink substances in odd places. Are these strange happenings clues to a real mystery or simply part of the elaborate class project the teachers assign every year? The answer comes all too soon. When Amanda's father disappears and the school's cook is found dead with her head in a bag of sugar, the kids are certain that crimes are taking place. Now Amanda must embrace her destiny and uncover the truth. The only snag is that arch-villain Blixus Moriarty, a descendant of Holmes's nemesis Professor James Moriarty, might be involved, and he doesn't like nosy little girls interfering in his business.","Paula Berinstein","4.png"),new jr("5a566402abce24c6bfe4699d","The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr("5a566402a6499c1d4da9220a","School of Fear","With very few options left, the parents of these four twelve year-olds send them to the highly elusive and exclusive School of Fear to help them overcome their phobias. But when their peculiar teacher, Mrs. Wellington, and her unconventional teaching methods turn out to be more frightening than even their fears, the foursome realize that this just may be the scariest summer of their lives.","Gitty Daneshvari, Emma Walton Hamilton","6.png"),new jr("5a566402f90ae30e97f990db","Artemis Fowl","Twelve-year-old Artemis Fowl is a millionaire, a genius, and above all, a criminal mastermind. But even Artemis doesn't know what he's taken on when he kidnaps a fairy, Captain Holly Short of the LEPrecon Unit. These aren't the fairies of bedtime stories\u2014they're dangerous! Full of unexpected twists and turns, Artemis Fowl is a riveting, magical adventure.","Eoin Colfer","7.png"),new jr(this.UtilService.setId(),"A Suitable Boy","Vikram Seth's novel is, at its core, a love story: Lata and her mother, Mrs. Rupa Mehra, are both trying to find\u2014through love or through exacting maternal appraisal\u2014a suitable boy for Lata to marry. Set in the early 1950s, in an India newly independent and struggling through a time of crisis, A Suitable Boy takes us into the richly imagined world of four large extended families and spins a compulsively readable tale of their lives and loves. A sweeping panoramic portrait of a complex, multiethnic society in flux, A Suitable Boy remains the story of ordinary people caught up in a web of love and ambition, humor and sadness, prejudice and reconciliation, the most delicate social etiquette and the most appalling violence.","Vikram Seth","8.png"),new jr(this.UtilService.setId(),"Infernal Devices","HE INHERITED A WATCHMAKER'S STORE - AND A WHOLE HEAP OF TROUBLE. But idle sometime-musician George has little talent for clockwork. And when a shadowy figure tries to steal an old device from the premises, George finds himself embroiled in a mystery of time travel, music and sexual intrigue. A genuine lost classic, a steampunk original whose time has come.","K.W. Jeter","9.png"),new jr(this.UtilService.setId(),"The Reapers are the Angels","Zombies have infested a fallen America. A young girl named Temple is on the run. Haunted by her past and pursued by a killer, Temple is surrounded by death and danger, hoping to be set free. For twenty-five years, civilization has survived in meager enclaves, guarded against a plague of the dead. Temple wanders this blighted landscape, keeping to herself - and keeping her demons inside. She can't remember a time before the zombies, but she does remember an old man who took her in and the younger brother she cared for until the tragedy that set her on a personal journey toward redemption. Moving back and forth between the insulated remnants of society and the brutal frontier beyond, Temple must decide where ultimately to make a home and find the salvation she seeks.","Alden Bell","10.png"),new jr(this.UtilService.setId(),"How to Fall Out of Love Madly","Joy and Annie are friends and roommates whose thirtysomething existences aren't exactly what they'd imagined for themselves. Struggling to make ends meet, they decide to rent their extra bedroom to Theo, who charms Joy with his salt-and-pepper hair and adoration of their one-eyed cat. When Annie goes to live with her boyfriend, Theo and Joy settle into a comfortable domesticity. Then Theo brings home Celine, the girlfriend he's never mentioned and who is possibly the most stunning woman Joy has ever seen. Joy resolves to do whatever it takes to nurture the bond she and Theo have forged. Anything Celine might deny him, Joy will grant. Distracted by her need to please Theo, Joy fails to see that Celine's beauty doesn't protect her from her own insecurities. Celine is so haunted by an event in her past that she can't access the confidence she yearns to exude.","Jana Casale","11.png"),new jr(this.UtilService.setId(),"Sacrificio","Set in Cuba in 1998, Sacrificio is a triumphant and mesmeric work of violence, loss, and identity, following a group of young HIV-positive counterrevolutionaries who seek to overthrow the Castro government. Rafa, an Afro-Cuban orphan, moves to Havana with nothing to his name and falls into a job at a caf\xe9. He is soon drawn into a web of bizarre, ever-shifting entanglements with his boss\u2019s son, the charismatic Renato, leader of the counterrevolutionary group \u201cLos Injected Ones,\u201d which is planning a violent overthrow of the Castro government during Pope John Paul II's upcoming visit.","Ernesto Mestre-Reed","12.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png"),new jr(this.UtilService.setId(),"The Maze of Bones","When their beloved aunt--matriarch of the world's most powerful family--dies, orphaned siblings Amy and Dan Cahill compete with less honorable Cahill descendants in a race around the world to find cryptic clues to a mysterious fortune. Book includes game cards which the reader may use to play an online version of the treasure hunt.","Rick Riordan","5.png")])}loadBooks(){this.mockDB(),this.books=this._BOOKdb,this._books$.next(this.books)}getById(t){const r=this.books.find(o=>o._id===t);return r?et({...r}):et()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(RS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MP=function(){return{"limit-txt":!0}};let OP=(()=>{class n{constructor(t,r){this.route=t,this.router=r}details(){this.router.navigate([this.book._id],{relativeTo:this.route})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fd),h.Y36(_r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-preview"]],inputs:{book:"book"},decls:15,vars:6,consts:[[1,"flex","book-card"],[3,"src"],[1,"info"],[1,"details-title",3,"click"],[3,"ngClass"],[1,"read-more",3,"click"],[1,"small-title","smaller"]],template:function(t,r){1&t&&(h.TgZ(0,"li",0),h._UZ(1,"img",1),h.TgZ(2,"section",2)(3,"h3",3),h.NdJ("click",function(){return r.details()}),h._uU(4),h.qZA(),h.TgZ(5,"h5"),h._uU(6),h.qZA(),h.TgZ(7,"p",4),h._uU(8),h.qZA(),h.TgZ(9,"span",5),h.NdJ("click",function(){return r.details()}),h._uU(10,"... Read More"),h.qZA(),h.TgZ(11,"p"),h._uU(12,"\u2b50\u2b50\u2b50\u2b50\u2b50 "),h.TgZ(13,"span",6),h._uU(14,"4.29 avg rating - 387 ratings"),h.qZA()()()()),2&t&&(h.xp6(1),h.Q6J("src","assets/img/"+r.book.imgUrl,h.LSH),h.xp6(3),h.Oqu(r.book.title),h.xp6(2),h.Oqu(r.book.author),h.xp6(1),h.Q6J("ngClass",h.DdM(5,MP)),h.xp6(1),h.Oqu(r.book.description))},dependencies:[tn],styles:['.book-card[_ngcontent-%COMP%]{padding:1rem;overflow:hidden;box-shadow:0 -1px #a29f9f5e;gap:1rem;max-width:625px}.book-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:120px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.book-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden}.book-card[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%], .book-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]{align-self:flex-start;cursor:pointer}.book-card[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]:hover, .book-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]:hover{text-decoration:underline}.limit-txt[_ngcontent-%COMP%]{max-height:40px}.limit-txt[_ngcontent-%COMP%]:after{content:"Read More"}']}),n})();function RP(n,e){1&n&&h._UZ(0,"book-preview",3),2&n&&h.Q6J("book",e.$implicit)}let NP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-list"]],inputs:{books:"books"},decls:3,vars:1,consts:[[1,"narrow-container","book-list-wrapper"],[1,"clean-list","book-list"],[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"ul",1),h.YNc(2,RP,1,1,"book-preview",2),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("ngForOf",r.books))},dependencies:[vs,OP],styles:[".book-list-wrapper[_ngcontent-%COMP%]   .book-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;margin-top:50px;background-color:inherit}@media (max-width: 1250px){.book-list-wrapper[_ngcontent-%COMP%]   .book-list[_ngcontent-%COMP%]{grid-template-columns:100%}}@media (max-width: 900px){.book-list-wrapper[_ngcontent-%COMP%]{padding-inline:0}}"]}),n})(),kP=(()=>{class n{constructor(t){this.BookService=t}ngOnInit(){this.BookService.loadBooks(),this.books$=this.BookService.books$}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(NS))},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-app"]],decls:4,vars:3,consts:[[1,"container","books-container"],[3,"books"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0),h._UZ(1,"book-list",1),h.ALo(2,"async"),h._UZ(3,"router-outlet"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("books",h.lcZ(2,1,r.books$)))},dependencies:[Ob,NP,uu],styles:[".books-container[_ngcontent-%COMP%]{height:100%;background-color:inherit}"]}),n})(),PP=(()=>{class n{constructor(t,r){this.http=t,this.UtilService=r}getQuotesFromApi(){return this.http.get("https://goquotes-api.herokuapp.com/api/v1/random?count=300").pipe((0,pt.U)(t=>t.quotes),(0,pt.U)(t=>t[this.UtilService.generateRandom(t.length)]))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ro),h.LFG(RS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-hero"]],decls:5,vars:0,consts:[[1,"app-hero"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h1")(2,"span"),h._uU(3,"Find your new "),h.qZA(),h._uU(4,"favorite book."),h.qZA()())},styles:[".app-hero[_ngcontent-%COMP%]{background-image:url(https://wallpaperaccess.com/full/934061.jpg);background-size:cover;background-repeat:no-repeat;background-position-y:-300px;width:100%;height:300px;display:flex;justify-content:center;align-items:center}.app-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:800;font-size:3.5rem;max-width:350px;line-height:60px;text-shadow:1px 1px 10px rgba(233,227,227,.608);color:#7a1d1d}.app-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fceeee;text-shadow:1px 1px 10px rgba(249,172,172,.808)}@media (max-width: 960px){.app-hero[_ngcontent-%COMP%]{background-position-y:0}}"]}),n})(),LP=(()=>{class n{constructor(t){this.router=t}goToBooks(){console.log("hi"),this.router.navigateByUrl("/explore")}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["explore-btn"]],decls:8,vars:0,consts:[[1,"animated-arrow",3,"click"],[1,"explore-btn","-left"],[1,"shaft"],[1,"main"],[1,"text"],[1,"explore-btn","-right"]],template:function(t,r){1&t&&(h.TgZ(0,"button",0),h.NdJ("click",function(){return r.goToBooks()}),h.TgZ(1,"span",1),h._UZ(2,"span",2),h.qZA(),h.TgZ(3,"span",3)(4,"span",4),h._uU(5," Explore More "),h.qZA(),h.TgZ(6,"span",5),h._UZ(7,"span",2),h.qZA()()())},styles:['.explore-btn[_ngcontent-%COMP%]{width:1px;transition:all .2s}.explore-btn.-left[_ngcontent-%COMP%]{position:absolute;top:60%;left:0}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:0;background-color:#000}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:0;background-color:#000}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(0)}.explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(0)}.explore-btn.-right[_ngcontent-%COMP%]{top:3px}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:1px;transition-delay:.2s}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:8px;transition-delay:.3s;transition:all .5s}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(40deg)}.explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(-40deg)}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{background-color:#000;display:block;height:1px;position:relative;transition:all .2s;transition-delay:0;will-change:transform}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{background-color:#000;content:"";display:block;height:1px;position:absolute;top:0;right:0;transition:all .2s;transition-delay:0}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform-origin:top right}.explore-btn[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform-origin:bottom right}.animated-arrow[_ngcontent-%COMP%]{display:inline-block;color:#000;font-size:1.25em;text-decoration:none;position:relative;transition:all .2s;font-family:inherit;cursor:pointer}.animated-arrow[_ngcontent-%COMP%]:hover{color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:30px;transition-delay:.1s;background-color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:8px;transition-delay:.1s;background-color:#2e2929c3}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(40deg)}.animated-arrow[_ngcontent-%COMP%]:hover > .explore-btn.-left[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(-40deg)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%]{transform:translate(17px);transform:translate(30px)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]{width:0;transform:translate(200%);transition-delay:0}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before, .animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{width:0;transition-delay:0;transition:all .1s}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:before{transform:rotate(0)}.animated-arrow[_ngcontent-%COMP%]:hover > .main[_ngcontent-%COMP%] > .explore-btn.-right[_ngcontent-%COMP%] > .shaft[_ngcontent-%COMP%]:after{transform:rotate(0)}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%]{display:flex;align-items:center;transition:all .2s}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{margin:0 16px 0 0;line-height:1}.animated-arrow[_ngcontent-%COMP%] > .main[_ngcontent-%COMP%] > .explore-btn[_ngcontent-%COMP%]{position:relative}']}),n})();function VP(n,e){1&n&&h._UZ(0,"img",4),2&n&&h.Q6J("src","assets/img/"+e.$implicit.imgUrl,h.LSH)}function UP(n,e){1&n&&h._UZ(0,"img",4),2&n&&h.Q6J("src","assets/img/"+e.$implicit.imgUrl,h.LSH)}let BP=(()=>{class n{constructor(){this.fantasyBooks=[],this.thrillerBooks=[]}ngOnInit(){!this.books||(this.fantasyBooks=this.books.slice(0,6),this.thrillerBooks=this.books.slice(6,12))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["discover"]],inputs:{books:"books"},decls:14,vars:2,consts:[[1,"flex","column","discover-container"],[1,"covers-container","flex","align-center"],[1,"cover-imgs"],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"h4"),h._uU(2,"Browse more fantasy books"),h.qZA(),h.TgZ(3,"div",1)(4,"div",2),h.YNc(5,VP,1,1,"img",3),h.qZA(),h._UZ(6,"explore-btn"),h.qZA()(),h.TgZ(7,"section",0)(8,"h4"),h._uU(9,"Browse more thriller books"),h.qZA(),h.TgZ(10,"div",1)(11,"div",2),h.YNc(12,UP,1,1,"img",3),h.qZA(),h._UZ(13,"explore-btn"),h.qZA()()),2&t&&(h.xp6(5),h.Q6J("ngForOf",r.fantasyBooks),h.xp6(7),h.Q6J("ngForOf",r.thrillerBooks))},dependencies:[vs,LP],styles:[".discover-container[_ngcontent-%COMP%]{margin-block-start:1rem;gap:3px;background-color:#ffedd9a2;padding:1rem;outline:1.5px solid rgba(0,0,0,.078);gap:10px}.discover-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px}.discover-container[_ngcontent-%COMP%]   .covers-container[_ngcontent-%COMP%]{gap:5px}.discover-container[_ngcontent-%COMP%]   .cover-imgs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}"]}),n})();const jP=function(n){return{fade:n}};function HP(n,e){if(1&n&&(h.TgZ(0,"section",8)(1,"div",9)(2,"h2"),h._uU(3),h.qZA(),h.TgZ(4,"span",10),h._uU(5),h.qZA()()()),2&n){const t=h.oxw();h.Q6J("ngClass",h.VKq(3,jP,t.isFade)),h.xp6(3),h.Oqu(t.quote.text),h.xp6(2),h.Oqu(t.quote.author)}}let $P=(()=>{class n{constructor(t,r){this.BookService=t,this.QuoteService=r,this.quote=null,this.quoteIntervalID=null,this.isFade=!1}ngOnInit(){this.BookService.loadBooks(),this.books$=this.BookService.books$,this.subscription=this.QuoteService.getQuotesFromApi().subscribe(t=>{this.quote=t}),this.quoteIntervalID=setInterval(()=>{this.subscription=this.QuoteService.getQuotesFromApi().subscribe(t=>{this.isFade=!0,setTimeout(()=>{this.quote=t,this.isFade=!1},500)})},4500)}ngOnDestroy(){this.subscription.unsubscribe(),this.quoteIntervalID&&clearInterval(this.quoteIntervalID)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(NS),h.Y36(PP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:25,vars:4,consts:[[1,"narrow-container","home-paragraphs","flex"],[1,"narrow-container","home-wrapper"],[1,"discover-books"],[3,"books"],[1,"quote-title"],["class","quote-wrapper",3,"ngClass",4,"ngIf"],[1,"ad"],["src","https://thepienews.com/wp-content/uploads/2011/10/ad-placeholder-empty-without.png"],[1,"quote-wrapper",3,"ngClass"],[1,"quote-info"],[1,"small-title"]],template:function(t,r){1&t&&(h._UZ(0,"app-hero"),h.TgZ(1,"div",0)(2,"section")(3,"h3"),h._uU(4,"Deciding what to read next?"),h.qZA(),h.TgZ(5,"p"),h._uU(6," You\u2019re in the right place. Tell us what titles or genres you\u2019ve enjoyed in the past, and we\u2019ll give you surprisingly insightful recommendations. "),h.qZA()(),h.TgZ(7,"section")(8,"h3"),h._uU(9,"What are your friends reading?"),h.qZA(),h.TgZ(10,"p"),h._uU(11," Chances are your friends are discussing their favorite (and least favorite) books on missBooks. "),h.qZA()()(),h.TgZ(12,"section",1)(13,"section",2)(14,"h3"),h._uU(15,"Books to discover"),h.qZA(),h._UZ(16,"discover",3),h.ALo(17,"async"),h.TgZ(18,"h3",4),h._uU(19,"Get inspired while you're here.."),h.qZA(),h.YNc(20,HP,6,5,"section",5),h.qZA(),h.TgZ(21,"section",6),h._UZ(22,"img",7)(23,"img",7)(24,"img",7),h.qZA()()),2&t&&(h.xp6(16),h.Q6J("books",h.lcZ(17,2,r.books$)),h.xp6(4),h.Q6J("ngIf",r.quote))},dependencies:[tn,$n,FP,BP,uu],styles:[".home-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 30%;margin-block-start:2rem;gap:10px}.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]{grid-column:2}.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}@media (max-width: 900px){.home-wrapper[_ngcontent-%COMP%]   .ad[_ngcontent-%COMP%]{grid-column:1}}@media (max-width: 900px){.home-wrapper[_ngcontent-%COMP%]{padding-inline:30px}}.home-paragraphs[_ngcontent-%COMP%]{margin-block-start:1rem;gap:30px}.home-paragraphs[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:300px;word-wrap:break-word;line-height:20px;margin-block-start:1rem;font-size:14px}@media (max-width: 900px){.home-paragraphs[_ngcontent-%COMP%]{flex-direction:column;padding-inline:30px}}.quote-wrapper[_ngcontent-%COMP%]{transition:all .6s;opacity:1}.quote-wrapper.fade[_ngcontent-%COMP%]{opacity:0}.quote-title[_ngcontent-%COMP%]{padding-block:1rem}.quote-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();function zP(n,e){if(1&n&&(h.TgZ(0,"section",1)(1,"div",2)(2,"a",3),h._uU(3,"X"),h.qZA(),h._UZ(4,"img",4),h.TgZ(5,"div",5)(6,"h2"),h._uU(7),h.qZA(),h.TgZ(8,"span",6),h._uU(9),h.qZA(),h.TgZ(10,"p"),h._uU(11),h.qZA()()()()),2&n){const t=h.oxw();h.xp6(4),h.Q6J("src","assets/img/"+t.book.imgUrl,h.LSH),h.xp6(3),h.Oqu(t.book.title),h.xp6(2),h.Oqu(t.book.author),h.xp6(2),h.hij(" ",t.book.description," ")}}let qP=(()=>{class n{constructor(t,r){this.BookService=t,this.route=r}ngOnInit(){var t=this;this.subscription=this.route.params.subscribe(function(){var r=(0,ge.Z)(function*(o){const u=yield function GP(n,e){const t="object"==typeof e;return new Promise((r,o)=>{let d,u=!1;n.subscribe({next:m=>{d=m,u=!0},error:o,complete:()=>{u?r(d):t?r(e.defaultValue):o(new tf)}})})}(t.BookService.getById(o.id));u&&(t.book=u)});return function(o){return r.apply(this,arguments)}}())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(NS),h.Y36(fd))},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-details"]],decls:1,vars:1,consts:[["class","details-container",4,"ngIf"],[1,"details-container"],[1,"book-details"],["routerLink","/explore",1,"back"],[3,"src"],[1,"book-info","flex","column"],[1,"small-title"]],template:function(t,r){1&t&&h.YNc(0,zP,12,4,"section",0),2&t&&h.Q6J("ngIf",r.book)},dependencies:[$n,dy],styles:[".details-container[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#0000007c;position:fixed;top:0;left:0;overflow:auto}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translate(50%,-50%);padding:2rem;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;gap:15px}@media (max-width: 650px){.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]{width:100%}}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.details-container[_ngcontent-%COMP%]   .book-details[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px}"]}),n})(),WP=(()=>{class n{constructor(t){this.db=t}SetUserData(t){return this.db.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(NT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$b=(()=>{class n{constructor(t,r,o,u,d){this.afs=t,this.afAuth=r,this.ngZone=o,this.UtilService=u,this.UserService=d,this.currentUser=null,this.authStatusSub=new Co(this.currentUser),this.currentAuthStatus=this.authStatusSub.asObservable(),this.authStatusListener()}authStatusListener(){this.afAuth.onAuthStateChanged(t=>{t?(console.log(t),this.authStatusSub.next(t)):(this.authStatusSub.next(null),console.log("User is logged out"))})}signin(t){var r=this;return(0,ge.Z)(function*(){const{email:o,password:u}=t;try{o&&u&&(r.userData=yield r.afAuth.signInWithEmailAndPassword(o,u))}catch(d){console.log(d,"Couldn't signup")}})()}signup(t){var r=this;return(0,ge.Z)(function*(){const{email:o,password:u,displayName:d}=t;try{if(o&&u){r.userData=yield r.afAuth.createUserWithEmailAndPassword(o,u),yield r.userData.user.updateProfile({displayName:d});const{uid:m}=r.userData.user;yield r.UserService.SetUserData({uid:m,email:o,displayName:d})}}catch(m){console.log(m,"Couldn't signup")}})()}signout(){var t=this;return(0,ge.Z)(function*(){yield t.afAuth.signOut(),localStorage.removeItem("user")})()}getEmptyUser(){return{uid:"",email:"",password:"",displayName:""}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(NT),h.LFG(cb),h.LFG(h.R0b),h.LFG(RS),h.LFG(WP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZP=[{path:"explore",component:kP,children:[{path:":id",component:qP}]},{path:"signup",component:(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r}ngOnInit(){this.user=this.AuthService.getEmptyUser()}onSignup(){var t=this;return(0,ge.Z)(function*(){yield t.AuthService.signup({...t.user}),t.router.navigateByUrl("/home")})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($b),h.Y36(_r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["signup"]],decls:14,vars:3,consts:[[1,"container","flex","column","align-center","justify-center","signup-wrapper"],[1,"flex","column",3,"ngSubmit"],["for","name"],["type","text","name","name","id","name","placeholder","Name",3,"ngModel","ngModelChange"],["for","email"],["type","email","name","email","id","email","placeholder","Email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","placeholder","Password",3,"ngModel","ngModelChange"],[1,"nice-button"],[1,"imgs"],["src","assets/img/lady-reading.png",1,"signup-img"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"h1"),h._uU(2,"Join our community!"),h.qZA(),h.TgZ(3,"form",1),h.NdJ("ngSubmit",function(){return r.onSignup()}),h.TgZ(4,"label",2)(5,"input",3),h.NdJ("ngModelChange",function(u){return r.user.displayName=u}),h.qZA()(),h.TgZ(6,"label",4)(7,"input",5),h.NdJ("ngModelChange",function(u){return r.user.email=u}),h.qZA()(),h.TgZ(8,"label",6)(9,"input",7),h.NdJ("ngModelChange",function(u){return r.user.password=u}),h.qZA()(),h.TgZ(10,"button",8),h._uU(11,"Go"),h.qZA()(),h.TgZ(12,"div",9),h._UZ(13,"img",10),h.qZA()()),2&t&&(h.xp6(5),h.Q6J("ngModel",r.user.displayName),h.xp6(2),h.Q6J("ngModel",r.user.email),h.xp6(2),h.Q6J("ngModel",r.user.password))},dependencies:[ZT,Uw,LT,VT,Ib,Gw],styles:[".signup-wrapper[_ngcontent-%COMP%]{gap:30px;padding:1.5rem;margin-block-start:5rem}.signup-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem}@media (max-width: 700px){.signup-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.signup-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:5px}.signup-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:280px}.signup-img[_ngcontent-%COMP%]{max-width:450px}@media (max-width: 500px){.signup-img[_ngcontent-%COMP%]{left:20px;max-width:320px}}"]}),n})()},{path:"signin",component:(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r}ngOnInit(){this.user=this.AuthService.getEmptyUser()}onSignin(){var t=this;return(0,ge.Z)(function*(){t.AuthService.signin({...t.user}),t.router.navigateByUrl("/home")})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($b),h.Y36(_r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-signin"]],decls:12,vars:2,consts:[[1,"container","flex","column","align-center","justify-center","signin-wrapper"],[1,"flex","column",3,"ngSubmit"],["for","email"],["type","email","name","email","id","email","placeholder","Email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","password","placeholder","Password",3,"ngModel","ngModelChange"],[1,"nice-button"],[1,"imgs"],["src","assets/img/read-book.png",1,"signin-img"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"h1"),h._uU(2,"Log in to your account"),h.qZA(),h.TgZ(3,"form",1),h.NdJ("ngSubmit",function(){return r.onSignin()}),h.TgZ(4,"label",2)(5,"input",3),h.NdJ("ngModelChange",function(u){return r.user.email=u}),h.qZA()(),h.TgZ(6,"label",4)(7,"input",5),h.NdJ("ngModelChange",function(u){return r.user.password=u}),h.qZA()(),h.TgZ(8,"button",6),h._uU(9,"Sign in"),h.qZA()(),h.TgZ(10,"div",7),h._UZ(11,"img",8),h.qZA()()),2&t&&(h.xp6(5),h.Q6J("ngModel",r.user.email),h.xp6(2),h.Q6J("ngModel",r.user.password))},dependencies:[ZT,Uw,LT,VT,Ib,Gw],styles:[".signin-wrapper[_ngcontent-%COMP%]{gap:30px;padding:1.5rem;margin-block-start:5rem}.signin-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem}@media (max-width: 700px){.signin-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.signin-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:5px}.signin-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:280px}.signin-img[_ngcontent-%COMP%]{max-width:450px}@media (max-width: 500px){.signin-img[_ngcontent-%COMP%]{right:20px;max-width:320px}}"]}),n})()},{path:"home",component:$P},{path:"",redirectTo:"/home",pathMatch:"full"}];let KP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[sO.forRoot(ZP,{useHash:!0}),sO]}),n})(),YP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-navbar"]],decls:9,vars:0,consts:[[1,"main-nav","flex","align-center"],["exact","","routerLink","/home","routerLinkActive","selected",1,"main-nav-item"],["routerLink","/explore","routerLinkActive","selected",1,"main-nav-item"],["routerLink","/top","routerLinkActive","selected",1,"main-nav-item"],["routerLink","/about","routerLinkActive","selected",1,"main-nav-item"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"a",1),h._uU(2," Home "),h.qZA(),h.TgZ(3,"a",2),h._uU(4," Explore "),h.qZA(),h.TgZ(5,"a",3),h._uU(6," Top Rated "),h.qZA(),h.TgZ(7,"a",4),h._uU(8," About Us "),h.qZA()())},dependencies:[dy,AS],styles:[".main-nav[_ngcontent-%COMP%]{gap:10px;font-size:15px;font-family:Nanum Gothic}"]}),n})(),QP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-logo"]],decls:5,vars:0,consts:[[1,"book-logo"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"h1"),h._uU(2,"miss"),h.TgZ(3,"span"),h._uU(4,"books"),h.qZA()()())},styles:[".book-logo[_ngcontent-%COMP%]{font-family:Nanum Gothic}.book-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:200;color:#7a1d1d;margin:0;font-size:1.75rem}.book-logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Nanum Gothic;font-weight:700;color:#671f1f}@media (max-width: 350px){.book-logo[_ngcontent-%COMP%]{margin-inline-start:3.5rem}}"]}),n})();function JP(n,e){1&n&&(h.TgZ(0,"section",3)(1,"a",4),h._uU(2," Sign in "),h.qZA(),h.TgZ(3,"a",5),h._uU(4," Join "),h.qZA()())}function XP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"section",6)(1,"a",7),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.onLogout())}),h._uU(2,"Logout"),h.qZA()()}}let e1=(()=>{class n{constructor(t){this.AuthService=t,this.logout=new h.vpe}ngOnInit(){this.AuthService.authStatusListener(),this.AuthService.currentAuthStatus.subscribe(t=>{this.isUser=t})}onLogout(){this.logout.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["user-navbar"]],outputs:{logout:"logout"},decls:4,vars:2,consts:[[1,"user-nav","flex","align-center"],["class","signed-out flex align-center",4,"ngIf","ngIfElse"],["signedIn",""],[1,"signed-out","flex","align-center"],["routerLink","/signin","routerLinkActive","selected",1,"main-nav-item"],["exact","","routerLink","/signup","routerLinkActive","selected",1,"main-nav-item"],[1,"signed-in"],[1,"main-nav-item",3,"click"]],template:function(t,r){if(1&t&&(h.TgZ(0,"nav",0),h.YNc(1,JP,5,0,"section",1),h.YNc(2,XP,3,0,"ng-template",null,2,h.W1O),h.qZA()),2&t){const o=h.MAs(3);h.xp6(1),h.Q6J("ngIf",!r.isUser)("ngIfElse",o)}},dependencies:[$n,dy,AS],styles:[".signed-out[_ngcontent-%COMP%]{gap:20px;font-family:Nanum Gothic}.signed-out[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-inline:.5rem}.signed-in[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}"]}),n})(),t1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["filter"]],decls:1,vars:0,consts:[["type","text","placeholder","Search books",1,"filter-input"]],template:function(t,r){1&t&&h._UZ(0,"input",0)},styles:["[_nghost-%COMP%]{flex-basis:40%}"]}),n})(),n1=(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r}onLogout(){this.AuthService.signout(),console.log(localStorage.getItem("user")),this.router.navigateByUrl("/home")}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($b),h.Y36(_r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["book-header"]],inputs:{logout:"logout"},decls:5,vars:0,consts:[[1,"narrow-container"],[3,"logout"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0),h._UZ(1,"book-logo")(2,"book-navbar")(3,"filter"),h.TgZ(4,"user-navbar",1),h.NdJ("logout",function(){return r.onLogout()}),h.qZA()())},dependencies:[YP,QP,e1,t1],styles:["header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff4e8f7;gap:14px;box-shadow:0 1px 2px #00000026;flex-wrap:wrap;-webkit-user-select:none;user-select:none}@media (max-width: 900px){header[_ngcontent-%COMP%]{gap:.6rem;padding-inline:30px}}"]}),n})(),r1=(()=>{class n{constructor(){this.title="books-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"book-header")(1,"router-outlet")},dependencies:[Ob,n1]}),n})();const aO_firebaseConfig={apiKey:"AIzaSyApUkhOG6XKFLhBOz5PAu8e2DblfiYhIEg",authDomain:"missbooks-13d4f.firebaseapp.com",projectId:"missbooks-13d4f",storageBucket:"missbooks-13d4f.appspot.com",messagingSenderId:"632164729990",appId:"1:632164729990:web:4bb5c778ffbb054dc1fd07",measurementId:"G-NSVEWWXF1G"};let i1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[r1]}),n.\u0275inj=h.cJS({imports:[Yl,KP,zo,uN,Bi.hO.initializeApp(aO_firebaseConfig),rR,KO]}),n})();(0,h.G48)(),Ru().bootstrapModule(i1).catch(n=>console.error(n))},5867:(at,De,P)=>{P.d(De,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=P(9681);(0,h.registerVersion)("firebase","9.9.4","app")},127:(at,De,P)=>{P.d(De,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(at,De,P)=>{P.r(De);var h=P(5861),ee=P(3942),N=P(2090),oe=P(9681),ie=P(655),de=P(1877),le=P(4859);const _e=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new de.Yd("@firebase/auth");function nt(v,...f){Ze.logLevel<=de.in.ERROR&&Ze.error(`Auth (${oe.SDK_VERSION}): ${v}`,...f)}function Te(v,...f){throw Be(v,...f)}function ve(v,...f){return Be(v,...f)}function Ie(v,f,g){const _=Object.assign(Object.assign({},Qe()),{[f]:g});return new N.LL("auth","Firebase",_).create(f,{appName:v.name})}function Ue(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(v,"argument-error"),Ie(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(v,...f){if("string"!=typeof v){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(g,..._)}return ye.create(v,...f)}function U(v,f,...g){if(!v)throw Be(f,...g)}function me(v){const f="INTERNAL ASSERTION FAILED: "+v;throw nt(f),new Error(f)}function Z(v,f){v||me(f)}const J=new Map;function se(v){Z(v instanceof Function,"Expected a class definition");let f=J.get(v);return f?(Z(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,J.set(v,f),f)}function Re(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function lt(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class rn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Z(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Ft(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mn(v,f){Z(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Wt{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new rn(3e4,6e4);function Mt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function nn(v,f,g,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(v,f,g,_,S={}){return Hr(v,S,(0,h.Z)(function*(){let R={},q={};_&&("GET"===f?q=_:R={body:JSON.stringify(_)});const ue=(0,N.xO)(Object.assign({key:v.config.apiKey},q)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),Wt.fetch()(Ri(v,v.config.apiHost,g,ue),Object.assign({method:f,headers:Pe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Hr(v,f,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(v,f,g){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},Zt),f);try{const S=new Gr(v),R=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw gi(v,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ue=R.ok?q.errorMessage:q.error.message,[Pe,Ye]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw gi(v,"credential-already-in-use",q);if("EMAIL_EXISTS"===Pe)throw gi(v,"email-already-in-use",q);if("USER_DISABLED"===Pe)throw gi(v,"user-disabled",q);const gt=_[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ie(v,gt,Ye);Te(v,gt)}}catch(S){if(S instanceof N.ZR)throw S;Te(v,"network-request-failed")}})).apply(this,arguments)}function $r(v,f,g,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(v,f,g,_,S={}){const R=yield nn(v,f,g,_,S);return"mfaPendingCredential"in R&&Te(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ri(v,f,g,_){const S=`${f}${g}?${_}`;return v.config.emulator?Mn(v.config,S):`${v.config.apiScheme}://${S}`}class Gr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gi(v,f,g){const _={appName:v.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ve(v,f,_);return S.customData._tokenResponse=g,S}function We(){return(We=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function zr(v,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function On(v,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ai(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function cn(){return(cn=(0,h.Z)(function*(v,f=!1){const g=(0,N.m9)(v),_=yield g.getIdToken(f),S=ot(_);U(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,q=R?.sign_in_provider;return{claims:S,token:_,authTime:ai(dt(S.auth_time)),issuedAtTime:ai(dt(S.iat)),expirationTime:ai(dt(S.exp)),signInProvider:q||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(v){return 1e3*Number(v)}function ot(v){var f;const[g,_,S]=v.split(".");if(void 0===g||void 0===_||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,N.tV)(_);return R?JSON.parse(R):(nt("Failed to decode base64 JWT payload"),null)}catch(R){return nt("Caught error parsing JWT payload as JSON",null===(f=R)||void 0===f?void 0:f.toString()),null}}function sr(v,f){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof N.ZR&&Ar(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}function Ar({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class _t{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(g=_)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Ki{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(v){return yi.apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(v){var f;const g=v.auth,_=yield v.getIdToken(),S=yield sr(v,On(g,{idToken:_}));U(S?.users.length,g,"internal-error");const R=S.users[0];v._notifyReloadListener(R);const q=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?L(R.providerUserInfo):[],ue=j(v.providerData,q),gt=!!v.isAnonymous&&!(v.email&&R.passwordHash||ue?.length),rt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ue,metadata:new Ki(R.createdAt,R.lastLoginAt),isAnonymous:gt};Object.assign(v,rt)})).apply(this,arguments)}function W(){return(W=(0,h.Z)(function*(v){const f=(0,N.m9)(v);yield Kt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function j(v,f){return[...v.filter(_=>!f.some(S=>S.providerId===_.providerId)),...f]}function L(v){return v.map(f=>{var{providerId:g}=f,_=(0,ie._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function z(){return(z=(0,h.Z)(function*(v,f){const g=yield Hr(v,{},(0,h.Z)(function*(){const _=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:R}=v.config,q=Ri(v,S,"/v1/token",`key=${R}`),ue=yield v._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(q,{method:"POST",headers:ue,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function sn(v){const f=ot(v);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,h.Z)(function*(){return U(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:q}=yield function $(v,f){return z.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(S,R,Number(q))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:S,expirationTime:R}=g,q=new Ee;return _&&(U("string"==typeof _,"internal-error",{appName:f}),q.refreshToken=_),S&&(U("string"==typeof S,"internal-error",{appName:f}),q.accessToken=S),R&&(U("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ee,this.toJSON())}_performRefresh(){return me("not implemented")}}function Ve(v,f){U("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class st{constructor(f){var{uid:g,auth:_,stsTokenManager:S}=f,R=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Ki(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const _=yield sr(g,g.stsTokenManager.getToken(g.auth,f));return U(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function Wn(v){return cn.apply(this,arguments)}(this,f)}reload(){return function qt(v){return W.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new st(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,h.Z)(function*(){let S=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield Kt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield sr(f,function Do(v,f){return We.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,S,R,q,ue,Pe,Ye,gt;const rt=null!==(_=g.displayName)&&void 0!==_?_:void 0,tr=null!==(S=g.email)&&void 0!==S?S:void 0,hi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Ku=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Va=null!==(ue=g.tenantId)&&void 0!==ue?ue:void 0,Yu=null!==(Pe=g._redirectEventId)&&void 0!==Pe?Pe:void 0,Lr=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,Pf=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:ho,emailVerified:Qd,isAnonymous:ng,providerData:Ua,stsTokenManager:rg}=g;U(ho&&rg,f,"internal-error");const Oy=Ee.fromJSON(this.name,rg);U("string"==typeof ho,f,"internal-error"),Ve(rt,f.name),Ve(tr,f.name),U("boolean"==typeof Qd,f,"internal-error"),U("boolean"==typeof ng,f,"internal-error"),Ve(hi,f.name),Ve(Ku,f.name),Ve(Va,f.name),Ve(Yu,f.name),Ve(Lr,f.name),Ve(Pf,f.name);const Qu=new st({uid:ho,auth:f,email:tr,emailVerified:Qd,displayName:rt,isAnonymous:ng,photoURL:Ku,phoneNumber:hi,tenantId:Va,stsTokenManager:Oy,createdAt:Lr,lastLoginAt:Pf});return Ua&&Array.isArray(Ua)&&(Qu.providerData=Ua.map(ig=>Object.assign({},ig))),Yu&&(Qu._redirectEventId=Yu),Qu}static _fromIdTokenResponse(f,g,_=!1){return(0,h.Z)(function*(){const S=new Ee;S.updateFromServerResponse(g);const R=new st({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:_});return yield Kt(R),R})()}}const Yt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,h.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,h.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,h.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return v.type="NONE",v})();function Zn(v,f,g){return`firebase:${v}:${f}:${g}`}class kt{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=Zn(this.userKey,S.apiKey,R),this.fullPersistenceKey=Zn("persistence",S.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?st._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,h.Z)(function*(){if(!g.length)return new kt(se(Yt),f,_);const S=(yield Promise.all(g.map(function(){var Ye=(0,h.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=S[0]||se(Yt);const q=Zn(_,f.config.apiKey,f.name);let ue=null;for(const Ye of g)try{const gt=yield Ye._get(q);if(gt){const rt=st._fromJSON(f,gt);Ye!==R&&(ue=rt),R=Ye;break}}catch{}const Pe=S.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Pe.length?(R=Pe[0],ue&&(yield R._set(q,ue.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,h.Z)(function*(gt){if(gt!==R)try{yield gt._remove(q)}catch{}});return function(gt){return Ye.apply(this,arguments)}}())),new kt(R,f,_)):new kt(R,f,_)})()}}function St(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(xr(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(gn(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(He(f))return"Blackberry";if(mt(f))return"Webos";if(Un(f))return"Safari";if((f.includes("chrome/")||Ni(f))&&!f.includes("edge/"))return"Chrome";if(Bn(f))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function gn(v=(0,N.z$)()){return/firefox\//i.test(v)}function Un(v=(0,N.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ni(v=(0,N.z$)()){return/crios\//i.test(v)}function xr(v=(0,N.z$)()){return/iemobile/i.test(v)}function Bn(v=(0,N.z$)()){return/android/i.test(v)}function He(v=(0,N.z$)()){return/blackberry/i.test(v)}function mt(v=(0,N.z$)()){return/webos/i.test(v)}function en(v=(0,N.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Us(v=(0,N.z$)()){return en(v)||Bn(v)||mt(v)||He(v)||/windows phone/i.test(v)||xr(v)}function gs(v,f=[]){let g;switch(v){case"Browser":g=St((0,N.z$)());break;case"Worker":g=`${St((0,N.z$)())}-${v}`;break;default:g=v}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${_}`}class Bs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=R=>new Promise((q,ue)=>{try{q(f(R))}catch(Pe){ue(Pe)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){var _;if(g.auth.currentUser===f)return;const S=[];try{for(const R of g.queue)yield R(f),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const q of S)try{q()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class At{constructor(f,g,_){this.app=f,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new Bs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=se(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield kt.create(_,f),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let R=S,q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ue=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Pe=R?._redirectEventId,Ye=yield g.tryRedirectSignIn(f);(!ue||ue===Pe)&&Ye?.user&&(R=Ye.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ue){R=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ue))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){var _;try{yield Kt(f)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const _=f?(0,N.m9)(f):null;return _&&U(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&U(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,h.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&se(f)||g._popupRedirectResolver;U(_,g,"argument-error"),g.redirectPersistenceManager=yield kt.create(g,[se(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,S){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return U(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,_,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=gs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function yn(v){return(0,N.m9)(v)}class js{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ki(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function ms(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class hr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return me("not implemented")}_getIdTokenResponse(f){return me("not implemented")}_linkToIdToken(f,g){return me("not implemented")}_getReauthenticationResolver(f){return me("not implemented")}}function Hn(v,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:resetPassword",Mt(v,f))})).apply(this,arguments)}function tn(v,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Al(v,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:update",Mt(v,f))})).apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithPassword",Mt(v,f))})).apply(this,arguments)}function _s(v,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:sendOobCode",Mt(v,f))})).apply(this,arguments)}function $n(v,f){return xl.apply(this,arguments)}function xl(){return(xl=(0,h.Z)(function*(v,f){return _s(v,f)})).apply(this,arguments)}function ar(v,f){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(v,f){return _s(v,f)})).apply(this,arguments)}function au(v,f){return la.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(v,f){return _s(v,f)})).apply(this,arguments)}function Ml(v,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(v,f){return _s(v,f)})).apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithEmailLink",Mt(v,f))})).apply(this,arguments)}function Ol(){return(Ol=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithEmailLink",Mt(v,f))})).apply(this,arguments)}class Rl extends hr{constructor(f,g,_,S=null){super("password",_),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new Rl(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new Rl(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function ua(v,f){return vs.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function cf(v,f){return pd.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return tn(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function df(v,f){return Ol.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Yn(v,f){return gd.apply(this,arguments)}function gd(){return(gd=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithIdp",Mt(v,f))})).apply(this,arguments)}class Yi extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Yi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:S}=g,R=(0,ie._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const q=new Yi(_,S);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,Yn(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function Lp(v,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:sendVerificationCode",Mt(v,f))})).apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,f))})).apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(v,f){const g=yield $r(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,f));if(g.temporaryProof)throw gi(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Up={USER_NOT_FOUND:"user-not-found"};function yd(){return(yd=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithPhoneNumber",Mt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Up)})).apply(this,arguments)}class Is extends hr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Is({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Is({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Nl(v,f){return ws.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Vp(v,f){return md.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Bp(v,f){return yd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}=f;return _||g||S||R?new Is({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class lu{constructor(f){var g,_,S,R,q,ue;const Pe=(0,N.zd)((0,N.pd)(f)),Ye=null!==(g=Pe.apiKey)&&void 0!==g?g:null,gt=null!==(_=Pe.oobCode)&&void 0!==_?_:null,rt=function vd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Pe.mode)&&void 0!==S?S:null);U(Ye&&gt&&rt,"argument-error"),this.apiKey=Ye,this.operation=rt,this.code=gt,this.continueUrl=null!==(R=Pe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Pe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ue=Pe.tenantId)&&void 0!==ue?ue:null}static parseLink(f){const g=function _d(v){const f=(0,N.zd)((0,N.pd)(v)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,_=(0,N.zd)((0,N.pd)(v)).deep_link_id;return(_?(0,N.zd)((0,N.pd)(_)).link:null)||_||g||f||v}(f);try{return new lu(g)}catch{return null}}}let Pi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,_){return Rl._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=lu.parseLink(_);return U(S,"argument-error"),Rl._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Qi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ji extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class $s extends Ji{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Yi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return $s.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return $s.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:q,providerId:ue}=f;if(!_&&!S&&!g&&!R||!ue)return null;try{return new $s(ue)._credential({idToken:g,accessToken:_,nonce:q,pendingToken:R})}catch{return null}}}let ca=(()=>{class v extends Ji{constructor(){super("facebook.com")}static credential(g){return Yi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),cu=(()=>{class v extends Ji{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Yi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),kl=(()=>{class v extends Ji{constructor(){super("github.com")}static credential(g){return Yi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class da extends hr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,Yn(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:S,pendingToken:R}=g;return _&&S&&R&&_===S?new da(_,R):null}static _create(f,g){return new da(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends Qi{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return li.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return li.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=da.fromJSON(f);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return da._create(_,g)}catch{return null}}}let qr=(()=>{class v extends Ji{constructor(){super("twitter.com")}static credential(g,_){return Yi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function To(v,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signUp",Mt(v,f))})).apply(this,arguments)}class fr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,S=!1){return(0,h.Z)(function*(){const R=yield st._fromIdTokenResponse(f,_,S),q=pf(_);return new fr({user:R,providerId:q,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const S=pf(_);return new fr({user:f,providerId:S,_tokenResponse:_,operationType:g})})()}}function pf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Cn(){return(Cn=(0,h.Z)(function*(v){var f;const g=yn(v);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new fr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield To(g,{returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class du extends N.ZR{constructor(f,g,_,S){var R;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,du.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,S){return new du(f,g,_,S)}}function mf(v,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?du._fromErrorAndOperation(v,R,f,_):R})}function ci(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function hu(){return(hu=(0,h.Z)(function*(v,f){const g=(0,N.m9)(v);yield Ut(!0,g,f);const{providerUserInfo:_}=yield zr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=ci(_||[]);return g.providerData=g.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Gs(v,f){return es.apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(v,f,g=!1){const _=yield sr(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return fr._forOperation(v,"link",_)})).apply(this,arguments)}function Ut(v,f,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(v,f,g){yield Kt(f);const S=!1===v?"provider-already-linked":"no-such-provider";U(ci(f.providerData).has(g)===v,f.auth,S)})).apply(this,arguments)}function zs(v,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(v,f,g=!1){var _;const{auth:S}=v,R="reauthenticate";try{const q=yield sr(v,mf(S,R,f,v),g);U(q.idToken,S,"internal-error");const ue=ot(q.idToken);U(ue,S,"internal-error");const{sub:Pe}=ue;return U(v.uid===Pe,S,"user-mismatch"),fr._forOperation(v,R,q)}catch(q){throw"auth/user-not-found"===(null===(_=q)||void 0===_?void 0:_.code)&&Te(S,"user-mismatch"),q}})).apply(this,arguments)}function wi(v,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(v,f,g=!1){const _="signIn",S=yield mf(v,_,f),R=yield fr._fromIdTokenResponse(v,_,S);return g||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function _n(v,f){return wt.apply(this,arguments)}function wt(){return(wt=(0,h.Z)(function*(v,f){return wi(yn(v),f)})).apply(this,arguments)}function gu(v,f){return yf.apply(this,arguments)}function yf(){return(yf=(0,h.Z)(function*(v,f){const g=(0,N.m9)(v);return yield Ut(!1,g,f.providerId),Gs(g,f)})).apply(this,arguments)}function mu(v,f){return yu.apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(v,f){return zs((0,N.m9)(v),f)})).apply(this,arguments)}function Pl(v,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(v,f){return $r(v,"POST","/v1/accounts:signInWithCustomToken",Mt(v,f))})).apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(v,f){const g=yn(v),_=yield Pl(g,{token:f,returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class be{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Pt._fromServerResponse(f,g):Te(f,"internal-error")}}class Pt extends be{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Pt(g)}}function vu(v,f,g){var _;U((null===(_=g.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Dn(){return(Dn=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v),S={requestType:"PASSWORD_RESET",email:f};g&&vu(_,S,g),yield ar(_,S)})).apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,f,g){yield Hn((0,N.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(v,f){yield Al((0,N.m9)(v),{oobCode:f})})).apply(this,arguments)}function ga(v,f){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,h.Z)(function*(v,f){const g=(0,N.m9)(v),_=yield Hn(g,{oobCode:f}),S=_.requestType;switch(U(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(_.mfaInfo,g,"internal-error");default:U(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=be._fromServerResponse(yn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Id(){return(Id=(0,h.Z)(function*(v,f){const{data:g}=yield ga((0,N.m9)(v),f);return g.email})).apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(v,f,g){const _=yn(v),S=yield To(_,{returnSecureToken:!0,email:f,password:g}),R=yield fr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v),S={requestType:"EMAIL_SIGNIN",email:f};U(g.handleCodeInApp,_,"argument-error"),g&&vu(_,S,g),yield au(_,S)})).apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v),S=Pi.credentialWithLink(f,g||Re());return U(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),_n(_,S)})).apply(this,arguments)}function Hp(v,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:createAuthUri",Mt(v,f))})).apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(v,f){const _={identifier:f,continueUri:lt()?Re():"http://localhost"},{signinMethods:S}=yield Hp((0,N.m9)(v),_);return S||[]})).apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(v,f){const g=(0,N.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&vu(g.auth,S,f);const{email:R}=yield $n(g.auth,S);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&vu(_.auth,R,g);const{email:q}=yield Ml(_.auth,R);q!==v.email&&(yield v.reload())})).apply(this,arguments)}function bu(v,f){return $l.apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(v,f){return nn(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,N.m9)(v),R={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield sr(_,bu(_.auth,R));_.displayName=q.displayName||null,_.photoURL=q.photoUrl||null;const ue=_.providerData.find(({providerId:Pe})=>"password"===Pe);ue&&(ue.displayName=_.displayName,ue.photoURL=_.photoURL),yield _._updateTokensIfNecessary(q)})).apply(this,arguments)}function Ks(v,f,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(v,f,g){const{auth:_}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield sr(v,tn(_,R));yield v._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Wr{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class dn extends Wr{constructor(f,g,_,S){super(f,g,_),this.username=S}}class bd extends Wr{constructor(f,g){super(f,"facebook.com",g)}}class ql extends dn{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class vf extends Wr{constructor(f,g){super(f,"google.com",g)}}class Wl extends dn{constructor(f,g,_){super(f,"twitter.com",g,_)}}function Du(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Qn(v){var f,g;if(!v)return null;const{providerId:_}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const q=null===(g=null===(f=ot(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new Wr(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!_)return null;switch(_){case"facebook.com":return new bd(R,S);case"github.com":return new ql(R,S);case"google.com":return new vf(R,S);case"twitter.com":return new Wl(R,S,v.screenName||null);case"custom":case"anonymous":return new Wr(R,null);default:return new Wr(R,_,S)}}(g)}class Ys{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ys("enroll",f)}static _fromMfaPendingCredential(f){return new Ys("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ys._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return Ys._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Tu{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=yn(f),S=g.customData._serverResponse,R=(S.mfaInfo||[]).map(ue=>be._fromServerResponse(_,ue));U(S.mfaPendingCredential,_,"internal-error");const q=Ys._fromMfaPendingCredential(S.mfaPendingCredential);return new Tu(q,R,function(){var ue=(0,h.Z)(function*(Pe){const Ye=yield Pe._process(_,q);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const rt=yield fr._fromIdTokenResponse(_,g.operationType,gt);return yield _._updateCurrentUser(rt.user),rt;case"reauthenticate":return U(g.user,_,"internal-error"),fr._forOperation(g.user,g.operationType,gt);default:Te(_,"internal-error")}});return function(Pe){return ue.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function Su(v,f){return nn(v,"POST","/v2/accounts/mfaEnrollment:start",Mt(v,f))}class _f{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>be._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new _f(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Ys._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var _=this;return(0,h.Z)(function*(){const S=f,R=yield _.getSession(),q=yield sr(_.user,S._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(q),_.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){var _;const S="string"==typeof f?f:f.uid,R=yield g.user.getIdToken(),q=yield sr(g.user,function Sd(v,f){return nn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(v,f))}(g.user.auth,{idToken:R,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ue})=>ue!==S),yield g.user._updateTokensIfNecessary(q);try{yield g.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(_=ue)||void 0===_?void 0:_.code))throw ue}})()}}const Oo=new WeakMap,Qs="__sak";class xu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const wa=(()=>{class v extends xu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _a(){const v=(0,N.z$)();return Un(v)||en(v)}()&&function mn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Us(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&g(_,R,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((ue,Pe,Ye)=>{this.notifyListeners(ue,Ye)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(g.newValue!==ue)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const R=()=>{const ue=this.storage.getItem(S);!_&&this.localCache[S]===ue||this.notifyListeners(S,ue)},q=this.storage.getItem(S);!function Kn(){return(0,N.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,R=this;return(0,h.Z)(function*(){yield S().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,h.Z)(function*(){const R=yield _().call(S,g);return S.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,S=this;return(0,h.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),Li=(()=>{class v extends xu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return v.type="SESSION",v})();let Md=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,h.Z)(function*(){const S=g,{eventId:R,eventType:q,data:ue}=S.data,Pe=_.handlersMap[q];if(!Pe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ye=Array.from(Pe).map(function(){var rt=(0,h.Z)(function*(tr){return tr(S.origin,ue)});return function(tr){return rt.apply(this,arguments)}}()),gt=yield function Ea(v){return Promise.all(v.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);S.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:gt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ba(v="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return v+g}class Kl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var S=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ue;return new Promise((Pe,Ye)=>{const gt=ba("",20);R.port1.start();const rt=setTimeout(()=>{Ye(new Error("unsupported_event"))},_);ue={messageChannel:R,onMessage(tr){const hi=tr;if(hi.data.eventId===gt)switch(hi.data.status){case"ack":clearTimeout(rt),q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Pe(hi.data.response);break;default:clearTimeout(rt),clearTimeout(q),Ye(new Error("invalid_response"))}}},S.handlers.add(ue),R.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:f,eventId:gt,data:g},[R.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function Nn(){return window}function Mu(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function Ca(){return(Ca=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",Ds="firebaseLocalStorage",Yl="fbase_key";class Xs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Da(v,f){return v.transaction([Ds],f?"readwrite":"readonly").objectStore(Ds)}function No(){const v=indexedDB.open(Cs,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(Ds,{keyPath:Yl})}catch(S){g(S)}}),v.addEventListener("success",(0,h.Z)(function*(){const _=v.result;_.objectStoreNames.contains(Ds)?f(_):(_.close(),yield function Rd(){const v=indexedDB.deleteDatabase(Cs);return new Xs(v).toPromise()}(),f(yield No()))}))})}function rs(v,f,g){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,h.Z)(function*(v,f,g){const _=Da(v,!0).put({[Yl]:f,value:g});return new Xs(_).toPromise()})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(v,f){const g=Da(v,!1).get(f),_=yield new Xs(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function eo(v,f){const g=Da(v,!0).delete(f);return new Xs(g).toPromise()}const ko=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield No()),g.db})()}_withRetries(g){var _=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Mu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=Md._getInstance(function Ru(){return Mu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(S,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function Js(){return Ca.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Kl(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Ou(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield No();return yield rs(g,Qs,"1"),yield eo(g,Qs),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(R=>rs(R,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,h.Z)(function*(){const S=yield _._withRetries(R=>function Nu(v,f){return Ta.apply(this,arguments)}(R,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(S=>eo(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const _=yield g._withRetries(q=>{const ue=Da(q,!1).getAll();return new Xs(ue).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:q,value:ue}of _)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ue)&&(g.notifyListeners(q,ue),S.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Po(v,f){return nn(v,"POST","/v2/accounts/mfaSignIn:start",Mt(v,f))}function Ts(){return(Ts=(0,h.Z)(function*(v){return(yield nn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lo(v){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=f,_.onerror=S=>{const R=ve("internal-error");R.customData=S,g(R)},_.type="text/javascript",_.charset="UTF-8",function Fo(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(_)})}function Fu(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Sa=1e12;class ln{constructor(f){this.auth=f,this.counter=Sa,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new $p(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||Sa;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Sa))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var _;return null===(_=g._widgets.get(f||Sa))||void 0===_||_.execute(),""})()}}class $p{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;U(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fy(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gp=Fu("rcb"),py=new rn(3e4,6e4);class wf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Nn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return U(function a0(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Nn().grecaptcha):new Promise((_,S)=>{const R=Nn().setTimeout(()=>{S(ve(f,"network-request-failed"))},py.get());Nn()[Gp]=()=>{Nn().clearTimeout(R),delete Nn()[Gp];const ue=Nn().grecaptcha;if(!ue)return void S(ve(f,"internal-error"));const Pe=ue.render;ue.render=(Ye,gt)=>{const rt=Pe(Ye,gt);return this.counter++,rt},this.hostLanguage=g,_(ue)},Lo(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Gp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),S(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Nn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xl{load(f){return(0,h.Z)(function*(){return new ln(f)})()}clearedOneInstance(){}}const my="recaptcha",yy={theme:"light",type:"image"};class lr{constructor(f,g=Object.assign({},yy),_){this.parameters=g,this.type=my,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(_),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xl:new wf,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const q=ue=>{!ue||(f.tokenChangeListeners.delete(q),R(ue))};f.tokenChangeListeners.add(q),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=Nn()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){U(lt()&&!Mu(),f.auth,"internal-error"),yield function Ss(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Zr(v){return Ts.apply(this,arguments)}(f.auth);U(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qt{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Is._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Kr(){return(Kr=(0,h.Z)(function*(v,f,g){const _=yn(v),S=yield vn(_,f,(0,N.m9)(g));return new Qt(S,R=>_n(_,R))})).apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v);yield Ut(!1,_,"phone");const S=yield vn(_.auth,f,(0,N.m9)(g));return new Qt(S,R=>gu(_,R))})).apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v),S=yield vn(_.auth,f,(0,N.m9)(g));return new Qt(S,R=>mu(_,R))})).apply(this,arguments)}function vn(v,f,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(v,f,g){var _;const S=yield g.verify();try{let R;if(U("string"==typeof S,v,"argument-error"),U(g.type===my,v,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return U("enroll"===q.type,v,"internal-error"),(yield Su(v,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===q.type,v,"internal-error");const ue=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return U(ue,v,"missing-multi-factor-info"),(yield Po(v,{mfaPendingCredential:q.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Lp(v,{phoneNumber:R.phoneNumber,recaptchaToken:S});return q}}finally{g._reset()}})).apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(v,f){yield Gs((0,N.m9)(v),f)})).apply(this,arguments)}let Aa=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=yn(g)}verifyPhoneNumber(g,_){return vn(this.auth,g,(0,N.m9)(_))}static credential(g,_){return Is._fromVerification(g,_)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?Is._fromTokenResponse(_,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Rr(v,f){return f?se(f):(U(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ec extends hr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Yn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Yn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Yn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Qr(v){return wi(v.auth,new ec(v),v.bypassAuthState)}function xa(v){const{auth:f,user:g}=v;return U(g,f,"internal-error"),zs(g,new ec(v),v.bypassAuthState)}function As(v){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(v){const{auth:f,user:g}=v;return U(g,f,"internal-error"),Gs(g,new ec(v),v.bypassAuthState)})).apply(this,arguments)}class Uo{constructor(f,g,_,S,R=!1){this.auth=f,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(_,S){f.pendingPromise={resolve:_,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:q,error:ue,type:Pe}=f;if(ue)return void g.reject(ue);const Ye={auth:g.auth,requestUri:_,sessionId:S,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Pe)(Ye))}catch(gt){g.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return xa;default:Te(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bo=new rn(2e3,1e4);function Uu(){return(Uu=(0,h.Z)(function*(v,f,g){const _=yn(v);Ue(v,f,Qi);const S=Rr(_,g);return new no(_,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Nd(){return(Nd=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v);Ue(_.auth,f,Qi);const S=Rr(_.auth,g);return new no(_.auth,"reauthViaPopup",f,S,_).executeNotNull()})).apply(this,arguments)}function jo(){return(jo=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v);Ue(_.auth,f,Qi);const S=Rr(_.auth,g);return new no(_.auth,"linkViaPopup",f,S,_).executeNotNull()})).apply(this,arguments)}let no=(()=>{class v extends Uo{constructor(g,_,S,R,q){super(g,_,R,q),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const _=yield g.execute();return U(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,h.Z)(function*(){Z(1===g.filter.length,"Popup operations only handle one event");const _=ba();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Bo.get())};g()}}return v.currentPopupAction=null,v})();const Nr=new Map;class wn extends Uo{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let _=Nr.get(g.auth._key());if(!_){try{const R=(yield function Ho(v,f){return Ei.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}Nr.set(g.auth._key(),_)}return g.bypassAuthState||Nr.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const S=yield _.auth._redirectUserForId(f.eventId);if(S)return _.user=S,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ei(){return(Ei=(0,h.Z)(function*(v,f){const g=nc(f),_=os(v);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function $o(v,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(v,f){return os(v)._set(nc(f),"true")})).apply(this,arguments)}function ro(v,f){Nr.set(v._key(),f)}function os(v){return se(v._redirectPersistence)}function nc(v){return Zn("pendingRedirect",v.config.apiKey,v.name)}function b(){return(b=(0,h.Z)(function*(v,f,g){const _=yn(v);Ue(v,f,Qi);const S=Rr(_,g);return yield $o(S,_),S._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v);Ue(_.auth,f,Qi);const S=Rr(_.auth,g);yield $o(S,_.auth);const R=yield ut(_);return S._openRedirect(_.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Ce(){return(Ce=(0,h.Z)(function*(v,f,g){const _=(0,N.m9)(v);Ue(_.auth,f,Qi);const S=Rr(_.auth,g);yield Ut(!1,_,f.providerId),yield $o(S,_.auth);const R=yield ut(_);return S._openRedirect(_.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(v,f){return yield yn(v)._initializationPromise,yt(v,f,!1)})).apply(this,arguments)}function yt(v,f){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(v,f,g=!1){const _=yn(v),S=Rr(_,f),q=yield new wn(_,S,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield _._persistUserIfCurrent(q.user),yield _._setRedirectUser(null,f)),q})).apply(this,arguments)}function ut(v){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(v){const f=ba(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Go{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Oa(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return io(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!io(f)){const S=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xs(f))}saveEventToCache(f){this.cachedEventUids.add(xs(f)),this.lastProcessedEventTime=Date.now()}}function xs(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function io({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function so(v){return oo.apply(this,arguments)}function oo(){return(oo=(0,h.Z)(function*(v,f={}){return nn(v,"GET","/v1/projects",f)})).apply(this,arguments)}const zo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qo=/^https?/;function Bi(){return(Bi=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield so(v);for(const g of f)try{if(vy(g))return}catch{}Te(v,"unauthorized-domain")})).apply(this,arguments)}function vy(v){const f=Re(),{protocol:g,hostname:_}=new URL(f);if(v.startsWith("chrome-extension://")){const q=new URL(v);return""===q.hostname&&""===_?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===_}if(!qo.test(g))return!1;if(zo.test(v))return _===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const pr=new rn(3e4,6e4);function Bu(){const v=Nn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ra=null;function Pd(v){return Ra=Ra||function kd(v){return new Promise((f,g)=>{var _,S,R;function q(){Bu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Bu(),g(ve(v,"network-request-failed"))},timeout:pr.get()})}if(null!==(S=null===(_=Nn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(R=Nn().gapi)||void 0===R||!R.load){const ue=Fu("iframefcb");return Nn()[ue]=()=>{gapi.load?q():g(ve(v,"network-request-failed"))},Lo(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Pe=>g(Pe))}q()}}).catch(f=>{throw Ra=null,f})}(v),Ra}const Fd=new rn(5e3,15e3),Ld={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _y(v){const f=v.config;U(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Mn(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,_={apiKey:f.apiKey,appName:v.name,v:oe.SDK_VERSION},S=bf.get(v.config.apiHost);S&&(_.eid=S);const R=v._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,N.xO)(_).slice(1)}`}function Hu(){return Hu=(0,h.Z)(function*(v){const f=yield Pd(v),g=Nn().gapi;return U(g,v,"internal-error"),f.open({where:document.body,url:_y(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ld,dontclear:!0},_=>new Promise(function(){var S=(0,h.Z)(function*(R,q){yield _.restyle({setHideOnLeave:!1});const ue=ve(v,"network-request-failed"),Pe=Nn().setTimeout(()=>{q(ue)},Fd.get());function Ye(){Nn().clearTimeout(Pe),R(_)}_.ping(Ye).then(Ye,()=>{q(ue)})});return function(R,q){return S.apply(this,arguments)}}()))}),Hu.apply(this,arguments)}const ge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Na(v,f,g,_,S,R){U(v.config.authDomain,v,"auth-domain-config-required"),U(v.config.apiKey,v,"invalid-api-key");const q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:_,v:oe.SDK_VERSION,eventId:S};if(f instanceof Qi){f.setDefaultLanguage(v.languageCode),q.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Pe,Ye]of Object.entries(R||{}))q[Pe]=Ye}if(f instanceof Ji){const Pe=f.getScopes().filter(Ye=>""!==Ye);Pe.length>0&&(q.scopes=Pe.join(","))}v.tenantId&&(q.tid=v.tenantId);const ue=q;for(const Pe of Object.keys(ue))void 0===ue[Pe]&&delete ue[Pe];return`${function Cf({config:v}){return v.emulator?Mn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,N.xO)(ue).slice(1)}`}const ka="webStorageSupport";class Ms extends class Ey{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ms(f)}_finalizeEnroll(f,g,_){return function Au(v,f){return nn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(v,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Pu(v,f){return nn(v,"POST","/v2/accounts/mfaSignIn:finalize",Mt(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ic=(()=>{class v{constructor(){}static assertion(g){return Ms._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var gr="@firebase/auth";class kr{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{var S;f((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ao(){return window}function Hd(){return(Hd=(0,h.Z)(function*(v,f,g){var _;const{BuildInfo:S}=ao();Z(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Sf(f.sessionId),q={};return en()?q.ibi=S.packageName:Bn()?q.apn=S.packageName:Te(v,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=R,Na(v,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,q)})).apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v){const{BuildInfo:f}=ao(),g={};en()?g.iosBundleId=f.packageName:Bn()?g.androidPackageName=f.packageName:Te(v,"operation-not-supported-in-this-environment"),yield so(v,g)})).apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(v,f,g){const{cordova:_}=ao();let S=()=>{};try{yield new Promise((R,q)=>{let ue=null;function Pe(){var rt;R();const tr=null===(rt=_.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof tr&&tr(),"function"==typeof g?.close&&g.close()}function Ye(){ue||(ue=window.setTimeout(()=>{q(ve(v,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Ye()}f.addPassiveListener(Pe),document.addEventListener("resume",Ye,!1),Bn()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{f.removePassiveListener(Pe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",gt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function Sf(v){return sc.apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(v){const f=Zp(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zp(v){if(Z(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let _=0;_<v.length;_++)g[_]=v.charCodeAt(_);return g}!function l0(v){(0,oe._registerComponent)(new le.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=_.options;return((ue,Pe)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ue.name}),U(!q?.includes(":"),"argument-error",{appName:ue.name});const Ye={apiKey:R,authDomain:q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gs(v)},gt=new At(ue,Pe,Ye);return function ke(v,f){const g=f?.persistence||[],_=(Array.isArray(g)?g:[g]).map(se);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(_,f?.popupRedirectResolver)}(gt,g),gt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",f=>{const g=yn(f.getProvider("auth").getImmediate());return new kr(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(gr,"0.20.6",function Pa(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,oe.registerVersion)(gr,"0.20.6","esm2017")}("Browser");class Dy extends Go{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Gd(v){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,h.Z)(function*(v){const f=yield uc()._get(zd(v));return f&&(yield uc()._remove(zd(v))),f})).apply(this,arguments)}function Af(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*f.length);v.push(f.charAt(_))}return v.join("")}function uc(){return se(wa)}function zd(v){return Zn("authEvent",v.config.apiKey,v.name)}function Zo(v){if(!v?.includes("?"))return{};const[f,...g]=v.split("?");return(0,N.zd)(g.join("?"))}function Qp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Gu(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function zu(v=(0,N.z$)()){return!("file:"!==Gu()&&"ionic:"!==Gu()&&"capacitor:"!==Gu()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function qd(){try{const v=self.localStorage,f=ba();if(v)return v.setItem(f,"1"),v.removeItem(f),!function c0(v=(0,N.z$)()){return function cc(){return(0,N.w1)()&&11===document?.documentMode}()||function Ay(v=(0,N.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,N.hl)()}catch{return Os()&&(0,N.hl)()}return!1}function Os(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fa(){return(function Fr(){return"http:"===Gu()||"https:"===Gu()}()||(0,N.ru)()||zu())&&!function Sy(){return(0,N.b$)()||(0,N.UG)()}()&&qd()&&!Os()}function dc(){return zu()&&typeof document<"u"}function qu(){return(qu=(0,h.Z)(function*(){return!!dc()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},Wu=U,hc="persistence";function fc(v){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,h.Z)(function*(v){yield v._initializationPromise;const f=pc(),g=Zn(hc,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function pc(){var v;try{return(null===(v=function Xp(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const co=U;class Rs{constructor(){this.browserResolver=se(class Iy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Li,this._completeRedirectFn=yt,this._overrideRedirectResult=ro}_openPopup(f,g,_,S){var R=this;return(0,h.Z)(function*(){var q;Z(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ue=Na(f,g,_,Re(),S);return function as(v,f,g,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-_)/2,0).toString();let ue="";const Pe=Object.assign(Object.assign({},ge),{width:_.toString(),height:S.toString(),top:R,left:q}),Ye=(0,N.z$)().toLowerCase();g&&(ue=Ni(Ye)?"_blank":g),gn(Ye)&&(f=f||"http://localhost",Pe.scrollbars="yes");const gt=Object.entries(Pe).reduce((tr,[hi,Ku])=>`${tr}${hi}=${Ku},`,"");if(function vi(v=(0,N.z$)()){var f;return en(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ye)&&"_self"!==ue)return function Ke(v,f){const g=document.createElement("a");g.href=v,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",ue),new rc(null);const rt=window.open(f||"",ue,gt);U(rt,v,"popup-blocked");try{rt.focus()}catch{}return new rc(rt)}(f,ue,ba())})()}_openRedirect(f,g,_,S){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function Ii(v){Nn().location.href=v}(Na(f,g,_,Re(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:R}=this.eventManagers[g];return S?Promise.resolve(S):(Z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const _=yield function wy(v){return Hu.apply(this,arguments)}(f),S=new Go(f);return _.register("authEvent",R=>(U(R?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=_,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(ka,{type:ka},S=>{var R;const q=null===(R=S?.[0])||void 0===R?void 0:R[ka];void 0!==q&&g(!!q),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ef(v){return Bi.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Us()||Un()||en()}}),this.cordovaResolver=se(class xf{constructor(){this._redirectPersistence=Li,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=ro}_initialize(f){var g=this;return(0,h.Z)(function*(){const _=f._key();let S=g.eventManagers.get(_);return S||(S=new Dy(f),g.eventManagers.set(_,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,S){var R=this;return(0,h.Z)(function*(){!function Pr(v){var f,g,_,S,R,q,ue,Pe,Ye,gt;const rt=ao();U("function"==typeof(null===(f=rt?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=rt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(S=null===(_=rt?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Pe=null===(ue=null===(q=rt?.cordova)||void 0===q?void 0:q.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(gt=null===(Ye=rt?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===gt?void 0:gt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function tc(){Nr.clear()}(),yield R._originValidation(f);const ue=function $d(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Af(),postBody:null,tenantId:v.tenantId,error:ve(v,"no-auth-event")}}(f,_,S);yield function oc(v,f){return uc()._set(zd(v),f)}(f,ue);const Pe=yield function by(v,f,g){return Hd.apply(this,arguments)}(f,ue,g),Ye=yield function Tf(v){const{cordova:f}=ao();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let S=null;_?f.plugins.browsertab.openUrl(v):S=f.InAppBrowser.open(v,function ui(v=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(S)})})}(Pe);return function In(v,f,g){return lo.apply(this,arguments)}(f,q,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Df(v){return uo.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=ao(),q=setTimeout((0,h.Z)(function*(){yield Gd(f),g.onEvent(Qp())}),500),ue=function(){var gt=(0,h.Z)(function*(rt){clearTimeout(q);const tr=yield Gd(f);let hi=null;tr&&rt?.url&&(hi=function ac(v,f){var g,_;const S=function Yp(v){const f=Zo(v),g=f.link?decodeURIComponent(f.link):void 0,_=Zo(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Zo(S).link||S||_||g||v}(f);if(S.includes("/__/auth/callback")){const R=Zo(S),q=R.firebaseError?function Ty(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ue=null===(_=null===(g=q?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Pe=ue?ve(ue):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(tr,rt.url)),g.onEvent(hi||Qp())});return function(tr){return gt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ue);const Pe=S,Ye=`${R.packageName.toLowerCase()}://`;ao().handleOpenURL=function(){var gt=(0,h.Z)(function*(rt){if(rt.toLowerCase().startsWith(Ye)&&ue({url:rt}),"function"==typeof Pe)try{Pe(rt)}catch(tr){console.error(tr)}});return function(rt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Li,this._completeRedirectFn=yt,this._overrideRedirectResult=ro}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,_,S)})()}_openRedirect(f,g,_,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,_,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return dc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return co(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Wd(){return qu.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Gn(v){return v.unwrap()}function Zd(v){return mc(v)}function mc(v){const{_tokenResponse:f}=v instanceof N.ZR?v.customData:v;if(!f)return null;if(!(v instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Aa.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=cu;break;case"facebook.com":_=ca;break;case"github.com":_=kl;break;case"twitter.com":_=qr;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ue,nonce:Pe}=f;return R||q||S||ue?ue?g.startsWith("saml.")?da._create(g,ue):Yi._fromParams({providerId:g,signInMethod:g,pendingToken:ue,idToken:S,accessToken:R}):new $s(g).credential({idToken:S,accessToken:R,rawNonce:Pe}):null}return v instanceof N.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function er(v,f){return f.catch(g=>{throw g instanceof N.ZR&&function gc(v,f){var g,_;const S=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=f)||void 0===_?void 0:_.code))f.resolver=new My(v,function Sn(v,f){var g;const _=(0,N.m9)(v),S=f;return U(f.customData.operationType,_,"argument-error"),U(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Tu._fromError(_,S)}(v,f));else if(S){const R=mc(f),q=f;R&&(q.credential=R,q.tenantId=S.tenantId||void 0,q.email=S.email||void 0,q.phoneNumber=S.phoneNumber||void 0)}}(v,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Zd(g),additionalUserInfo:Du(g),user:us.getOrCreate(S)}})}function yc(v,f){return vc.apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>er(v,g.confirm(_))}})).apply(this,arguments)}class My{constructor(f,g){this.resolver=g,this.auth=function Xn(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return er(Gn(this.auth),this.resolver.resolveSignIn(f))}}class us{constructor(f){this._delegate=f,this.multiFactor=function Ro(v){const f=(0,N.m9)(v);return Oo.has(f)||Oo.set(f,_f._fromUser(f)),Oo.get(f)}(f)}static getOrCreate(f){return us.USER_MAP.has(f)||us.USER_MAP.set(f,new us(f)),us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return er(g.auth,gu(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,h.Z)(function*(){return yc(_.auth,function on(v,f,g){return Yr.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return er(g.auth,function If(v,f,g){return jo.apply(this,arguments)}(g._delegate,f,Rs))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield fc(yn(g.auth)),function Q(v,f,g){return function ae(v,f,g){return Ce.apply(this,arguments)}(v,f,g)}(g._delegate,f,Rs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return er(g.auth,mu(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return yc(this.auth,function ss(v,f,g){return kn.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return er(this.auth,function zp(v,f,g){return Nd.apply(this,arguments)}(this._delegate,f,Rs))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield fc(yn(g.auth)),function D(v,f,g){return function x(v,f,g){return F.apply(this,arguments)}(v,f,g)}(g._delegate,f,Rs)})()}sendEmailVerification(f){return function jl(v,f){return va.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function Or(v,f){return hu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Ed(v,f){return Ks((0,N.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Zs(v,f){return Ks((0,N.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function pt(v,f){return Lu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Gl(v,f){return zl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Hl(v,f,g){return Eu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;const Ko=U;let La=(()=>{class v{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Ko(S,"invalid-api-key",{appName:g.name}),Ko(S,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Rs:void 0;this._delegate=_.initialize({options:{persistence:tg(S,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(_e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Tl(v,f,g){const _=yn(v);U(_._canInitEmulator,_,"emulator-config-failed"),U(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,R=ki(f),{host:q,port:ue}=function jn(v){const f=ki(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:ms(_.substr(R.length+1))}}{const[R,q]=_.split(":");return{host:R,port:ms(q)}}}(f);_.config.emulator={url:`${R}//${q}${null===ue?"":`:${ue}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:q,port:ue,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ys(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,_)}applyActionCode(g){return function di(v,f){return pa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ga(this._delegate,g)}confirmPasswordReset(g,_){return function wu(v,f,g){return So.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,h.Z)(function*(){return er(S._delegate,function qs(v,f,g){return Tn.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Iu(v,f){return ya.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ns(v,f){return"EMAIL_SIGNIN"===lu.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){Ko(Fa(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function je(v,f){return ct.apply(this,arguments)}(g._delegate,Rs);return _?er(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Jn(v,f){yn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:R,error:q,complete:ue}=Kd(g,_,S);return this._delegate.onAuthStateChanged(R,q,ue)}onIdTokenChanged(g,_,S){const{next:R,error:q,complete:ue}=Kd(g,_,S);return this._delegate.onIdTokenChanged(R,q,ue)}sendSignInLinkToEmail(g,_){return function Ul(v,f,g){return Ws.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function _u(v,f,g){return Dn.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,h.Z)(function*(){let S;switch(function xy(v,f){Wu(Object.values(Jr).includes(f),v,"invalid-persistence-type"),(0,N.b$)()?Wu(f!==Jr.SESSION,v,"unsupported-persistence-type"):(0,N.UG)()?Wu(f===Jr.NONE,v,"unsupported-persistence-type"):Os()?Wu(f===Jr.NONE||f===Jr.LOCAL&&(0,N.hl)(),v,"unsupported-persistence-type"):Wu(f===Jr.NONE||qd(),v,"unsupported-persistence-type")}(_._delegate,g),g){case Jr.SESSION:S=Li;break;case Jr.LOCAL:S=(yield se(ko)._isAvailable())?ko:wa;break;case Jr.NONE:S=Yt;break;default:return Te("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return er(this._delegate,function gf(v){return Cn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return er(this._delegate,_n(this._delegate,g))}signInWithCustomToken(g){return er(this._delegate,function Fl(v,f){return fa.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return er(this._delegate,function Fi(v,f,g){return _n((0,N.m9)(v),Pi.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return er(this._delegate,function jp(v,f,g){return ma.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return yc(this._delegate,function et(v,f,g){return Kr.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,h.Z)(function*(){return Ko(Fa(),_._delegate,"operation-not-supported-in-this-environment"),er(_._delegate,function Vi(v,f,g){return Uu.apply(this,arguments)}(_._delegate,g,Rs))})()}signInWithRedirect(g){var _=this;return(0,h.Z)(function*(){return Ko(Fa(),_._delegate,"operation-not-supported-in-this-environment"),yield fc(_._delegate),function Pn(v,f,g){return function qp(v,f,g){return b.apply(this,arguments)}(v,f,g)}(_._delegate,g,Rs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Vl(v,f){return Id.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Jr,v})();function Kd(v,f,g){let _=v;"function"!=typeof v&&({next:_,error:f,complete:g}=v);const S=_;return{next:q=>S(q&&us.getOrCreate(q)),error:f,complete:g}}function tg(v,f){const g=function eg(v,f){const g=pc();if(!g)return[];const _=Zn(hc,v,f);switch(g.getItem(_)){case Jr.NONE:return[Yt];case Jr.LOCAL:return[ko,Li];case Jr.SESSION:return[Li];default:return[]}}(v,f);if(typeof self<"u"&&!g.includes(ko)&&g.push(ko),typeof window<"u")for(const _ of[wa,Li])g.includes(_)||g.push(_);return g.includes(Yt)||g.push(Yt),g}class Rf{constructor(){this.providerId="phone",this._delegate=new Aa(Gn(ee.Z.auth()))}static credential(f,g){return Aa.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Rf.PHONE_SIGN_IN_METHOD=Aa.PHONE_SIGN_IN_METHOD,Rf.PROVIDER_ID=Aa.PROVIDER_ID;const Yd=U;class _c{constructor(f,g,_=ee.Z.app()){var S;Yd(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new lr(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function kf(v){v.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new La(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Pi,FacebookAuthProvider:ca,GithubAuthProvider:kl,GoogleAuthProvider:cu,OAuthProvider:$s,SAMLAuthProvider:li,PhoneAuthProvider:Rf,PhoneMultiFactorGenerator:ic,RecaptchaVerifier:_c,TwitterAuthProvider:qr,Auth:La,AuthCredential:hr,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.19")}(ee.Z)},9751:(at,De,P)=>{P.d(De,{y:()=>he});var h=P(2961),ee=P(727),N=P(8822),oe=P(9635),ie=P(2416),de=P(576),le=P(2806);let he=(()=>{class Y{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const _e=new Y;return _e.source=this,_e.operator=Ae,_e}subscribe(Ae,_e,Qe){const ye=function H(Y){return Y&&Y instanceof h.Lv||function B(Y){return Y&&(0,de.m)(Y.next)&&(0,de.m)(Y.error)&&(0,de.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Ae)?Ae:new h.Hp(Ae,_e,Qe);return(0,le.x)(()=>{const{operator:fe,source:Ze}=this;ye.add(fe?fe.call(ye,Ze):Ze?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(_e){Ae.error(_e)}}forEach(Ae,_e){return new(_e=pe(_e))((Qe,ye)=>{const fe=new h.Hp({next:Ze=>{try{Ae(Ze)}catch(nt){ye(nt),fe.unsubscribe()}},error:ye,complete:Qe});this.subscribe(fe)})}_subscribe(Ae){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Ae)}[N.L](){return this}pipe(...Ae){return(0,oe.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((_e,Qe)=>{let ye;this.subscribe(fe=>ye=fe,fe=>Qe(fe),()=>_e(ye))})}}return Y.create=Le=>new Y(Le),Y})();function pe(Y){var Le;return null!==(Le=Y??ie.v.Promise)&&void 0!==Le?Le:Promise}},7579:(at,De,P)=>{P.d(De,{x:()=>le});var h=P(9751),ee=P(727);const oe=(0,P(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=P(8737),de=P(2806);let le=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new he(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new oe}next(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:Le,observers:Ae}=this;return Y||Le?ee.Lc:(this.currentObservers=null,Ae.push(H),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(Ae,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:Le,isStopped:Ae}=this;Y?H.error(Le):Ae&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return pe.create=(B,H)=>new he(B,H),pe})();class he extends le{constructor(B,H){super(),this.destination=B,this.source=H}next(B){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,B)}error(B){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,B)}complete(){var B,H;null===(H=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===H||H.call(B)}_subscribe(B){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(B))&&void 0!==Y?Y:ee.Lc}}},2961:(at,De,P)=>{P.d(De,{Hp:()=>Qe,Lv:()=>Y});var h=P(576),ee=P(727),N=P(2416),oe=P(7849);function ie(){}const de=pe("C",void 0,void 0);function pe(Te,ve,Ie){return{kind:Te,value:ve,error:Ie}}var B=P(3410),H=P(2806);class Y extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=nt}static create(ve,Ie,Ue){return new Qe(ve,Ie,Ue)}next(ve){this.isStopped?Ze(function he(Te){return pe("N",Te,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ze(function le(Te){return pe("E",void 0,Te)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ze(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ae(Te,ve){return Le.call(Te,ve)}class _e{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(Ue){ye(Ue)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(Ue){ye(Ue)}else ye(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){ye(Ie)}}}class Qe extends Y{constructor(ve,Ie,Ue){let Be;if(super(),(0,h.m)(ve)||!ve)Be={next:ve??void 0,error:Ie??void 0,complete:Ue??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(ve),U.unsubscribe=()=>this.unsubscribe(),Be={next:ve.next&&Ae(ve.next,U),error:ve.error&&Ae(ve.error,U),complete:ve.complete&&Ae(ve.complete,U)}):Be=ve}this.destination=new _e(Be)}}function ye(Te){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Te):(0,oe.h)(Te)}function Ze(Te,ve){const{onStoppedNotification:Ie}=N.v;Ie&&B.z.setTimeout(()=>Ie(Te,ve))}const nt={closed:!0,next:ie,error:function fe(Te){throw Te},complete:ie}},727:(at,De,P)=>{P.d(De,{Lc:()=>de,w0:()=>ie,Nn:()=>le});var h=P(576);const N=(0,P(3888).d)(pe=>function(H){pe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,Le)=>`${Le+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var oe=P(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ae of H)Ae.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,h.m)(Y))try{Y()}catch(Ae){B=Ae instanceof N?Ae.errors:[Ae]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ae of Le)try{he(Ae)}catch(_e){B=B??[],_e instanceof N?B=[...B,..._e.errors]:B.push(_e)}}if(B)throw new N(B)}}add(B){var H;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(B)}}_hasParent(B){const{_parentage:H}=this;return H===B||Array.isArray(H)&&H.includes(B)}_addParent(B){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(B),H):H?[H,B]:B}_removeParent(B){const{_parentage:H}=this;H===B?this._parentage=null:Array.isArray(H)&&(0,oe.P)(H,B)}remove(B){const{_finalizers:H}=this;H&&(0,oe.P)(H,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const de=ie.EMPTY;function le(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function he(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2416:(at,De,P)=>{P.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,P)=>{P.d(De,{E:()=>ee});const ee=new(P(9751).y)(ie=>ie.complete())},8996:(at,De,P)=>{P.d(De,{D:()=>ve});var h=P(8421),ee=P(5363),N=P(9468),de=P(9751),he=P(2202),pe=P(576),B=P(9672);function Y(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(Be=>{(0,B.f)(Be,Ue,()=>{const U=Ie[Symbol.asyncIterator]();(0,B.f)(Be,Ue,()=>{U.next().then(me=>{me.done?Be.complete():Be.next(me.value)})},0,!0)})})}var Le=P(3670),Ae=P(8239),_e=P(1144),Qe=P(6495),ye=P(2206),fe=P(4532),Ze=P(3260);function ve(Ie,Ue){return Ue?function Te(Ie,Ue){if(null!=Ie){if((0,Le.c)(Ie))return function oe(Ie,Ue){return(0,h.Xf)(Ie).pipe((0,N.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,_e.z)(Ie))return function le(Ie,Ue){return new de.y(Be=>{let U=0;return Ue.schedule(function(){U===Ie.length?Be.complete():(Be.next(Ie[U++]),Be.closed||this.schedule())})})}(Ie,Ue);if((0,Ae.t)(Ie))return function ie(Ie,Ue){return(0,h.Xf)(Ie).pipe((0,N.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,ye.D)(Ie))return Y(Ie,Ue);if((0,Qe.T)(Ie))return function H(Ie,Ue){return new de.y(Be=>{let U;return(0,B.f)(Be,Ue,()=>{U=Ie[he.h](),(0,B.f)(Be,Ue,()=>{let me,Z;try{({value:me,done:Z}=U.next())}catch(J){return void Be.error(J)}Z?Be.complete():Be.next(me)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(Ie,Ue);if((0,Ze.L)(Ie))return function nt(Ie,Ue){return Y((0,Ze.Q)(Ie),Ue)}(Ie,Ue)}throw(0,fe.z)(Ie)}(Ie,Ue):(0,h.Xf)(Ie)}},8421:(at,De,P)=>{P.d(De,{Xf:()=>Le});var h=P(655),ee=P(1144),N=P(8239),oe=P(9751),ie=P(3670),de=P(2206),le=P(4532),he=P(6495),pe=P(3260),B=P(576),H=P(7849),Y=P(8822);function Le(Te){if(Te instanceof oe.y)return Te;if(null!=Te){if((0,ie.c)(Te))return function Ae(Te){return new oe.y(ve=>{const Ie=Te[Y.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.z)(Te))return function _e(Te){return new oe.y(ve=>{for(let Ie=0;Ie<Te.length&&!ve.closed;Ie++)ve.next(Te[Ie]);ve.complete()})}(Te);if((0,N.t)(Te))return function Qe(Te){return new oe.y(ve=>{Te.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,H.h)})}(Te);if((0,de.D)(Te))return fe(Te);if((0,he.T)(Te))return function ye(Te){return new oe.y(ve=>{for(const Ie of Te)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Te);if((0,pe.L)(Te))return function Ze(Te){return fe((0,pe.Q)(Te))}(Te)}throw(0,le.z)(Te)}function fe(Te){return new oe.y(ve=>{(function nt(Te,ve){var Ie,Ue,Be,U;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(Te);!(Ue=yield Ie.next()).done;)if(ve.next(Ue.value),ve.closed)return}catch(me){Be={error:me}}finally{try{Ue&&!Ue.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(Be)throw Be.error}}ve.complete()})})(Te,ve).catch(Ie=>ve.error(Ie))})}},6451:(at,De,P)=>{P.d(De,{T:()=>de});var h=P(8189),ee=P(8421),N=P(515),oe=P(7669),ie=P(8996);function de(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,h.J)(pe)((0,ie.D)(B,he)):N.E}},5403:(at,De,P)=>{P.d(De,{x:()=>ee});var h=P(2961);function ee(oe,ie,de,le,he){return new N(oe,ie,de,le,he)}class N extends h.Lv{constructor(ie,de,le,he,pe,B){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=de?function(H){try{de(H)}catch(Y){ie.error(Y)}}:super._next,this._error=he?function(H){try{he(H)}catch(Y){ie.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){ie.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(at,De,P)=>{P.d(De,{U:()=>N});var h=P(4482),ee=P(5403);function N(oe,ie){return(0,h.e)((de,le)=>{let he=0;de.subscribe((0,ee.x)(le,pe=>{le.next(oe.call(ie,pe,he++))}))})}},8189:(at,De,P)=>{P.d(De,{J:()=>N});var h=P(5577),ee=P(4671);function N(oe=1/0){return(0,h.z)(ee.y,oe)}},5577:(at,De,P)=>{P.d(De,{z:()=>he});var h=P(4004),ee=P(8421),N=P(4482),oe=P(9672),ie=P(5403),le=P(576);function he(pe,B,H=1/0){return(0,le.m)(B)?he((Y,Le)=>(0,h.U)((Ae,_e)=>B(Y,Ae,Le,_e))((0,ee.Xf)(pe(Y,Le))),H):("number"==typeof B&&(H=B),(0,N.e)((Y,Le)=>function de(pe,B,H,Y,Le,Ae,_e,Qe){const ye=[];let fe=0,Ze=0,nt=!1;const Te=()=>{nt&&!ye.length&&!fe&&B.complete()},ve=Ue=>fe<Y?Ie(Ue):ye.push(Ue),Ie=Ue=>{Ae&&B.next(Ue),fe++;let Be=!1;(0,ee.Xf)(H(Ue,Ze++)).subscribe((0,ie.x)(B,U=>{Le?.(U),Ae?ve(U):B.next(U)},()=>{Be=!0},void 0,()=>{if(Be)try{for(fe--;ye.length&&fe<Y;){const U=ye.shift();_e?(0,oe.f)(B,_e,()=>Ie(U)):Ie(U)}Te()}catch(U){B.error(U)}}))};return pe.subscribe((0,ie.x)(B,ve,()=>{nt=!0,Te()})),()=>{Qe?.()}}(Y,Le,pe,H)))}},5363:(at,De,P)=>{P.d(De,{Q:()=>oe});var h=P(9672),ee=P(4482),N=P(5403);function oe(ie,de=0){return(0,ee.e)((le,he)=>{le.subscribe((0,N.x)(he,pe=>(0,h.f)(he,ie,()=>he.next(pe),de),()=>(0,h.f)(he,ie,()=>he.complete(),de),pe=>(0,h.f)(he,ie,()=>he.error(pe),de)))})}},3099:(at,De,P)=>{P.d(De,{B:()=>ie});var h=P(8421),ee=P(7579),N=P(2961),oe=P(4482);function ie(le={}){const{connector:he=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:H=!0}=le;return Y=>{let Le,Ae,_e,Qe=0,ye=!1,fe=!1;const Ze=()=>{Ae?.unsubscribe(),Ae=void 0},nt=()=>{Ze(),Le=_e=void 0,ye=fe=!1},Te=()=>{const ve=Le;nt(),ve?.unsubscribe()};return(0,oe.e)((ve,Ie)=>{Qe++,!fe&&!ye&&Ze();const Ue=_e=_e??he();Ie.add(()=>{Qe--,0===Qe&&!fe&&!ye&&(Ae=de(Te,H))}),Ue.subscribe(Ie),!Le&&Qe>0&&(Le=new N.Hp({next:Be=>Ue.next(Be),error:Be=>{fe=!0,Ze(),Ae=de(nt,pe,Be),Ue.error(Be)},complete:()=>{ye=!0,Ze(),Ae=de(nt,B),Ue.complete()}}),(0,h.Xf)(ve).subscribe(Le))})(Y)}}function de(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const B=new N.Hp({next:()=>{B.unsubscribe(),le()}});return he(...pe).subscribe(B)}},9468:(at,De,P)=>{P.d(De,{R:()=>ee});var h=P(4482);function ee(N,oe=0){return(0,h.e)((ie,de)=>{de.add(N.schedule(()=>ie.subscribe(de),oe))})}},8505:(at,De,P)=>{P.d(De,{b:()=>ie});var h=P(576),ee=P(4482),N=P(5403),oe=P(4671);function ie(de,le,he){const pe=(0,h.m)(de)||le||he?{next:de,error:le,complete:he}:de;return pe?(0,ee.e)((B,H)=>{var Y;null===(Y=pe.subscribe)||void 0===Y||Y.call(pe);let Le=!0;B.subscribe((0,N.x)(H,Ae=>{var _e;null===(_e=pe.next)||void 0===_e||_e.call(pe,Ae),H.next(Ae)},()=>{var Ae;Le=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),H.complete()},Ae=>{var _e;Le=!1,null===(_e=pe.error)||void 0===_e||_e.call(pe,Ae),H.error(Ae)},()=>{var Ae,_e;Le&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(_e=pe.finalize)||void 0===_e||_e.call(pe)}))}):oe.y}},4408:(at,De,P)=>{P.d(De,{o:()=>ie});var h=P(727);class ee extends h.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const N={setInterval(de,le,...he){const{delegate:pe}=N;return pe?.setInterval?pe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=N;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=P(8737);class ie extends ee{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){if(this.closed)return this;this.state=le;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(le,he,pe=0){return N.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;N.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,pe=!1;try{this.work(le)}catch(H){pe=!0,B=H||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,P)=>{P.d(De,{v:()=>N});var h=P(6063);class ee{constructor(ie,de=ee.now){this.schedulerActionCtor=ie,this.now=de}schedule(ie,de=0,le){return new this.schedulerActionCtor(this,ie).schedule(le,de)}}ee.now=h.l.now;class N extends ee{constructor(ie,de=ee.now){super(ie,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:de}=this;if(this._active)return void de.push(ie);let le;this._active=!0;do{if(le=ie.execute(ie.state,ie.delay))break}while(ie=de.shift());if(this._active=!1,le){for(;ie=de.shift();)ie.unsubscribe();throw le}}}},4986:(at,De,P)=>{P.d(De,{z:()=>N});var h=P(4408);const N=new(P(7565).v)(h.o)},6063:(at,De,P)=>{P.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(at,De,P)=>{P.d(De,{z:()=>h});const h={setTimeout(ee,N,...oe){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(ee,N,...oe):setTimeout(ee,N,...oe)},clearTimeout(ee){const{delegate:N}=h;return(N?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(at,De,P)=>{P.d(De,{h:()=>ee});const ee=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,P)=>{P.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,De,P)=>{P.d(De,{_6:()=>de,jO:()=>oe,yG:()=>ie});var h=P(576);function N(le){return le[le.length-1]}function oe(le){return(0,h.m)(N(le))?le.pop():void 0}function ie(le){return function ee(le){return le&&(0,h.m)(le.schedule)}(N(le))?le.pop():void 0}function de(le,he){return"number"==typeof N(le)?le.pop():he}},8737:(at,De,P)=>{function h(ee,N){if(ee){const oe=ee.indexOf(N);0<=oe&&ee.splice(oe,1)}}P.d(De,{P:()=>h})},3888:(at,De,P)=>{function h(ee){const oe=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(De,{d:()=>h})},2806:(at,De,P)=>{P.d(De,{O:()=>oe,x:()=>N});var h=P(2416);let ee=null;function N(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),ie(),de){const{errorThrown:le,error:he}=ee;if(ee=null,le)throw he}}else ie()}function oe(ie){h.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(at,De,P)=>{function h(ee,N,oe,ie=0,de=!1){const le=N.schedule(function(){oe(),de?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(le),!de)return le}P.d(De,{f:()=>h})},4671:(at,De,P)=>{function h(ee){return ee}P.d(De,{y:()=>h})},1144:(at,De,P)=>{P.d(De,{z:()=>h});const h=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(at,De,P)=>{P.d(De,{D:()=>ee});var h=P(576);function ee(N){return Symbol.asyncIterator&&(0,h.m)(N?.[Symbol.asyncIterator])}},576:(at,De,P)=>{function h(ee){return"function"==typeof ee}P.d(De,{m:()=>h})},3670:(at,De,P)=>{P.d(De,{c:()=>N});var h=P(8822),ee=P(576);function N(oe){return(0,ee.m)(oe[h.L])}},6495:(at,De,P)=>{P.d(De,{T:()=>N});var h=P(2202),ee=P(576);function N(oe){return(0,ee.m)(oe?.[h.h])}},8239:(at,De,P)=>{P.d(De,{t:()=>ee});var h=P(576);function ee(N){return(0,h.m)(N?.then)}},3260:(at,De,P)=>{P.d(De,{L:()=>oe,Q:()=>N});var h=P(655),ee=P(576);function N(ie){return(0,h.FC)(this,arguments,function*(){const le=ie.getReader();try{for(;;){const{value:he,done:pe}=yield(0,h.qq)(le.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(he)}}finally{le.releaseLock()}})}function oe(ie){return(0,ee.m)(ie?.getReader)}},4482:(at,De,P)=>{P.d(De,{A:()=>ee,e:()=>N});var h=P(576);function ee(oe){return(0,h.m)(oe?.lift)}function N(oe){return ie=>{if(ee(ie))return ie.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(at,De,P)=>{P.d(De,{U:()=>N,z:()=>ee});var h=P(4671);function ee(...oe){return N(oe)}function N(oe){return 0===oe.length?h.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(at,De,P)=>{P.d(De,{h:()=>N});var h=P(2416),ee=P(3410);function N(oe){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw oe;ie(oe)})}},4532:(at,De,P)=>{function h(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>h})},655:(at,De,P)=>{function oe(Z,J){var se={};for(var ne in Z)Object.prototype.hasOwnProperty.call(Z,ne)&&J.indexOf(ne)<0&&(se[ne]=Z[ne]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ne=Object.getOwnPropertySymbols(Z);ke<ne.length;ke++)J.indexOf(ne[ke])<0&&Object.prototype.propertyIsEnumerable.call(Z,ne[ke])&&(se[ne[ke]]=Z[ne[ke]])}return se}function he(Z,J,se,ne){return new(se||(se=Promise))(function(Re,lt){function Ht(rn){try{Ge(ne.next(rn))}catch(Mn){lt(Mn)}}function Ft(rn){try{Ge(ne.throw(rn))}catch(Mn){lt(Mn)}}function Ge(rn){rn.done?Re(rn.value):function ke(Re){return Re instanceof se?Re:new se(function(lt){lt(Re)})}(rn.value).then(Ht,Ft)}Ge((ne=ne.apply(Z,J||[])).next())})}function ye(Z){return this instanceof ye?(this.v=Z,this):new ye(Z)}function fe(Z,J,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ne=se.apply(Z,J||[]),Re=[];return ke={},lt("next"),lt("throw"),lt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function lt(Wt){ne[Wt]&&(ke[Wt]=function(Zt){return new Promise(function(Sr,Mt){Re.push([Wt,Zt,Sr,Mt])>1||Ht(Wt,Zt)})})}function Ht(Wt,Zt){try{!function Ft(Wt){Wt.value instanceof ye?Promise.resolve(Wt.value.v).then(Ge,rn):Mn(Re[0][2],Wt)}(ne[Wt](Zt))}catch(Sr){Mn(Re[0][3],Sr)}}function Ge(Wt){Ht("next",Wt)}function rn(Wt){Ht("throw",Wt)}function Mn(Wt,Zt){Wt(Zt),Re.shift(),Re.length&&Ht(Re[0][0],Re[0][1])}}function nt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function Y(Z){var J="function"==typeof Symbol&&Symbol.iterator,se=J&&Z[J],ne=0;if(se)return se.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ne>=Z.length&&(Z=void 0),{value:Z&&Z[ne++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),se={},ne("next"),ne("throw"),ne("return"),se[Symbol.asyncIterator]=function(){return this},se);function ne(Re){se[Re]=Z[Re]&&function(lt){return new Promise(function(Ht,Ft){!function ke(Re,lt,Ht,Ft){Promise.resolve(Ft).then(function(Ge){Re({value:Ge,done:Ht})},lt)}(Ht,Ft,(lt=Z[Re](lt)).done,lt.value)})}}}P.d(De,{FC:()=>fe,KL:()=>nt,_T:()=>oe,mG:()=>he,qq:()=>ye})},4650:(at,De,P)=>{P.d(De,{$8M:()=>Pu,$Z:()=>ja,AFp:()=>pw,ALo:()=>mE,AaK:()=>he,CHM:()=>vu,CRH:()=>Pm,CZH:()=>Kh,CqO:()=>Lv,D6c:()=>mT,DdM:()=>Cm,EJc:()=>zm,EpF:()=>Fv,F4k:()=>hI,FYo:()=>gt,FiY:()=>je,G48:()=>Sw,GfV:()=>Ku,Gpc:()=>H,JOm:()=>Qo,KtG:()=>_u,LFG:()=>Pn,LSH:()=>Of,Lbi:()=>gw,Lck:()=>k_,MAs:()=>Rv,MMx:()=>wm,NdJ:()=>Ls,OlP:()=>ln,Oqu:()=>Mh,PXZ:()=>tT,Q6J:()=>qg,QGY:()=>ii,QP$:()=>Ni,Qsj:()=>rt,R0b:()=>Vs,RDi:()=>_y,Rgc:()=>ad,SBq:()=>ue,Sil:()=>WD,Suo:()=>ud,TTD:()=>Ji,TgZ:()=>Wg,VKq:()=>fE,W1O:()=>iw,X6Q:()=>iT,XFs:()=>We,Xpm:()=>$,Xts:()=>Fa,Y36:()=>Mc,YKP:()=>iE,YNc:()=>uI,Yjl:()=>kt,Yz7:()=>Zt,Z0I:()=>oa,ZZ4:()=>iu,_Bn:()=>vm,_UZ:()=>ul,_Vd:()=>S,_c5:()=>sb,_uU:()=>xh,aQg:()=>ty,c2e:()=>FE,cJS:()=>Mt,cg1:()=>kh,dDg:()=>JD,dqk:()=>sn,eFA:()=>GE,ekj:()=>Jg,eoX:()=>Zm,f3M:()=>b,g9A:()=>$m,h0i:()=>Bh,hGG:()=>ny,hij:()=>dl,iGM:()=>nw,ifc:()=>ot,ip1:()=>jm,jDz:()=>P_,kL8:()=>n_,lG2:()=>Zn,lcZ:()=>vE,lqb:()=>er,lri:()=>Iw,n5z:()=>is,oAB:()=>st,oxw:()=>gI,q4F:()=>Va,qLn:()=>Xd,qOj:()=>Xo,qZA:()=>Zg,rWj:()=>Ew,sBO:()=>Aw,sIi:()=>op,s_b:()=>Am,soG:()=>Gm,tb:()=>PE,tp0:()=>yt,uIk:()=>Tv,vHH:()=>_e,vpe:()=>_o,wAp:()=>ht,xp6:()=>N0,z2F:()=>Ym,zSh:()=>Gn,zs3:()=>Sc});var h=P(7579),ee=P(727),N=P(9751),oe=P(6451),ie=P(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function pe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=de({__forward_ref__:de});function H(i){return i.__forward_ref__=H,i.toString=function(){return he(this())},i}function Y(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===H}class _e extends Error{constructor(s,a){super(function Qe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new _e(-201,!1)}function Ft(i,s){null==i&&function Ge(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Mt(i){return{providers:i.providers||[],imports:i.imports||[]}}function nn(i){return Hr(i,Ri)||Hr(i,gi)}function oa(i){return null!==nn(i)}function Hr(i,s){return i.hasOwnProperty(s)?i[s]:null}function ps(i){return i&&(i.hasOwnProperty(Gr)||i.hasOwnProperty(Do))?i[Gr]:null}const Ri=de({\u0275prov:de}),Gr=de({\u0275inj:de}),gi=de({ngInjectableDef:de}),Do=de({ngInjectorDef:de});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let zr;function On(i){const s=zr;return zr=i,s}function mi(i,s,a){const l=nn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&We.Optional?null:void 0!==s?s:void ve(he(i))}function Rn(i){return{toString:i}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),ot=(()=>{return(i=ot||(ot={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ot;var i})();const sn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ar={},_t=[],Ki=de({\u0275cmp:de}),Kt=de({\u0275dir:de}),yi=de({\u0275pipe:de}),qt=de({\u0275mod:de}),W=de({\u0275fac:de}),j=de({__NG_ELEMENT_ID__:de});let L=0;function $(i){return Rn(()=>{const a=!0===i.standalone,l={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||_t,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,id:"c"+L++,styles:i.styles||_t,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,y=i.features;return c.inputs=Yt(i.inputs,l),c.outputs=Yt(i.outputs),y&&y.forEach(I=>I(c)),c.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ee).filter(Ve):null,c.pipeDefs=p?()=>("function"==typeof p?p():p).map(Un).filter(Ve):null,c})}function Ee(i){return St(i)||gn(i)}function Ve(i){return null!==i}function st(i){return Rn(()=>({type:i.type,bootstrap:i.bootstrap||_t,declarations:i.declarations||_t,imports:i.imports||_t,exports:i.exports||_t,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Yt(i,s){if(null==i)return Ar;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Zn=$;function kt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function St(i){return i[Ki]||null}function gn(i){return i[Kt]||null}function Un(i){return i[yi]||null}function Ni(i){const s=St(i)||gn(i)||Un(i);return null!==s&&s.standalone}function xr(i,s){const a=i[qt]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function ar(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mr(i){return Array.isArray(i)&&!0===i[1]}function au(i){return 0!=(8&i.flags)}function la(i){return 2==(2&i.flags)}function Ml(i){return 1==(1&i.flags)}function Ir(i){return null!==i.template}function cf(i){return 0!=(256&i[2])}function Pi(i,s){return i.hasOwnProperty(W)?i[W]:null}class Qi{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ji(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=cu),ca}function ca(){const i=ff(this),s=i?.current;if(s){const a=i.previous;if(a===Ar)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function cu(i,s,a,l){const c=ff(i)||function da(i,s){return i[kl]=s}(i,{previous:Ar,current:null}),p=c.current||(c.current={}),y=c.previous,I=this.declaredInputs[a],E=y[I];p[I]=new Qi(E&&E.currentValue,s,y===Ar),i[l]=s}Ji.ngInherit=!0;const kl="__ngSimpleChanges__";function ff(i){return i[kl]||null}function Cn(i){for(;Array.isArray(i);)i=i[0];return i}function ci(i,s){return Cn(s[i])}function Or(i,s){return Cn(s[i.index])}function Gs(i,s){return i.data[s]}function es(i,s){return i[s]}function Ut(i,s){const a=s[i];return ar(a)?a:a[0]}function ha(i){return 4==(4&i[2])}function zs(i){return 64==(64&i[2])}function wi(i,s){return null==s?null:i[s]}function pu(i){i[18]=0}function _n(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const wt={lFrame:Gl(null),bindingsEnabled:!0};function ts(){return wt.bindingsEnabled}function be(){return wt.lFrame.lView}function Pt(){return wt.lFrame.tView}function vu(i){return wt.lFrame.contextLView=i,i[8]}function _u(i){return wt.lFrame.contextLView=null,i}function Dn(){let i=wu();for(;null!==i&&64===i.type;)i=i.parent;return i}function wu(){return wt.lFrame.currentTNode}function di(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function pa(){return wt.lFrame.isParent}function Tn(){const i=wt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ws(){return wt.lFrame.bindingIndex++}function Hp(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Iu(s)}function Iu(i){wt.lFrame.currentDirectiveIndex=i}function jl(){return wt.lFrame.currentQueryIndex}function va(i){wt.lFrame.currentQueryIndex=i}function Hl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Eu(i,s,a){if(a&We.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&We.Host||(c=Hl(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=wt.lFrame=$l();return l.currentTNode=s,l.lView=i,!0}function bu(i){const s=$l(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function $l(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?Gl(i):s}function Gl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function zl(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ed=zl;function Zs(){const i=zl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Qn(){return wt.lFrame.selectedIndex}function Wr(i){wt.lFrame.selectedIndex=i}function dn(){const i=wt.lFrame;return Gs(i.tView,i.selectedIndex)}function Zl(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=p;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ao(i,s,a){Mo(i,s,3,a)}function xo(i,s,a,l){(3&i[2])===a&&Mo(i,s,a,l)}function Dd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Mo(i,s,a,l){const p=l??-1,y=s.length-1;let I=0;for(let E=void 0!==l?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=l&&I>=l)break}else s[E]<0&&(i[18]+=65536),(I<p||-1==p)&&(Td(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Td(i,s,a,l){const c=a[l]<0,p=a[l+1],I=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class bs{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ro(i,s,a){let l=0;for(;l<a.length;){const c=a[l];if("number"==typeof c){if(0!==c)break;l++;const p=a[l++],y=a[l++],I=a[l++];i.setAttribute(s,y,I,p)}else{const p=c,y=a[++l];xu(p)?i.setProperty(s,p,y):i.setAttribute(s,p,y),l++}}return l}function Qs(i){return 3===i||4===i||6===i}function xu(i){return 64===i.charCodeAt(0)}function _a(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Ad(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Ad(i,s,a,l,c){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const I=i[p++];if("number"==typeof I){if(I===s){y=-1;break}if(I>s){y=p-1;break}}}for(;p<i.length;){const I=i[p];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function xd(i){return-1!==i}function ur(i){return 32767&i}function Ia(i,s){let a=function wa(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Li=!0;function Ea(i){const s=Li;return Li=i,s}let Nn=0;const Ii={};function Js(i,s){const a=Ou(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Ca(l.data,i),Ca(s,null),Ca(l.blueprint,null));const c=Ru(i,s),p=i.injectorIndex;if(xd(c)){const y=ur(c),I=Ia(c,s),E=I[1].data;for(let T=0;T<8;T++)s[p+T]=I[y+T]|E[y+T]}return s[p+8]=c,p}function Ca(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ou(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ru(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){if(l=Po(c),null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Cs(i,s,a){!function Mu(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=Nn++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ds(i,s,a){if(a&We.Optional)return i;ve()}function Yl(i,s,a,l){if(a&We.Optional&&void 0===l&&(l=null),0==(a&(We.Self|We.Host))){const c=i[9],p=On(void 0);try{return c?c.get(s,l,a&We.Optional):mi(s,l,a&We.Optional)}finally{On(p)}}return Ds(l,0,a)}function Xs(i,s,a,l=We.Default,c){if(null!==i){if(1024&s[2]){const y=function ko(i,s,a,l,c){let p=i,y=s;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Da(p,y,a,l|We.Self,Ii);if(I!==Ii)return I;let E=p.parent;if(!E){const T=y[21];if(T){const M=T.get(a,Ii,l);if(M!==Ii)return M}E=Po(y),y=y[15]}p=E}return c}(i,s,a,l,Ii);if(y!==Ii)return y}const p=Da(i,s,a,l,Ii);if(p!==Ii)return p}return Yl(s,a,l,c)}function Da(i,s,a,l,c){const p=function Ql(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof s?s>=0?255&s:Jl:s}(a);if("function"==typeof p){if(!Eu(s,i,l))return l&We.Host?Ds(c,0,l):Yl(s,a,l,c);try{const y=p(l);if(null!=y||l&We.Optional)return y;ve()}finally{Ed()}}else if("number"==typeof p){let y=null,I=Ou(i,s),E=-1,T=l&We.Host?s[16][6]:null;for((-1===I||l&We.SkipSelf)&&(E=-1===I?Ru(i,s):s[I+8],-1!==E&&Ta(l,!1)?(y=s[1],I=ur(E),s=Ia(E,s)):I=-1);-1!==I;){const M=s[1];if(Nu(p,I,M.data)){const k=Rd(I,s,a,y,l,T);if(k!==Ii)return k}E=s[I+8],-1!==E&&Ta(l,s[1].data[I+8]===T)&&Nu(p,I,s)?(y=M,I=ur(E),s=Ia(E,s)):I=-1}}return c}function Rd(i,s,a,l,c,p){const y=s[1],I=y.data[i+8],M=No(I,y,a,null==l?la(I)&&Li:l!=y&&0!=(3&I.type),c&We.Host&&p===I);return null!==M?rs(s,y,M,I):Ii}function No(i,s,a,l,c){const p=i.providerIndexes,y=s.data,I=1048575&p,E=i.directiveStart,M=p>>20,G=c?I+M:i.directiveEnd;for(let te=l?I:I+M;te<G;te++){const we=y[te];if(te<E&&a===we||te>=E&&we.type===a)return te}if(c){const te=y[E];if(te&&Ir(te)&&te.type===a)return E}return null}function rs(i,s,a,l){let c=i[a];const p=s.data;if(function Ys(i){return i instanceof bs}(c)){const y=c;y.resolving&&function Ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}(p[a]));const I=Ea(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?On(y.injectImpl):null;Eu(i,l,We.Default);try{c=i[a]=y.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Cd(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const y=$s(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==E&&On(E),Ea(I),y.resolving=!1,Ed()}}return c}function Nu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ta(i,s){return!(i&We.Self||i&We.Host&&s)}class eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Xs(this._tNode,this._lView,s,l,a)}}function Jl(){return new eo(Dn(),be())}function is(i){return Rn(()=>{const s=i.prototype.constructor,a=s[W]||ku(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[W]||ku(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function ku(i){return Le(i)?()=>{const s=ku(Y(i));return s&&s()}:Pi(i)}function Po(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Pu(i){return function Od(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(Qs(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(Dn(),i)}const Ts="__parameters__";function Vo(i,s,a){return Rn(()=>{const l=function Fu(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const y=new c(...p);return I.annotation=y,I;function I(E,T,M){const k=E.hasOwnProperty(Ts)?E[Ts]:Object.defineProperty(E,Ts,{value:[]})[Ts];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),E}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class ln{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function on(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),on(l,s)):s!==i&&s.push(l)}return s}function Yr(i,s){i.forEach(a=>Array.isArray(a)?Yr(a,s):s(a))}function ss(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function kn(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Qr(i,s,a){let l=As(i,s);return l>=0?i[1|l]=a:(l=~l,function Lu(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function xa(i,s){const a=As(i,s);if(a>=0)return i[1|a]}function As(i,s){return function Uo(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),y=i[p<<a];if(s===y)return p<<a;y>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Nr={},wn="__NG_DI_FLAG__",Ho="ngTempTokenPath",$o=/\n/gm,tc="__source";let ro;function os(i){const s=ro;return ro=i,s}function nc(i,s=We.Default){if(void 0===ro)throw new _e(-203,!1);return null===ro?mi(i,void 0,s):ro.get(i,s&We.Optional?null:void 0,s)}function Pn(i,s=We.Default){return(function Zi(){return zr}()||nc)(Y(i),s)}function b(i,s=We.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Pn(i,s)}function D(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new _e(900,!1);let c,p=We.Default;for(let y=0;y<l.length;y++){const I=l[y],E=F(I);"number"==typeof E?-1===E?c=I.token:p|=E:c=I}s.push(Pn(c,p))}else s.push(Pn(l))}return s}function x(i,s){return i[wn]=s,i.prototype[wn]=s,i}function F(i){return i[wn]}const je=x(Vo("Optional"),8),yt=x(Vo("SkipSelf"),4);let bf;function _y(i){bf=i}class Na{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ms(i){return i instanceof Na?i.changingThisBreaksApplicationSecurity:i}const Df=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function Of(i){const s=function Os(){const i=be();return i&&i[12]}();return s?s.sanitize(Jn.URL,i)||"":function ic(i,s){const a=function gr(i){return i instanceof Na&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ms(i):function uo(i){return(i=String(i)).match(Df)?i:"unsafe:"+i}(ye(i))}const Fa=new ln("ENVIRONMENT_INITIALIZER"),dc=new ln("INJECTOR",-1),Wd=new ln("INJECTOR_DEF_TYPES");class qu{get(s,a=Nr){if(a===Nr){const l=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw l.name="NullInjectorError",l}return a}}function Xp(...i){return{\u0275providers:Jr(0,i)}}function Jr(i,...s){const a=[],l=new Set;let c;return Yr(s,p=>{const y=p;hc(y,a,[],l)&&(c||(c=[]),c.push(y))}),void 0!==c&&Wu(c,a),a}function Wu(i,s){for(let a=0;a<i.length;a++){const{providers:c}=i[a];Yr(c,p=>{s.push(p)})}}function hc(i,s,a,l){if(!(i=Y(i)))return!1;let c=null,p=ps(i);const y=!p&&St(i);if(p||y){if(y&&!y.standalone)return!1;c=i}else{const E=i.ngModule;if(p=ps(E),!p)return!1;c=E}const I=l.has(c);if(y){if(I)return!1;if(l.add(c),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)hc(T,s,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let T;l.add(c);try{Yr(p.imports,M=>{hc(M,s,a,l)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Wu(T,s)}if(!I){const T=Pi(c)||(()=>new c);s.push({provide:c,useFactory:T,deps:_t},{provide:Wd,useValue:c,multi:!0},{provide:Fa,useValue:()=>Pn(c),multi:!0})}const E=p.providers;null==E||I||Yr(E,M=>{s.push(M)})}}return c!==i&&void 0!==i.providers}const fc=de({provide:String,useValue:de});function Zu(i){return null!==i&&"object"==typeof i&&fc in i}function co(i){return"function"==typeof i}const Gn=new ln("Set Injector scope."),Xn={},Zd={};let gc;function mc(){return void 0===gc&&(gc=new qu),gc}class er{}class yc extends er{constructor(s,a,l,c){super(),this.parent=a,this.source=l,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_c(s,y=>this.processProvider(y)),this.records.set(dc,La(void 0,this)),c.has("environment")&&this.records.set(er,La(void 0,this));const p=this.records.get(Gn);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Wd.multi,_t,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=os(this),l=On(void 0);try{return s()}finally{os(a),On(l)}}get(s,a=Nr,l=We.Default){this.assertNotDestroyed();const c=os(this),p=On(void 0);try{if(!(l&We.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Rf(i){return"function"==typeof i||"object"==typeof i&&i instanceof ln}(s)&&nn(s);I=E&&this.injectableDefInScope(E)?La(vc(s),Xn):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(l&We.Self?mc():this.parent).get(s,a=l&We.Optional&&a===Nr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ho]=y[Ho]||[]).unshift(he(s)),c)throw y;return function Q(i,s,a,l){const c=i[Ho];throw s[tc]&&c.unshift(s[tc]),i.message=function ae(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let c=he(s);if(Array.isArray(s))c=s.map(he).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let I=s[y];p.push(y+":"+("string"==typeof I?JSON.stringify(I):he(I)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace($o,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Ho]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{On(p),os(c)}}resolveInjectorInitializers(){const s=os(this),a=On(void 0);try{const l=this.get(Fa.multi,_t,We.Self);for(const c of l)c()}finally{os(s),On(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(he(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(s){let a=co(s=Y(s))?s:Y(s&&s.provide);const l=function us(i){return Zu(i)?La(void 0,i.useValue):La(Ko(i),Xn)}(s);if(co(s)||!0!==s.multi)this.records.get(a);else{let c=this.records.get(a);c||(c=La(void 0,Xn,!0),c.factory=()=>D(c.multi),this.records.set(a,c)),a=s,c.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Xn&&(a.value=Zd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function tg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function vc(i){const s=nn(i),a=null!==s?s.factory:Pi(i);if(null!==a)return a;if(i instanceof ln)throw new _e(204,!1);if(i instanceof Function)return function My(i){const s=i.length;if(s>0)throw function vn(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new _e(204,!1);const a=function wr(i){const s=i&&(i[Ri]||i[gi]);if(s){const a=function $r(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new _e(204,!1)}function Ko(i,s,a){let l;if(co(i)){const c=Y(i);return Pi(c)||vc(c)}if(Zu(i))l=()=>Y(i.useValue);else if(function pc(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function eg(i){return!(!i||!i.useExisting)}(i))l=()=>Pn(Y(i.useExisting));else{const c=Y(i&&(i.useClass||i.provide));if(!function Kd(i){return!!i.deps}(i))return Pi(c)||vc(c);l=()=>new c(...D(i.deps))}return l}function La(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Yd(i){return!!i.\u0275providers}function _c(i,s){for(const a of i)Array.isArray(a)?_c(a,s):Yd(a)?_c(a.\u0275providers,s):s(a)}class kf{}class _{resolveComponentFactory(s){throw function v(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let S=(()=>{class i{}return i.NULL=new _,i})();function R(){return q(Dn(),be())}function q(i,s){return new ue(Or(i,s))}let ue=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=R,i})();function Pe(i){return i instanceof ue?i.nativeElement:i}class gt{}let rt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function tr(){const i=be(),a=Ut(Dn().index,i);return(ar(a)?a:i)[11]}(),i})(),hi=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Ku{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Va=new Ku("14.2.0"),Yu={};function og(i){return i.ngOriginalError}class Xd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&og(s);for(;a&&og(a);)a=og(a);return a||null}}const Ly=new Map;let Vy=0;const th="__ngContext__";function br(i,s){ar(s)?(i[th]=s[20],function Uy(i){Ly.set(i[20],i)}(s)):i[th]=s}function nh(i){const s=i[th];return"number"==typeof s?function Ju(i){return Ly.get(i)||null}(s):s||null}function En(i){const s=nh(i);return s?ar(s)?s:s.lView:null}function Yo(i){return i instanceof Function?i():i}var Qo=(()=>((Qo=Qo||{})[Qo.Important=1]="Important",Qo[Qo.DashCase=2]="DashCase",Qo))();function cg(i,s){return undefined(i,s)}function ih(i){const s=i[3];return Mr(s)?s[3]:s}function $y(i){return $f(i[13])}function Gy(i){return $f(i[4])}function $f(i){for(;null!==i&&!Mr(i);)i=i[4];return i}function Ba(i,s,a,l,c){if(null!=l){let p,y=!1;Mr(l)?p=l:ar(l)&&(y=!0,l=l[0]);const I=Cn(l);0===i&&null!==a?null==c?mg(s,a,I):bc(s,a,I,c||null,!0):1===i&&null!==a?bc(s,a,I,c||null,!0):2===i?function Zy(i,s,a){const l=Cc(i,s);l&&function b0(i,s,a,l){i.removeChild(s,a,l)}(i,l,s,a)}(s,I,y):3===i&&s.destroyNode(I),null!=p&&function A0(i,s,a,l,c){const p=a[7];p!==Cn(a)&&Ba(s,i,l,p,c);for(let I=10;I<a.length;I++){const E=a[I];uh(E[1],E,i,s,l,p)}}(s,i,p,a,c)}}function Ec(i,s,a){return i.createElement(s,a)}function I0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,_n(c,-1)),a.splice(l,1)}function fg(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&I0(c,l),s>0&&(i[a-1][4]=l[4]);const p=kn(i,10+s);!function tC(i,s){uh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function qy(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&uh(i,s,a,3,null,null),function nC(i){let s=i[13];if(!s)return pg(i[1],i);for(;s;){let a=null;if(ar(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)ar(s)&&pg(s[1],s),s=s[3];null===s&&(s=i),ar(s)&&pg(s[1],s),a=s&&s[4]}s=a}}(s)}}function pg(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function E0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof bs)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const I=c[p[y]],E=p[y+1];try{E.call(I)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function gg(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],I="function"==typeof y?y(s):Cn(s[y]),E=l[c=a[p+2]],T=a[p+3];"boolean"==typeof T?I.removeEventListener(a[p],E,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),p+=2}else{const y=l[c=a[p+1]];a[p].call(y)}if(null!==l){for(let p=c+1;p<l.length;p++)(0,l[p])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Mr(s[3])){a!==s[3]&&I0(a,s);const l=s[19];null!==l&&l.detachView(i)}!function p0(i){Ly.delete(i[20])}(s)}}function Jo(i,s,a){return function Wy(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===ot.None||c===ot.Emulated)return null}return Or(l,a)}(i,s.parent,a)}function bc(i,s,a,l,c){i.insertBefore(s,a,l,c)}function mg(i,s,a){i.appendChild(s,a)}function sh(i,s,a,l,c){null!==l?bc(i,s,a,l,c):mg(i,s,a)}function Cc(i,s){return i.parentNode(s)}let T0=function qf(i,s,a){return 40&i.type?Or(i,a):null};function Wf(i,s,a,l){const c=Jo(i,l,s),p=s[11],I=function yg(i,s,a){return T0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let E=0;E<a.length;E++)sh(p,c,a[E],I,!1);else sh(p,c,a,I,!1)}function Zf(i,s){if(null!==s){const a=s.type;if(3&a)return Or(s,i);if(4&a)return Kf(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Zf(i,l);{const c=i[s.index];return Mr(c)?Kf(-1,c):Cn(c)}}if(32&a)return cg(s,i)()||Cn(i[s.index]);{const l=_g(i,s);return null!==l?Array.isArray(l)?l[0]:Zf(ih(i[16]),l):Zf(i,s.next)}}return null}function _g(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Kf(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Zf(l,c)}return s[7]}function ah(i,s,a,l,c,p,y){for(;null!=a;){const I=l[a.index],E=a.type;if(y&&0===s&&(I&&br(Cn(I),l),a.flags|=4),64!=(64&a.flags))if(8&E)ah(i,s,a.child,l,c,p,!1),Ba(s,i,c,I,p);else if(32&E){const T=cg(a,l);let M;for(;M=T();)Ba(s,i,c,M,p);Ba(s,i,c,I,p)}else 16&E?Xu(i,s,l,a,c,p):Ba(s,i,c,I,p);a=y?a.projectionNext:a.next}}function uh(i,s,a,l,c,p){ah(a,l,i.firstChild,s,c,p,!1)}function Xu(i,s,a,l,c,p){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ba(s,i,c,E[T],p);else ah(i,s,E,y[3],c,p,!0)}function Ky(i,s,a){i.setAttribute(s,"style",a)}function wg(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Yf(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const Yy="ng-template";function M0(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Yf(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Dc(i){return 4===i.type&&i.value!==Yy}function sC(i,s,a){return s===(4!==i.type||a?i.value:Yy)}function oC(i,s,a){let l=4;const c=i.attrs||[],p=function uC(i){for(let s=0;s<i.length;s++)if(Qs(i[s]))return s;return i.length}(c);let y=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!sC(i,E,a)||""===E&&1===s.length){if(cs(l))return!1;y=!0}}else{const T=8&l?E:s[++I];if(8&l&&null!==i.attrs){if(!M0(i.attrs,T,a)){if(cs(l))return!1;y=!0}continue}const k=aC(8&l?"class":E,c,Dc(i),a);if(-1===k){if(cs(l))return!1;y=!0;continue}if(""!==T){let G;G=k>p?"":c[k+1].toLowerCase();const te=8&l?G:null;if(te&&-1!==Yf(te,T,0)||2&l&&T!==G){if(cs(l))return!1;y=!0}}}}else{if(!y&&!cs(l)&&!cs(E))return!1;if(y&&cs(E))continue;y=!1,l=E|1&l}}return cs(l)||y}function cs(i){return 0==(1&i)}function aC(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)p=!0;else{if(1===y||2===y){let I=s[++c];for(;"string"==typeof I;)I=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=p?1:2}return-1}return function Ig(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function O0(i,s,a=!1){for(let l=0;l<s.length;l++)if(oC(i,s[l],a))return!0;return!1}function Qy(i,s){return i?":not("+s.trim()+")":s}function Vr(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const I=i[++a];c+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!cs(y)&&(s+=Qy(p,c),c=""),l=y,p=p||!cs(l);a++}return""!==c&&(s+=Qy(p,c)),s}const Dt={};function N0(i){Oe(Pt(),be(),Qn()+i,!1)}function Oe(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ao(s,p,a)}else{const p=i.preOrderHooks;null!==p&&xo(s,p,0,a)}Wr(a)}function Cr(i,s=null,a=null,l){const c=Xy(i,s,a,l);return c.resolveInjectorInitializers(),c}function Xy(i,s=null,a=null,l,c=new Set){const p=[a||_t,Xp(i)];return l=l||("object"==typeof i?void 0:he(i)),new yc(p,s||mc(),l||null,c)}let Sc=(()=>{class i{static create(a,l){if(Array.isArray(a))return Cr({name:""},l,a,"");{const c=a.name??"";return Cr({name:c},a.parent,a.providers,c)}}}return i.THROW_IF_NOT_FOUND=Nr,i.NULL=new qu,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>Pn(dc)}),i.__NG_ELEMENT_ID__=-1,i})();function Mc(i,s=We.Default){const a=be();return null===a?Pn(i,s):Xs(Dn(),a,Y(i),s)}function ja(){throw new Error("invalid")}function re(i,s){return i<<17|s<<2}function Hi(i){return i>>17&32767}function Oc(i){return 2|i}function fi(i){return(131068&i)>>2}function sv(i,s){return-131069&i|s<<2}function Tg(i){return 1|i}function ph(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const y=i.data[p];va(c),y.contentQueries(2,s[p],p)}}}function Ng(i,s,a,l,c,p,y,I,E,T,M){const k=s.blueprint.slice();return k[0]=c,k[2]=76|l,(null!==M||i&&1024&i[2])&&(k[2]|=1024),pu(k),k[3]=k[15]=i,k[8]=a,k[10]=y||i&&i[10],k[11]=I||i&&i[11],k[12]=E||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=p,k[20]=function eh(){return Vy++}(),k[21]=M,k[16]=2==s.type?i[16]:k,k}function Fc(i,s,a,l,c){let p=i.data[s];if(null===p)p=function kg(i,s,a,l,c){const p=wu(),y=pa(),E=i.data[s]=function EC(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(i,s,a,l,c),function jp(){return wt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const y=function So(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return di(p,!0),p}function ir(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Xf(i,s,a){bu(s);try{const l=i.viewQuery;null!==l&&ol(1,l,a);const c=i.template;null!==c&&dv(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ph(i,s),i.staticViewQueries&&ol(2,i.viewQuery,a);const p=i.components;null!==p&&function _C(i,s){for(let a=0;a<s.length;a++)Ug(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Zs()}}function an(i,s,a,l){const c=s[2];if(128!=(128&c)){bu(s);try{pu(s),function Ul(i){return wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&dv(i,s,a,2,l);const y=3==(3&c);if(y){const T=i.preOrderCheckHooks;null!==T&&Ao(s,T,null)}else{const T=i.preOrderHooks;null!==T&&xo(s,T,0,null),Dd(s,0)}if(function Y0(i){for(let s=$y(i);null!==s;s=Gy(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(512&c[2])&&_n(p,1),c[2]|=512}}}(s),function TC(i){for(let s=$y(i);null!==s;s=Gy(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];zs(l)&&an(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&ph(i,s),y){const T=i.contentCheckHooks;null!==T&&Ao(s,T)}else{const T=i.contentHooks;null!==T&&xo(s,T,1),Dd(s,1)}!function Rg(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Wr(~c);else{const p=c,y=a[++l],I=a[++l];Hp(y,p),I(2,s[p])}}}finally{Wr(-1)}}(i,s);const I=i.components;null!==I&&function H0(i,s){for(let a=0;a<s.length;a++)Q0(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&ol(2,E,l),y){const T=i.viewCheckHooks;null!==T&&Ao(s,T)}else{const T=i.viewHooks;null!==T&&xo(s,T,2),Dd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,_n(s[3],-1))}finally{Zs()}}}function wC(i,s,a,l){const c=s[10],y=ha(s);try{!y&&c.begin&&c.begin(),y&&Xf(i,s,l),an(i,s,a,l)}finally{!y&&c.end&&c.end()}}function dv(i,s,a,l,c){const p=Qn(),y=2&l;try{Wr(-1),y&&s.length>22&&Oe(i,s,22,!1),a(l,c)}finally{Wr(p)}}function hv(i,s,a){!ts()||(function za(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Js(a,s),br(l,s);const y=a.initialInputs;for(let I=c;I<p;I++){const E=i.data[I],T=Ir(E);T&&Fg(s,a,E);const M=rs(s,i,I,a);br(M,s),null!==y&&vv(0,I-c,M,E,0,y),T&&(Ut(a.index,s)[8]=M)}}(i,s,a,Or(a,s)),128==(128&a.flags)&&function Z0(i,s,a){const l=a.directiveStart,c=a.directiveEnd,p=a.index,y=function Bl(){return wt.lFrame.currentDirectiveIndex}();try{Wr(p);for(let I=l;I<c;I++){const E=i.data[I],T=s[I];Iu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Uc(E,T)}}finally{Wr(-1),Iu(y)}}(i,s,a))}function Lc(i,s,a=Or){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],I=-1===y?a(s,i):i[y];i[c++]=I}}}function ep(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=gh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function gh(i,s,a,l,c,p,y,I,E,T){const M=22+l,k=M+c,G=function $0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(M,k),te="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:s,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:te,incompleteFirstPass:!1}}function G0(i,s,a,l){const c=Ev(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&_h(i).push(l,c.length-1))}function z0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function fv(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,y=[];let I=null,E=null;for(let T=s.directiveStart;T<l;T++){const M=c[T],k=M.inputs,G=null===p||Dc(s)?null:_v(k,p);y.push(G),I=z0(k,T,I),E=z0(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=I,s.outputs=E}function q0(i,s){const a=Ut(s,i);16&a[2]||(a[2]|=32)}function pv(i,s,a,l){let c=!1;if(ts()){const p=function K0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];O0(a,y.selectors,!1)&&(c||(c=[]),Cs(Js(a,s),i,y.type),Ir(y)?(Pg(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==p){c=!0,Bc(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let I=!1,E=!1,T=ir(i,s,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=_a(a.mergedAttrs,k.hostAttrs),Ci(i,a,s,T,k),yv(T,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const G=k.type.prototype;!I&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}fv(i,a)}y&&function mv(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new _e(-301,!1);l.push(s[c],p)}}}(a,l,y)}return a.mergedAttrs=_a(a.mergedAttrs,a.attrs),c}function gv(i,s,a,l,c,p){const y=p.hostBindings;if(y){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function W0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(l,c,y)}}function Uc(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Pg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function yv(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ir(s)&&(a[""]=i)}}function Bc(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Ci(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=Pi(c.type)),y=new bs(p,Ir(c),Mc);i.blueprint[l]=y,a[l]=y,gv(i,s,0,l,ir(i,a,c.hostVars,Dt),c)}function Fg(i,s,a){const l=Or(s,i),c=ep(a),p=i[10],y=Bg(i,Ng(i,c,null,a.onPush?32:16,l,s,p,p.createRenderer(l,a),null,null,null));i[s.index]=y}function Gi(i,s,a,l,c,p){const y=Or(i,s);!function Lg(i,s,a,l,c,p,y){if(null==p)i.removeAttribute(s,c,a);else{const I=null==y?ye(p):y(p,l||"",c);i.setAttribute(s,c,I,a)}}(s[11],y,p,i.value,a,l,c)}function vv(i,s,a,l,c,p){const y=p[s];if(null!==y){const I=l.setInput;for(let E=0;E<y.length;){const T=y[E++],M=y[E++],k=y[E++];null!==I?l.setInput(a,k,T,M):a[M]=k}}}function _v(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function wv(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Q0(i,s){const a=Ut(s,i);if(zs(a)){const l=a[1];48&a[2]?an(l,a,l.template,a[8]):a[5]>0&&Vg(a)}}function Vg(i){for(let l=$y(i);null!==l;l=Gy(l))for(let c=10;c<l.length;c++){const p=l[c];if(zs(p))if(512&p[2]){const y=p[1];an(y,p,y.template,p[8])}else p[5]>0&&Vg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Ut(a[l],i);zs(c)&&c[5]>0&&Vg(c)}}function Ug(i,s){const a=Ut(s,i),l=a[1];(function SC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Xf(l,a,a[8])}function Bg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function jg(i){for(;i;){i[2]|=32;const s=ih(i);if(cf(i)&&!s)return i;i=s}return null}function ol(i,s,a){va(0),s(i,a)}function Ev(i){return i[7]||(i[7]=[])}function _h(i){return i.cleanup||(i.cleanup=[])}function X0(i,s){const a=i[9],l=a?a.get(Xd,null):null;l&&l.handleError(s)}function bn(i,s,a,l,c){for(let p=0;p<a.length;){const y=a[p++],I=a[p++],E=s[y],T=i.data[y];null!==T.setInput?T.setInput(E,c,l,I):E[I]=c}}function jc(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const I=s[y];"number"==typeof I?p=I:1==p?c=pe(c,I):2==p&&(l=pe(l,I+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}function tp(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Cn(p)),Mr(p))for(let I=10;I<p.length;I++){const E=p[I],T=E[1].firstChild;null!==T&&tp(E[1],E,T,l)}const y=a.type;if(8&y)tp(i,s,a.child,l);else if(32&y){const I=cg(a,s);let E;for(;E=I();)l.push(E)}else if(16&y){const I=_g(s,a);if(Array.isArray(I))l.push(...I);else{const E=ih(s[16]);tp(E[1],E,I,l,!0)}}a=c?a.projectionNext:a.next}return l}class np{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return tp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Mr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(fg(s,l),kn(a,l))}this._attachedToViewContainer=!1}qy(this._lView[1],this._lView)}onDestroy(s){G0(this._lView[1],this._lView,null,s)}markForCheck(){jg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function qa(i,s,a){const l=s[10];l.begin&&l.begin();try{an(i,s,i.template,a)}catch(c){throw X0(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function w0(i,s){uh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=s}}class rp extends np{constructor(s){super(s),this._view=s}detectChanges(){!function Iv(i){!function yh(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=En(a);if(null!==l){const c=l[1];wC(c,l,c.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class bv extends S{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=St(s);return new Ih(a,this.ngModule)}}function Cv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Wa{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const c=this.injector.get(s,Yu,l);return c!==Yu||a===Yu?c:this.parentInjector.get(s,a,l)}}class Ih extends kf{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function lh(i){return i.map(Vr).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Cv(this.componentDef.inputs)}get outputs(){return Cv(this.componentDef.outputs)}create(s,a,l,c){let p=(c=c||this.ngModule)instanceof er?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new Wa(s,p):s,I=y.get(gt,null);if(null===I)throw new _e(407,!1);const E=y.get(hi,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=l?function ni(i,s,a){return i.selectRootElement(s,a===ot.ShadowDom)}(T,l,this.componentDef.encapsulation):Ec(I.createRenderer(null,this.componentDef),M,function wh(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),G=this.componentDef.onPush?288:272,te={components:[]},we=gh(0,null,null,1,0,null,null,null,null,null),Ne=Ng(null,we,te,G,null,null,I,T,E,y,null);let ze,Je;bu(Ne);try{const tt=function OC(i,s,a,l,c,p){const y=a[1];a[22]=i;const E=Fc(y,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(jc(E,T,!0),null!==i&&(Ro(c,i,T),null!==E.classes&&wg(c,i,E.classes),null!==E.styles&&Ky(c,i,E.styles)));const M=l.createRenderer(i,s),k=Ng(a,ep(s),null,s.onPush?32:16,a[22],E,l,M,p||null,null,null);return y.firstCreatePass&&(Cs(Js(E,a),y,s.type),Pg(y,E),Bc(E,a.length,1)),Bg(a,k),a[22]=k}(k,this.componentDef,Ne,I,T);if(k)if(l)Ro(T,k,["ng-version",Va.full]);else{const{attrs:Se,classes:ft}=function el(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!cs(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Se&&Ro(T,k,Se),ft&&ft.length>0&&wg(T,k,ft.join(" "))}if(Je=Gs(we,22),void 0!==a){const Se=Je.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Vt=a[ft];Se.push(null!=Vt?Array.from(Vt):null)}}ze=function yr(i,s,a,l,c){const p=a[1],y=function mh(i,s,a){const l=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ci(i,l,s,ir(i,s,1,null),a),fv(i,l));const c=rs(s,i,l.directiveStart,l);br(c,s);const p=Or(l,s);return p&&br(p,s),c}(p,a,s);if(l.components.push(y),i[8]=y,null!==c)for(const E of c)E(y,s);if(s.contentQueries){const E=Dn();s.contentQueries(1,y,E.directiveStart)}const I=Dn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Wr(I.index),gv(a[1],I,0,I.directiveStart,I.directiveEnd,s),Uc(s,y)),y}(tt,this.componentDef,Ne,te,[nI]),Xf(we,Ne,null)}finally{Zs()}return new Eh(this.componentType,ze,q(Je,Ne),Ne,Je)}}class Eh extends class Nf{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new rp(c),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let c;if(null!==l&&(c=l[s])){const p=this._rootLView;bn(p[1],p,c,s,a),q0(p,this._tNode.index)}}get injector(){return new eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function nI(){const i=Dn();Zl(be()[1],i)}function Xo(i){let s=function Dv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ir(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new _e(903,!1);c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=pi(i.inputs),y.declaredInputs=pi(i.declaredInputs),y.outputs=pi(i.outputs);const I=c.hostBindings;I&&iI(i,I);const E=c.viewQuery,T=c.contentQueries;if(E&&rI(i,E),T&&ip(i,T),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Ir(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let y=0;y<p.length;y++){const I=p[y];I&&I.ngInherit&&I(i),I===Xo&&(a=!1)}}s=Object.getPrototypeOf(s)}!function RC(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=_a(c.hostAttrs,a=_a(a,c.hostAttrs))}}(l)}function pi(i){return i===Ar?{}:i===_t?[]:i}function rI(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function ip(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function iI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Hg=null;function Hc(){if(!Hg){const i=sn.Symbol;if(i&&i.iterator)Hg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Hg=l)}}}return Hg}function op(i){return!!$c(i)&&(Array.isArray(i)||!(i instanceof Map)&&Hc()in i)}function $c(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function po(i,s,a){return i[s]=a}function ri(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Tv(i,s,a,l){const c=be();return ri(c,Ws(),s)&&(Pt(),Gi(dn(),c,i,s,a,l)),Tv}function uI(i,s,a,l,c,p,y,I){const E=be(),T=Pt(),M=i+22,k=T.firstCreatePass?function Ov(i,s,a,l,c,p,y,I,E){const T=s.consts,M=Fc(s,i,4,y||null,wi(T,I));pv(s,a,M,wi(T,E)),Zl(s,M);const k=M.tViews=gh(2,M,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,l,c,p,y):T.data[M];di(k,!1);const G=E[11].createComment("");Wf(T,E,G,k),br(G,E),Bg(E,E[M]=wv(G,E,G,k)),Ml(k)&&hv(T,E,k),null!=y&&Lc(E,k,I)}function Rv(i){return es(function Vl(){return wt.lFrame.contextLView}(),22+i)}function qg(i,s,a){const l=be();return ri(l,Ws(),s)&&function ds(i,s,a,l,c,p,y,I){const E=Or(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[l])?(bn(i,a,M,l,c),la(s)&&q0(a,s.index)):3&s.type&&(l=function bC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,p.setProperty(E,l,c))}(Pt(),dn(),l,i,s,l[11],a,!1),qg}function Nv(i,s,a,l,c){const y=c?"class":"style";bn(i,a,s.inputs[y],y,l)}function Wg(i,s,a,l){const c=be(),p=Pt(),y=22+i,I=c[11],E=c[y]=Ec(I,s,function Du(){return wt.lFrame.currentNamespace}()),T=p.firstCreatePass?function cI(i,s,a,l,c,p,y){const I=s.consts,T=Fc(s,i,2,c,wi(I,p));return pv(s,a,T,wi(I,y)),null!==T.attrs&&jc(T,T.attrs,!1),null!==T.mergedAttrs&&jc(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,p,c,0,s,a,l):p.data[y];di(T,!0);const M=T.mergedAttrs;null!==M&&Ro(I,E,M);const k=T.classes;null!==k&&wg(I,E,k);const G=T.styles;return null!==G&&Ky(I,E,G),64!=(64&T.flags)&&Wf(p,c,E,T),0===function mu(){return wt.lFrame.elementDepthCount}()&&br(E,c),function yu(){wt.lFrame.elementDepthCount++}(),Ml(T)&&(hv(p,c,T),function sl(i,s,a){if(au(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const y=i.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,T,c)),null!==l&&Lc(c,T),Wg}function Zg(){let i=Dn();pa()?function ga(){wt.lFrame.isParent=!1}():(i=i.parent,di(i,!1));const s=i;!function Pl(){wt.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(Zl(a,i),au(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Au(i){return 0!=(16&i.flags)}(s)&&Nv(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Sd(i){return 0!=(32&i.flags)}(s)&&Nv(a,s,be(),s.stylesWithoutHost,!1),Zg}function ul(i,s,a,l){return Wg(i,s,a,l),Zg(),ul}function Fv(){return be()}function ii(i){return!!i&&"function"==typeof i.then}function hI(i){return!!i&&"function"==typeof i.subscribe}const Lv=hI;function Ls(i,s,a,l){const c=be(),p=Pt(),y=Dn();return function Uv(i,s,a,l,c,p,y,I){const E=Ml(l),M=i.firstCreatePass&&_h(i),k=s[8],G=Ev(s);let te=!0;if(3&l.type||I){const ze=Or(l,s),Je=I?I(ze):ze,tt=G.length,Se=I?Vt=>I(Cn(Vt[l.index])):l.index;let ft=null;if(!I&&E&&(ft=function Kg(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const y=c[p];if(y===a&&c[p+1]===l){const I=s[7],E=c[p+2];return I.length>E?I[E]:null}"string"==typeof y&&(p+=2)}return null}(i,s,c,l.index)),null!==ft)(ft.__ngLastListenerFn__||ft).__ngNextListenerFn__=p,ft.__ngLastListenerFn__=p,te=!1;else{p=pI(l,s,k,p,!1);const Vt=a.listen(Je,c,p);G.push(p,Vt),M&&M.push(c,Se,tt,tt+1)}}else p=pI(l,s,k,p,!1);const we=l.outputs;let Ne;if(te&&null!==we&&(Ne=we[c])){const ze=Ne.length;if(ze)for(let Je=0;Je<ze;Je+=2){const pn=s[Ne[Je]][Ne[Je+1]].subscribe(p),ou=G.length;G.push(p,pn),M&&M.push(c,l.index,ou,-(ou+1))}}}(p,c,c[11],y,i,s,0,l),Ls}function fI(i,s,a,l){try{return!1!==a(l)}catch(c){return X0(i,c),!1}}function pI(i,s,a,l,c){return function p(y){if(y===Function)return l;jg(2&i.flags?Ut(i.index,s):s);let E=fI(s,0,l,y),T=p.__ngNextListenerFn__;for(;T;)E=fI(s,0,T,y)&&E,T=T.__ngNextListenerFn__;return c&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function gI(i=1){return function Ks(i){return(wt.lFrame.contextLView=function Cu(i,s){for(;i>0;)s=s[15],i--;return s}(i,wt.lFrame.contextLView))[8]}(i)}function TI(i,s,a,l,c){const p=i[a+1],y=null===s;let I=l?Hi(p):fi(p),E=!1;for(;0!==I&&(!1===E||y);){const M=i[I+1];Hv(i[I],s)&&(E=!0,i[I+1]=l?Tg(M):Oc(M)),I=l?Hi(M):fi(M)}E&&(i[a+1]=l?Oc(p):Tg(p))}function Hv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&As(i,s)>=0}function Jg(i,s){return function zi(i,s,a,l){const c=be(),p=Pt(),y=function ns(i){const s=wt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function OI(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Qn()],y=function cl(i,s){return s>=i.expandoStartIndex}(i,a);(function Zv(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!y&&(s=!1),s=function RI(i,s,a,l){const c=function ya(i){const s=wt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=vo(a=Kc(null,i,s,a,l),s.attrs,l),p=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=Kc(c,i,s,a,l),null===p){let E=function LC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==fi(l))return i[Hi(l)]}(i,s,l);void 0!==E&&Array.isArray(E)&&(E=Kc(null,i,s,E[1],l),E=vo(E,s.attrs,l),function VC(i,s,a,l){i[Hi(a?s.classBindings:s.styleBindings)]=l}(i,s,l,E))}else p=function UC(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=vo(l,i[p].hostAttrs,a);return vo(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function CI(i,s,a,l,c,p){let y=p?s.classBindings:s.styleBindings,I=Hi(y),E=fi(y);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||As(k,M)>0)&&(T=!0)}else M=a;if(c)if(0!==E){const G=Hi(i[I+1]);i[l+1]=re(G,I),0!==G&&(i[G+1]=sv(i[G+1],l)),i[I+1]=function mC(i,s){return 131071&i|s<<17}(i[I+1],l)}else i[l+1]=re(I,0),0!==I&&(i[I+1]=sv(i[I+1],l)),I=l;else i[l+1]=re(E,0),0===I?I=l:i[E+1]=sv(i[E+1],l),E=l;T&&(i[l+1]=Oc(i[l+1])),TI(i,M,l,!0),TI(i,M,l,!1),function DI(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&As(p,s)>=0&&(a[l+1]=Tg(a[l+1]))}(s,M,i,l,p),y=re(I,E),p?s.classBindings=y:s.styleBindings=y}(c,p,s,a,y,l)}}(p,i,y,l),s!==Dt&&ri(c,y,s)&&function NI(i,s,a,l,c,p,y,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Qc(function nl(i){return 1==(1&i)}(T)?Xg(E,s,a,c,fi(T),y):void 0)||(Qc(p)||function ks(i){return 2==(2&i)}(T)&&(p=Xg(E,null,a,c,I,y)),function x0(i,s,a,l,c){if(s)c?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:Qo.DashCase;null==c?i.removeStyle(a,l,p):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),p|=Qo.Important),i.setStyle(a,l,c,p))}}(l,y,ci(Qn(),a),c,p))}(p,p.data[Qn()],c,c[11],i,c[y+1]=function jC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(Ms(i)))),i}(s,a),l,y)}(i,s,null,!0),Jg}function Kc(i,s,a,l,c){let p=null;const y=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<y&&(p=s[I],l=vo(l,p.hostAttrs,c),p!==i);)I++;return null!==i&&(a.directiveStylingLast=I),l}function vo(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const y=s[p];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Qr(i,y,!!a||s[++p]))}return void 0===i?null:i}function Xg(i,s,a,l,c,p){const y=null===s;let I;for(;c>0;){const E=i[c],T=Array.isArray(E),M=T?E[1]:E,k=null===M;let G=a[c+1];G===Dt&&(G=k?_t:void 0);let te=k?xa(G,l):M===l?G:void 0;if(T&&!Qc(te)&&(te=xa(E,l)),Qc(te)&&(I=te,y))return I;const we=i[c+1];c=y?Hi(we):fi(we)}if(null!==s){let E=p?s.residualClasses:s.residualStyles;null!=E&&(I=xa(E,l))}return I}function Qc(i){return void 0!==i}function xh(i,s=""){const a=be(),l=Pt(),c=i+22,p=l.firstCreatePass?Fc(l,c,1,s,null):l.data[c],y=a[c]=function Gf(i,s){return i.createText(s)}(a[11],s);Wf(l,a,y,p),di(p,!1)}function Mh(i){return dl("",i,""),Mh}function dl(i,s,a){const l=be(),c=function Dh(i,s,a,l){return ri(i,Ws(),a)?s+ye(a)+l:Dt}(l,i,s,a);return c!==Dt&&function Fs(i,s,a){const l=ci(s,i);!function zy(i,s,a){i.setValue(s,a)}(i[11],l,a)}(l,Qn(),c),dl}const Xc=void 0;var YC=["en",[["a","p"],["AM","PM"],Xc],[["AM","PM"],Xc,Xc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xc,"{1} 'at' {0}",Xc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function KC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ed={};function kh(i){const s=function rm(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=nm(s);if(a)return a;const l=s.split("-")[0];if(a=nm(l),a)return a;if("en"===l)return YC;throw new _e(701,!1)}function n_(i){return kh(i)[ht.PluralCase]}function nm(i){return i in ed||(ed[i]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[i]),ed[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const td="en-US";let s_=td;function vl(i,s,a,l,c){if(i=Y(i),Array.isArray(i))for(let p=0;p<i.length;p++)vl(i[p],s,a,l,c);else{const p=Pt(),y=be();let I=co(i)?i:Y(i.provide),E=Ko(i);const T=Dn(),M=1048575&T.providerIndexes,k=T.directiveStart,G=T.providerIndexes>>20;if(co(i)||!i.multi){const te=new bs(E,c,Mc),we=O_(I,s,c?M:M+G,k);-1===we?(Cs(Js(T,y),p,I),ym(p,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(te),y.push(te)):(a[we]=te,y[we]=te)}else{const te=O_(I,s,M+G,k),we=O_(I,s,M,M+G),Ne=te>=0&&a[te],ze=we>=0&&a[we];if(c&&!ze||!c&&!Ne){Cs(Js(T,y),p,I);const Je=function N_(i,s,a,l,c){const p=new bs(i,a,Mc);return p.multi=[],p.index=s,p.componentProviders=0,sd(p,c,l&&!a),p}(c?R_:fD,a.length,c,l,E);!c&&ze&&(a[we].providerFactory=Je),ym(p,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Je),y.push(Je)}else ym(p,i,te>-1?te:we,sd(a[c?we:te],E,!c&&l));!c&&l&&ze&&a[we].componentProviders++}}}function ym(i,s,a,l){const c=co(s),p=function Rs(i){return!!i.useClass}(s);if(c||p){const E=(p?Y(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,E]):T[M+1].push(l,E)}else T.push(a,E)}}}function sd(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function O_(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function fD(i,s,a,l){return yp(this.multi,[])}function R_(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=rs(a,a[1],this.providerFactory.index,l);p=I.slice(0,y),yp(c,p);for(let E=y;E<I.length;E++)p.push(I[E])}else p=[],yp(c,p);return p}function yp(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function vm(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Uh(i,s,a){const l=Pt();if(l.firstCreatePass){const c=Ir(i);vl(a,l.data,l.blueprint,c,!0),vl(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Bh{}class iE{}function k_(i,s){return new oE(i,s??null)}class oE extends Bh{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bv(this);const l=xr(s);this._bootstrapComponents=Yo(l.bootstrap),this._r3Injector=Xy(s,a,[{provide:Bh,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class _m extends iE{constructor(s){super(),this.moduleType=s}create(s){return new oE(this.moduleType,s)}}class pD extends Bh{constructor(s,a,l){super(),this.componentFactoryResolver=new bv(this),this.instance=null;const c=new yc([...s,{provide:Bh,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],a||mc(),l,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function wm(i,s,a=null){return new pD(i,s,a).injector}let aE=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Jr(0,a.type),c=l.length>0?wm([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,c)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(Pn(er))}),i})();function P_(i){i.getStandaloneInjector=s=>s.get(aE).getOrCreateStandaloneInjector(i)}function Cm(i,s,a){const l=Tn()+i,c=be();return c[l]===Dt?po(c,l,a?s.call(a):s()):function bh(i,s){return i[s]}(c,l)}function fE(i,s,a,l){return Dm(be(),Tn(),i,s,a,l)}function Dm(i,s,a,l,c,p){const y=s+a;return ri(i,y,c)?po(i,y+1,p?l.call(p,c):l(c)):function vp(i,s){const a=i[s];return a===Dt?void 0:a}(i,y+1)}function mE(i,s){const a=Pt();let l;const c=i+22;a.firstCreatePass?(l=function _D(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=Pi(l.type)),y=On(Mc);try{const I=Ea(!1),E=p();return Ea(I),function lI(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),c,E),E}finally{On(y)}}function vE(i,s,a){const l=i+22,c=be(),p=es(c,l);return function od(i,s){return i[1].data[s].pure}(c,l)?Dm(c,Tn(),s,p.transform,a,p):p.transform(a)}function _p(i){return s=>{setTimeout(i,void 0,s)}}const _o=class _E extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let c=s,p=a||(()=>null),y=l;if(s&&"object"==typeof s){const E=s;c=E.next?.bind(E),p=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(p=_p(p),c&&(c=_p(c)),y&&(y=_p(y)));const I=super.subscribe({next:c,error:p,complete:y});return s instanceof ee.w0&&s.add(I),I}};function ED(){return this._results[Hc()]()}class Z_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Hc(),l=Z_.prototype;l[a]||(l[a]=ED)}get changes(){return this._changes||(this._changes=new _o)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=on(s);(this._changesDetected=!function Kr(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ad=(()=>{class i{}return i.__NG_ELEMENT_ID__=Y_,i})();const bD=ad,K_=class extends bD{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,c=Ng(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(l)),Xf(l,c,s),new np(c)}};function Y_(){return Hh(Dn(),be())}function Hh(i,s){return 4&i.type?new K_(s,i,q(i,s)):null}let Am=(()=>{class i{}return i.__NG_ELEMENT_ID__=wE,i})();function wE(){return wp(Dn(),be())}const IE=Am,EE=class extends IE{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return q(this._hostTNode,this._hostLView)}get injector(){return new eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ru(this._hostTNode,this._hostLView);if(xd(s)){const a=Ia(s,this._hostLView),l=ur(s);return new eo(a[1].data[l+8],a)}return new eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=xm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let c,p;"number"==typeof l?c=l:null!=l&&(c=l.index,p=l.injector);const y=s.createEmbeddedView(a||{},p);return this.insert(y,c),y}createComponent(s,a,l,c,p){const y=s&&!function Qt(i){return"function"==typeof i}(s);let I;if(y)I=a;else{const k=a||{};I=k.index,l=k.injector,c=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const E=y?s:new Ih(St(s)),T=l||this.parentInjector;if(!p&&null==E.ngModule){const G=(y?T:this.parentInjector).get(er,null);G&&(p=G)}const M=E.create(T,c,void 0,p);return this.insert(M.hostView,I),M}insert(s,a){const l=s._lView,c=l[1];if(function fu(i){return Mr(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=l[3],G=new EE(k,k[6],k[3]);G.detach(G.indexOf(s))}}const p=this._adjustIndex(a),y=this._lContainer;!function rC(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],ss(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function iC(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(c,l,y,p);const I=Kf(p,y),E=l[11],T=Cc(E,y[7]);return null!==T&&function mr(i,s,a,l,c,p){l[0]=c,l[6]=s,uh(i,l,a,1,c,p)}(c,y[6],E,l,T,I),s.attachToViewContainerRef(),ss(Mm(y),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=xm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=fg(this._lContainer,a);l&&(kn(Mm(this._lContainer),a),qy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=fg(this._lContainer,a);return l&&null!=kn(Mm(this._lContainer),a)?new np(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function xm(i){return i[8]}function Mm(i){return i[8]||(i[8]=[])}function wp(i,s){let a;const l=s[i.index];if(Mr(l))a=l;else{let c;if(8&i.type)c=Cn(l);else{const p=s[11];c=p.createComment("");const y=Or(i,s);bc(p,Cc(p,y),c,function D0(i,s){return i.nextSibling(s)}(p,y),!1)}s[i.index]=a=wv(l,s,c,i),Bg(s,a)}return new EE(a,i,s)}class Q_{constructor(s){this.queryList=s,this.matches=null}clone(){return new Q_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Om{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);c.push(this.queries[y.indexInDeclarationView].clone())}return new Om(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==TE(s,a).matches&&this.queries[a].setDirty()}}class Rm{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Nm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Nm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ip{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ip(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,J_(a,p)),this.matchTNodeWithReadOption(s,a,No(a,s,p,!1,!1))}else l===ad?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,No(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===ue||c===Am||c===ad&&4&a.type)this.addMatch(a.index,-2);else{const p=No(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function J_(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function km(i,s,a,l){return-1===a?function X_(i,s){return 11&i.type?q(i,s):4&i.type?Hh(i,s):null}(s,i):-2===a?function ew(i,s,a){return a===ue?q(s,i):a===ad?Hh(s,i):a===Am?wp(s,i):void 0}(i,s,l):rs(i,i[1],a,s)}function tw(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,y=a.matches,I=[];for(let E=0;E<y.length;E+=2){const T=y[E];I.push(T<0?null:km(s,p[T],y[E+1],a.metadata.read))}c.matches=I}return c.matches}function $h(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const y=tw(i,s,c,a);for(let I=0;I<p.length;I+=2){const E=p[I];if(E>0)l.push(y[I/2]);else{const T=p[I+1],M=s[-E];for(let k=10;k<M.length;k++){const G=M[k];G[17]===G[3]&&$h(G[1],G,T,l)}if(null!==M[9]){const k=M[9];for(let G=0;G<k.length;G++){const te=k[G];$h(te[1],te,T,l)}}}}}return l}function nw(i){const s=be(),a=Pt(),l=jl();va(l+1);const c=TE(a,l);if(i.dirty&&ha(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?$h(a,s,l,[]):tw(a,s,c,l);i.reset(p,Pe),i.notifyOnChanges()}return!0}return!1}function ud(i,s,a,l){const c=Pt();if(c.firstCreatePass){const p=Dn();(function CE(i,s,a){null===i.queries&&(i.queries=new Nm),i.queries.track(new Ip(s,a))})(c,new Rm(s,a,l),p.index),function DE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function bE(i,s,a){const l=new Z_(4==(4&a));G0(i,s,l,l.destroy),null===s[19]&&(s[19]=new Om),s[19].queries.push(new Q_(l))}(c,be(),a)}function Pm(){return function TD(i,s){return i[19].queries[s].queryList}(be(),jl())}function TE(i,s){return i.queries.getByIndex(s)}function iw(i,s){return Hh(i,s)}function Bm(...i){}const jm=new ln("Application Initializer");let Kh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Bm,this.reject=Bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(ii(p))a.push(p);else if(Lv(p)){const y=new Promise((I,E)=>{p.subscribe({complete:I,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Pn(jm,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pw=new ln("AppId",{providedIn:"root",factory:function wl(){return`${Hm()}${Hm()}${Hm()}`}});function Hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $m=new ln("Platform Initializer"),gw=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PE=new ln("appBootstrapListener");let FE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gm=new ln("LocaleId",{providedIn:"root",factory:()=>b(Gm,We.Optional|We.SkipSelf)||function Cp(){return typeof $localize<"u"&&$localize.locale||td}()}),zm=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class El{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let WD=(()=>{class i{compileModuleSync(a){return new _m(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Yo(xr(a).declarations).reduce((y,I)=>{const E=St(I);return E&&y.push(new Ih(E)),y},[]);return new El(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const KD=(()=>Promise.resolve(0))();function Wm(i){typeof Zone>"u"?KD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _o(!1),this.onMicrotaskEmpty=new _o(!1),this.onStable=new _o(!1),this.onError=new _o(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function YD(){let i=sn.requestAnimationFrame,s=sn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function BE(i){const s=()=>{!function QD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(sn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,_w(i),i.isCheckStableRunning=!0,vw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),_w(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,y,I)=>{try{return jE(i),a.invokeTask(c,p,y,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),ww(i)}},onInvoke:(a,l,c,p,y,I,E)=>{try{return jE(i),a.invoke(c,p,y,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),ww(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,_w(i),vw(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new _e(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+c,s,UE,Bm,Bm);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const UE={};function vw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function _w(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function jE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ww(i){i._nesting--,vw(i)}class HE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _o,this.onMicrotaskEmpty=new _o,this.onStable=new _o,this.onError=new _o}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}const Iw=new ln(""),Ew=new ln("");let bw,JD=(()=>{class i{constructor(a,l,c){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bw||(function Km(i){bw=i}(c),c.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),Wm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Pn(Vs),Pn(Zm),Pn(Ew))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Zm=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return bw?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),tu=null;const nu=new ln("AllowMultipleToken"),Cw=new ln("PlatformDestroyListeners");class tT{constructor(s,a){this.name=s,this.token=a}}function GE(i,s,a=[]){const l=`Platform: ${s}`,c=new ln(l);return(p=[])=>{let y=Sp();if(!y||y.injector.get(nu,!1)){const I=[...a,...p,{provide:c,useValue:!0}];i?i(I):function nT(i){if(tu&&!tu.get(nu,!1))throw new _e(400,!1);tu=i;const s=i.get(WE);(function Dw(i){const s=i.get($m,null);s&&s.forEach(a=>a())})(i)}(function qE(i=[],s){return Sc.create({name:s,providers:[{provide:Gn,useValue:"platform"},{provide:Cw,useValue:new Set([()=>tu=null])},...i]})}(I,l))}return function zE(i){const s=Sp();if(!s)throw new _e(401,!1);return s}()}}function Sp(){return tu?.get(WE)??null}let WE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const c=function KE(i,s){let a;return a="noop"===i?new HE:("zone.js"===i?void 0:i)||new Vs(s),a}(l?.ngZone,function ZE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:Vs,useValue:c}];return c.run(()=>{const y=Sc.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(y),E=I.injector.get(Xd,null);if(!E)throw new _e(402,!1);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Qm(this._modules,I),T.unsubscribe()})}),function YE(i,s,a){try{const l=a();return ii(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(E,c,()=>{const T=I.injector.get(Kh);return T.runInitializers(),T.donePromise.then(()=>(function zI(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(s_=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Gm,td)||td),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const c=QE({},l);return function XD(i,s,a){const l=new _m(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Ym);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new _e(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Cw,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Pn(Sc))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function QE(i,s){return Array.isArray(s)?s.reduce(QE,i):{...i,...s}}let Ym=(()=>{class i{constructor(a,l,c){this._zone=a,this._injector=l,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new N.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),Wm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(p,y.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const c=a instanceof kf;if(!this._injector.get(Kh).done)throw!c&&Ni(a),new _e(405,false);let y;y=c?a:this._injector.get(S).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const I=function eT(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Bh),T=y.create(Sc.NULL,[],l||y.selector,I),M=T.location.nativeElement,k=T.injector.get(Iw,null);return k?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Qm(this.components,T),k?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Qm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(PE,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Qm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new _e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Pn(Vs),Pn(er),Pn(Xd))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Qm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Tw=!0,JE=!1;function iT(){return JE=!0,Tw}function Sw(){if(JE)throw new Error("Cannot enable prod mode after platform setup.");Tw=!1}let Aw=(()=>{class i{}return i.__NG_ELEMENT_ID__=aT,i})();function aT(i){return function uT(i,s,a){if(la(i)&&!a){const l=Ut(i.index,s);return new np(l,l)}return 47&i.type?new np(s[16],s):null}(Dn(),be(),16==(16&i))}class ia{constructor(){}supports(s){return op(s)}create(s){return new Jm(s)}}const hT=(i,s)=>s;class Jm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<tb(l,c,p)?a:l,I=tb(y,c,p),E=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{p||(p=[]);const T=I-c,M=E-c;if(T!=M){for(let G=0;G<T;G++){const te=G<p.length?p[G]:p[G]=0,we=te+G;M<=we&&we<T&&(p[G]=te+1)}p[y.previousIndex]=M-T}}I!==E&&s(y,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!op(s))throw new _e(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)p=s[I],y=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,I),l=!0),a=a._next}else c=0,function ap(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Hc()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,I=>{y=this._trackByFn(c,I),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,I,y,c)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new Xm(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new eb),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Xm{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Br{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class eb{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Br,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tb(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class nb{constructor(){}supports(s){return s instanceof Map||$c(s)}create(){return new rb}}class rb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||$c(s)))throw new _e(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,y=c._next;return p&&(p._next=y),y&&(y._prev=p),c._next=null,c._prev=null,c}const l=new fT(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class fT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tf(){return new iu([new ia])}let iu=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||tf()),deps:[[i,new yt,new je]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new _e(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:tf}),i})();function Ap(){return new ty([new nb])}let ty=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ap()),deps:[[i,new yt,new je]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(l)return l;throw new _e(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Ap}),i})();const sb=GE(null,"core",[]);let ny=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Pn(Ym))},i.\u0275mod=st({type:i}),i.\u0275inj=Mt({}),i})();function mT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(at,De,P)=>{P.d(De,{Z:()=>_e});var h=P(2090),ee=P(4859),N=P(9681),oe=P(1877);class ie{constructor(ye,fe){this._delegate=ye,this.firebase=fe,(0,N._addComponent)(ye,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ye,fe=N._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ye);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ze=nt.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(ye,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(fe)}_addComponent(ye){(0,N._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,N._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Qe=function he(Qe){const ye={},fe={__esModule:!0,initializeApp:function Te(Be,U={}){const me=N.initializeApp(Be,U);if((0,h.r3)(ye,me.name))return ye[me.name];const Z=new Qe(me,fe);return ye[me.name]=Z,Z},app:nt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const U=Be.name,me=U.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(J=nt())=>{if("function"!=typeof J[me])throw le.create("invalid-app-argument",{appName:U});return J[me]()};void 0!==Be.serviceProps&&(0,h.ZB)(Z,Be.serviceProps),fe[me]=Z,Qe.prototype[me]=function(...J){return this._getService.bind(this,U).apply(this,Be.multipleInstances?J:[])}}return"PUBLIC"===Be.type?fe[me]:null},removeApp:function Ze(Be){delete ye[Be]},useAsService:function Ue(Be,U){return"serverAuth"===U?null:U},modularAPIs:N}};function nt(Be){if(!(0,h.r3)(ye,Be=Be||N._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Be});return ye[Be]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ye).map(Be=>ye[Be])}}),nt.App=Qe,fe}(ie);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(fe){(0,h.ZB)(Qe,fe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Qe}(),H=new oe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _e=B;!function Ae(Qe){(0,N.registerVersion)("@firebase/app-compat","0.1.33",Qe)}()},9681:(at,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ps,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Zt,_apps:()=>rn,_clearComponents:()=>oa,_components:()=>Mn,_getProvider:()=>Mt,_registerComponent:()=>Sr,_removeServiceInstance:()=>nn,deleteApp:()=>Do,getApp:()=>Gr,getApps:()=>gi,initializeApp:()=>Ri,onLog:()=>Zi,registerVersion:()=>zr,setLogLevel:()=>On});var h=P(5861),ee=P(4859),N=P(1877),oe=P(2090),ie=P(8766);class de{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function le(L){return"VERSION"===L.getComponent()?.type}(z)){const Ee=z.getImmediate();return`${Ee.library}/${Ee.version}`}return null}).filter(z=>z).join(" ")}}const he="@firebase/app",B=new N.Yd("@firebase/app"),Ft="[DEFAULT]",Ge={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,Mn=new Map;function Wt(L,$){try{L.container.addComponent($)}catch(z){B.debug(`Component ${$.name} failed to register with FirebaseApp ${L.name}`,z)}}function Zt(L,$){L.container.addOrOverwriteComponent($)}function Sr(L){const $=L.name;if(Mn.has($))return B.debug(`There were multiple attempts to register component ${$}.`),!1;Mn.set($,L);for(const z of rn.values())Wt(z,L);return!0}function Mt(L,$){const z=L.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),L.container.getProvider($)}function nn(L,$,z=Ft){Mt(L,$).clearInstance(z)}function oa(){Mn.clear()}const wr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor($,z,Ee){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Ee,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const ps="9.9.4";function Ri(L,$={}){"object"!=typeof $&&($={name:$});const z=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},$),Ee=z.name;if("string"!=typeof Ee||!Ee)throw wr.create("bad-app-name",{appName:String(Ee)});const Ve=rn.get(Ee);if(Ve){if((0,oe.vZ)(L,Ve.options)&&(0,oe.vZ)(z,Ve.config))return Ve;throw wr.create("duplicate-app",{appName:Ee})}const st=new ee.H0(Ee);for(const Yt of Mn.values())st.addComponent(Yt);const un=new $r(L,z,st);return rn.set(Ee,un),un}function Gr(L=Ft){const $=rn.get(L);if(!$)throw wr.create("no-app",{appName:L});return $}function gi(){return Array.from(rn.values())}function Do(L){return We.apply(this,arguments)}function We(){return(We=(0,h.Z)(function*(L){const $=L.name;rn.has($)&&(rn.delete($),yield Promise.all(L.container.getProviders().map(z=>z.delete())),L.isDeleted=!0)})).apply(this,arguments)}function zr(L,$,z){var Ee;let Ve=null!==(Ee=Ge[L])&&void 0!==Ee?Ee:L;z&&(Ve+=`-${z}`);const st=Ve.match(/\s|\//),un=$.match(/\s|\//);if(st||un){const Yt=[`Unable to register library "${Ve}" with version "${$}":`];return st&&Yt.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),st&&un&&Yt.push("and"),un&&Yt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void B.warn(Yt.join(" "))}Sr(new ee.wA(`${Ve}-version`,()=>({library:Ve,version:$}),"VERSION"))}function Zi(L,$){if(null!==L&&"function"!=typeof L)throw wr.create("invalid-log-argument");(0,N.Am)(L,$)}function On(L){(0,N.Ub)(L)}const Rn="firebase-heartbeat-store";let Wn=null;function cn(){return Wn||(Wn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Rn)}}).catch(L=>{throw wr.create("idb-open",{originalErrorMessage:L.message})})),Wn}function ot(){return(ot=(0,h.Z)(function*(L){var $;try{return(yield cn()).transaction(Rn).objectStore(Rn).get(or(L))}catch(z){if(z instanceof oe.ZR)B.warn(z.message);else{const Ee=wr.create("idb-get",{originalErrorMessage:null===($=z)||void 0===$?void 0:$.message});B.warn(Ee.message)}}})).apply(this,arguments)}function sn(L,$){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(L,$){var z;try{const Ve=(yield cn()).transaction(Rn,"readwrite");return yield Ve.objectStore(Rn).put($,or(L)),Ve.done}catch(Ee){if(Ee instanceof oe.ZR)B.warn(Ee.message);else{const Ve=wr.create("idb-set",{originalErrorMessage:null===(z=Ee)||void 0===z?void 0:z.message});B.warn(Ve.message)}}})).apply(this,arguments)}function or(L){return`${L.name}!${L.options.appId}`}class Ki{constructor($){this.container=$,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new qt(z),this._heartbeatsCachePromise=this._storage.read().then(Ee=>(this._heartbeatsCache=Ee,Ee))}triggerHeartbeat(){var $=this;return(0,h.Z)(function*(){const Ee=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Kt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!$._heartbeatsCache.heartbeats.some(st=>st.date===Ve))return $._heartbeatsCache.heartbeats.push({date:Ve,agent:Ee}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(st=>{const un=new Date(st.date).valueOf();return Date.now()-un<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,h.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const z=Kt(),{heartbeatsToSend:Ee,unsentEntries:Ve}=function yi(L,$=1024){const z=[];let Ee=L.slice();for(const Ve of L){const st=z.find(un=>un.agent===Ve.agent);if(st){if(st.dates.push(Ve.date),W(z)>$){st.dates.pop();break}}else if(z.push({agent:Ve.agent,dates:[Ve.date]}),W(z)>$){z.pop();break}Ee=Ee.slice(1)}return{heartbeatsToSend:z,unsentEntries:Ee}}($._heartbeatsCache.heartbeats),st=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ee}));return $._heartbeatsCache.lastSentHeartbeatDate=z,Ve.length>0?($._heartbeatsCache.heartbeats=Ve,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),st})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class qt{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,h.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function dt(L){return ot.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var z=this;return(0,h.Z)(function*(){var Ee;if(yield z._canUseIndexedDBPromise){const st=yield z.read();return sn(z.app,{lastSentHeartbeatDate:null!==(Ee=$.lastSentHeartbeatDate)&&void 0!==Ee?Ee:st.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var z=this;return(0,h.Z)(function*(){var Ee;if(yield z._canUseIndexedDBPromise){const st=yield z.read();return sn(z.app,{lastSentHeartbeatDate:null!==(Ee=$.lastSentHeartbeatDate)&&void 0!==Ee?Ee:st.lastSentHeartbeatDate,heartbeats:[...st.heartbeats,...$.heartbeats]})}})()}}function W(L){return(0,oe.L)(JSON.stringify({version:2,heartbeats:L})).length}!function j(L){Sr(new ee.wA("platform-logger",$=>new de($),"PRIVATE")),Sr(new ee.wA("heartbeat",$=>new Ki($),"PRIVATE")),zr(he,"0.7.32",L),zr(he,"0.7.32","esm2017"),zr("fire-js","")}("")},4859:(at,De,P)=>{P.d(De,{H0:()=>he,wA:()=>N});var h=P(5861),ee=P(2090);class N{constructor(B,H,Y){this.name=B,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class ie{constructor(B,H){this.name=B,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const H=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(H)){const Y=new ee.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:H});Le&&Y.resolve(Le)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(B){var H;const Y=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(H=B?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ae){if(Le)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(H);try{const Ae=this.getOrInitializeService({instanceIdentifier:Le});Y.resolve(Ae)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const H=Array.from(B.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:H={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Ae,_e]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ae)&&_e.resolve(Le);return Le}onInit(B,H){var Y;const Le=this.normalizeInstanceIdentifier(H),Ae=null!==(Y=this.onInitCallbacks.get(Le))&&void 0!==Y?Y:new Set;Ae.add(B),this.onInitCallbacks.set(Le,Ae);const _e=this.instances.get(Le);return _e&&B(_e,Le),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const Le of Y)try{Le(B,H)}catch{}}getOrInitializeService({instanceIdentifier:B,options:H={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===oe?void 0:pe),options:H}),this.instances.set(B,Y),this.instancesOptions.set(B,H),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch{}var pe;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const H=this.getProvider(B.name);if(H.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);H.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const H=new ie(B,this);return this.providers.set(B,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,P)=>{P.d(De,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>ee});const h=[];var ee=(()=>{return(B=ee||(ee={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ee;var B})();const N={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(B,H,...Y)=>{if(H<B.logLevel)return;const Le=(new Date).toISOString(),Ae=ie[H];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ae](`[${Le}]  ${B.name}:`,...Y)};class le{constructor(H){this.name=H,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function he(B){h.forEach(H=>{H.setLogLevel(B)})}function pe(B,H){for(const Y of h){let Le=null;H&&H.level&&(Le=N[H.level]),Y.userLogHandler=null===B?null:(Ae,_e,...Qe)=>{const ye=Qe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");_e>=(Le??Ae.logLevel)&&B({level:ee[_e].toLowerCase(),message:ye,args:Qe,type:Ae.name})}}}},8766:(at,De,P)=>{P.d(De,{Lj:()=>Te,X3:()=>nt});var h=P(5861);let N,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,H=new WeakMap;let Ae={get(U,me,Z){if(U instanceof IDBTransaction){if("done"===me)return he.get(U);if("objectStoreNames"===me)return U.objectStoreNames||pe.get(U);if("store"===me)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return fe(U[me])},set:(U,me,Z)=>(U[me]=Z,!0),has:(U,me)=>U instanceof IDBTransaction&&("done"===me||"store"===me)||me in U};function ye(U){return"function"==typeof U?function Qe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...me){return U.apply(Ze(this),me),fe(le.get(this))}:function(...me){return fe(U.apply(Ze(this),me))}:function(me,...Z){const J=U.call(Ze(this),me,...Z);return pe.set(J,me.sort?me.sort():[me]),fe(J)}}(U):(U instanceof IDBTransaction&&function Le(U){if(he.has(U))return;const me=new Promise((Z,J)=>{const se=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",ke),U.removeEventListener("abort",ke)},ne=()=>{Z(),se()},ke=()=>{J(U.error||new DOMException("AbortError","AbortError")),se()};U.addEventListener("complete",ne),U.addEventListener("error",ke),U.addEventListener("abort",ke)});he.set(U,me)}(U),((U,me)=>me.some(Z=>U instanceof Z))(U,function ie(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ae):U)}function fe(U){if(U instanceof IDBRequest)return function Y(U){const me=new Promise((Z,J)=>{const se=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",ke)},ne=()=>{Z(fe(U.result)),se()},ke=()=>{J(U.error),se()};U.addEventListener("success",ne),U.addEventListener("error",ke)});return me.then(Z=>{Z instanceof IDBCursor&&le.set(Z,U)}).catch(()=>{}),H.set(me,U),me}(U);if(B.has(U))return B.get(U);const me=ye(U);return me!==U&&(B.set(U,me),H.set(me,U)),me}const Ze=U=>H.get(U);function nt(U,me,{blocked:Z,upgrade:J,blocking:se,terminated:ne}={}){const ke=indexedDB.open(U,me),Re=fe(ke);return J&&ke.addEventListener("upgradeneeded",lt=>{J(fe(ke.result),lt.oldVersion,lt.newVersion,fe(ke.transaction))}),Z&&ke.addEventListener("blocked",()=>Z()),Re.then(lt=>{ne&&lt.addEventListener("close",()=>ne()),se&&lt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Re}function Te(U,{blocked:me}={}){const Z=indexedDB.deleteDatabase(U);return me&&Z.addEventListener("blocked",()=>me()),fe(Z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function Be(U,me){if(!(U instanceof IDBDatabase)||me in U||"string"!=typeof me)return;if(Ue.get(me))return Ue.get(me);const Z=me.replace(/FromIndex$/,""),J=me!==Z,se=Ie.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!se&&!ve.includes(Z))return;const ne=function(){var ke=(0,h.Z)(function*(Re,...lt){const Ht=this.transaction(Re,se?"readwrite":"readonly");let Ft=Ht.store;return J&&(Ft=Ft.index(lt.shift())),(yield Promise.all([Ft[Z](...lt),se&&Ht.done]))[0]});return function(lt){return ke.apply(this,arguments)}}();return Ue.set(me,ne),ne}!function _e(U){Ae=U(Ae)}(U=>({...U,get:(me,Z,J)=>Be(me,Z)||U.get(me,Z,J),has:(me,Z)=>!!Be(me,Z)||U.has(me,Z)}))},5861:(at,De,P)=>{function h(N,oe,ie,de,le,he,pe){try{var B=N[he](pe),H=B.value}catch(Y){return void ie(Y)}B.done?oe(H):Promise.resolve(H).then(de,le)}function ee(N){return function(){var oe=this,ie=arguments;return new Promise(function(de,le){var he=N.apply(oe,ie);function pe(H){h(he,de,le,pe,B,"next",H)}function B(H){h(he,de,le,pe,B,"throw",H)}pe(void 0)})}}P.d(De,{Z:()=>ee})}},at=>{at(at.s=7519)}]);